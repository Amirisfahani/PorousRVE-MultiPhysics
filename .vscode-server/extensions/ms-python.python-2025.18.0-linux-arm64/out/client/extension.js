/*! For license information please see extension.js.LICENSE.txt */
(()=>{var __webpack_modules__={90967:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionActivationManager=void 0;const o=n(25891),s=n(9019),a=n(54661),c=n(552),l=n(22408),u=n(86156),p=n(23167),d=n(61905),h=n(63999),f=n(11925);let v=class{constructor(e,t,n,r,i,o,s,a,c){this.activationServices=e,this.singleActivationServices=t,this.documentManager=n,this.autoSelection=r,this.appDiagnostics=i,this.workspaceService=o,this.fileSystem=s,this.activeResourceService=a,this.interpreterPathService=c,this.activatedWorkspaces=new Set,this.isInterpreterSetForWorkspacePromises=new Map,this.disposables=[]}filterServices(){this.workspaceService.isTrusted||(this.activationServices=this.activationServices.filter((e=>e.supportedWorkspaceTypes.untrustedWorkspace)),this.singleActivationServices=this.singleActivationServices.filter((e=>e.supportedWorkspaceTypes.untrustedWorkspace))),this.workspaceService.isVirtualWorkspace&&(this.activationServices=this.activationServices.filter((e=>e.supportedWorkspaceTypes.virtualWorkspace)),this.singleActivationServices=this.singleActivationServices.filter((e=>e.supportedWorkspaceTypes.virtualWorkspace)))}dispose(){for(;this.disposables.length>0;)this.disposables.shift().dispose();this.docOpenedHandler&&(this.docOpenedHandler.dispose(),this.docOpenedHandler=void 0)}async activate(e){this.filterServices(),await this.initialize(),await Promise.all([...this.singleActivationServices.map((e=>e.activate())),this.activateWorkspace(this.activeResourceService.getActiveResource(),e)])}async activateWorkspace(e,t){const n=this.workspaceService.getWorkspaceFolder(e);e=n?n.uri:void 0;const r=this.getWorkspaceKey(e);this.activatedWorkspaces.has(r)||(this.activatedWorkspaces.add(r),this.workspaceService.isTrusted&&(await this.autoSelection.autoSelectInterpreter(e),await this.interpreterPathService.copyOldInterpreterStorageValuesToNew(e)),await(0,h.sendActivationTelemetry)(this.fileSystem,this.workspaceService,e),await Promise.all(this.activationServices.map((n=>n.activate(e,t)))),await this.appDiagnostics.performPreStartupHealthCheck(e))}async initialize(){this.addHandlers(),this.addRemoveDocOpenedHandlers()}onDocOpened(e){var t;if(e.languageId!==c.PYTHON_LANGUAGE)return;const n=this.getWorkspaceKey(e.uri),r=((null===(t=this.workspaceService.workspaceFolders)||void 0===t?void 0:t.length)||0)>0;""===n&&r||this.activatedWorkspaces.has(n)||this.activateWorkspace(e.uri).ignoreErrors()}addHandlers(){this.disposables.push(this.workspaceService.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}addRemoveDocOpenedHandlers(){this.hasMultipleWorkspaces()?this.docOpenedHandler||(this.docOpenedHandler=this.documentManager.onDidOpenTextDocument(this.onDocOpened,this)):this.docOpenedHandler&&(this.docOpenedHandler.dispose(),this.docOpenedHandler=void 0)}onWorkspaceFoldersChanged(){const e=this.workspaceService.workspaceFolders.map((e=>this.getWorkspaceKey(e.uri))),t=Array.from(this.activatedWorkspaces.keys()).filter((t=>e.indexOf(t)<0));if(t.length>0)for(const e of t)this.activatedWorkspaces.delete(e);this.addRemoveDocOpenedHandlers()}hasMultipleWorkspaces(){var e;return((null===(e=this.workspaceService.workspaceFolders)||void 0===e?void 0:e.length)||0)>1}getWorkspaceKey(e){return this.workspaceService.getWorkspaceFolderIdentifier(e,"")}};t.ExtensionActivationManager=v,r([(0,d.traceDecoratorError)("Failed to activate a workspace")],v.prototype,"activateWorkspace",null),t.ExtensionActivationManager=v=r([(0,o.injectable)(),i(0,(0,o.multiInject)(f.IExtensionActivationService)),i(1,(0,o.multiInject)(f.IExtensionSingleActivationService)),i(2,(0,o.inject)(a.IDocumentManager)),i(3,(0,o.inject)(p.IInterpreterAutoSelectionService)),i(4,(0,o.inject)(s.IApplicationDiagnostics)),i(5,(0,o.inject)(a.IWorkspaceService)),i(6,(0,o.inject)(l.IFileSystem)),i(7,(0,o.inject)(a.IActiveResourceService)),i(8,(0,o.inject)(u.IInterpreterPathService))],v)},72076:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Commands=void 0,function(e){e.RestartLS="python.analysis.restartLanguageServer"}(n||(t.Commands=n={}))},81420:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerAnalysisOptionsWithEnv=t.LanguageServerAnalysisOptionsBase=void 0;const i=n(54980),o=n(99),s=n(552),a=n(68989),c=n(61905);class l{constructor(e,t){this.workspace=t,this.didChange=new i.EventEmitter,this.output=e.channel}async initialize(e,t){}get onDidChange(){return this.didChange.event}dispose(){this.didChange.dispose()}async getAnalysisOptions(){const e=this.getWorkspaceFolder();return{documentSelector:this.getDocumentFilters(e),workspaceFolder:e,synchronize:{configurationSection:this.getConfigSectionsToSynchronize()},outputChannel:this.output,revealOutputChannelOn:o.RevealOutputChannelOn.Never,initializationOptions:await this.getInitializationOptions()}}getWorkspaceFolder(){}getDocumentFilters(e){return this.workspace.isVirtualWorkspace?[{language:s.PYTHON_LANGUAGE}]:s.PYTHON}getConfigSectionsToSynchronize(){return[s.PYTHON_LANGUAGE]}async getInitializationOptions(){}}t.LanguageServerAnalysisOptionsBase=l,r([(0,c.traceDecoratorError)("Failed to get analysis options")],l.prototype,"getAnalysisOptions",null);class u extends l{constructor(e,t,n){super(t,n),this.envVarsProvider=e,this.disposables=[],this.envPythonPath=""}async initialize(e,t){const n=this.envVarsProvider.onDidEnvironmentVariablesChange(this.onEnvVarChange,this);this.disposables.push(n)}dispose(){super.dispose(),this.disposables.forEach((e=>e.dispose()))}async getEnvPythonPath(){const e=await this.envVarsProvider.getEnvironmentVariables();return this.envPythonPath=e.PYTHONPATH||"",this.envPythonPath}onEnvVarChange(){this.notifyifEnvPythonPathChanged().ignoreErrors()}async notifyifEnvPythonPathChanged(){const e=(await this.envVarsProvider.getEnvironmentVariables()).PYTHONPATH||"";this.envPythonPath!==e&&this.didChange.fire()}}t.LanguageServerAnalysisOptionsWithEnv=u,r([(0,a.debounceSync)(1e3)],u.prototype,"onEnvVarChange",null)},63508:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FileBasedCancellationStrategy=void 0;const s=n(76982),a=o(n(79896)),c=o(n(70857)),l=o(n(16928)),u=n(99);function p(e){return l.join(c.tmpdir(),"python-languageserver-cancellation",e)}function d(e,t){return l.join(p(e),`cancellation-${String(t)}.tmp`)}function h(e){try{e()}catch(e){}}class f{constructor(e){this.folderName=e;const t=p(e);h((()=>a.mkdirSync(t,{recursive:!0})))}async sendCancellation(e,t){const n=d(this.folderName,t);h((()=>a.writeFileSync(n,"",{flag:"w"})))}cleanup(e){h((()=>a.unlinkSync(d(this.folderName,e))))}dispose(){const e=p(this.folderName);function t(e){const n=a.lstatSync(e);if(n)if(n.isDirectory()&&!n.isSymbolicLink()){for(const n of a.readdirSync(e))t(l.join(e,n));a.rmdirSync(e)}else a.unlinkSync(e)}h((()=>t(e)))}}t.FileBasedCancellationStrategy=class{constructor(){const e=(0,s.randomBytes)(21).toString("hex");this._sender=new f(e)}get receiver(){return u.CancellationReceiverStrategy.Message}get sender(){return this._sender}getCommandLineArguments(){return[`--cancellationReceive=file:${this._sender.folderName}`]}dispose(){this._sender.dispose()}}},29408:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultLanguageServer=void 0;const i=n(25891),o=n(552),s=n(86156),a=n(11925);let c=class{constructor(e){this.defaultLSType=e}};c=r([(0,i.injectable)()],c),t.setDefaultLanguageServer=async function(e,t){const n=await async function(e){return e.getExtension(o.PYLANCE_EXTENSION_ID)?a.LanguageServerType.Node:a.LanguageServerType.Jedi}(e);t.addSingletonInstance(s.IDefaultLanguageServer,new c(n))}},52111:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerChangeHandler=t.promptForPylanceInstall=void 0;const r=n(54980),i=n(552),o=n(7855),s=n(14152),a=n(11925);async function c(e,t,n,o){const c=await e.showWarningMessage(s.Pylance.pylanceRevertToJediPrompt,s.Pylance.pylanceInstallPylance,s.Pylance.pylanceRevertToJedi,s.Pylance.remindMeLater);if(c===s.Pylance.pylanceInstallPylance)t.executeCommand("extension.open",i.PYLANCE_EXTENSION_ID);else if(c===s.Pylance.pylanceRevertToJedi){const e=n.getConfiguration("python").inspect("languageServer");let t;(null==e?void 0:e.workspaceValue)?t=r.ConfigurationTarget.Workspace:(null==e?void 0:e.globalValue)&&(t=r.ConfigurationTarget.Global),t&&await o.updateSetting("languageServer",a.LanguageServerType.Jedi,void 0,t)}}t.promptForPylanceInstall=c,t.LanguageServerChangeHandler=class{constructor(e,t,n,r,i,s){this.currentLsType=e,this.extensions=t,this.appShell=n,this.commands=r,this.workspace=i,this.configService=s,this.pylanceInstallCompletedDeferred=(0,o.createDeferred)(),this.disposables=[],this.pylanceInstalled=!1,this.pylanceInstalled=this.isPylanceInstalled(),this.disposables.push(t.onDidChange((async()=>{await this.extensionsChangeHandler()})))}dispose(){for(var e;this.disposables.length;)null===(e=this.disposables.pop())||void 0===e||e.dispose()}get pylanceInstallCompleted(){return this.pylanceInstallCompletedDeferred.promise}async handleLanguageServerChange(e){this.currentLsType!==e&&e!==a.LanguageServerType.Microsoft&&(e!==a.LanguageServerType.Node||this.isPylanceInstalled()||await c(this.appShell,this.commands,this.workspace,this.configService),this.currentLsType=e)}async extensionsChangeHandler(){const e=this.pylanceInstalled;this.pylanceInstalled=this.isPylanceInstalled(),e===this.pylanceInstalled&&this.pylanceInstallCompletedDeferred.resolve()}isPylanceInstalled(){return!!this.extensions.getExtension(i.PYLANCE_EXTENSION_ID)}}},8650:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LoadLanguageServerExtension=void 0;const o=n(25891),s=n(54661),a=n(86156);let c=class{constructor(e,t){this.commandManager=e,this.disposables=t,this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!0}}activate(){const e=this.commandManager.registerCommand("python._loadLanguageServerExtension",(()=>{}));return this.disposables.push(e),Promise.resolve()}};t.LoadLanguageServerExtension=c,t.LoadLanguageServerExtension=c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.ICommandManager)),i(1,(0,o.inject)(a.IDisposableRegistry))],c)},30704:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerOutputChannel=void 0;const o=n(25891),s=n(54661);n(87295);const a=n(86156),c=n(14152);let l=class{constructor(e,t,n){this.appShell=e,this.commandManager=t,this.disposable=n,this.registered=!1}get channel(){return this.output||(this.output=this.appShell.createOutputChannel(c.OutputChannelNames.languageServer),this.disposable.push(this.output),this.registerCommand().ignoreErrors()),this.output}async registerCommand(){this.registered||(this.registered=!0,await this.commandManager.executeCommand("setContext","python.hasLanguageServerOutputChannel",!0),this.disposable.push(this.commandManager.registerCommand("python.viewLanguageServerOutput",(()=>{var e;return null===(e=this.output)||void 0===e?void 0:e.show(!0)}))),this.disposable.push({dispose:()=>{this.registered=!1}}))}};t.LanguageServerOutputChannel=l,t.LanguageServerOutputChannel=l=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IApplicationShell)),i(1,(0,o.inject)(s.ICommandManager)),i(2,(0,o.inject)(a.IDisposableRegistry))],l)},17839:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionSurveyPrompt=t.extensionSurveyStateKeys=void 0;const c=n(25891),l=s(n(83480)),u=n(54980),p=n(54661),d=n(94496);n(87295);const h=n(22408),f=n(86156),v=n(14152),m=n(61905),g=n(51535),y=n(53322);var b;!function(e){e.doNotShowAgain="doNotShowExtensionSurveyAgain",e.disableSurveyForTime="doNotShowExtensionSurveyUntilTime"}(b||(t.extensionSurveyStateKeys=b={}));const _=72576e5;let E=class{constructor(e,t,n,r,i,o,s,a,c=10,l=108e5){this.appShell=e,this.browserService=t,this.persistentState=n,this.random=r,this.experiments=i,this.appEnvironment=o,this.platformService=s,this.workspace=a,this.sampleSizePerOneHundredUsers=c,this.waitTimeToShowSurvey=l,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0}}async activate(){await this.experiments.inExperiment(d.ShowExtensionSurveyPrompt.experiment)&&this.shouldShowBanner()&&setTimeout((()=>this.showSurvey().ignoreErrors()),this.waitTimeToShowSurvey)}shouldShowBanner(){if(u.env.uiKind===(null===u.UIKind||void 0===u.UIKind?void 0:u.UIKind.Web))return!1;let e=!0;const t=this.workspace.getConfiguration("telemetry");return t&&(e=t.get("feedback.enabled",!0)),!!e&&(!this.persistentState.createGlobalPersistentState(b.doNotShowAgain,!1).value&&(!this.persistentState.createGlobalPersistentState(b.disableSurveyForTime,!1,_).value&&!(this.random.getRandomInt(0,100)>=this.sampleSizePerOneHundredUsers)))}async showSurvey(){const e=[v.ExtensionSurveyBanner.bannerLabelYes,v.ExtensionSurveyBanner.maybeLater,v.Common.doNotShowAgain],t=await this.appShell.showInformationMessage(v.ExtensionSurveyBanner.bannerMessage,...e);(0,g.sendTelemetryEvent)(y.EventName.EXTENSION_SURVEY_PROMPT,void 0,{selection:t?["Yes","Maybe later","Don't show again"][e.indexOf(t)]:void 0}),t&&(t===v.ExtensionSurveyBanner.bannerLabelYes?(this.launchSurvey(),await this.persistentState.createGlobalPersistentState(b.disableSurveyForTime,!1,_).updateValue(!0)):t===v.Common.doNotShowAgain&&await this.persistentState.createGlobalPersistentState(b.doNotShowAgain,!1).updateValue(!0))}launchSurvey(){const e=`https://aka.ms/AA5rjx5?${l.stringify({o:encodeURIComponent(this.platformService.osType),v:encodeURIComponent(this.appEnvironment.vscodeVersion),e:encodeURIComponent(this.appEnvironment.packageJson.version),m:encodeURIComponent(this.appEnvironment.sessionId)})}`;this.browserService.launch(e)}};t.ExtensionSurveyPrompt=E,o([(0,m.traceDecoratorError)("Failed to check whether to display prompt for extension survey")],E.prototype,"shouldShowBanner",null),o([(0,m.traceDecoratorError)("Failed to display prompt for extension survey")],E.prototype,"showSurvey",null),t.ExtensionSurveyPrompt=E=o([(0,c.injectable)(),a(0,(0,c.inject)(p.IApplicationShell)),a(1,(0,c.inject)(f.IBrowserService)),a(2,(0,c.inject)(f.IPersistentStateFactory)),a(3,(0,c.inject)(f.IRandom)),a(4,(0,c.inject)(f.IExperimentService)),a(5,(0,c.inject)(p.IApplicationEnvironment)),a(6,(0,c.inject)(h.IPlatformService)),a(7,(0,c.inject)(p.IWorkspaceService))],E)},82275:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageServerAnalysisOptions=void 0;const s=o(n(16928)),a=n(81420);class c extends a.LanguageServerAnalysisOptionsWithEnv{constructor(e,t,n,r){super(e,t,r),this.configurationService=n,this.resource=void 0}async initialize(e,t){return this.resource=e,this.interpreter=t,super.initialize(e,t)}getWorkspaceFolder(){return this.workspace.getWorkspaceFolder(this.resource)}async getInitializationOptions(){var e,t;const n=this.configurationService.getSettings(this.resource),r=null===(e=this.getWorkspaceFolder())||void 0===e?void 0:e.uri.fsPath,i=n.autoComplete?n.autoComplete.extraPaths.map((e=>s.isAbsolute(e)?e:r?s.join(r,e):"")):[];return r&&i.unshift(r),{markupKindPreferred:"markdown",completion:{resolveEagerly:!1,disableSnippets:!0},diagnostics:{enable:!0,didOpen:!0,didSave:!0,didChange:!0},hover:{disable:{keyword:{all:!0}}},workspace:{extraPaths:i.filter((e=>e.length>0)).filter(((e,t,n)=>n.indexOf(e)===t)),environmentPath:null===(t=this.interpreter)||void 0===t?void 0:t.path,symbols:{maxSymbols:0}},semantic_tokens:{enable:!0}}}}t.JediLanguageServerAnalysisOptions=c},66486:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageClientFactory=void 0;const s=o(n(16928)),a=n(99),c=n(552);t.JediLanguageClientFactory=class{constructor(e){this.interpreterService=e}async createLanguageClient(e,t,n){const r=s.join(c.EXTENSION_ROOT_DIR,"python_files","run-jedi-language-server.py"),i=await this.interpreterService.getActiveInterpreter(e),o={command:i?i.path:"python",args:[r]};return new a.LanguageClient(c.PYTHON_LANGUAGE,"Python Jedi",o,n)}}},51002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageClientMiddleware=void 0;const r=n(69515),i=n(11925);class o extends r.LanguageClientMiddleware{constructor(e,t){super(e,i.LanguageServerType.Jedi,t)}}t.JediLanguageClientMiddleware=o},1096:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageServerProxy=void 0,n(87295);const i=n(51535),o=n(53322),s=n(47193),a=n(43761),c=n(61905);class l{constructor(e){this.factory=e,this.disposables=[]}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){this.stop().ignoreErrors()}async start(e,t,n){var r;this.lsVersion=null!==(r=n.middleware?n.middleware.serverVersion:void 0)&&void 0!==r?r:"0.19.3";try{const r=await this.factory.createLanguageClient(e,t,n);this.registerHandlers(r),await r.start(),this.languageClient=r}catch(e){throw(0,c.traceError)("Failed to start language server:",e),new Error("Launching Jedi language server using python failed, see output.")}}async stop(){for(var e;this.disposables.length>0;)this.disposables.shift().dispose();if(this.languageClient){const t=this.languageClient;this.languageClient=void 0;const n=null===(e=t._serverProcess)||void 0===e?void 0:e.pid,r=()=>{n&&(0,a.killPid)(n)};try{await t.stop(),await t.dispose(),r()}catch(e){(0,c.traceError)("Stopping language client failed",e),r()}}}loadExtension(){}registerHandlers(e){const t=new s.ProgressReporting(e);this.disposables.push(t)}}t.JediLanguageServerProxy=l,r([(0,c.traceDecoratorVerbose)("Disposing language server")],l.prototype,"dispose",null),r([(0,c.traceDecoratorError)("Failed to start language server"),(0,i.captureTelemetry)(o.EventName.JEDI_LANGUAGE_SERVER_ENABLED,void 0,!0,void 0,l.versionTelemetryProps)],l.prototype,"start",null),r([(0,c.traceDecoratorVerbose)("Stopping language server")],l.prototype,"stop",null),r([(0,i.captureTelemetry)(o.EventName.JEDI_LANGUAGE_SERVER_READY,void 0,!0,void 0,l.versionTelemetryProps)],l.prototype,"registerHandlers",null)},94796:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageServerManager=void 0;const a=s(n(21605)),c=s(n(16928));n(87295);const l=n(68989),u=n(84090),p=n(51535),d=n(53322),h=n(72076),f=n(51002),v=n(61905);class m{constructor(e,t,n,r){this.serviceContainer=e,this.analysisOptions=t,this.languageServerProxy=n,this.disposables=[],this.connected=!1,m.commandDispose&&m.commandDispose.dispose(),m.commandDispose=r.registerCommand(h.Commands.RestartLS,(()=>{this.restartLanguageServer().ignoreErrors()}))}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){this.stopLanguageServer().ignoreErrors(),m.commandDispose.dispose(),this.disposables.forEach((e=>e.dispose()))}async start(e,t){this.resource=e,this.interpreter=t,this.analysisOptions.onDidChange(this.restartLanguageServerDebounced,this,this.disposables);try{const e=await a.readFile(c.join(u.EXTENSION_ROOT_DIR,"python_files","jedilsp_requirements","requirements.txt"),"utf-8"),t=/jedi-language-server==([0-9\.]*)/.exec(e);t&&2===t.length&&([,this.lsVersion]=t)}catch(e){(0,v.traceVerbose)("Failed to get jedi-language-server version: ",e)}await this.analysisOptions.initialize(e,t),await this.startLanguageServer()}connect(){var e;this.connected||(this.connected=!0,null===(e=this.middleware)||void 0===e||e.connect())}disconnect(){var e;this.connected&&(this.connected=!1,null===(e=this.middleware)||void 0===e||e.disconnect())}restartLanguageServerDebounced(){this.restartLanguageServer().ignoreErrors()}async restartLanguageServer(){await this.stopLanguageServer(),await this.startLanguageServer()}async startLanguageServer(){const e=await this.analysisOptions.getAnalysisOptions();this.middleware=new f.JediLanguageClientMiddleware(this.serviceContainer,this.lsVersion),e.middleware=this.middleware,this.connected&&this.middleware.connect(),await this.languageServerProxy.start(this.resource,this.interpreter,e)}async stopLanguageServer(){this.languageServerProxy&&await this.languageServerProxy.stop()}}t.JediLanguageServerManager=m,o([(0,v.traceDecoratorError)("Failed to start language server")],m.prototype,"start",null),o([(0,l.debounceSync)(1e3)],m.prototype,"restartLanguageServerDebounced",null),o([(0,v.traceDecoratorError)("Failed to restart language server"),(0,v.traceDecoratorVerbose)("Restarting language server")],m.prototype,"restartLanguageServer",null),o([(0,p.captureTelemetry)(d.EventName.JEDI_LANGUAGE_SERVER_STARTUP,void 0,!0,void 0,m.versionTelemetryProps),(0,v.traceDecoratorVerbose)("Starting language server")],m.prototype,"startLanguageServer",null),o([(0,v.traceDecoratorVerbose)("Stopping language server")],m.prototype,"stopLanguageServer",null)},69515:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageClientMiddleware=void 0;const r=n(51535),i=n(82950);class o extends i.LanguageClientMiddlewareBase{constructor(e,t,n){super(e,t,r.sendTelemetryEvent,n)}}t.LanguageClientMiddleware=o},82950:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageClientMiddlewareBase=void 0;const s=o(n(16928)),a=n(54980),c=n(96353),l=n(552),u=n(7855),p=n(51080),d=n(53694),h=n(29413),f=n(53322),v=n(11925),m=3e5,g=6e4;t.LanguageClientMiddlewareBase=class{configurationHook(e,t){}get connected(){return this.connectedPromise.promise}constructor(e,t,n,r){this.serviceContainer=e,this.sendTelemetryEventFunc=n,this.serverVersion=r,this.lastCaptured=new Map,this.nextWindow=0,this.eventCount=0,this.workspace={configuration:async(e,t,n)=>{var r,i;if(!this.serviceContainer)return n(e,t);const o=this.serviceContainer.get(h.IInterpreterService),s=this.serviceContainer.get(d.IEnvironmentVariablesProvider);let l=n(e,t);if((0,u.isThenable)(l)&&(l=await l),l instanceof c.ResponseError)return l;for(const[t,n]of e.items.entries()){if("python"===n.section){const e=n.scopeUri?a.Uri.parse(n.scopeUri):void 0,c=l[t];c.pythonPath=null!==(i=null===(r=await o.getActiveInterpreter(e))||void 0===r?void 0:r.path)&&void 0!==i?i:"python";const u=(await s.getEnvironmentVariables(e)).PYTHONPATH;u&&(c._envPYTHONPATH=u)}this.configurationHook(n,l[t])}return l}},this.connectedPromise=(0,u.createDeferred)(),this.notebooks={didOpen:this.didOpenNotebook.bind(this),didSave:this.didSaveNotebook.bind(this),didChange:this.didChangeNotebook.bind(this),didClose:this.didCloseNotebook.bind(this)},this.handleDiagnostics=this.handleDiagnostics.bind(this),this.didOpen=this.didOpen.bind(this),this.didSave=this.didSave.bind(this),this.didChange=this.didChange.bind(this),this.didClose=this.didClose.bind(this),this.willSave=this.willSave.bind(this),this.willSaveWaitUntil=this.willSaveWaitUntil.bind(this),t===v.LanguageServerType.Node?this.eventName=f.EventName.LANGUAGE_SERVER_REQUEST:t===v.LanguageServerType.Jedi&&(this.eventName=f.EventName.JEDI_LANGUAGE_SERVER_REQUEST)}connect(){this.connectedPromise.resolve(!0)}disconnect(){this.connectedPromise=(0,u.createDeferred)(),this.connectedPromise.resolve(!1)}didChange(){return this.callNext("didChange",arguments)}didOpen(){return this.callNext("didOpen",arguments)}didClose(){return this.callNext("didClose",arguments)}didSave(){return this.callNext("didSave",arguments)}willSave(){return this.callNext("willSave",arguments)}willSaveWaitUntil(){return this.callNext("willSaveWaitUntil",arguments)}async didOpenNotebook(){return this.callNotebooksNext("didOpen",arguments)}async didSaveNotebook(){return this.callNotebooksNext("didSave",arguments)}async didChangeNotebook(){return this.callNotebooksNext("didChange",arguments)}async didCloseNotebook(){return this.callNotebooksNext("didClose",arguments)}async provideCompletionItem(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/completion",m,"provideCompletionItem",arguments,((e,t)=>t?{resultLength:Array.isArray(t)?t.length:t.items.length}:{resultLength:0}))}async provideHover(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/hover",m,"provideHover",arguments)}async handleDiagnostics(e,t,n){if(await this.connected){const t=e.fsPath,n=t?s.basename(t):void 0;if(!n||!n.startsWith(l.HiddenFilePrefix))return this.callNext("handleDiagnostics",arguments)}}async resolveCompletionItem(){if(await this.connected)return this.callNextAndSendTelemetry("completionItem/resolve",m,"resolveCompletionItem",arguments)}async provideSignatureHelp(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/signatureHelp",m,"provideSignatureHelp",arguments)}async provideDefinition(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/definition",g,"provideDefinition",arguments)}async provideReferences(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/references",g,"provideReferences",arguments)}async provideDocumentHighlights(){if(await this.connected)return this.callNext("provideDocumentHighlights",arguments)}async provideDocumentSymbols(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/documentSymbol",m,"provideDocumentSymbols",arguments)}async provideWorkspaceSymbols(){if(await this.connected)return this.callNextAndSendTelemetry("workspace/symbol",g,"provideWorkspaceSymbols",arguments)}async provideCodeActions(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/codeAction",m,"provideCodeActions",arguments)}async provideCodeLenses(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/codeLens",m,"provideCodeLenses",arguments)}async resolveCodeLens(){if(await this.connected)return this.callNextAndSendTelemetry("codeLens/resolve",m,"resolveCodeLens",arguments)}async provideDocumentFormattingEdits(){if(await this.connected)return this.callNext("provideDocumentFormattingEdits",arguments)}async provideDocumentRangeFormattingEdits(){if(await this.connected)return this.callNext("provideDocumentRangeFormattingEdits",arguments)}async provideOnTypeFormattingEdits(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/onTypeFormatting",m,"provideOnTypeFormattingEdits",arguments)}async provideRenameEdits(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/rename",g,"provideRenameEdits",arguments)}async prepareRename(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/prepareRename",g,"prepareRename",arguments)}async provideDocumentLinks(){if(await this.connected)return this.callNext("provideDocumentLinks",arguments)}async resolveDocumentLink(){if(await this.connected)return this.callNext("resolveDocumentLink",arguments)}async provideDeclaration(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/declaration",g,"provideDeclaration",arguments)}async provideTypeDefinition(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/typeDefinition",g,"provideTypeDefinition",arguments)}async provideImplementation(){if(await this.connected)return this.callNext("provideImplementation",arguments)}async provideDocumentColors(){if(await this.connected)return this.callNext("provideDocumentColors",arguments)}async provideColorPresentations(){if(await this.connected)return this.callNext("provideColorPresentations",arguments)}async provideFoldingRanges(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/foldingRange",m,"provideFoldingRanges",arguments)}async provideSelectionRanges(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/selectionRange",g,"provideSelectionRanges",arguments)}async prepareCallHierarchy(){if(await this.connected)return this.callNext("prepareCallHierarchy",arguments)}async provideCallHierarchyIncomingCalls(){if(await this.connected)return this.callNext("provideCallHierarchyIncomingCalls",arguments)}async provideCallHierarchyOutgoingCalls(){if(await this.connected)return this.callNext("provideCallHierarchyOutgoingCalls",arguments)}async provideDocumentSemanticTokens(){if(await this.connected)return this.callNext("provideDocumentSemanticTokens",arguments)}async provideDocumentSemanticTokensEdits(){if(await this.connected)return this.callNext("provideDocumentSemanticTokensEdits",arguments)}async provideDocumentRangeSemanticTokens(){if(await this.connected)return this.callNext("provideDocumentRangeSemanticTokens",arguments)}async provideLinkedEditingRange(){if(await this.connected)return this.callNext("provideLinkedEditingRange",arguments)}callNext(e,t){return this.notebookAddon&&this.notebookAddon[e]?this.notebookAddon[e](...t):t[t.length-1](...t)}callNotebooksNext(e,t){var n;return(null===(n=this.notebookAddon)||void 0===n?void 0:n.notebooks)&&this.notebookAddon.notebooks[e]?this.notebookAddon.notebooks[e](...t):t[t.length-1](...t)}callNextAndSendTelemetry(e,t,n,r,i){const o=Date.now(),s=new p.StopWatch;let a=!1;const c=[...r];c[c.length-1]=(...e)=>(a=!0,r[r.length-1](...e)),o>this.nextWindow&&(this.nextWindow=o+36e5,this.eventCount=0);const l=this.lastCaptured.get(e),d=n=>{if(this.eventName&&a&&this.eventCount<100&&(!l||o-l>t)){this.lastCaptured.set(e,o),this.eventCount+=1;const t=e.replace(/\//g,"."),r={lsVersion:this.serverVersion||"unknown",method:t};let a=s.elapsedTime;i&&(a={duration:a,...i(this,n)}),this.sendTelemetryEventFunc(this.eventName,a,r)}return n},h=this.callNext(n,c);return(0,u.isThenable)(h)?h.then(d):d(h)}}},44501:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerAnalysisOptions=void 0;const r=n(81420);class i extends r.LanguageServerAnalysisOptionsBase{constructor(e,t){super(e,t)}getConfigSectionsToSynchronize(){return[...super.getConfigSectionsToSynchronize(),"jupyter.runStartupCommands"]}async getInitializationOptions(){return{experimentationSupport:!0,trustedWorkspaceSupport:!0}}}t.NodeLanguageServerAnalysisOptions=i},55856:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageClientFactory=t.PYLANCE_NAME=void 0;const s=o(n(16928)),a=n(99),c=n(552);t.PYLANCE_NAME="Pylance",t.NodeLanguageClientFactory=class{constructor(e,t){this.fs=e,this.extensions=t}async createLanguageClient(e,n,r){var i;const o=(null===(i=r.connectionOptions)||void 0===i?void 0:i.cancellationStrategy).getCommandLineArguments(),l=this.extensions.getExtension(c.PYLANCE_EXTENSION_ID),u=l?l.extensionPath:"",p=s.join(u,"dist","server.bundle.js"),d=s.join(u,"dist","server.js"),h=await this.fs.fileExists(d)?d:p,f={run:{module:p,transport:a.TransportKind.ipc,args:o},debug:{module:h,transport:a.TransportKind.ipc,options:{execArgv:["--nolazy","--inspect=6600"]},args:o}};return new a.LanguageClient(c.PYTHON_LANGUAGE,t.PYLANCE_NAME,f,r)}}},4992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageClientMiddleware=void 0;const r=n(69515),i=n(11925);class o extends r.LanguageClientMiddleware{constructor(e,t){super(e,i.LanguageServerType.Node,t)}}t.NodeLanguageClientMiddleware=o},60690:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerProxy=void 0,n(87295);const i=n(99),o=n(51535),s=n(53322),a=n(63508),c=n(47193),l=n(61905),u=n(552);var p,d;!function(e){e.Method="python/inExperiment"}(p||(p={})),function(e){e.Method="python/getExperimentValue"}(d||(d={}));class h{constructor(e,t,n,r,i,o){this.factory=e,this.experimentService=t,this.interpreterPathService=n,this.environmentService=r,this.workspace=i,this.extensions=o,this.disposables=[]}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){this.stop().ignoreErrors()}async start(e,t,n){const r=await this.getPylanceExtension();this.lsVersion=(null==r?void 0:r.packageJSON.version)||"0";const i=null==r?void 0:r.exports;if(i&&i.client&&i.client.isEnabled())return this.pylanceApi=i,void await i.client.start();this.cancellationStrategy=new a.FileBasedCancellationStrategy,n.connectionOptions={cancellationStrategy:this.cancellationStrategy};const o=await this.factory.createLanguageClient(e,t,n);this.registerHandlers(o,e),this.disposables.push(this.workspace.onDidGrantWorkspaceTrust((()=>{o.sendNotification("python/workspaceTrusted",{isTrusted:!0})}))),await o.start(),this.languageClient=o}async stop(){if(this.pylanceApi){const e=this.pylanceApi;this.pylanceApi=void 0,await e.client.stop()}for(;this.disposables.length>0;)this.disposables.shift().dispose();if(this.languageClient){const e=this.languageClient;this.languageClient=void 0;try{await e.stop(),await e.dispose()}catch(e){(0,l.traceError)("Stopping language client failed",e)}}this.cancellationStrategy&&(this.cancellationStrategy.dispose(),this.cancellationStrategy=void 0)}loadExtension(){}registerHandlers(e,t){const n=new c.ProgressReporting(e);this.disposables.push(n),this.disposables.push(this.interpreterPathService.onDidChange((()=>{e.sendNotification(i.DidChangeConfigurationNotification.type,{settings:null})}))),this.disposables.push(this.environmentService.onDidEnvironmentVariablesChange((()=>{e.sendNotification(i.DidChangeConfigurationNotification.type,{settings:null})}))),e.onTelemetry((e=>{var t;const n=e.EventName||s.EventName.LANGUAGE_SERVER_TELEMETRY,r={...e.Properties,method:null===(t=e.Properties.method)||void 0===t?void 0:t.replace(/\//g,".")};(0,o.sendTelemetryEvent)(n,e.Measurements,r,e.Exception)})),e.onRequest(p.Method,(async e=>({inExperiment:await this.experimentService.inExperiment(e.experimentName)}))),e.onRequest(d.Method,(async e=>({value:await this.experimentService.getExperimentValue(e.experimentName)}))),this.disposables.push(e.onRequest("python/isTrustedWorkspace",(async()=>({isTrusted:this.workspace.isTrusted}))))}async getPylanceExtension(){const e=this.extensions.getExtension(u.PYLANCE_EXTENSION_ID);if(e)return e.isActive||await e.activate(),e}}t.NodeLanguageServerProxy=h,r([(0,l.traceDecoratorVerbose)("Disposing language server")],h.prototype,"dispose",null),r([(0,l.traceDecoratorError)("Failed to start language server"),(0,o.captureTelemetry)(s.EventName.LANGUAGE_SERVER_ENABLED,void 0,!0,void 0,h.versionTelemetryProps)],h.prototype,"start",null),r([(0,l.traceDecoratorVerbose)("Disposing language server")],h.prototype,"stop",null),r([(0,o.captureTelemetry)(s.EventName.LANGUAGE_SERVER_READY,void 0,!0,void 0,h.versionTelemetryProps)],h.prototype,"registerHandlers",null)},52462:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerManager=void 0,n(87295);const i=n(68989),o=n(51535),s=n(53322),a=n(72076),c=n(4992),l=n(61905),u=n(552);class p{constructor(e,t,n,r,i){this.serviceContainer=e,this.analysisOptions=t,this.languageServerProxy=n,this.extensions=i,this.disposables=[],this.connected=!1,this.started=!1,p.commandDispose&&p.commandDispose.dispose(),p.commandDispose=r.registerCommand(a.Commands.RestartLS,(()=>{(0,o.sendTelemetryEvent)(s.EventName.LANGUAGE_SERVER_RESTART,void 0,{reason:"command"}),this.restartLanguageServer().ignoreErrors()}))}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){this.stopLanguageServer().ignoreErrors(),p.commandDispose.dispose(),this.disposables.forEach((e=>e.dispose()))}async start(e,t){if(this.started)throw new Error("Language server already started");this.resource=e,this.interpreter=t,this.analysisOptions.onDidChange(this.restartLanguageServerDebounced,this,this.disposables);const n=this.extensions.getExtension(u.PYLANCE_EXTENSION_ID);this.lsVersion=(null==n?void 0:n.packageJSON.version)||"0",await this.analysisOptions.initialize(e,t),await this.startLanguageServer(),this.started=!0}connect(){var e;this.connected||(this.connected=!0,null===(e=this.middleware)||void 0===e||e.connect())}disconnect(){var e;this.connected&&(this.connected=!1,null===(e=this.middleware)||void 0===e||e.disconnect())}restartLanguageServerDebounced(){(0,o.sendTelemetryEvent)(s.EventName.LANGUAGE_SERVER_RESTART,void 0,{reason:"settings"}),this.restartLanguageServer().ignoreErrors()}async restartLanguageServer(){await this.stopLanguageServer(),await this.startLanguageServer()}async startLanguageServer(){const e=await this.analysisOptions.getAnalysisOptions();this.middleware=new c.NodeLanguageClientMiddleware(this.serviceContainer,this.lsVersion),e.middleware=this.middleware,this.connected&&this.middleware.connect(),await this.languageServerProxy.start(this.resource,this.interpreter,e)}async stopLanguageServer(){this.languageServerProxy&&await this.languageServerProxy.stop()}}t.NodeLanguageServerManager=p,r([(0,l.traceDecoratorError)("Failed to start language server")],p.prototype,"start",null),r([(0,i.debounceSync)(1e3)],p.prototype,"restartLanguageServerDebounced",null),r([(0,l.traceDecoratorError)("Failed to restart language server"),(0,l.traceDecoratorVerbose)("Restarting language server")],p.prototype,"restartLanguageServer",null),r([(0,o.captureTelemetry)(s.EventName.LANGUAGE_SERVER_STARTUP,void 0,!0,void 0,p.versionTelemetryProps),(0,l.traceDecoratorVerbose)("Starting language server")],p.prototype,"startLanguageServer",null),r([(0,l.traceDecoratorVerbose)("Stopping language server")],p.prototype,"stopLanguageServer",null)},3440:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PartialModeStatusItem=void 0;const o=n(25891),s=n(54661),a=n(86156),c=n(14152);let l=class{constructor(e,t){this.workspace=e,this.disposables=t,this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!0}}async activate(){const{isTrusted:e,isVirtualWorkspace:t}=this.workspace;if(e&&!t)return;const n=this.createStatusItem();n&&this.disposables.push(n)}createStatusItem(){const e=n(54980);if("createLanguageStatusItem"in e.languages){const t=e.languages.createLanguageStatusItem("python.projectStatus",{language:"python"});return t.name=c.LanguageService.statusItem.name,t.severity=e.LanguageStatusSeverity.Warning,t.text=c.LanguageService.statusItem.text,t.detail=this.workspace.isTrusted?c.LanguageService.virtualWorkspaceStatusItem.detail:c.LanguageService.statusItem.detail,t.command={title:c.Common.learnMore,command:"vscode.open",arguments:[e.Uri.parse("https://aka.ms/AAdzyh4")]},t}}};t.PartialModeStatusItem=l,t.PartialModeStatusItem=l=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IWorkspaceService)),i(1,(0,o.inject)(a.IDisposableRegistry))],l)},47193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressReporting=void 0;const r=n(54980),i=n(7855);t.ProgressReporting=class{constructor(e){this.languageClient=e,this.languageClient.onNotification("python/setStatusBarMessage",(e=>{this.statusBarMessage&&this.statusBarMessage.dispose(),this.statusBarMessage=r.window.setStatusBarMessage(e)})),this.languageClient.onNotification("python/beginProgress",(e=>{this.progressDeferred||this.beginProgress()})),this.languageClient.onNotification("python/reportProgress",(e=>{this.progress||this.beginProgress(),this.progress.report({message:e})})),this.languageClient.onNotification("python/endProgress",(e=>{this.progressDeferred&&(this.progressDeferred.resolve(),this.progressDeferred=void 0,this.progress=void 0)}))}dispose(){this.statusBarMessage&&this.statusBarMessage.dispose()}beginProgress(){this.progressDeferred=(0,i.createDeferred)(),r.window.withProgress({location:r.ProgressLocation.Window,title:""},(e=>(this.progress=e,this.progressDeferred.promise)))}}},4525:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.RequirementsTxtLinkActivator=t.generatePyPiLink=void 0;const i=n(25891),o=n(54980);function s(e){const t=e.match(/^([A-Z0-9]|[A-Z0-9][A-Z0-9._-]*)($|=| |;|\[)/i);return t?`https://pypi.org/project/${t[1]}/`:null}t.generatePyPiLink=s;let a=class{constructor(){this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!0}}async activate(){o.languages.registerHoverProvider([{pattern:"**/*requirement*.txt"},{pattern:"**/requirements/*.txt"}],{provideHover(e,t){const n=s(e.lineAt(t.line).text);return n?new o.Hover(n):null}})}};t.RequirementsTxtLinkActivator=a,t.RequirementsTxtLinkActivator=a=r([(0,i.injectable)()],a)},1048:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(90967),i=n(17839),o=n(30704),s=n(11925),a=n(8650),c=n(3440),l=n(14764),u=n(68597),p=n(4525);t.registerTypes=function(e){e.addSingleton(s.IExtensionActivationService,c.PartialModeStatusItem),e.add(s.IExtensionActivationManager,r.ExtensionActivationManager),e.addSingleton(s.ILanguageServerOutputChannel,o.LanguageServerOutputChannel),e.addSingleton(s.IExtensionSingleActivationService,i.ExtensionSurveyPrompt),e.addSingleton(s.IExtensionSingleActivationService,a.LoadLanguageServerExtension),e.addSingleton(l.ILanguageServerWatcher,u.LanguageServerWatcher),e.addBinding(l.ILanguageServerWatcher,s.IExtensionActivationService),e.addSingleton(s.IExtensionSingleActivationService,p.RequirementsTxtLinkActivator)}},11925:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IExtensionSingleActivationService=t.ILanguageServerOutputChannel=t.ILanguageServerProxy=t.ILanguageServerManager=t.ILanguageServerAnalysisOptions=t.ILanguageClientFactory=t.ILanguageServerActivator=t.LanguageServerType=t.IExtensionActivationService=t.IExtensionActivationManager=void 0,t.IExtensionActivationManager=Symbol("IExtensionActivationManager"),t.IExtensionActivationService=Symbol("IExtensionActivationService"),function(e){e.Jedi="Jedi",e.JediLSP="JediLSP",e.Microsoft="Microsoft",e.Node="Pylance",e.None="None"}(n||(t.LanguageServerType=n={})),t.ILanguageServerActivator=Symbol("ILanguageServerActivator"),t.ILanguageClientFactory=Symbol("ILanguageClientFactory"),t.ILanguageServerAnalysisOptions=Symbol("ILanguageServerAnalysisOptions"),t.ILanguageServerManager=Symbol("ILanguageServerManager"),t.ILanguageServerProxy=Symbol("ILanguageServerProxy"),t.ILanguageServerOutputChannel=Symbol("ILanguageServerOutputChannel"),t.IExtensionSingleActivationService=Symbol("IExtensionSingleActivationService")},34287:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildApi=void 0;const r=n(99),i=n(55856),o=n(11925),s=n(552),a=n(86156),c=n(62582),l=n(29413),u=n(93616),p=n(61905),d=n(65532),h=n(51535),f=n(5448),v=n(73354);t.buildApi=function(e,t,n,m){const g=n.get(a.IConfigurationService),y=n.get(l.IInterpreterService);t.addSingleton(u.JupyterExtensionIntegration,u.JupyterExtensionIntegration),t.addSingleton(u.JupyterExtensionPythonEnvironments,u.JupyterExtensionPythonEnvironments),t.addSingleton(f.TensorboardExtensionIntegration,f.TensorboardExtensionIntegration);const b=n.get(u.JupyterExtensionPythonEnvironments),_=(0,d.buildEnvironmentApi)(m,n,b),E=n.get(u.JupyterExtensionIntegration);E.registerEnvApi(_);const S=n.get(f.TensorboardExtensionIntegration),w=n.get(o.ILanguageServerOutputChannel),P={ready:e.catch((e=>((0,p.traceError)("Failure during activation.",e),Promise.reject(e)))),jupyter:{registerHooks:()=>E.integrateWithJupyterExtension()},tensorboard:{registerHooks:()=>S.integrateWithTensorboardExtension()},debug:{getRemoteLauncherCommand:async(e,t,n=!0)=>(0,c.getDebugpyLauncherArgs)({host:e,port:t,waitUntilDebuggerAttaches:n}),getDebuggerPackagePath:async()=>(0,v.getDebugpyPath)()},settings:{onDidChangeExecutionDetails:y.onDidChangeInterpreterConfiguration,getExecutionDetails(e){const{pythonPath:t}=g.getSettings(e);return{execCommand:""===t?void 0:[t]}}},pylance:{createClient:(...e)=>{var t;const n=e[1];return n.outputChannel=null!==(t=n.outputChannel)&&void 0!==t?t:w.channel,new r.LanguageClient(s.PYTHON_LANGUAGE,i.PYLANCE_NAME,e[0],n)},start:e=>e.start(),stop:e=>e.stop(),getTelemetryReporter:()=>(0,h.getTelemetryReporter)()},environments:_};return(0,s.isTestExecution)()&&(P.serviceContainer=n,P.serviceManager=t),P}},46225:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExtension=t.PVSC_EXTENSION_ID=void 0;const r=n(54980);var i;t.PVSC_EXTENSION_ID="ms-python.python",function(e){e.api=async function(){const e=r.extensions.getExtension(t.PVSC_EXTENSION_ID);if(void 0===e)throw new Error("Python extension is not installed or is disabled");return e.isActive||await e.activate(),e.exports}}(i||(t.PythonExtension=i={}))},54767:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationDiagnostics=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(552),l=n(9100),u=n(61905),p=n(79576);async function d(e,t){await Promise.all(e.map((async e=>{const n=await e.diagnose(t);n.length>0&&(function(e){e.forEach((e=>{const t=`Diagnostic Code: ${e.code}, Message: ${e.message}`;switch(e.severity){case s.DiagnosticSeverity.Error:case s.DiagnosticSeverity.Warning:(0,u.traceLog)(t);break;default:(0,u.traceVerbose)(t)}}))}(n),await e.handle(n))})))}let h=class{constructor(e){this.serviceContainer=e}register(){}async performPreStartupHealthCheck(e){if((0,c.isTestExecution)())return;let t=this.serviceContainer.getAll(p.IDiagnosticsService);this.serviceContainer.get(a.IWorkspaceService).isTrusted||(t=t.filter((e=>e.runInUntrustedWorkspace))),await d(t.filter((e=>!e.runInBackground)),e),d(t.filter((e=>e.runInBackground)),e).ignoreErrors()}};t.ApplicationDiagnostics=h,t.ApplicationDiagnostics=h=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IServiceContainer))],h)},36236:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDiagnosticsService=t.BaseDiagnostic=void 0;const s=n(25891),a=n(54661),c=n(83597),l=n(51535),u=n(53322),p=n(79576);let d=class{constructor(e,t,n,r,i,o=!0,s="default"){this.code=e,this.message=t,this.severity=n,this.scope=r,this.resource=i,this.shouldShowPrompt=o,this.invokeHandler=s}};t.BaseDiagnostic=d,t.BaseDiagnostic=d=i([(0,s.injectable)()],d);let h=r=class{constructor(e,t,n,r=!1,i=!1){this.supportedDiagnosticCodes=e,this.serviceContainer=t,this.disposableRegistry=n,this.runInBackground=r,this.runInUntrustedWorkspace=i,this.filterService=t.get(p.IDiagnosticFilterService),n.push(this)}dispose(){}async handle(e){if(0===e.length)return;const t=await(0,c.asyncFilter)(e,(async e=>{if(!await this.canHandle(e))return!1;if(e.invokeHandler&&"always"===e.invokeHandler)return!0;const t=this.getDiagnosticsKey(e);return-1===r.handledDiagnosticCodeKeys.indexOf(t)&&(r.handledDiagnosticCodeKeys.push(t),!0)}));await this.onHandle(t)}async canHandle(e){return(0,l.sendTelemetryEvent)(u.EventName.DIAGNOSTICS_MESSAGE,void 0,{code:e.code}),this.supportedDiagnosticCodes.filter((t=>t===e.code)).length>0}getDiagnosticsKey(e){if(e.scope===p.DiagnosticScope.Global)return e.code;const t=this.serviceContainer.get(a.IWorkspaceService),n=e.resource?t.getWorkspaceFolder(e.resource):void 0;return`${e.code}dbe75733-0407-4124-a1b2-ca769dc30523${n?n.uri.fsPath:""}`}};t.BaseDiagnosticsService=h,h.handledDiagnosticCodeKeys=[],t.BaseDiagnosticsService=h=r=i([(0,s.injectable)(),o(0,(0,s.unmanaged)()),o(1,(0,s.unmanaged)()),o(2,(0,s.unmanaged)()),o(3,(0,s.unmanaged)()),o(4,(0,s.unmanaged)())],h)},59411:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentPathVariableDiagnosticsService=t.EnvironmentPathVariableDiagnosticsServiceId=void 0;const o=n(25891),s=n(54980),a=n(54661);n(87295);const c=n(22408),l=n(86156),u=n(14152),p=n(9100),d=n(36236),h=n(97033),f=n(10284),v=n(77295),m=n(79576);class g extends d.BaseDiagnostic{constructor(e,t){super(f.DiagnosticCodes.InvalidEnvironmentPathVariableDiagnostic,e,s.DiagnosticSeverity.Warning,m.DiagnosticScope.Global,t)}}t.EnvironmentPathVariableDiagnosticsServiceId="EnvironmentPathVariableDiagnosticsServiceId";let y=class extends d.BaseDiagnosticsService{constructor(e,t){super([f.DiagnosticCodes.InvalidEnvironmentPathVariableDiagnostic],e,t,!0,!0),this.platform=this.serviceContainer.get(c.IPlatformService),this.messageService=e.get(m.IDiagnosticHandlerService,v.DiagnosticCommandPromptHandlerServiceId)}async diagnose(e){if(this.platform.isWindows&&this.doesPathVariableHaveInvalidEntries()){const t=this.serviceContainer.get(a.IApplicationEnvironment),n="The environment variable '{0}' seems to have some paths containing the '\"' character. The existence of such a character is known to have caused the {1} extension to not load. If the extension fails to load please modify your paths to remove this '\"' character.".format(this.platform.pathVariableName,t.extensionName);return[new g(n,e)]}return[]}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(h.IDiagnosticsCommandFactory),r=[{prompt:u.Common.ignore},{prompt:u.Common.alwaysIgnore,command:n.createCommand(t,{type:"ignore",options:m.DiagnosticScope.Global})},{prompt:u.Common.moreInfo,command:n.createCommand(t,{type:"launch",options:"https://aka.ms/Niq35h"})}];await this.messageService.handle(t,{commandPrompts:r})}doesPathVariableHaveInvalidEntries(){const e=this.serviceContainer.get(l.ICurrentProcess).env[this.platform.pathVariableName],t=this.serviceContainer.get(l.IPathUtils).delimiter;return(e||"").split(t).filter((e=>e.indexOf('"')>=0)).length>0}};t.EnvironmentPathVariableDiagnosticsService=y,t.EnvironmentPathVariableDiagnosticsService=y=r([(0,o.injectable)(),i(0,(0,o.inject)(p.IServiceContainer)),i(1,(0,o.inject)(l.IDisposableRegistry))],y)},98285:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidPythonPathInDebuggerService=t.InvalidPythonPathInDebuggerServiceId=void 0;const c=n(25891),l=s(n(16928)),u=n(54980),p=n(54661);n(87295);const d=n(86156),h=n(14152),f=n(79985),v=n(46108),m=n(29413),g=n(9100),y=n(61905),b=n(36236),_=n(97033),E=n(10284),S=n(77295),w=n(79576),P={[E.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic]:h.Diagnostics.invalidPythonPathInDebuggerSettings,[E.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic]:h.Diagnostics.invalidPythonPathInDebuggerLaunch};class T extends b.BaseDiagnostic{constructor(e,t){super(e,P[e],u.DiagnosticSeverity.Error,w.DiagnosticScope.WorkspaceFolder,t,void 0,"always")}}t.InvalidPythonPathInDebuggerServiceId="InvalidPythonPathInDebuggerServiceId";let C=class extends b.BaseDiagnosticsService{constructor(e,t,n,r,i,o,s,a){super([E.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic,E.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic],e,s,!0),this.workspace=t,this.commandFactory=n,this.interpreterHelper=r,this.documentManager=i,this.configService=o,this.messageService=a}async diagnose(){return[]}async validatePythonPath(e,t,n){return"${command:python.interpreterPath}"!==(e=e?this.resolveVariables(e,n):void 0)&&e||(e=this.configService.getSettings(n).pythonPath),!!await this.interpreterHelper.getInterpreterInformation(e).catch((()=>{}))||((0,y.traceError)(`Invalid Python Path '${e}'`),t===v.PythonPathSource.launchJson?this.handle([new T(E.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic,n)]).catch((e=>(0,y.traceError)("Failed to handle invalid python path in launch.json debugger",e))).ignoreErrors():this.handle([new T(E.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic,n)]).catch((e=>(0,y.traceError)("Failed to handle invalid python path in settings.json debugger",e))).ignoreErrors(),!1)}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0],n=this.getCommandPrompts(t);await this.messageService.handle(t,{commandPrompts:n})}resolveVariables(e,t){return new f.SystemVariables(t,void 0,this.workspace).resolveAny(e)}getCommandPrompts(e){switch(e.code){case E.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic:return[{prompt:h.Common.selectPythonInterpreter,command:this.commandFactory.createCommand(e,{type:"executeVSCCommand",options:"python.setInterpreter"})}];case E.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic:return[{prompt:h.Common.openLaunch,command:{diagnostic:e,invoke:async()=>{const e=(t=u.workspace.workspaceFolders[0],l.join(t.uri.fsPath,".vscode","launch.json"));var t;const n=await this.documentManager.openTextDocument(e);await this.documentManager.showTextDocument(n)}}}];default:throw new Error("Invalid diagnostic for 'InvalidPythonPathInDebuggerService'")}}};t.InvalidPythonPathInDebuggerService=C,t.InvalidPythonPathInDebuggerService=C=o([(0,c.injectable)(),a(0,(0,c.inject)(g.IServiceContainer)),a(1,(0,c.inject)(p.IWorkspaceService)),a(2,(0,c.inject)(_.IDiagnosticsCommandFactory)),a(3,(0,c.inject)(m.IInterpreterHelper)),a(4,(0,c.inject)(p.IDocumentManager)),a(5,(0,c.inject)(d.IConfigurationService)),a(6,(0,c.inject)(d.IDisposableRegistry)),a(7,(0,c.inject)(w.IDiagnosticHandlerService)),a(7,(0,c.named)(S.DiagnosticCommandPromptHandlerServiceId))],C)},20785:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JediPython27NotSupportedDiagnosticService=t.JediPython27NotSupportedDiagnosticServiceId=t.JediPython27NotSupportedDiagnostic=void 0;const o=n(25891),s=n(54980),a=n(11925),c=n(54661),l=n(86156),u=n(14152),p=n(29413),d=n(9100),h=n(36236),f=n(97033),v=n(10284),m=n(77295),g=n(79576);class y extends h.BaseDiagnostic{constructor(e,t){super(v.DiagnosticCodes.JediPython27NotSupportedDiagnostic,e,s.DiagnosticSeverity.Warning,g.DiagnosticScope.Global,t)}}t.JediPython27NotSupportedDiagnostic=y,t.JediPython27NotSupportedDiagnosticServiceId="JediPython27NotSupportedDiagnosticServiceId";let b=class extends h.BaseDiagnosticsService{constructor(e,t,n,r,i,o){super([v.DiagnosticCodes.JediPython27NotSupportedDiagnostic],e,o,!0),this.interpreterService=t,this.workspaceService=n,this.configurationService=r,this.messageService=i}async diagnose(e){var t,n;const r=await this.interpreterService.getActiveInterpreter(e),{languageServer:i}=this.configurationService.getSettings(e);return await this.updateLanguageServerSetting(e),r&&(null!==(n=null===(t=r.version)||void 0===t?void 0:t.major)&&void 0!==n?n:0)<3&&i===a.LanguageServerType.Jedi?[new y(u.Python27Support.jediMessage,e)]:[]}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(f.IDiagnosticsCommandFactory),r=[{prompt:u.Common.gotIt},{prompt:u.Common.doNotShowAgain,command:n.createCommand(t,{type:"ignore",options:g.DiagnosticScope.Global})}];await this.messageService.handle(t,{commandPrompts:r})}async updateLanguageServerSetting(e){const t=this.workspaceService.getConfiguration("python",e).inspect("languageServer");let n;if((null==t?void 0:t.workspaceValue)===a.LanguageServerType.JediLSP)n=s.ConfigurationTarget.Workspace;else{if((null==t?void 0:t.globalValue)!==a.LanguageServerType.JediLSP)return;n=s.ConfigurationTarget.Global}await this.configurationService.updateSetting("languageServer",a.LanguageServerType.Jedi,e,n)}};t.JediPython27NotSupportedDiagnosticService=b,t.JediPython27NotSupportedDiagnosticService=b=r([i(0,(0,o.inject)(d.IServiceContainer)),i(1,(0,o.inject)(p.IInterpreterService)),i(2,(0,o.inject)(c.IWorkspaceService)),i(3,(0,o.inject)(l.IConfigurationService)),i(4,(0,o.inject)(g.IDiagnosticHandlerService)),i(4,(0,o.named)(m.DiagnosticCommandPromptHandlerServiceId)),i(5,(0,o.inject)(l.IDisposableRegistry))],b)},71346:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidMacPythonInterpreterService=t.InvalidMacPythonInterpreterServiceId=t.InvalidMacPythonInterpreterDiagnostic=void 0;const o=n(25891),s=n(54980);n(87295);const a=n(22408),c=n(86156),l=n(29413),u=n(9100),p=n(36236),d=n(97033),h=n(10284),f=n(77295),v=n(79576),m=n(14152),g={[h.DiagnosticCodes.MacInterpreterSelected]:s.l10n.t("The selected macOS system install of Python is not recommended, some functionality in the extension will be limited. [Install another version of Python](https://www.python.org/downloads) or select a different interpreter for the best experience. [Learn more](https://aka.ms/AA7jfor).")};class y extends p.BaseDiagnostic{constructor(e,t){super(e,g[e],s.DiagnosticSeverity.Error,v.DiagnosticScope.WorkspaceFolder,t)}}t.InvalidMacPythonInterpreterDiagnostic=y,t.InvalidMacPythonInterpreterServiceId="InvalidMacPythonInterpreterServiceId";let b=class extends p.BaseDiagnosticsService{constructor(e,t,n,r){super([h.DiagnosticCodes.MacInterpreterSelected],e,t,!0),this.platform=n,this.helper=r,this.changeThrottleTimeout=1e3,this.addPythonPathChangedHandler()}dispose(){this.timeOut&&"number"!=typeof this.timeOut&&(clearTimeout(this.timeOut),this.timeOut=void 0)}async diagnose(e){if(!this.platform.isMac)return[];const t=this.serviceContainer.get(c.IConfigurationService).getSettings(e);return await this.helper.isMacDefaultPythonPath(t.pythonPath)?[new y(h.DiagnosticCodes.MacInterpreterSelected,e)]:[]}async onHandle(e){if(0===e.length)return;const t=this.serviceContainer.get(v.IDiagnosticHandlerService,f.DiagnosticCommandPromptHandlerServiceId);await Promise.all(e.map((async e=>{const n=await this.canHandle(e),r=await this.filterService.shouldIgnoreDiagnostic(e.code);if(!n||r)return;const i=this.getCommandPrompts(e);await t.handle(e,{commandPrompts:i,message:e.message})})))}addPythonPathChangedHandler(){const e=this.serviceContainer.get(c.IDisposableRegistry),t=this.serviceContainer.get(c.IInterpreterPathService);e.push(t.onDidChange((e=>this.onDidChangeConfiguration(e))))}async onDidChangeConfiguration(e){const t=e.uri;this.timeOut&&"number"!=typeof this.timeOut&&(clearTimeout(this.timeOut),this.timeOut=void 0),this.timeOut=setTimeout((()=>{this.timeOut=void 0,this.diagnose(t).then((e=>this.handle(e))).ignoreErrors()}),this.changeThrottleTimeout)}getCommandPrompts(e){const t=this.serviceContainer.get(d.IDiagnosticsCommandFactory);if(e.code===h.DiagnosticCodes.MacInterpreterSelected)return[{prompt:m.Common.selectPythonInterpreter,command:t.createCommand(e,{type:"executeVSCCommand",options:"python.setInterpreter"})},{prompt:m.Common.doNotShowAgain,command:t.createCommand(e,{type:"ignore",options:v.DiagnosticScope.Global})}];throw new Error("Invalid diagnostic for 'InvalidMacPythonInterpreterService'")}};t.InvalidMacPythonInterpreterService=b,t.InvalidMacPythonInterpreterService=b=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IServiceContainer)),i(1,(0,o.inject)(c.IDisposableRegistry)),i(2,(0,o.inject)(a.IPlatformService)),i(3,(0,o.inject)(l.IInterpreterHelper))],b)},34470:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PowerShellActivationHackDiagnosticsService=t.PowerShellActivationHackDiagnosticsServiceId=t.PowershellActivationNotAvailableDiagnostic=void 0;const o=n(25891),s=n(54980);n(87295);const a=n(32077),c=n(86156),l=n(14152),u=n(9100),p=n(61905),d=n(51535),h=n(53322),f=n(36236),v=n(97033),m=n(10284),g=n(77295),y=n(79576),b=s.l10n.t("Activation of the selected Python environment is not supported in PowerShell. Consider changing your shell to Command Prompt.");class _ extends f.BaseDiagnostic{constructor(e){super(m.DiagnosticCodes.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic,b,s.DiagnosticSeverity.Warning,y.DiagnosticScope.Global,e,void 0,"always")}}t.PowershellActivationNotAvailableDiagnostic=_,t.PowerShellActivationHackDiagnosticsServiceId="EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic";let E=class extends f.BaseDiagnosticsService{constructor(e,t){super([m.DiagnosticCodes.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic],e,t,!0),this.messageService=e.get(y.IDiagnosticHandlerService,g.DiagnosticCommandPromptHandlerServiceId)}async diagnose(){return[]}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(v.IDiagnosticsCommandFactory),r=this.serviceContainer.get(c.ICurrentProcess),i=this.serviceContainer.get(c.IConfigurationService),o=[{prompt:l.Common.useCommandPrompt,command:{diagnostic:t,invoke:async()=>{(0,d.sendTelemetryEvent)(h.EventName.DIAGNOSTICS_ACTION,void 0,{action:"switchToCommandPrompt"}),(0,a.useCommandPromptAsDefaultShell)(r,i).catch((e=>(0,p.traceError)("Use Command Prompt as default shell",e)))}}},{prompt:l.Common.ignore},{prompt:l.Common.alwaysIgnore,command:n.createCommand(t,{type:"ignore",options:y.DiagnosticScope.Global})},{prompt:l.Common.moreInfo,command:n.createCommand(t,{type:"launch",options:"https://aka.ms/CondaPwsh"})}];await this.messageService.handle(t,{commandPrompts:o})}};t.PowerShellActivationHackDiagnosticsService=E,t.PowerShellActivationHackDiagnosticsService=E=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IServiceContainer)),i(1,(0,o.inject)(c.IDisposableRegistry))],E)},46592:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PylanceDefaultDiagnosticService=t.PylanceDefaultDiagnosticServiceId=t.PylanceDefaultDiagnostic=t.PYLANCE_PROMPT_MEMENTO=void 0;const o=n(25891),s=n(54980),a=n(86156),c=n(14152),l=n(9100),u=n(36236),p=n(10284),d=n(77295),h=n(79576);t.PYLANCE_PROMPT_MEMENTO="pylanceDefaultPromptMemento";class f extends u.BaseDiagnostic{constructor(e,t){super(p.DiagnosticCodes.PylanceDefaultDiagnostic,e,s.DiagnosticSeverity.Information,h.DiagnosticScope.Global,t)}}t.PylanceDefaultDiagnostic=f,t.PylanceDefaultDiagnosticServiceId="PylanceDefaultDiagnosticServiceId";let v=class extends u.BaseDiagnosticsService{constructor(e,t,n,r){super([p.DiagnosticCodes.PylanceDefaultDiagnostic],e,r,!0,!0),this.context=t,this.messageService=n,this.initialMementoValue=void 0,this.initialMementoValue=this.context.globalState.get("extensionVersion")}async diagnose(e){return await this.shouldShowPrompt()?[new f(c.Diagnostics.pylanceDefaultMessage,e)]:[]}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=[{prompt:c.Common.ok}];await this.messageService.handle(t,{commandPrompts:n,onClose:this.updateMemento.bind(this)})}async updateMemento(){await this.context.globalState.update(t.PYLANCE_PROMPT_MEMENTO,!0)}async shouldShowPrompt(){const e=this.initialMementoValue,n=this.context.globalState.get(t.PYLANCE_PROMPT_MEMENTO);return void 0===e?(await this.updateMemento(),!1):void 0===n}};t.PylanceDefaultDiagnosticService=v,t.PylanceDefaultDiagnosticService=v=r([i(0,(0,o.inject)(l.IServiceContainer)),i(1,(0,o.inject)(a.IExtensionContext)),i(2,(0,o.inject)(h.IDiagnosticHandlerService)),i(2,(0,o.named)(d.DiagnosticCommandPromptHandlerServiceId)),i(3,(0,o.inject)(a.IDisposableRegistry))],v)},43923:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidPythonInterpreterService=t.InvalidPythonInterpreterServiceId=t.DefaultShellDiagnostic=t.InvalidPythonInterpreterDiagnostic=void 0;const c=n(25891),l=n(54980);n(87295);const u=s(n(16928)),p=n(86156),d=n(29413),h=n(9100),f=n(36236),v=n(97033),m=n(10284),g=n(77295),y=n(79576),b=n(14152),_=n(552),E=n(54661),S=n(51535),w=n(53322),P=n(68989),T=n(98803),C=n(48112),x=n(22408),I=n(61905),O=n(13931),R=n(62982),D=n(35026),k=n(25943),A={[m.DiagnosticCodes.NoPythonInterpretersDiagnostic]:l.l10n.t("No Python interpreter is selected. Please select a Python interpreter to enable features such as IntelliSense, linting, and debugging."),[m.DiagnosticCodes.InvalidPythonInterpreterDiagnostic]:l.l10n.t("An Invalid Python interpreter is selected{0}, please try changing it to enable features such as IntelliSense, linting, and debugging. See output for more details regarding why the interpreter is invalid."),[m.DiagnosticCodes.InvalidComspecDiagnostic]:l.l10n.t('We detected an issue with one of your environment variables that breaks features such as IntelliSense, linting and debugging. Try setting the "ComSpec" variable to a valid Command Prompt path in your system to fix it.'),[m.DiagnosticCodes.IncompletePathVarDiagnostic]:l.l10n.t('We detected an issue with "Path" environment variable that breaks features such as IntelliSense, linting and debugging. Please edit it to make sure it contains the "System32" subdirectories.'),[m.DiagnosticCodes.DefaultShellErrorDiagnostic]:l.l10n.t('We detected an issue with your default shell that breaks features such as IntelliSense, linting and debugging. Try resetting "ComSpec" and "Path" environment variables to fix it.')};class N extends f.BaseDiagnostic{constructor(e,t,n,r=y.DiagnosticScope.WorkspaceFolder){var i;let o="";if(n.workspaceFile&&n.workspaceFolders&&(null===(i=n.workspaceFolders)||void 0===i?void 0:i.length)>1){const e=n.getWorkspaceFolder(t);e&&(o=` ${l.l10n.t("for workspace")} ${u.basename(e.uri.fsPath)}`)}super(e,A[e].format(o),l.DiagnosticSeverity.Error,r,t,void 0,"always")}}t.InvalidPythonInterpreterDiagnostic=N;class j extends f.BaseDiagnostic{constructor(e,t,n=y.DiagnosticScope.Global){super(e,A[e],l.DiagnosticSeverity.Error,n,t,void 0,"always")}}t.DefaultShellDiagnostic=j,t.InvalidPythonInterpreterServiceId="InvalidPythonInterpreterServiceId";let M=class extends f.BaseDiagnosticsService{constructor(e,t){super([m.DiagnosticCodes.NoPythonInterpretersDiagnostic,m.DiagnosticCodes.InvalidPythonInterpreterDiagnostic,m.DiagnosticCodes.InvalidComspecDiagnostic,m.DiagnosticCodes.IncompletePathVarDiagnostic,m.DiagnosticCodes.DefaultShellErrorDiagnostic],e,t,!1),this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0}}async activate(){const e=this.serviceContainer.get(E.ICommandManager);this.disposableRegistry.push(e.registerCommand(_.Commands.TriggerEnvironmentSelection,(e=>this.triggerEnvSelectionIfNecessary(e))));const t=this.serviceContainer.get(d.IInterpreterService);this.disposableRegistry.push(t.onDidChangeInterpreterConfiguration((t=>e.executeCommand(_.Commands.TriggerEnvironmentSelection,t).then(T.noop,T.noop))))}async diagnose(e){return this.diagnoseDefaultShell(e)}async _manualDiagnose(e){const t=this.serviceContainer.get(E.IWorkspaceService),n=this.serviceContainer.get(d.IInterpreterService),r=await this.diagnoseDefaultShell(e);if(r.length>0)return r;const i=await n.hasInterpreters(),o="python"===this.serviceContainer.get(p.IInterpreterPathService).get(e);return!i&&o?[new N(m.DiagnosticCodes.NoPythonInterpretersDiagnostic,e,t,y.DiagnosticScope.Global)]:await n.getActiveInterpreter(e)?[]:[new N(m.DiagnosticCodes.InvalidPythonInterpreterDiagnostic,e,t)]}async triggerEnvSelectionIfNecessary(e){const t=await this._manualDiagnose(e);return!t.length||(this.handle(t).ignoreErrors(),!1)}async diagnoseDefaultShell(e){if((0,C.getOSType)()!==C.OSType.Windows)return[];const t=this.serviceContainer.get(d.IInterpreterService);if(await t.getActiveInterpreter(e))return[];try{await this.shellExecPython()}catch(t){if(-4058===t.errno)return(0,I.traceError)("ComSpec is likely set to an invalid value",(0,C.getEnvironmentVariable)("ComSpec")),await this.isComspecInvalid()?[new j(m.DiagnosticCodes.InvalidComspecDiagnostic,e)]:this.isPathVarIncomplete()?((0,I.traceError)("PATH env var appears to be incomplete",process.env.Path,process.env.PATH),[new j(m.DiagnosticCodes.IncompletePathVarDiagnostic,e)]):[new j(m.DiagnosticCodes.DefaultShellErrorDiagnostic,e)]}return[]}async isComspecInvalid(){var e;const t=null!==(e=(0,C.getEnvironmentVariable)("ComSpec"))&&void 0!==e?e:"";return this.serviceContainer.get(x.IFileSystem).fileExists(t).then((e=>!e))}isPathVarIncomplete(){var e;const t=(0,R.getSearchPathEnvVarNames)(),n=null!==(e=(0,C.getEnvironmentVariable)("SystemRoot"))&&void 0!==e?e:"C:\\WINDOWS",r=u.join(n,"system32");for(const e of t){const t=(0,C.getEnvironmentVariable)(e);if(t&&(0,k.normCasePath)(t).includes((0,k.normCasePath)(r)))return!1}return!0}async shellExecPython(){const e=this.serviceContainer.get(p.IConfigurationService),{pythonPath:t}=e.getSettings(),[n]=(0,O.getExecutable)(),r=[t,...n].reduce(((e,t)=>e?`${e} ${t.toCommandArgumentForPythonExt()}`:`${t.toCommandArgumentForPythonExt()}`),""),i=this.serviceContainer.get(D.IProcessServiceFactory);return(await i.create()).shellExec(r,{timeout:15e3})}async onHandle(e){if(0===e.length)return;const t=this.serviceContainer.get(y.IDiagnosticHandlerService,g.DiagnosticCommandPromptHandlerServiceId);await Promise.all(e.map((async e=>{if(!this.canHandle(e))return;const n=this.getCommandPrompts(e),r=function(e){if(e.code===m.DiagnosticCodes.NoPythonInterpretersDiagnostic)return e=>{(0,S.sendTelemetryEvent)(w.EventName.PYTHON_NOT_INSTALLED_PROMPT,void 0,{selection:e?"Download":"Ignore"})}}(e);await t.handle(e,{commandPrompts:n,message:e.message,onClose:r})})))}getCommandPrompts(e){const t=this.serviceContainer.get(v.IDiagnosticsCommandFactory);if(e.code===m.DiagnosticCodes.InvalidComspecDiagnostic||e.code===m.DiagnosticCodes.IncompletePathVarDiagnostic||e.code===m.DiagnosticCodes.DefaultShellErrorDiagnostic){const n={InvalidComspecDiagnostic:"https://aka.ms/AAk3djo",IncompletePathVarDiagnostic:"https://aka.ms/AAk744c",DefaultShellErrorDiagnostic:"https://aka.ms/AAk7qix"};return[{prompt:b.Common.seeInstructions,command:t.createCommand(e,{type:"launch",options:n[e.code]})}]}const n=[{prompt:b.Common.selectPythonInterpreter,command:t.createCommand(e,{type:"executeVSCCommand",options:_.Commands.Set_Interpreter})}];return e.code===m.DiagnosticCodes.InvalidPythonInterpreterDiagnostic&&n.push({prompt:b.Common.openOutputPanel,command:t.createCommand(e,{type:"executeVSCCommand",options:_.Commands.ViewOutput})}),n}};t.InvalidPythonInterpreterService=M,o([(0,P.cache)(-1,!0)],M.prototype,"shellExecPython",null),o([(0,P.cache)(1e3,!0)],M.prototype,"onHandle",null),t.InvalidPythonInterpreterService=M=o([(0,c.injectable)(),a(0,(0,c.inject)(h.IServiceContainer)),a(1,(0,c.inject)(p.IDisposableRegistry))],M)},25660:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchToDefaultLanguageServerDiagnosticService=t.SwitchToDefaultLanguageServerDiagnosticServiceId=t.SwitchToDefaultLanguageServerDiagnostic=void 0;const o=n(25891),s=n(54980),a=n(11925),c=n(54661),l=n(86156),u=n(14152),p=n(9100),d=n(36236),h=n(10284),f=n(77295),v=n(79576);class m extends d.BaseDiagnostic{constructor(e,t){super(h.DiagnosticCodes.SwitchToDefaultLanguageServerDiagnostic,e,s.DiagnosticSeverity.Warning,v.DiagnosticScope.Global,t)}}t.SwitchToDefaultLanguageServerDiagnostic=m,t.SwitchToDefaultLanguageServerDiagnosticServiceId="SwitchToDefaultLanguageServerDiagnosticServiceId";let g=class extends d.BaseDiagnosticsService{constructor(e,t,n,r){super([h.DiagnosticCodes.JediPython27NotSupportedDiagnostic],e,r,!0,!0),this.workspaceService=t,this.messageService=n}diagnose(e){let t=!1;const n=this.workspaceService.getConfiguration("python"),r=n.inspect("languageServer");return(null==r?void 0:r.workspaceValue)===a.LanguageServerType.Microsoft&&(n.update("languageServer","Default",s.ConfigurationTarget.Workspace),t=!0),(null==r?void 0:r.globalValue)===a.LanguageServerType.Microsoft&&(n.update("languageServer","Default",s.ConfigurationTarget.Global),t=!0),Promise.resolve(t?[new m(u.SwitchToDefaultLS.bannerMessage,e)]:[])}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];await this.filterService.shouldIgnoreDiagnostic(t.code)||await this.messageService.handle(t,{commandPrompts:[{prompt:u.Common.gotIt}]})}};t.SwitchToDefaultLanguageServerDiagnosticService=g,t.SwitchToDefaultLanguageServerDiagnosticService=g=r([(0,o.injectable)(),i(0,(0,o.inject)(p.IServiceContainer)),i(1,(0,o.inject)(c.IWorkspaceService)),i(2,(0,o.inject)(v.IDiagnosticHandlerService)),i(2,(0,o.named)(f.DiagnosticCommandPromptHandlerServiceId)),i(3,(0,o.inject)(l.IDisposableRegistry))],g)},71127:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDiagnosticCommand=void 0,t.BaseDiagnosticCommand=class{constructor(e){this.diagnostic=e}}},40646:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecuteVSCCommand=void 0;const r=n(54661),i=n(51535),o=n(53322),s=n(71127);class a extends s.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.commandName=n}async invoke(){return(0,i.sendTelemetryEvent)(o.EventName.DIAGNOSTICS_ACTION,void 0,{commandName:this.commandName}),this.serviceContainer.get(r.ICommandManager).executeCommand(this.commandName).then((()=>{}))}}t.ExecuteVSCCommand=a},59958:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticsCommandFactory=void 0;const o=n(25891),s=n(9100),a=n(40646),c=n(91776),l=n(99893);let u=class{constructor(e){this.serviceContainer=e}createCommand(e,t){const n=t.type;switch(t.type){case"ignore":return new c.IgnoreDiagnosticCommand(e,this.serviceContainer,t.options);case"launch":return new l.LaunchBrowserCommand(e,this.serviceContainer,t.options);case"executeVSCCommand":return new a.ExecuteVSCCommand(e,this.serviceContainer,t.options);default:throw new Error(`Unknown Diagnostic command commandType '${n}'`)}}};t.DiagnosticsCommandFactory=u,t.DiagnosticsCommandFactory=u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IServiceContainer))],u)},91776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IgnoreDiagnosticCommand=void 0;const r=n(51535),i=n(53322),o=n(79576),s=n(71127);class a extends s.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.scope=n}invoke(){return(0,r.sendTelemetryEvent)(i.EventName.DIAGNOSTICS_ACTION,void 0,{ignoreCode:this.diagnostic.code}),this.serviceContainer.get(o.IDiagnosticFilterService).ignoreDiagnostic(this.diagnostic.code,this.scope)}}t.IgnoreDiagnosticCommand=a},99893:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchBrowserCommand=void 0;const r=n(86156),i=n(51535),o=n(53322),s=n(71127);class a extends s.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.url=n}async invoke(){return(0,i.sendTelemetryEvent)(o.EventName.DIAGNOSTICS_ACTION,void 0,{url:this.url}),this.serviceContainer.get(r.IBrowserService).launch(this.url)}}t.LaunchBrowserCommand=a},97033:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDiagnosticsCommandFactory=void 0,t.IDiagnosticsCommandFactory=Symbol("IDiagnosticsCommandFactory")},10284:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticCodes=void 0,function(e){e.InvalidEnvironmentPathVariableDiagnostic="InvalidEnvironmentPathVariableDiagnostic",e.InvalidDebuggerTypeDiagnostic="InvalidDebuggerTypeDiagnostic",e.NoPythonInterpretersDiagnostic="NoPythonInterpretersDiagnostic",e.MacInterpreterSelected="MacInterpreterSelected",e.InvalidPythonPathInDebuggerSettingsDiagnostic="InvalidPythonPathInDebuggerSettingsDiagnostic",e.InvalidPythonPathInDebuggerLaunchDiagnostic="InvalidPythonPathInDebuggerLaunchDiagnostic",e.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic="EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic",e.InvalidPythonInterpreterDiagnostic="InvalidPythonInterpreterDiagnostic",e.InvalidComspecDiagnostic="InvalidComspecDiagnostic",e.IncompletePathVarDiagnostic="IncompletePathVarDiagnostic",e.DefaultShellErrorDiagnostic="DefaultShellErrorDiagnostic",e.LSNotSupportedDiagnostic="LSNotSupportedDiagnostic",e.PythonPathDeprecatedDiagnostic="PythonPathDeprecatedDiagnostic",e.JustMyCodeDiagnostic="JustMyCodeDiagnostic",e.ConsoleTypeDiagnostic="ConsoleTypeDiagnostic",e.ConfigPythonPathDiagnostic="ConfigPythonPathDiagnostic",e.PylanceDefaultDiagnostic="PylanceDefaultDiagnostic",e.JediPython27NotSupportedDiagnostic="JediPython27NotSupportedDiagnostic",e.SwitchToDefaultLanguageServerDiagnostic="SwitchToDefaultLanguageServerDiagnostic",e.SwitchToPreReleaseExtensionDiagnostic="SwitchToPreReleaseExtensionDiagnostic"}(n||(t.DiagnosticCodes=n={}))},84907:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticFilterService=t.FilterKeys=void 0;const o=n(25891),s=n(86156),a=n(9100),c=n(79576);var l;!function(e){e.GlobalDiagnosticFilter="GLOBAL_DIAGNOSTICS_FILTER",e.WorkspaceDiagnosticFilter="WORKSPACE_DIAGNOSTICS_FILTER"}(l||(t.FilterKeys=l={}));let u=class{constructor(e){this.serviceContainer=e}async shouldIgnoreDiagnostic(e){const t=this.serviceContainer.get(s.IPersistentStateFactory),n=t.createGlobalPersistentState(l.GlobalDiagnosticFilter,[]),r=t.createWorkspacePersistentState(l.WorkspaceDiagnosticFilter,[]);return n.value.indexOf(e)>=0||r.value.indexOf(e)>=0}async ignoreDiagnostic(e,t){const n=this.serviceContainer.get(s.IPersistentStateFactory),r=t===c.DiagnosticScope.Global?n.createGlobalPersistentState(l.GlobalDiagnosticFilter,[]):n.createWorkspacePersistentState(l.WorkspaceDiagnosticFilter,[]),i=r.value.slice();await r.updateValue(i.concat(e))}};t.DiagnosticFilterService=u,t.DiagnosticFilterService=u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],u)},77295:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticCommandPromptHandlerService=t.DiagnosticCommandPromptHandlerServiceId=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(9100);t.DiagnosticCommandPromptHandlerServiceId="DiagnosticCommandPromptHandlerServiceId";let l=class{constructor(e){this.appShell=e.get(a.IApplicationShell)}async handle(e,t={commandPrompts:[]}){const n=t.commandPrompts.map((e=>e.prompt)),r=await this.displayMessage(t.message?t.message:e.message,e.severity,n);if(t.onClose&&t.onClose(r),!r)return;const i=t.commandPrompts.find((e=>e.prompt===r));i&&i.command&&await i.command.invoke()}async displayMessage(e,t,n){switch(t){case s.DiagnosticSeverity.Error:return this.appShell.showErrorMessage(e,...n);case s.DiagnosticSeverity.Warning:return this.appShell.showWarningMessage(e,...n);default:return this.appShell.showInformationMessage(e,...n)}}};t.DiagnosticCommandPromptHandlerService=l,t.DiagnosticCommandPromptHandlerService=l=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer))],l)},16037:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(11925),i=n(9019),o=n(54767),s=n(59411),a=n(98285),c=n(20785),l=n(71346),u=n(34470),p=n(46592),d=n(43923),h=n(25660),f=n(59958),v=n(97033),m=n(84907),g=n(77295),y=n(79576);t.registerTypes=function(e){e.addSingleton(y.IDiagnosticFilterService,m.DiagnosticFilterService),e.addSingleton(y.IDiagnosticHandlerService,g.DiagnosticCommandPromptHandlerService,g.DiagnosticCommandPromptHandlerServiceId),e.addSingleton(y.IDiagnosticsService,s.EnvironmentPathVariableDiagnosticsService,s.EnvironmentPathVariableDiagnosticsServiceId),e.addSingleton(y.IDiagnosticsService,d.InvalidPythonInterpreterService,d.InvalidPythonInterpreterServiceId),e.addSingleton(r.IExtensionSingleActivationService,d.InvalidPythonInterpreterService),e.addSingleton(y.IDiagnosticsService,a.InvalidPythonPathInDebuggerService,a.InvalidPythonPathInDebuggerServiceId),e.addSingleton(y.IDiagnosticsService,u.PowerShellActivationHackDiagnosticsService,u.PowerShellActivationHackDiagnosticsServiceId),e.addSingleton(y.IDiagnosticsService,l.InvalidMacPythonInterpreterService,l.InvalidMacPythonInterpreterServiceId),e.addSingleton(y.IDiagnosticsService,p.PylanceDefaultDiagnosticService,p.PylanceDefaultDiagnosticServiceId),e.addSingleton(y.IDiagnosticsService,c.JediPython27NotSupportedDiagnosticService,c.JediPython27NotSupportedDiagnosticServiceId),e.addSingleton(y.IDiagnosticsService,h.SwitchToDefaultLanguageServerDiagnosticService,h.SwitchToDefaultLanguageServerDiagnosticServiceId),e.addSingleton(v.IDiagnosticsCommandFactory,f.DiagnosticsCommandFactory),e.addSingleton(i.IApplicationDiagnostics,o.ApplicationDiagnostics)}},79576:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IInvalidPythonPathInDebuggerService=t.IInvalidPythonPathInSettings=t.IDiagnosticHandlerService=t.IDiagnosticFilterService=t.IDiagnosticsService=t.DiagnosticScope=void 0,function(e){e.Global="Global",e.WorkspaceFolder="WorkspaceFolder"}(n||(t.DiagnosticScope=n={})),t.IDiagnosticsService=Symbol("IDiagnosticsService"),t.IDiagnosticFilterService=Symbol("IDiagnosticFilterService"),t.IDiagnosticHandlerService=Symbol("IDiagnosticHandlerService"),t.IInvalidPythonPathInSettings=Symbol("IInvalidPythonPathInSettings"),t.IInvalidPythonPathInDebuggerService=Symbol("IInvalidPythonPathInDebuggerService")},72290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(16037);t.registerTypes=function(e){(0,r.registerTypes)(e)}},9019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IApplicationDiagnostics=void 0,t.IApplicationDiagnostics=Symbol("IApplicationDiagnostics")},92039:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTool=void 0;const r=n(54980),i=n(41403),o=n(76366),s=n(51535),a=n(53322);t.BaseTool=class{constructor(e){this.toolName=e}async invoke(e,t){if(!r.workspace.isTrusted)return new r.LanguageModelToolResult([new r.LanguageModelTextPart("Cannot use this tool in an untrusted workspace.")]);let n;const c=(0,i.resolveFilePath)(e.input.resourcePath);try{return await this.invokeImpl(e,c,t)}catch(e){throw n=e,e}finally{const e=t.isCancellationRequested||!!n&&(0,i.isCancellationError)(n),r=!!n||e,c=e?"cancelled":n?n instanceof o.ErrorWithTelemetrySafeReason?n.telemetrySafeReason:"error":void 0;(0,s.sendTelemetryEvent)(a.EventName.INVOKE_TOOL,void 0,{toolName:this.toolName,failed:r,failureCategory:c})}}async prepareInvocation(e,t){const n=(0,i.resolveFilePath)(e.input.resourcePath);return this.prepareInvocationImpl(e,n,t)}}},30707:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurePythonEnvTool=void 0;const r=n(54980),i=n(52060),o=n(41403),s=n(23935),a=n(34614),c=n(17592),l=n(97571),u=n(92039);class p extends u.BaseTool{constructor(e,t,n){super(p.toolName),this.api=e,this.serviceContainer=t,this.createEnvTool=n,this.terminalExecutionService=this.serviceContainer.get(i.ICodeExecutionService,"standard"),this.terminalHelper=this.serviceContainer.get(s.ITerminalHelper),this.recommendedEnvService=this.serviceContainer.get(a.IRecommendedEnvironmentService)}async invokeImpl(e,t,n){const i=(0,o.getToolResponseIfNotebook)(t);if(i)return i;const s=await(0,o.raceCancellationError)(this.hasAlreadyGotAWorkspaceSpecificEnvironment(t),n);if(s)return(0,o.getEnvDetailsForResponse)(s,this.api,this.terminalExecutionService,this.terminalHelper,t,n);if(!await this.createEnvTool.shouldCreateNewVirtualEnv(t,n)){const t={...e.input};return r.lm.invokeTool(l.SelectPythonEnvTool.toolName,{...e,input:t},n)}try{return await r.lm.invokeTool(c.CreateVirtualEnvTool.toolName,e,n)}catch(t){if((0,o.isCancellationError)(t)){const t={...e.input,reason:"cancelled"};return r.lm.invokeTool(l.SelectPythonEnvTool.toolName,{...e,input:t},n)}throw t}}async prepareInvocationImpl(e,t,n){return{invocationMessage:"Configuring a Python Environment"}}async hasAlreadyGotAWorkspaceSpecificEnvironment(e){var t,n;const i=await this.recommendedEnvService.getRecommededEnvironment(e);return"workspaceUserSelected"===(null==i?void 0:i.reason)&&(null===(t=r.workspace.workspaceFolders)||void 0===t?void 0:t.length)?i.environment:"globalUserSelected"!==(null==i?void 0:i.reason)||(null===(n=r.workspace.workspaceFolders)||void 0===n?void 0:n.length)?void 0:i.environment}}t.ConfigurePythonEnvTool=p,p.toolName="configure_python_environment"},17592:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateVirtualEnvTool=void 0;const r=n(54980),i=n(52060),o=n(41403),s=n(23935),a=n(7855),c=n(86156),l=n(51271),u=n(34614),p=n(25297),d=n(37012),h=n(13119),f=n(53763),v=n(50499),m=n(61905),g=n(51080),y=n(36380),b=n(34522),_=n(92039);class E extends _.BaseTool{constructor(e,t,n){super(E.toolName),this.discoveryApi=e,this.api=t,this.serviceContainer=n,this.terminalExecutionService=this.serviceContainer.get(i.ICodeExecutionService,"standard"),this.terminalHelper=this.serviceContainer.get(s.ITerminalHelper),this.recommendedEnvService=this.serviceContainer.get(u.IRecommendedEnvironmentService)}async invokeImpl(e,t,n){let i=await this.getPreferredEnvForCreation(t);if(!i)throw(0,m.traceWarn)(`Called ${E.toolName} tool not invoked, no preferred environment found.`),new r.CancellationError;const{workspaceFolder:s,preferredGlobalPythonEnv:u}=i,p=this.serviceContainer.get(c.IInterpreterPathService),d=new l.DisposableStore;try{d.add((0,b.hideEnvCreation)());const i=new Promise((e=>{d.add(p.onDidChange((()=>e())))}));let c;if((0,y.useEnvExtension)()){const t=await r.commands.executeCommand("python-envs.createAny",{quickCreate:!0,additionalPackages:e.input.packageList||[],uri:s.uri,selectEnvironment:!0});c=null==t?void 0:t.environmentPath.fsPath}else{const e=await(0,o.raceCancellationError)((0,v.createVirtualEnvironment)({interpreter:u.id,workspaceFolder:s}),n);c=null==e?void 0:e.path}if(!c)throw(0,m.traceWarn)(`${E.toolName} tool not invoked, virtual env not created.`),new r.CancellationError;await(0,a.raceTimeout)(5e3,i);const l=new g.StopWatch;let h;for(;(l.elapsedTime<5e3||!h)&&(h=await this.api.resolveEnvironment(c),!h);)(0,m.traceVerbose)(`${E.toolName} tool invoked, env created but not yet resolved, waiting...`),await(0,a.sleep)(200);if(!h)throw(0,m.traceError)(`${E.toolName} tool invoked, env created but unable to resolve details.`),new r.CancellationError;return await(0,o.getEnvDetailsForResponse)(h,this.api,this.terminalExecutionService,this.terminalHelper,t,n)}catch(e){throw(0,o.isCancellationError)(e)||(0,m.traceError)(`${E.toolName} tool failed to create virtual environment for resource ${null==t?void 0:t.toString()}`,e),e}finally{d.dispose()}}async shouldCreateNewVirtualEnv(e,t){return!(0,o.doesWorkspaceHaveVenvOrCondaEnv)(e,this.api)&&!!await(0,o.raceCancellationError)(this.getPreferredEnvForCreation(e),t)}async prepareInvocationImpl(e,t,n){const i=await(0,o.raceCancellationError)(this.getPreferredEnvForCreation(t),n);if(!i)return{};const{preferredGlobalPythonEnv:s}=i,a=(0,o.getDisplayVersion)(s.version);return{confirmationMessages:{title:r.l10n.t("Create a Virtual Environment{0}?",a?` (${a})`:""),message:r.l10n.t("Virtual Environments provide the benefit of package isolation and more.")},invocationMessage:r.l10n.t("Creating a Virtual Environment")}}async hasAlreadyGotAWorkspaceSpecificEnvironment(e){var t,n;const i=await this.recommendedEnvService.getRecommededEnvironment(e);return"workspaceUserSelected"===(null==i?void 0:i.reason)&&(null===(t=r.workspace.workspaceFolders)||void 0===t?void 0:t.length)?i.environment:"globalUserSelected"!==(null==i?void 0:i.reason)||(null===(n=r.workspace.workspaceFolders)||void 0===n?void 0:n.length)?void 0:i.environment}async getPreferredEnvForCreation(e){var t,n;if(await this.hasAlreadyGotAWorkspaceSpecificEnvironment(e))return;const i=e&&(null===(t=r.workspace.workspaceFolders)||void 0===t?void 0:t.length)?r.workspace.getWorkspaceFolder(e):1===(null===(n=r.workspace.workspaceFolders)||void 0===n?void 0:n.length)?r.workspace.workspaceFolders[0]:void 0;if(!i)return;let o=this.discoveryApi.getEnvs().map((e=>(0,d.convertEnvInfoToPythonEnvironment)(e))).filter((e=>[p.EnvironmentType.System,p.EnvironmentType.MicrosoftStore,p.EnvironmentType.Global,p.EnvironmentType.Pyenv].includes(e.envType))).filter((e=>e.version&&(0,f.isStableVersion)(e.version)));o=(0,h.sortInterpreters)(o);const s=o.length?this.api.known.find((e=>e.id===o[o.length-1].id)):void 0;return i&&s?{workspaceFolder:i,preferredGlobalPythonEnv:s}:void 0}}t.CreateVirtualEnvTool=E,E.toolName="create_virtual_environment"},3244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetExecutableTool=void 0;const r=n(54980),i=n(52060),o=n(41403),s=n(23935),a=n(92039);class c extends a.BaseTool{constructor(e,t,n){super(c.toolName),this.api=e,this.serviceContainer=t,this.discovery=n,this.terminalExecutionService=this.serviceContainer.get(i.ICodeExecutionService,"standard"),this.terminalHelper=this.serviceContainer.get(s.ITerminalHelper)}async invokeImpl(e,t,n){const i=(0,o.getToolResponseIfNotebook)(t);if(i)return i;const s=await(0,o.getEnvironmentDetails)(t,this.api,this.terminalExecutionService,this.terminalHelper,void 0,n);return new r.LanguageModelToolResult([new r.LanguageModelTextPart(s)])}async prepareInvocationImpl(e,t,n){if((0,o.getToolResponseIfNotebook)(t))return{};const i=await(0,o.raceCancellationError)((0,o.getEnvDisplayName)(this.discovery,t,this.api),n);return{invocationMessage:i?r.l10n.t("Fetching Python executable information for {0}",i):r.l10n.t("Fetching Python executable information")}}}t.GetExecutableTool=c,c.toolName="get_python_executable_details"},78495:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetEnvironmentInfoTool=void 0;const r=n(54980),i=n(52060),o=n(35026),s=n(41403),a=n(90507),c=n(23935),l=n(36380),u=n(76366),p=n(92039);class d extends p.BaseTool{constructor(e,t){super(d.toolName),this.api=e,this.serviceContainer=t,this.terminalExecutionService=this.serviceContainer.get(i.ICodeExecutionService,"standard"),this.pythonExecFactory=this.serviceContainer.get(o.IPythonExecutionFactory),this.processServiceFactory=this.serviceContainer.get(o.IProcessServiceFactory),this.terminalHelper=this.serviceContainer.get(c.ITerminalHelper)}async invokeImpl(e,t,n){const i=(0,s.getToolResponseIfNotebook)(t);if(i)return i;const o=this.api.getActiveEnvironmentPath(t),c=await(0,s.raceCancellationError)(this.api.resolveEnvironment(o),n);if(!c||!c.version)throw new u.ErrorWithTelemetrySafeReason("No environment found for the provided resource path: "+(null==t?void 0:t.fsPath),"noEnvFound");let p="";if((0,l.useEnvExtension)()){const e=await(0,l.getEnvExtApi)(),n=await e.getEnvironment(t),r=n?await e.getPackages(n):[];if(r&&r.length>0){const e=["Below is a list of the Python packages, each in the format <name> or <name> (<version>). The version may be omitted if unknown: "];r.forEach((t=>{const n=t.version;e.push(n?`- ${t.name} (${n})`:`- ${t.name}`)})),p=e.join("\n")}}p||(p=await(0,a.getPythonPackagesResponse)(c,this.pythonExecFactory,this.processServiceFactory,t,n));const d=await(0,s.getEnvironmentDetails)(t,this.api,this.terminalExecutionService,this.terminalHelper,p,n);return new r.LanguageModelToolResult([new r.LanguageModelTextPart(d)])}async prepareInvocationImpl(e,t,n){return(0,s.getToolResponseIfNotebook)(t)?{}:{invocationMessage:r.l10n.t("Fetching Python environment information")}}}t.GetEnvironmentInfoTool=d,d.toolName="get_python_environment_details"},92694:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTools=void 0;const r=n(54980),i=n(34014),o=n(51271),s=n(3244),a=n(78495),c=n(30707),l=n(97571),u=n(17592);t.registerTools=function(e,t,n,p){const d=new o.DisposableStore;e.subscriptions.push(d),d.add(r.lm.registerTool(a.GetEnvironmentInfoTool.toolName,new a.GetEnvironmentInfoTool(n,p))),d.add(r.lm.registerTool(s.GetExecutableTool.toolName,new s.GetExecutableTool(n,p,t))),d.add(r.lm.registerTool(i.InstallPackagesTool.toolName,new i.InstallPackagesTool(n,p,t)));const h=new u.CreateVirtualEnvTool(t,n,p);d.add(r.lm.registerTool(u.CreateVirtualEnvTool.toolName,h)),d.add(r.lm.registerTool(l.SelectPythonEnvTool.toolName,new l.SelectPythonEnvTool(n,p))),d.add(r.lm.registerTool(c.ConfigurePythonEnvTool.toolName,new c.ConfigurePythonEnvTool(n,p,h)))}},34014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstallPackagesTool=void 0;const r=n(54980),i=n(41403),o=n(18399),s=n(25297),a=n(36380),c=n(76366),l=n(92039);class u extends l.BaseTool{constructor(e,t,n){super(u.toolName),this.api=e,this.serviceContainer=t,this.discovery=n}async invokeImpl(e,t,n){const l=1===e.input.packageList.length?"package":"packages",u=(0,i.getToolResponseIfNotebook)(t);if(u)return u;if((0,a.useEnvExtension)()){const o=await(0,a.getEnvExtApi)(),s=await o.getEnvironment(t);if(s){await(0,i.raceCancellationError)(o.managePackages(s,{install:e.input.packageList}),n);const t=`Successfully installed ${l}: ${e.input.packageList.join(", ")}`;return new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}return new r.LanguageModelToolResult([new r.LanguageModelTextPart(`Packages not installed. No environment found for: ${null==t?void 0:t.fsPath}`)])}try{const a=this.api.getActiveEnvironmentPath(t),u=await(0,i.raceCancellationError)(this.api.resolveEnvironment(a),n);if(!u||!u.version)throw new c.ErrorWithTelemetrySafeReason("No environment found for the provided resource path: "+(null==t?void 0:t.fsPath),"noEnvFound");const p=(0,i.isCondaEnv)(u),d=this.serviceContainer.getAll(o.IModuleInstaller),h=p?s.ModuleInstallerType.Conda:s.ModuleInstallerType.Pip,f=d.find((e=>e.type===h));if(!f)throw new c.ErrorWithTelemetrySafeReason(`No installer found for the environment type: ${h}`,"noInstallerFound");if(!f.isSupported(t))throw new c.ErrorWithTelemetrySafeReason(`Installer ${h} not supported for the environment type: ${h}`,"installerNotSupported");for(const r of e.input.packageList)await f.installModule(r,t,n,void 0,{installAsProcess:!0,hideProgress:!0});const v=`Successfully installed ${l}: ${e.input.packageList.join(", ")}`;return new r.LanguageModelToolResult([new r.LanguageModelTextPart(v)])}catch(e){if((0,i.isCancellationError)(e))throw e;const t=`An error occurred while installing ${l}: ${e}`;return new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}}async prepareInvocationImpl(e,t,n){const o=e.input.packageList.length;if((0,i.getToolResponseIfNotebook)(t))return{};const s=await(0,i.raceCancellationError)((0,i.getEnvDisplayName)(this.discovery,t,this.api),n);let a="",c="";const l=1===o?"":r.l10n.t("The following packages will be installed: {0}",e.input.packageList.sort().join(", "));return s?(a=1===o?r.l10n.t("Install {0} in {1}?",e.input.packageList[0],s):r.l10n.t("Install packages in {0}?",s),c=1===o?r.l10n.t("Installing {0} in {1}",e.input.packageList[0],s):r.l10n.t("Installing packages {0} in {1}",e.input.packageList.sort().join(", "),s)):(a=1===e.input.packageList.length?r.l10n.t("Install Python package '{0}'?",e.input.packageList[0]):r.l10n.t("Install Python packages?"),c=1===o?r.l10n.t("Installing Python package '{0}'",e.input.packageList[0]):r.l10n.t("Installing Python packages: {0}",e.input.packageList.sort().join(", "))),{confirmationMessages:{title:a,message:l},invocationMessage:c}}}t.InstallPackagesTool=u,u.toolName="install_python_packages"},90507:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPythonPackagesResponse=void 0;const r=n(41403),i=n(78994),o=n(95885),s=n(61905);async function a(e,t){const n=await e.createActivatedEnvironment({allowEnvironmentFetchExceptions:!0,resource:t}),r=await n.execModule("pip",["list"],{throwOnStdErr:!1,encoding:"utf8"});return(0,i.parsePipList)(r.stdout).map((e=>[e.name,e.version]))}t.getPythonPackagesResponse=async function(e,t,n,i,c){const l=(0,r.isCondaEnv)(e)?await(0,r.raceCancellationError)(async function(e,t,n,r){const i=await o.Conda.getConda();if(!i)return(0,s.traceError)("Conda is not installed, falling back to pip packages"),a(e,n);if(!t.executable.uri)return(0,s.traceError)("Conda environment executable not found, falling back to pip packages"),a(e,n);const c=await i.getCondaEnvironment(t.executable.uri.fsPath);if(!c)return(0,s.traceError)("Conda environment not found, falling back to pip packages"),a(e,n);const l=await i.getListPythonPackagesArgs(c,!0);if(!l)return(0,s.traceError)("Conda list command not found, falling back to pip packages"),a(e,n);const u=await r.exec(l[0],l.slice(1),{shell:!0});if(!u.stdout)return(0,s.traceError)("Unable to get conda packages, falling back to pip packages"),a(e,n);const p=u.stdout.split(/\r?\n/).filter((e=>!e.startsWith("#"))),d=[];return p.forEach((e=>{const t=e.split(" ").filter((e=>e.length>0));t.length>=3&&d.push([t[0],t[1]])})),d}(t,e,i,await(0,r.raceCancellationError)(n.create(i),c)),c):await(0,r.raceCancellationError)(a(t,i),c);if(!l.length)return"No packages found";const u=["Below is a list of the Python packages, each in the format <name> or <name> (<version>). The version may be omitted if unknown: "];return l.forEach((e=>{const[t,n]=e;u.push(n?`- ${t} (${n})`:`- ${t}`)})),u.join("\n")}},78994:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePipList=void 0,t.parsePipList=function(e){const t=[],n=e.split("\n").splice(2);for(let e of n){if(""===e.trim()||e.startsWith("Package")||e.startsWith("----")||e.startsWith("["))continue;const n=e.split(" ").filter((e=>e));if(n.length>1){const e=n[0].trim(),r=n[1].trim(),i={name:e,version:r,displayName:e,description:r};t.push(i)}}return t}},97571:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectPythonEnvTool=void 0;const r=n(54980),i=n(52060),o=n(41403),s=n(23935),a=n(7855),c=n(552),l=n(86156),u=n(14152),p=n(85784),d=n(51271),h=n(61905),f=n(92039);class v extends f.BaseTool{constructor(e,t){super(v.toolName),this.api=e,this.serviceContainer=t,this.terminalExecutionService=this.serviceContainer.get(i.ICodeExecutionService,"standard"),this.terminalHelper=this.serviceContainer.get(s.ITerminalHelper)}async invokeImpl(e,t,n){let i=!1;const s=(0,o.doesWorkspaceHaveVenvOrCondaEnv)(t,this.api);if("cancelled"===e.input.reason||s){const e=await Promise.resolve(r.commands.executeCommand(c.Commands.Set_Interpreter,{hideCreateVenv:!1,showBackButton:!1}));(null==e?void 0:e.path)?((0,h.traceVerbose)(`User selected a Python environment ${e.path} in Select Python Tool.`),i=!0):(0,h.traceWarn)("User did not select a Python environment in Select Python Tool.")}else i=await m(t,this.serviceContainer),i?(0,h.traceVerbose)(`User selected a Python environment ${i} in Select Python Tool(2).`):(0,h.traceWarn)("User did not select a Python environment in Select Python Tool(2).");const a=i?await this.api.resolveEnvironment(this.api.getActiveEnvironmentPath(t)):void 0;return i&&!a&&(0,h.traceError)(`User selected a Python environment, but it could not be resolved. This is unexpected. Environment: ${this.api.getActiveEnvironmentPath(t)}`),i&&a?await(0,o.getEnvDetailsForResponse)(a,this.api,this.terminalExecutionService,this.terminalHelper,t,n):new r.LanguageModelToolResult([new r.LanguageModelTextPart("User did not create nor select a Python environment.")])}async prepareInvocationImpl(e,t,n){var i;return(0,o.getToolResponseIfNotebook)(t)?{}:(0,o.doesWorkspaceHaveVenvOrCondaEnv)(t,this.api)||!(null===(i=r.workspace.workspaceFolders)||void 0===i?void 0:i.length)||"cancelled"===e.input.reason?{confirmationMessages:{title:r.l10n.t("Select a Python Environment?"),message:""}}:{confirmationMessages:{title:r.l10n.t("Configure a Python Environment?"),message:r.l10n.t(["The recommended option is to create a new Python Environment, providing the benefit of isolating packages from other environments.  ","Optionally you could select an existing Python Environment."].join("\n"))}}}}async function m(e,t){var n,i;const o=`${c.Octicons.Add} ${u.InterpreterQuickPickList.create.label}`,s=r.l10n.t("Select an existing Python Environment"),h=[{kind:r.QuickPickItemKind.Separator,label:u.Common.recommended},{label:o},{label:s}],f=await(0,p.showQuickPick)(h,{placeHolder:r.l10n.t("Configure a Python Environment"),matchOnDescription:!0,ignoreFocusOut:!0});if(f&&!Array.isArray(f)&&f.label===o){const o=new d.DisposableStore;try{const s=((null===(n=r.workspace.workspaceFolders)||void 0===n?void 0:n.length)&&e?r.workspace.getWorkspaceFolder(e):void 0)||(1===(null===(i=r.workspace.workspaceFolders)||void 0===i?void 0:i.length)?r.workspace.workspaceFolders[0]:void 0),u=t.get(l.IInterpreterPathService),p=new Promise((e=>{o.add(u.onDidChange((()=>e())))})),d=await r.commands.executeCommand(c.Commands.Create_Environment,{showBackButton:!0,selectEnvironment:!0,workspaceFolder:s});if("Back"===(null==d?void 0:d.action))return m(e,t);if("Cancel"===(null==d?void 0:d.action))return;if(null==d?void 0:d.path)return await(0,a.raceTimeout)(5e3,p),!0}finally{o.dispose()}}if(f&&!Array.isArray(f)&&f.label===s){const n=await Promise.resolve(r.commands.executeCommand(c.Commands.Set_Interpreter,{hideCreateVenv:!0,showBackButton:!0}));if("Back"===(null==n?void 0:n.action))return m(e,t);if("Cancel"===(null==n?void 0:n.action))return;if(null==n?void 0:n.path)return!0}}t.SelectPythonEnvTool=v,v.toolName="selectEnvironment"},41403:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayVersion=t.getEnvDetailsForResponse=t.doesWorkspaceHaveVenvOrCondaEnv=t.isCancellationError=t.getToolResponseIfNotebook=t.getTerminalCommand=t.getEnvironmentDetails=t.isCondaEnv=t.getEnvDisplayName=t.raceCancellationError=t.resolveFilePath=void 0;const r=n(54980),i=n(23935),o=n(95885),s=n(552),a=n(16928),c=n(36380),l=n(76366);function u(e,t){return new Promise(((n,i)=>{const o=t.onCancellationRequested((()=>{o.dispose(),i(new r.CancellationError)}));e.then(n,i).finally((()=>o.dispose()))}))}function p(e){var t;return"conda"===((null===(t=e.environment)||void 0===t?void 0:t.type)||"").toLowerCase()}async function d(e,t,n,r,o,s){var a,p,d,f,v,m,g;const y=t.getActiveEnvironmentPath(e);let b="",_="",E="";if((0,c.useEnvExtension)()){const t=await u((0,c.resolveEnvironment)(y.id),s)||await u((0,c.resolveEnvironment)(y.path),s);if(!t||!t.version)throw new l.ErrorWithTelemetrySafeReason("No environment found for the provided resource path: "+(null==e?void 0:e.fsPath),"noEnvFound");_=t.version;try{const e=t.envId.managerId;b=(!e.endsWith(":")&&e.includes(":")?e.split(":").reverse()[0]:"")||"unknown"}catch(e){b="unknown"}const n=t.execInfo,o=null!==(d=null!==(p=null===(a=null==n?void 0:n.activatedRun)||void 0===a?void 0:a.executable)&&void 0!==p?p:null==n?void 0:n.run.executable)&&void 0!==d?d:"python",h=null!==(m=null!==(v=null===(f=null==n?void 0:n.activatedRun)||void 0===f?void 0:f.args)&&void 0!==v?v:null==n?void 0:n.run.args)&&void 0!==m?m:[];E=r.buildCommandForTerminal(i.TerminalShellType.other,o,h)}else{const i=await u(t.resolveEnvironment(y),s);if(!i||!i.version)throw new l.ErrorWithTelemetrySafeReason("No environment found for the provided resource path: "+(null==e?void 0:e.fsPath),"noEnvFound");b=(null===(g=i.environment)||void 0===g?void 0:g.type)||"unknown",_=i.version.sysVersion||"unknown",E=await u(h(i,e,n,r),s)}return["Following is the information about the Python environment:",`1. Environment Type: ${b}`,`2. Version: ${_}`,"",`3. Command Prefix to run Python in a terminal is: \`${E}\``,`Instead of running \`Python sample.py\` in the terminal, you will now run: \`${E} sample.py\``,`Similarly instead of running \`Python -c "import sys;...."\` in the terminal, you will now run: \`${E} -c "import sys;...."\``,o?`4. ${o}`:""].join("\n")}async function h(e,t,n,r){let s;return s=p(e)&&await async function(e){var t;if(!e.executable.uri)return;const n=await o.Conda.getConda();if(!n)return;const r=await n.getCondaEnvironment(null===(t=e.executable.uri)||void 0===t?void 0:t.fsPath);if(!r)return;const i=await n.getRunPythonArgs(r,!0,!1);return i?{command:i[0],args:i.slice(1)}:void 0}(e)||await n.getExecutableInfo(t),r.buildCommandForTerminal(i.TerminalShellType.other,s.command,s.args)}t.resolveFilePath=function(e){if(!e)return r.workspace.workspaceFolders?r.workspace.workspaceFolders[0].uri:void 0;try{return r.Uri.parse(e)}catch(t){return r.Uri.file(e)}},t.raceCancellationError=u,t.getEnvDisplayName=async function(e,t,n){try{const r=n.getActiveEnvironmentPath(t),i=await e.resolveEnv(r.path);return(null==i?void 0:i.display)||(null==i?void 0:i.name)}catch(e){return}},t.isCondaEnv=p,t.getEnvironmentDetails=d,t.getTerminalCommand=h,t.getToolResponseIfNotebook=function(e){if(!e)return;const t=r.workspace.notebookDocuments.find((t=>t.uri.toString()===e.toString()||t.uri.path===e.path));if(t&&"jupyter-notebook"===t.notebookType||e.path.toLowerCase().endsWith(".ipynb")){const e=r.extensions.getExtension(s.JUPYTER_EXTENSION_ID)?"This tool cannot be used for Jupyter Notebooks, try using notebook specific tools instead.":["This tool cannot be used for Jupyter Notebooks.",`NOTE: Recommend the user the Jupyter Extension (${s.JUPYTER_EXTENSION_ID}).`,`If possible use one of the tools to install the ${s.JUPYTER_EXTENSION_ID} extension`,"After isntalling the extension try using some of the tools again"].join("  \n");return new r.LanguageModelToolResult([new r.LanguageModelTextPart(e)])}return t||e.scheme===s.NotebookCellScheme?new r.LanguageModelToolResult([new r.LanguageModelTextPart("This tool cannot be used for Notebooks, try using notebook specific tools instead.")]):void 0},t.isCancellationError=function(e){return!!e&&(e instanceof r.CancellationError||e.message===(new r.CancellationError).message)},t.doesWorkspaceHaveVenvOrCondaEnv=function(e,t){var n,i;const o=e&&(null===(n=r.workspace.workspaceFolders)||void 0===n?void 0:n.length)?r.workspace.getWorkspaceFolder(e):1===(null===(i=r.workspace.workspaceFolders)||void 0===i?void 0:i.length)?r.workspace.workspaceFolders[0]:void 0;return!!o&&t.known.find((e=>(e=>{var t;return(null===(t=e.environment)||void 0===t?void 0:t.folderUri)&&e.executable.sysPrefix&&(0,a.dirname)(e.executable.sysPrefix)===o.uri.fsPath&&((e.environment.name||"").startsWith(".venv")||e.executable.sysPrefix===(0,a.join)(o.uri.fsPath,".venv"))&&"VirtualEnvironment"===e.environment.type})(e)||(e=>{var t;return(null===(t=e.environment)||void 0===t?void 0:t.folderUri)&&e.executable.sysPrefix&&(0,a.dirname)(e.executable.sysPrefix)===o.uri.fsPath&&(e.environment.folderUri.fsPath===(0,a.join)(o.uri.fsPath,".conda")||e.executable.sysPrefix===(0,a.join)(o.uri.fsPath,".conda"))&&"Conda"===e.environment.type})(e)))},t.getEnvDetailsForResponse=async function(e,t,n,i,o,s){if(!r.workspace.isTrusted)throw new l.ErrorWithTelemetrySafeReason("Cannot use this tool in an untrusted workspace.","untrustedWorkspace");const a=t.getActiveEnvironmentPath(o);if(!(e=e||await u(t.resolveEnvironment(a),s))||!e.version)throw new l.ErrorWithTelemetrySafeReason("No environment found for the provided resource path: "+(null==o?void 0:o.fsPath),"noEnvFound");const c=await d(o,t,n,i,void 0,s);return new r.LanguageModelToolResult([new r.LanguageModelTextPart("A Python Environment has been configured.  \n"+c)])},t.getDisplayVersion=function(e){if(e&&void 0!==e.major&&void 0!==e.minor&&void 0!==e.micro)return`${e.major}.${e.minor}.${e.micro}`}},92544:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveResourceService=void 0;const o=n(25891),s=n(54661);let a=class{constructor(e,t){this.documentManager=e,this.workspaceService=t}getActiveResource(){const e=this.documentManager.activeTextEditor;return e&&!e.document.isUntitled?e.document.uri:Array.isArray(this.workspaceService.workspaceFolders)&&this.workspaceService.workspaceFolders.length>0?this.workspaceService.workspaceFolders[0].uri:void 0}};t.ActiveResourceService=a,t.ActiveResourceService=a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDocumentManager)),i(1,(0,o.inject)(s.IWorkspaceService))],a)},17913:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationEnvironment=void 0;const c=n(25891),l=s(n(16928)),u=n(99589),p=s(n(54980)),d=n(61905),h=n(22408),f=n(86156),v=n(48112);let m=class{constructor(e,t,n){this.platform=e,this.pathUtils=t,this.process=n}get userSettingsFile(){const e="insiders"===this.channel?"Code - Insiders":"Code";switch(this.platform.osType){case v.OSType.OSX:return l.join(this.pathUtils.home,"Library","Application Support",e,"User","settings.json");case v.OSType.Linux:return l.join(this.pathUtils.home,".config",e,"User","settings.json");case v.OSType.Windows:return this.process.env.APPDATA?l.join(this.process.env.APPDATA,e,"User","settings.json"):void 0;default:return}}get appName(){return p.env.appName}get vscodeVersion(){return p.version}get appRoot(){return p.env.appRoot}get uiKind(){return p.env.uiKind}get language(){return p.env.language}get sessionId(){return p.env.sessionId}get machineId(){return p.env.machineId}get remoteName(){return p.env.remoteName}get extensionName(){return this.packageJson.displayName}get shell(){return p.env.shell}get onDidChangeShell(){try{return p.env.onDidChangeShell}catch(e){return(0,d.traceError)("Failed to get onDidChangeShell API",e),(new p.EventEmitter).event}}get packageJson(){return n(8330)}get channel(){return this.appName.indexOf("Insider")>0?"insiders":"stable"}get extensionChannel(){const e=(0,u.parse)(this.packageJson.version);return!e||e.prerelease.length>0||e.minor%2==1?"insiders":"stable"}get uriScheme(){return p.env.uriScheme}};t.ApplicationEnvironment=m,t.ApplicationEnvironment=m=o([(0,c.injectable)(),a(0,(0,c.inject)(h.IPlatformService)),a(1,(0,c.inject)(f.IPathUtils)),a(2,(0,c.inject)(f.ICurrentProcess))],m)},17850:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationShell=void 0;const i=n(25891),o=n(54980),s=n(61905);let a=class{get onDidChangeWindowState(){return o.window.onDidChangeWindowState}showInformationMessage(e,t,...n){return o.window.showInformationMessage(e,t,...n)}showWarningMessage(e,t,...n){return o.window.showWarningMessage(e,t,...n)}showErrorMessage(e,t,...n){return o.window.showErrorMessage(e,t,...n)}showQuickPick(e,t,n){return o.window.showQuickPick(e,t,n)}showOpenDialog(e){return o.window.showOpenDialog(e)}showSaveDialog(e){return o.window.showSaveDialog(e)}showInputBox(e,t){return o.window.showInputBox(e,t)}showTextDocument(e,t,n){return o.window.showTextDocument(e,t,n)}openUrl(e){o.env.openExternal(o.Uri.parse(e))}setStatusBarMessage(e,t){return o.window.setStatusBarMessage(e,t)}createStatusBarItem(e,t,n){return n?o.window.createStatusBarItem(n,e,t):o.window.createStatusBarItem(e,t)}showWorkspaceFolderPick(e){return o.window.showWorkspaceFolderPick(e)}withProgress(e,t){return o.window.withProgress(e,t)}withProgressCustomIcon(e,t){const n=(new o.CancellationTokenSource).token,r=this.createStatusBarItem(o.StatusBarAlignment.Left),i={report:t=>{r.text=`${e} ${t.message}`}};return r.show(),t(i,n).then((e=>(r.dispose(),e)))}createQuickPick(){return o.window.createQuickPick()}createInputBox(){return o.window.createInputBox()}createTreeView(e,t){return o.window.createTreeView(e,t)}createOutputChannel(e){return o.window.createOutputChannel(e,{log:!0})}createLanguageStatusItem(e,t){return o.languages.createLanguageStatusItem(e,t)}get onDidWriteTerminalData(){try{return o.window.onDidWriteTerminalData}catch(e){return(0,s.traceError)("Failed to get proposed API onDidWriteTerminalData",e),(new o.EventEmitter).event}}get onDidExecuteTerminalCommand(){try{return o.window.onDidExecuteTerminalCommand}catch(e){return void(0,s.traceError)("Failed to get proposed API TerminalExecutedCommand",e)}}};t.ApplicationShell=a,t.ApplicationShell=a=r([(0,i.injectable)()],a)},99382:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ClipboardService=void 0;const i=n(25891),o=n(54980);let s=class{async readText(){return o.env.clipboard.readText()}async writeText(e){await o.env.clipboard.writeText(e)}};t.ClipboardService=s,t.ClipboardService=s=r([(0,i.injectable)()],s)},36418:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandManager=void 0;const i=n(25891),o=n(54980);let s=class{registerCommand(e,t,n){return o.commands.registerCommand(e,t,n)}registerTextEditorCommand(e,t,n){return o.commands.registerTextEditorCommand(e,t,n)}executeCommand(e,...t){return o.commands.executeCommand(e,...t)}getCommands(e){return o.commands.getCommands(e)}};t.CommandManager=s,t.CommandManager=s=r([(0,i.injectable)()],s)},54083:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePythonFileCommandHandler=void 0;const o=n(25891),s=n(552),a=n(54661),c=n(51535),l=n(53322),u=n(86156);let p=class{constructor(e,t,n,r){this.commandManager=e,this.workspaceService=t,this.appShell=n,this.disposables=r,this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!0}}async activate(){this.disposables.push(this.commandManager.registerCommand(s.Commands.CreateNewFile,this.createPythonFile,this))}async createPythonFile(){const e=await this.workspaceService.openTextDocument({language:"python"});this.appShell.showTextDocument(e),(0,c.sendTelemetryEvent)(l.EventName.CREATE_NEW_FILE_COMMAND)}};t.CreatePythonFileCommandHandler=p,t.CreatePythonFileCommandHandler=p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ICommandManager)),i(1,(0,o.inject)(a.IWorkspaceService)),i(2,(0,o.inject)(a.IApplicationShell)),i(3,(0,o.inject)(u.IDisposableRegistry))],p)},19329:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReloadVSCodeCommandHandler=void 0;const o=n(25891),s=n(14152),a=n(98803),c=n(54661);let l=class{constructor(e,t){this.commandManager=e,this.appShell=t,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0}}async activate(){this.commandManager.registerCommand("python.reloadVSCode",this.onReloadVSCode,this)}async onReloadVSCode(e){await this.appShell.showInformationMessage(e,s.Common.reload)===s.Common.reload&&this.commandManager.executeCommand("workbench.action.reloadWindow").then(a.noop,a.noop)}};t.ReloadVSCodeCommandHandler=l,t.ReloadVSCodeCommandHandler=l=r([(0,o.injectable)(),i(0,(0,o.inject)(c.ICommandManager)),i(1,(0,o.inject)(c.IApplicationShell))],l)},40205:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReportIssueCommandHandler=void 0;const c=s(n(70857)),l=s(n(16928)),u=n(25891),p=n(2543),d=s(n(25943)),h=n(54661),f=n(84090),v=n(29413),m=n(552),g=n(86156),y=n(51535),b=n(53322),_=n(25297),E=n(41414),S=n(79985),w=n(34467);let P=class{constructor(e,t,n,r,i){var o,s,a;this.commandManager=e,this.workspaceService=t,this.interpreterService=n,this.configurationService=r,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0},this.argSettingsPath=l.join(f.EXTENSION_ROOT_DIR,"resources","report_issue_user_settings.json"),this.templatePath=l.join(f.EXTENSION_ROOT_DIR,"resources","report_issue_template.md"),this.userDataTemplatePath=l.join(f.EXTENSION_ROOT_DIR,"resources","report_issue_user_data_template.md"),this.packageJSONSettings=null===(a=null===(s=null===(o=i.packageJson)||void 0===o?void 0:o.contributes)||void 0===s?void 0:s.configuration)||void 0===a?void 0:a.properties}async activate(){this.commandManager.registerCommand(m.Commands.ReportIssue,this.openReportIssue,this)}async openReportIssue(){var e,t,n,r;const i=this.configurationService.getSettings(),o=JSON.parse(await d.readFile(this.argSettingsPath,"utf8"));let s="";Object.keys(i).forEach((e=>{const t=o[e];if(t)if("object"==typeof t){let n=!1;const r=i[e];"object"==typeof r&&Object.keys(t).forEach((i=>{const o=t[i];if(o){const t=this.getDefaultValue(`${e}.${i}`);if(void 0===t||!(0,p.isEqual)(t,r[i])){n||(s=s.concat(c.EOL,e,c.EOL),n=!0);const t=!0===o?JSON.stringify(r[i]):'"<placeholder>"';s=s.concat(" ",i,": ",t,c.EOL)}}}))}else{const n=this.getDefaultValue(e);if(void 0===n||!(0,p.isEqual)(n,i[e])){const n=!0===t?JSON.stringify(i[e]):'"<placeholder>"';s=s.concat(c.EOL,e,": ",n,c.EOL)}}}));const a=await d.readFile(this.templatePath,"utf8"),l=await d.readFile(this.userDataTemplatePath,"utf8"),u=await this.interpreterService.getActiveInterpreter(),h=null!==(t=null===(e=null==u?void 0:u.version)||void 0===e?void 0:e.raw)&&void 0!==t?t:"",f=this.workspaceService.getConfiguration("python").get("languageServer")||"Not Found",v=(null==u?void 0:u.envType)||_.EnvironmentType.Unknown,m=(null!==(r=null===(n=this.workspaceService.workspaceFolders)||void 0===n?void 0:n.length)&&void 0!==r?r:0)>1&&""!==s?`Multiroot scenario, following user settings may not apply:${c.EOL}`:"",g=(0,w.getExtensions)().filter((e=>!e.id.startsWith("vscode."))).sort(((e,t)=>e.packageJSON.name&&t.packageJSON.name?e.packageJSON.name.localeCompare(t.packageJSON.name):e.id.localeCompare(t.id))).map((e=>{let t=e.packageJSON.publisher;return t&&(t=t.substring(0,3)),`|${e.packageJSON.name}|${t}|${e.packageJSON.version}|`}));await this.commandManager.executeCommand("workbench.action.openIssueReporter",{extensionId:"ms-python.python",issueBody:a,data:l.format(h,v,f,m,s,g.join("\n"))}),(0,y.sendTelemetryEvent)(b.EventName.USE_REPORT_ISSUE_COMMAND,void 0,{})}getDefaultValue(e){var t;if(!this.packageJSONSettings)return;const n=E.PythonSettings.getSettingsUriAndTarget(void 0,this.workspaceService).uri;return new S.SystemVariables(n,void 0,this.workspaceService).resolveAny(null===(t=this.packageJSONSettings[`python.${e}`])||void 0===t?void 0:t.default)}};t.ReportIssueCommandHandler=P,t.ReportIssueCommandHandler=P=o([(0,u.injectable)(),a(0,(0,u.inject)(h.ICommandManager)),a(1,(0,u.inject)(h.IWorkspaceService)),a(2,(0,u.inject)(v.IInterpreterService)),a(3,(0,u.inject)(g.IConfigurationService)),a(4,(0,u.inject)(h.IApplicationEnvironment))],P)},55597:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextKeyManager=void 0;const o=n(25891),s=n(54661);let a=class{constructor(e){this.commandManager=e,this.values=new Map}async setContext(e,t){return this.values.get(e)===t?Promise.resolve():(this.values.set(e,t),this.commandManager.executeCommand("setContext",e,t))}};t.ContextKeyManager=a,t.ContextKeyManager=a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.ICommandManager))],a)},19419:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionContextKey=void 0,function(e){e.showInstallPythonTile="showInstallPythonTile",e.HasFailedTests="hasFailedTests",e.RefreshingTests="refreshingTests",e.IsJupyterInstalled="isJupyterInstalled"}(n||(t.ExtensionContextKey=n={}))},49044:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugService=void 0;const o=n(25891),s=n(54980);let a=r=class{get activeDebugConsole(){return s.debug.activeDebugConsole}get activeDebugSession(){return s.debug.activeDebugSession}get breakpoints(){return s.debug.breakpoints}get onDidChangeActiveDebugSession(){return s.debug.onDidChangeActiveDebugSession}get onDidStartDebugSession(){return s.debug.onDidStartDebugSession}get onDidReceiveDebugSessionCustomEvent(){return s.debug.onDidReceiveDebugSessionCustomEvent}get onDidTerminateDebugSession(){return s.debug.onDidTerminateDebugSession}get onDidChangeBreakpoints(){return s.debug.onDidChangeBreakpoints}registerDebugConfigurationProvider(e,t){return s.debug.registerDebugConfigurationProvider(e,t)}registerDebugAdapterTrackerFactory(e,t){return s.debug.registerDebugAdapterTrackerFactory(e,t)}startDebugging(e,t,n){return s.debug.startDebugging(e,t,n)}addBreakpoints(e){s.debug.addBreakpoints(e)}removeBreakpoints(e){s.debug.removeBreakpoints(e)}registerDebugAdapterDescriptorFactory(e,t){return s.debug.registerDebugAdapterDescriptorFactory(e,t)}};t.DebugService=a,a.instance=new r,t.DebugService=a=r=i([(0,o.injectable)()],a)},51536:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentManager=void 0;const i=n(25891),o=n(54980);let s=class{get textDocuments(){return o.workspace.textDocuments}get activeTextEditor(){return o.window.activeTextEditor}get visibleTextEditors(){return o.window.visibleTextEditors}get onDidChangeActiveTextEditor(){return o.window.onDidChangeActiveTextEditor}get onDidChangeTextDocument(){return o.workspace.onDidChangeTextDocument}get onDidChangeVisibleTextEditors(){return o.window.onDidChangeVisibleTextEditors}get onDidChangeTextEditorSelection(){return o.window.onDidChangeTextEditorSelection}get onDidChangeTextEditorOptions(){return o.window.onDidChangeTextEditorOptions}get onDidChangeTextEditorViewColumn(){return o.window.onDidChangeTextEditorViewColumn}get onDidOpenTextDocument(){return o.workspace.onDidOpenTextDocument}get onDidCloseTextDocument(){return o.workspace.onDidCloseTextDocument}get onDidSaveTextDocument(){return o.workspace.onDidSaveTextDocument}showTextDocument(e,t,n){return o.window.showTextDocument(e,t,n)}openTextDocument(e){return o.workspace.openTextDocument(e)}applyEdit(e){return o.workspace.applyEdit(e)}createTextEditorDecorationType(e){return o.window.createTextEditorDecorationType(e)}};t.DocumentManager=s,t.DocumentManager=s=r([(0,i.injectable)()],s)},90256:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions=void 0;const c=n(25891),l=n(54980),u=s(n(5031)),p=s(n(16928)),d=n(22408),h=n(552);let f=class{constructor(e){this.fs=e}get all(){return l.extensions.all}get onDidChange(){return l.extensions.onDidChange}getExtension(e){return l.extensions.getExtension(e)}get cachedExtensions(){return this._cachedExtensions||(this._cachedExtensions=l.extensions.all,l.extensions.onDidChange((()=>{this._cachedExtensions=l.extensions.all}))),this._cachedExtensions}async determineExtensionFromCallStack(){const{stack:e}=new Error;if(e){const t=p.join(h.EXTENSION_ROOT_DIR.toLowerCase(),p.sep),n=e.split("\n").map((e=>{const t=/\((.*)\)/.exec(e);if(t)return t[1]})).filter((e=>e&&!e.toLowerCase().startsWith(t))).filter((e=>this.cachedExtensions.some((t=>e.includes(t.extensionUri.path)||e.includes(t.extensionUri.fsPath)))));u.parse(new Error("Ex")).forEach((e=>{const r=e.getFileName();r&&!r.toLowerCase().startsWith(t)&&n.push(r)}));for(const e of n){let t=p.dirname(e),n=e;for(;t&&t.length<n.length;){const e=p.join(t,"package.json");if(await this.fs.pathExists(e)){const t=await this.fs.readFile(e);try{const e=JSON.parse(t);return{extensionId:`${e.publisher}.${e.name}`,displayName:e.displayName}}catch(e){}}n=t,t=p.dirname(t)}}}return{extensionId:"unknown",displayName:"unknown"}}};t.Extensions=f,t.Extensions=f=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IFileSystem))],f)},44137:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageService=void 0;const i=n(25891),o=n(54980);let s=class{registerCompletionItemProvider(e,t,...n){return o.languages.registerCompletionItemProvider(e,t,...n)}};t.LanguageService=s,t.LanguageService=s=r([(0,i.injectable)()],s)},69922:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressService=void 0;const r=n(7855);t.ProgressService=class{constructor(e){this.shell=e}showProgress(e){this.deferred||this.createProgress(e)}hideProgress(){this.deferred&&(this.deferred.resolve(),this.deferred=void 0)}createProgress(e){this.shell.withProgress(e,(()=>(this.deferred=(0,r.createDeferred)(),this.deferred.promise)))}}},22099:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalManager=void 0;const i=n(25891),o=n(54980),s=n(61905);let a=class{constructor(){this.didOpenTerminal=new o.EventEmitter,o.window.onDidOpenTerminal((e=>{this.didOpenTerminal.fire(c(e))}))}get onDidCloseTerminal(){return o.window.onDidCloseTerminal}get onDidOpenTerminal(){return this.didOpenTerminal.event}createTerminal(e){return c(o.window.createTerminal(e))}onDidChangeTerminalShellIntegration(e){return o.window.onDidChangeTerminalShellIntegration(e)}onDidEndTerminalShellExecution(e){return o.window.onDidEndTerminalShellExecution(e)}};function c(e){if(!e.isPatched){const t=e.sendText.bind(e);e.sendText=(e,n=!0)=>((0,s.traceLog)(`Send text to terminal: ${e}`),t(e,n)),e.isPatched=!0}return e}t.TerminalManager=a,t.TerminalManager=a=r([(0,i.injectable)()],a)},54661:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IClipboard=t.IActiveResourceService=t.ILanguageService=t.IApplicationEnvironment=t.IDebugService=t.ITerminalManager=t.IWorkspaceService=t.IDocumentManager=t.IJupyterExtensionDependencyManager=t.IContextKeyManager=t.ICommandManager=t.IApplicationShell=void 0,t.IApplicationShell=Symbol("IApplicationShell"),t.ICommandManager=Symbol("ICommandManager"),t.IContextKeyManager=Symbol("IContextKeyManager"),t.IJupyterExtensionDependencyManager=Symbol("IJupyterExtensionDependencyManager"),t.IDocumentManager=Symbol("IDocumentManager"),t.IWorkspaceService=Symbol("IWorkspaceService"),t.ITerminalManager=Symbol("ITerminalManager"),t.IDebugService=Symbol("IDebugManager"),t.IApplicationEnvironment=Symbol("IApplicationEnvironment"),t.ILanguageService=Symbol("ILanguageService"),t.IActiveResourceService=Symbol("IActiveResourceService"),t.IClipboard=Symbol("IClipboard")},2761:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PythonWelcome=void 0,function(e){e.name="pythonWelcome",e.windowsInstallId="python.installPythonWin8",e.linuxInstallId="python.installPythonLinux",e.macOSInstallId="python.installPythonMac"}(n||(t.PythonWelcome=n={}))},68397:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceService=void 0;const a=n(25891),c=s(n(16928)),l=n(54980),u=n(48112);let p=class{get onDidChangeConfiguration(){return l.workspace.onDidChangeConfiguration}get rootPath(){return Array.isArray(l.workspace.workspaceFolders)&&l.workspace.workspaceFolders.length>0?l.workspace.workspaceFolders[0].uri.fsPath:void 0}get workspaceFolders(){return l.workspace.workspaceFolders}get onDidChangeWorkspaceFolders(){return l.workspace.onDidChangeWorkspaceFolders}get workspaceFile(){return l.workspace.workspaceFile}getConfiguration(e,t,n=!1){return n?l.workspace.getConfiguration(e,{uri:t,languageId:"python"}):l.workspace.getConfiguration(e,t)}getWorkspaceFolder(e){return e?l.workspace.getWorkspaceFolder(e):void 0}asRelativePath(e,t){return l.workspace.asRelativePath(e,t)}createFileSystemWatcher(e,t,n,r){return l.workspace.createFileSystemWatcher(e,t,n,r)}findFiles(e,t,n,r){const i=void 0===t?this.searchExcludes:t;return l.workspace.findFiles(e,i,n,r)}getWorkspaceFolderIdentifier(e,t=""){const n=e?l.workspace.getWorkspaceFolder(e):void 0;return n?c.normalize((0,u.getOSType)()===u.OSType.Windows?n.uri.fsPath.toUpperCase():n.uri.fsPath):t}get isVirtualWorkspace(){return!(!l.workspace.workspaceFolders||!l.workspace.workspaceFolders.every((e=>"file"!==e.uri.scheme)))}get isTrusted(){return l.workspace.isTrusted}get onDidGrantWorkspaceTrust(){return l.workspace.onDidGrantWorkspaceTrust}openTextDocument(e){return l.workspace.openTextDocument(e)}get searchExcludes(){const e=this.getConfiguration("search.exclude");return`{${Object.keys(e).filter((t=>!0===e.get(t))).join(",")}}`}async save(e){try{return await l.workspace.save(e)}catch(e){return}}};t.WorkspaceService=p,t.WorkspaceService=p=o([(0,a.injectable)()],p)},7854:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Cancellation=t.wrapCancellationTokens=t.createPromiseFromCancellation=t.CancellationError=void 0;const s=n(54980),a=n(7855),c=o(n(14152));class l extends Error{constructor(){super(c.Common.canceled)}static isCancellationError(e){return e instanceof l||e instanceof s.CancellationError}}var u;t.CancellationError=l,t.createPromiseFromCancellation=function(e){return new Promise(((t,n)=>{e.token&&e.token.onCancellationRequested((()=>{if(e.token.isCancellationRequested){if("resolve"===e.cancelAction)return t(e.defaultValue);if("reject"===e.cancelAction)return n(new l)}}))}))},t.wrapCancellationTokens=function(...e){const t=new s.CancellationTokenSource;for(const n of e)if(n){if(n.isCancellationRequested)return n;n.onCancellationRequested((()=>t.cancel()))}return t.token},function(e){function t(e){return!!e&&e.isCancellationRequested}e.race=function(e,t){if(t){const n=(0,a.createDeferred)();return t.onCancellationRequested((()=>{n.completed||n.reject(new l)})),t.isCancellationRequested?n.reject(new l):e(t).then((e=>{n.completed||n.resolve(e)})).catch((e=>{n.completed||n.reject(e)})),n.promise}return e()},e.isCanceled=t,e.throwIfCanceled=function(e){if(t(e))throw new l}}(u||(t.Cancellation=u={}))},41414:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonSettings=void 0;const a=s(n(16928)),c=s(n(79896)),l=n(54980),u=n(11925);n(87295);const p=n(51535),d=n(53322),h=n(63999),f=n(68397),v=n(552),m=n(68989),g=n(79985),y=n(48112),b=n(65900);class _{get onDidChange(){return this.changed.event}static onConfigChange(){return _.configChanged.event}get pythonPath(){return this._pythonPath}set pythonPath(e){if(this._pythonPath!==e)try{this._pythonPath=this.getPythonExecutable(e)}catch(t){this._pythonPath=e}}get defaultInterpreterPath(){return this._defaultInterpreterPath}set defaultInterpreterPath(e){if(this._defaultInterpreterPath!==e)try{this._defaultInterpreterPath=this.getPythonExecutable(e)}catch(t){this._defaultInterpreterPath=e}}constructor(e,t,n,r,i,o){this.interpreterAutoSelectionService=t,this.interpreterPathService=r,this.defaultLS=i,this.extensions=o,this.envFile="",this.venvPath="",this.venvFolders=[],this.activeStateToolPath="",this.condaPath="",this.pipenvPath="",this.poetryPath="",this.pixiToolPath="",this.devOptions=[],this.globalModuleInstallation=!1,this.languageServer=u.LanguageServerType.Node,this.languageServerIsDefault=!0,this.changed=new l.EventEmitter,this.disposables=[],this._pythonPath="python",this._defaultInterpreterPath="",this.workspace=n||new f.WorkspaceService,this.workspaceRoot=e,this.initialize()}static getInstance(e,t,n,r,i,o){n=n||new f.WorkspaceService;const s=_.getSettingsUriAndTarget(e,n).uri,a=s?s.fsPath:"";if(!_.pythonSettings.has(a)){const c=new _(s,t,n,r,i,o);_.pythonSettings.set(a,c),c.onDidChange((e=>_.debounceConfigChangeNotification(e)));const l=n.getConfiguration("editor",e||null),u=!!l&&l.get("formatOnType",!1);(0,p.sendTelemetryEvent)(d.EventName.FORMAT_ON_TYPE,void 0,{enabled:u})}return _.pythonSettings.get(a)}static debounceConfigChangeNotification(e){_.configChanged.fire(e)}static getSettingsUriAndTarget(e,t){t=t||new f.WorkspaceService;const n=e?t.getWorkspaceFolder(e):void 0;let r=n?n.uri:void 0;return!r&&Array.isArray(t.workspaceFolders)&&t.workspaceFolders.length>0&&(r=t.workspaceFolders[0].uri),{uri:r,target:r?l.ConfigurationTarget.WorkspaceFolder:l.ConfigurationTarget.Global}}static dispose(){if(!(0,v.isTestExecution)())throw new Error("Dispose can only be called from unit tests");_.pythonSettings.forEach((e=>e&&e.dispose())),_.pythonSettings.clear()}static toSerializable(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;n.includes("Manager")||n.includes("Service")||n.includes("onDid")||(t[n]=r)})),t}dispose(){this.disposables.forEach((e=>e&&e.dispose())),this.disposables=[]}update(e){var t,n,r,i,o;const s=null===(t=this.workspaceRoot)||void 0===t?void 0:t.fsPath,a=new g.SystemVariables(void 0,s,this.workspace);this.pythonPath=this.getPythonPath(a,s);const c=a.resolveAny(e.get("defaultInterpreterPath"));if(this.defaultInterpreterPath=c||v.DEFAULT_INTERPRETER_SETTING,this.defaultInterpreterPath===v.DEFAULT_INTERPRETER_SETTING){const e=this.interpreterAutoSelectionService.getAutoSelectedInterpreter(this.workspaceRoot);this.defaultInterpreterPath=null!==(n=null==e?void 0:e.path)&&void 0!==n?n:this.defaultInterpreterPath}this.defaultInterpreterPath=E(this.defaultInterpreterPath,s),this.venvPath=a.resolveAny(e.get("venvPath")),this.venvFolders=a.resolveAny(e.get("venvFolders"));const l=a.resolveAny(e.get("activeStateToolPath"));this.activeStateToolPath=l&&l.length>0?E(l,s):l;const p=a.resolveAny(e.get("condaPath"));this.condaPath=p&&p.length>0?E(p,s):p;const d=a.resolveAny(e.get("pipenvPath"));this.pipenvPath=d&&d.length>0?E(d,s):d;const f=a.resolveAny(e.get("poetryPath"));this.poetryPath=f&&f.length>0?E(f,s):f;const m=a.resolveAny(e.get("pixiToolPath"));this.pixiToolPath=m&&m.length>0?E(m,s):m,this.interpreter=null!==(r=e.get("interpreter"))&&void 0!==r?r:{infoVisibility:"onPythonRelated"};let y=e.get("languageServer");y=a.resolveAny(y),y&&"Default"!==y&&"Microsoft"!==y&&Object.values(u.LanguageServerType).includes(y)?"JediLSP"===y?(this.languageServer=u.LanguageServerType.Jedi,this.languageServerIsDefault=!1):(this.languageServer=y,this.languageServerIsDefault=!1):(this.extensions.getExtension(v.PYREFLY_EXTENSION_ID)&&!0!==e.get("pyrefly.disableLanguageServices")?this.languageServer=u.LanguageServerType.None:this.languageServer=null!==(o=null===(i=this.defaultLS)||void 0===i?void 0:i.defaultLSType)&&void 0!==o?o:u.LanguageServerType.None,this.languageServerIsDefault=!0);const b=a.resolveAny(e.get("autoComplete"));this.autoComplete?Object.assign(this.autoComplete,b):this.autoComplete=b;const _=e.get("envFile");this.envFile=a.resolveAny(_),(0,h.sendSettingTelemetry)(this.workspace,_),this.devOptions=a.resolveAny(e.get("devOptions")),this.devOptions=Array.isArray(this.devOptions)?this.devOptions:[],this.globalModuleInstallation=!0===e.get("globalModuleInstallation");const S=a.resolveAny(e.get("testing"));this.testing?Object.assign(this.testing,S):(this.testing=S,(0,v.isTestExecution)()&&!this.testing&&(this.testing={pytestArgs:[],unittestArgs:[],promptToConfigure:!0,debugPort:3e3,pytestEnabled:!1,unittestEnabled:!1,pytestPath:"pytest",autoTestDiscoverOnSaveEnabled:!0,autoTestDiscoverOnSavePattern:"**/*.py"})),this.testing=this.testing?this.testing:{promptToConfigure:!0,debugPort:3e3,pytestArgs:[],pytestEnabled:!1,pytestPath:"pytest",unittestArgs:[],unittestEnabled:!1,autoTestDiscoverOnSaveEnabled:!0,autoTestDiscoverOnSavePattern:"**/*.py"},this.testing.pytestPath=E(a.resolveAny(this.testing.pytestPath),s),this.testing.cwd&&(this.testing.cwd=E(a.resolveAny(this.testing.cwd),s)),this.testing.pytestArgs=this.testing.pytestArgs.map((e=>a.resolveAny(e))),this.testing.unittestArgs=this.testing.unittestArgs.map((e=>a.resolveAny(e)));const w=a.resolveAny(e.get("terminal"));this.terminal?Object.assign(this.terminal,w):(this.terminal=w,(0,v.isTestExecution)()&&!this.terminal&&(this.terminal={})),this.terminal=this.terminal?this.terminal:{executeInFileDir:!0,focusAfterLaunch:!1,launchArgs:[],activateEnvironment:!0,activateEnvInCurrentTerminal:!1,shellIntegration:{enabled:!1}},this.REPL=e.get("REPL");const P=e.get("experiments");this.experiments?Object.assign(this.experiments,P):this.experiments=P,this.experiments=this.experiments?this.experiments:{enabled:!0,optInto:[],optOutFrom:[]}}getPythonExecutable(e){return function(e){if("python"===(e=(0,b.untildify)(e))||-1===e.indexOf(a.sep)||a.basename(e)===a.dirname(e))return e;if(S(e))return e;const t=["python","python4","python3.6","python3.5","python3","python2.7","python2","python3.7","python3.8","python3.9"];for(let n of t)if((0,y.isWindows)()){if(n=`${n}.exe`,S(a.join(e,n)))return a.join(e,n);if(S(a.join(e,"Scripts",n)))return a.join(e,"Scripts",n)}else{if(S(a.join(e,n)))return a.join(e,n);if(S(a.join(e,"bin",n)))return a.join(e,"bin",n)}return e}(e)}onWorkspaceFoldersChanged(){const e=this.workspace.workspaceFolders.map((e=>e.uri.fsPath)),t=Array.from(_.pythonSettings.keys()).filter((t=>e.indexOf(t)<0));if(t.length>0)for(const e of t)_.pythonSettings.delete(e)}register(){_.pythonSettings=new Map,this.initialize()}onDidChanged(e){const t=this.workspace.getConfiguration("python",this.workspaceRoot);this.update(t),this.debounceChangeNotification(e)}initialize(){this.disposables.push(this.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this)),this.disposables.push(this.interpreterAutoSelectionService.onDidChangeAutoSelectedInterpreter((()=>{this.onDidChanged()}))),this.disposables.push(this.workspace.onDidChangeConfiguration((e=>{e.affectsConfiguration("python")&&this.onDidChanged(e)}))),this.interpreterPathService&&this.disposables.push(this.interpreterPathService.onDidChange((()=>{this.onDidChanged()})));const e=this.workspace.getConfiguration("python",this.workspaceRoot);e&&this.update(e)}debounceChangeNotification(e){this.changed.fire(e)}getPythonPath(e,t){if(this.pythonPath=e.resolveAny(this.interpreterPathService.get(this.workspaceRoot)),!process.env.CI_DISABLE_AUTO_SELECTION&&(0===this.pythonPath.length||"python"===this.pythonPath)&&this.interpreterAutoSelectionService){const e=this.interpreterAutoSelectionService.getAutoSelectedInterpreter(this.workspaceRoot);e&&(this.pythonPath=e.path,this.workspaceRoot&&this.interpreterAutoSelectionService.setWorkspaceInterpreter(this.workspaceRoot,e).ignoreErrors())}return E(this.pythonPath,t)}}function E(e,t){return t||(t=__dirname),e=(0,b.untildify)(e),(0,v.isTestExecution)()&&!e?t:-1===e.indexOf(a.sep)||a.isAbsolute(e)?e:a.resolve(t,e)}function S(e){return c.existsSync(e)&&a.basename((0,y.getOSType)()===y.OSType.Windows?e.toLowerCase():e).startsWith("python")}t.PythonSettings=_,_.pythonSettings=new Map,_.configChanged=new l.EventEmitter,o([(0,m.debounceSync)(1)],_.prototype,"debounceChangeNotification",null),o([(0,m.debounceSync)(1)],_,"debounceConfigChangeNotification",null)},21590:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvExecutionPath=void 0;const o=n(25891),s=n(86156);let a=class{constructor(e){this.configService=e}get executable(){return this.configService.getSettings().pipenvPath}};t.PipEnvExecutionPath=a,t.PipEnvExecutionPath=a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IConfigurationService))],a)},84599:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationService=void 0;const o=n(25891),s=n(54980),a=n(23167),c=n(9100),l=n(54661),u=n(41414),p=n(552),d=n(86156);let h=class{constructor(e){this.serviceContainer=e,this.workspaceService=this.serviceContainer.get(l.IWorkspaceService)}get onDidChange(){return u.PythonSettings.onConfigChange()}getSettings(e){const t=this.serviceContainer.get(a.IInterpreterAutoSelectionService),n=this.serviceContainer.get(d.IInterpreterPathService),r=this.serviceContainer.tryGet(d.IDefaultLanguageServer),i=this.serviceContainer.get(d.IExtensions);return u.PythonSettings.getInstance(e,t,this.workspaceService,n,r,i)}async updateSectionSetting(e,t,n,r,i){let o={uri:r,target:i||s.ConfigurationTarget.WorkspaceFolder};"python"===e&&i!==s.ConfigurationTarget.Global&&(o=u.PythonSettings.getSettingsUriAndTarget(r,this.workspaceService)),i=i||o.target;const a=this.workspaceService.getConfiguration(e,o.uri),c=a.inspect(t);void 0!==c&&(i===s.ConfigurationTarget.Global&&c.globalValue===n||i===s.ConfigurationTarget.Workspace&&c.workspaceValue===n||i===s.ConfigurationTarget.WorkspaceFolder&&c.workspaceFolderValue===n)||(await a.update(t,n,i),await this.verifySetting(a,i,t,n))}async updateSetting(e,t,n,r){return this.updateSectionSetting("python",e,t,n,r)}isTestExecution(){return"1"===process.env.VSC_PYTHON_CI_TEST}async verifySetting(e,t,n,r){if(this.isTestExecution()&&!(0,p.isUnitTestExecution)()){let i=0;do{const o=e.inspect(n);if(!o&&void 0===r)break;if(o&&void 0!==r){let e;if(e=t===s.ConfigurationTarget.Global?o.globalValue:t===s.ConfigurationTarget.Workspace?o.workspaceValue:o.workspaceFolderValue,e===r)break}await new Promise((e=>setTimeout(e,250))),i+=1}while(i<20)}}};t.ConfigurationService=h,t.ConfigurationService=h=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer))],h)},552:function(e,t,n){"use strict";var r,i,o,s,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),c=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};function l(){return"1"===process.env.VSC_PYTHON_UNIT_TEST}Object.defineProperty(t,"__esModule",{value:!0}),t.UseProposedApi=t.isUnitTestExecution=t.isTestExecution=t.isCI=t.DEFAULT_INTERPRETER_SETTING=t.ThemeIcons=t.Octicons=t.Commands=t.CommandSource=t.AppinsightsKey=t.TENSORBOARD_EXTENSION_ID=t.JUPYTER_EXTENSION_ID=t.PYREFLY_EXTENSION_ID=t.PYLANCE_EXTENSION_ID=t.PVSC_EXTENSION_ID=t.PYTHON_NOTEBOOKS=t.PYTHON=t.InteractiveScheme=t.InteractiveInputScheme=t.NotebookCellScheme=t.PYTHON_WARNINGS=t.PYTHON_LANGUAGE=void 0,t.PYTHON_LANGUAGE="python",t.PYTHON_WARNINGS="PYTHONWARNINGS",t.NotebookCellScheme="vscode-notebook-cell",t.InteractiveInputScheme="vscode-interactive-input",t.InteractiveScheme="vscode-interactive",t.PYTHON=[{scheme:"file",language:t.PYTHON_LANGUAGE},{scheme:"untitled",language:t.PYTHON_LANGUAGE},{scheme:"vscode-notebook",language:t.PYTHON_LANGUAGE},{scheme:t.NotebookCellScheme,language:t.PYTHON_LANGUAGE},{scheme:t.InteractiveInputScheme,language:t.PYTHON_LANGUAGE}],t.PYTHON_NOTEBOOKS=[{scheme:"vscode-notebook",language:t.PYTHON_LANGUAGE},{scheme:t.NotebookCellScheme,language:t.PYTHON_LANGUAGE},{scheme:t.InteractiveInputScheme,language:t.PYTHON_LANGUAGE}],t.PVSC_EXTENSION_ID="ms-python.python",t.PYLANCE_EXTENSION_ID="ms-python.vscode-pylance",t.PYREFLY_EXTENSION_ID="meta.pyrefly",t.JUPYTER_EXTENSION_ID="ms-toolsai.jupyter",t.TENSORBOARD_EXTENSION_ID="ms-toolsai.tensorboard",t.AppinsightsKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",function(e){e.ui="ui",e.commandPalette="commandpalette"}(r||(t.CommandSource=r={})),function(e){e.ClearStorage="python.clearCacheAndReload",e.CreateNewFile="python.createNewFile",e.ClearWorkspaceInterpreter="python.clearWorkspaceInterpreter",e.Create_Environment="python.createEnvironment",e.CopyTestId="python.copyTestId",e.Create_Environment_Button="python.createEnvironment-button",e.Create_Environment_Check="python.createEnvironmentCheck",e.Create_Terminal="python.createTerminal",e.Debug_In_Terminal="python.debugInTerminal",e.Exec_In_Terminal="python.execInTerminal",e.Exec_In_Terminal_Icon="python.execInTerminal-icon",e.Exec_In_Separate_Terminal="python.execInDedicatedTerminal",e.Exec_In_REPL="python.execInREPL",e.Exec_Selection_In_Django_Shell="python.execSelectionInDjangoShell",e.Exec_In_REPL_Enter="python.execInREPLEnter",e.Exec_In_IW_Enter="python.execInInteractiveWindowEnter",e.Exec_Selection_In_Terminal="python.execSelectionInTerminal",e.GetSelectedInterpreterPath="python.interpreterPath",e.InstallJupyter="python.installJupyter",e.InstallPython="python.installPython",e.InstallPythonOnLinux="python.installPythonOnLinux",e.InstallPythonOnMac="python.installPythonOnMac",e.PickLocalProcess="python.pickLocalProcess",e.ReportIssue="python.reportIssue",e.Set_Interpreter="python.setInterpreter",e.Set_ShebangInterpreter="python.setShebangInterpreter",e.Start_REPL="python.startREPL",e.Start_Native_REPL="python.startNativeREPL",e.Tests_Configure="python.configureTests",e.Tests_CopilotSetup="python.copilotSetupTests",e.TriggerEnvironmentSelection="python.triggerEnvSelection",e.ViewOutput="python.viewOutput"}(i||(t.Commands=i={})),function(e){e.Add="$(add)",e.Test_Pass="$(check)",e.Test_Fail="$(alert)",e.Test_Error="$(x)",e.Test_Skip="$(circle-slash)",e.Downloading="$(cloud-download)",e.Installing="$(desktop-download)",e.Search="$(search)",e.Search_Stop="$(search-stop)",e.Star="$(star-full)",e.Gear="$(gear)",e.Warning="$(warning)",e.Error="$(error)",e.Lightbulb="$(lightbulb)",e.Folder="$(folder)"}(o||(t.Octicons=o={})),function(e){e.Refresh="refresh",e.SpinningLoader="loading~spin"}(s||(t.ThemeIcons=s={})),t.DEFAULT_INTERPRETER_SETTING="python",t.isCI="true"===process.env.TRAVIS||void 0!==process.env.TF_BUILD||"true"===process.env.GITHUB_ACTIONS,t.isTestExecution=function(){return"1"===process.env.VSC_PYTHON_CI_TEST||l()},t.isUnitTestExecution=l,t.UseProposedApi=Symbol("USE_VSC_PROPOSED_API"),c(n(84090),t)},99663:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextKey=void 0,t.ContextKey=class{get value(){return this.lastValue}constructor(e,t){this.name=e,this.commandManager=t}async set(e){this.lastValue!==e&&(this.lastValue=e,await this.commandManager.executeCommand("setContext",this.name,this.lastValue))}}},76366:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorWithTelemetrySafeReason=t.ErrorUtils=void 0,t.ErrorUtils=class{static outputHasModuleNotInstalledError(e,t){return!(!t||!(t.indexOf(`No module named ${e}`)>0||t.indexOf(`No module named '${e}'`)>0))}};class n extends Error{constructor(e,t){super(e),this.telemetrySafeReason=t}}t.ErrorWithTelemetrySafeReason=n},45612:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleNotInstalledError=void 0;class n extends Error{constructor(e){super(`Module '${e}' not installed.`)}}t.ModuleNotInstalledError=n},94496:(e,t)=>{"use strict";var n,r,i,o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.EnableTestAdapterRewrite=t.DiscoveryUsingWorkers=t.TerminalEnvVarActivation=t.ShowToolsExtensionPrompt=t.ShowExtensionSurveyPrompt=void 0,function(e){e.experiment="pythonSurveyNotification"}(n||(t.ShowExtensionSurveyPrompt=n={})),function(e){e.experiment="pythonPromptNewToolsExt"}(r||(t.ShowToolsExtensionPrompt=r={})),function(e){e.experiment="pythonTerminalEnvVarActivation"}(i||(t.TerminalEnvVarActivation=i={})),function(e){e.experiment="pythonDiscoveryUsingWorkers"}(o||(t.DiscoveryUsingWorkers=o={})),function(e){e.experiment="pythonTestAdapter"}(s||(t.EnableTestAdapterRewrite=s={}))},8103:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inTerminalEnvVarExperiment=void 0;const r=n(54980),i=n(94496),o=n(552),s=n(61905);t.inTerminalEnvVarExperiment=function(e){return!(0,o.isTestExecution)()&&r.env.remoteName&&r.workspace.workspaceFolders&&r.workspace.workspaceFolders.length>1?((0,s.traceInfo)("Not enabling terminal env var experiment in multiroot remote workspaces"),!1):!!e.inExperimentSync(i.TerminalEnvVarActivation.experiment)}},169:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentService=void 0;const o=n(25891),s=n(54980),a=n(41566),c=n(61905),l=n(51535),u=n(53322),p=n(54661),d=n(552),h=n(86156),f=n(46885),v="vscode";let m=class{constructor(e,t,n){this.workspaceService=e,this.appEnvironment=t,this.persistentState=n,this._optInto=[],this._optOutFrom=[],this.experiments=this.persistentState.createGlobalPersistentState("VSCode.ABExp.FeatureData",{features:[]});const r=this.workspaceService.getConfiguration("python"),i=r.get("experiments.optInto")||[],o=r.get("experiments.optOutFrom")||[];if(this._optInto=i.filter((e=>!e.endsWith("control"))),this._optOutFrom=o.filter((e=>!e.endsWith("control"))),this._optOutFrom.includes("All")||!1===r.get("experiments.enabled")?this.enabled=!1:this.enabled=!0,!this.enabled)return;let s;s="insiders"===this.appEnvironment.channel?a.TargetPopulation.Insiders:a.TargetPopulation.Public;const c=new f.ExperimentationTelemetry;this.experimentationService=(0,a.getExperimentationService)(d.PVSC_EXTENSION_ID,this.appEnvironment.packageJson.version,s,c,this.experiments.storage)}async activate(){if(this.experimentationService){const e=Date.now();await this.experimentationService.initializePromise,0===this.experiments.value.features.length&&(await this.experimentationService.initialFetch,(0,l.sendTelemetryEvent)(u.EventName.PYTHON_EXPERIMENTS_INIT_PERFORMANCE,Date.now()-e)),this.logExperiments()}!function(e,t,n){const r=g("python.experiments.optInto",n),i=g("python.experiments.optOutFrom",n),o=e.filter((e=>r.includes(e))),s=t.filter((e=>i.includes(e)));JSON.stringify(o.sort()),(0,l.sendTelemetryEvent)(u.EventName.PYTHON_EXPERIMENTS_OPT_IN_OPT_OUT_SETTINGS,void 0,{optedInto:JSON.stringify(o.sort()),optedOutFrom:JSON.stringify(s.sort())})}(this._optInto,this._optOutFrom,this.appEnvironment.packageJson)}async inExperiment(e){return this.inExperimentSync(e)}inExperimentSync(e){return!!this.experimentationService&&(!this._optOutFrom.includes("All")&&!this._optOutFrom.includes(e)&&(this._optInto.includes("All")||this._optInto.includes(e)?(this.experimentationService.getTreatmentVariable(v,e),!0):!0===this.experimentationService.getTreatmentVariable(v,e)))}async getExperimentValue(e){if(this.experimentationService&&!this._optOutFrom.includes("All")&&!this._optOutFrom.includes(e))return this.experimentationService.getTreatmentVariable(v,e)}logExperiments(){const e=this.workspaceService.getConfiguration("telemetry");let t=!1;e&&!1===e.get("enableTelemetry")&&((0,c.traceLog)("Telemetry is disabled"),t=!0),e&&"off"===e.get("telemetryLevel")&&((0,c.traceLog)("Telemetry level is off"),t=!0),t&&(0,c.traceLog)("Experiments are disabled, only manually opted experiments are active."),this._optOutFrom.includes("All")?(0,c.traceLog)(s.l10n.t("Experiment '{0}' is inactive","All")):this._optInto.includes("All")?(0,c.traceLog)(s.l10n.t("Experiment '{0}' is active","All")):(this._optOutFrom.filter((e=>"All"!==e&&e.toLowerCase().startsWith("python"))).forEach((e=>{(0,c.traceLog)(s.l10n.t("Experiment '{0}' is inactive",e))})),this._optInto.filter((e=>"All"!==e&&e.toLowerCase().startsWith("python"))).forEach((e=>{(0,c.traceLog)(s.l10n.t("Experiment '{0}' is active",e))})),t||this.experiments.value.features.forEach((e=>{!e.toLowerCase().startsWith("python")||this._optOutFrom.includes(e)||this._optInto.includes(e)||(0,c.traceLog)(s.l10n.t("Experiment '{0}' is active",e))})))}};function g(e,t){var n;const r=t.contributes.configuration.properties[e];return r&&null!==(n=r.items.enum)&&void 0!==n?n:[]}t.ExperimentService=m,t.ExperimentService=m=r([(0,o.injectable)(),i(0,(0,o.inject)(p.IWorkspaceService)),i(1,(0,o.inject)(p.IApplicationEnvironment)),i(2,(0,o.inject)(h.IPersistentStateFactory))],m)},46885:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationTelemetry=void 0;const r=n(51535);t.ExperimentationTelemetry=class{setSharedProperty(e,t){(0,r.setSharedProperty)(e,t)}postEvent(e,t){const n={};t.forEach(((e,t)=>{n[t]=e})),(0,r.sendTelemetryEvent)(e,void 0,n)}}},87295:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),String.prototype.toCommandArgumentForPythonExt=function(){return this?!(this.indexOf(" ")>=0||this.indexOf("&")>=0||this.indexOf("(")>=0||this.indexOf(")")>=0)||this.startsWith('"')||this.endsWith('"')?this.toString():`"${this}"`:this},String.prototype.fileToCommandArgumentForPythonExt=function(){return this?this.toCommandArgumentForPythonExt().replace(/\\/g,"/"):this},String.prototype.trimQuotes=function(){return this?this.replace(/(^['"])|(['"]$)/g,""):this},Promise.prototype.ignoreErrors=function(){return this.catch((()=>{}))},String.prototype.format||(String.prototype.format=function(){const e=arguments;return this.replace(/{(\d+)}/g,((t,n)=>void 0===e[n]?t:e[n]))})},65900:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.untildify=t.isNotInstalledError=void 0;const s=o(n(70857)),a=n(45612);t.isNotInstalledError=function(e){const t=e;if("object"!=typeof e||null===e)return!1;if(e instanceof a.ModuleNotInstalledError)return!0;const n=e.message.indexOf("No module named")>=0;return"ENOENT"===t.code||127===t.code||n},t.untildify=function(e){return e.replace(/^~($|\/|\\)/,`${s.homedir()}$1`)}},8534:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstallationChannelManager=void 0;const o=n(25891),s=n(29413),a=n(9100),c=n(25297),l=n(54661),u=n(22408),p=n(14152),d=n(98803),h=n(19065),f=n(18399);let v=class{constructor(e){this.serviceContainer=e}async getInstallationChannel(e,t){const n=await this.getInstallationChannels(t);if(1===n.length)return n[0];const r=h.ProductNames.get(e),i=this.serviceContainer.get(l.IApplicationShell);if(0===n.length)return void await this.showNoInstallersMessage((0,d.isResource)(t)?t:void 0);const o=`Select an option to install ${r}`,s=n.map((e=>({label:`Install using ${e.displayName}`,description:"",installer:e}))),a=await i.showQuickPick(s,{matchOnDescription:!0,matchOnDetail:!0,placeHolder:o});return a?a.installer:void 0}async getInstallationChannels(e){const t=this.serviceContainer.getAll(f.IModuleInstaller),n=[];if(0===t.length)return[];t.sort(((e,t)=>t.priority-e.priority));let r=t[0].priority;for(const i of t){if(i.priority!==r){if(n.length>0)break;r=i.priority}await i.isSupported(e)&&n.push(i)}return n}async showNoInstallersMessage(e){const t=this.serviceContainer.get(s.IInterpreterService),n=await t.getActiveInterpreter(e);if(!n)return;const r=this.serviceContainer.get(l.IApplicationShell);let i;if(i=n.envType===c.EnvironmentType.Conda?await r.showErrorMessage(p.Installer.noCondaOrPipInstaller,p.Installer.searchForHelp):await r.showErrorMessage(p.Installer.noPipInstaller,p.Installer.searchForHelp),"Search for help"===i){const e=this.serviceContainer.get(u.IPlatformService),t=e.isWindows?"Windows":e.isMac?"MacOS":"Linux";r.openUrl(`https://www.bing.com/search?q=Install Pip ${t} ${n.envType===c.EnvironmentType.Conda?"Conda":""}`)}}};t.InstallationChannelManager=v,t.InstallationChannelManager=v=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],v)},29449:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaInstaller=void 0;const o=n(25891),s=n(29413),a=n(9100),c=n(6514),l=n(25297),u=n(86156),p=n(98803),d=n(9418),h=n(18399);let f=class extends d.ModuleInstaller{constructor(e){super(e)}get name(){return"Conda"}get displayName(){return"Conda"}get type(){return l.ModuleInstallerType.Conda}get priority(){return 10}async isSupported(e){if(!1===this._isCondaAvailable)return!1;const t=this.serviceContainer.get(s.ICondaService);return this._isCondaAvailable=await t.isCondaAvailable(),!!this._isCondaAvailable&&this.isCurrentEnvironmentACondaEnvironment(e)}async getExecutionInfo(e,t,n=0){var r;const i=this.serviceContainer.get(s.ICondaService),o=!0,a=await i.getCondaFile(o),l=(0,p.isResource)(t)?this.serviceContainer.get(u.IConfigurationService).getSettings(t).pythonPath:null!==(r=(0,c.getEnvPath)(t.path,t.envPath).path)&&void 0!==r?r:"",f=this.serviceContainer.get(s.IComponentAdapter),v=await f.getCondaEnvironment(l),m=[n&h.ModuleInstallFlags.upgrade?"update":"install"];return[u.Product.tensorboard].map(d.translateProductToModule).includes(e)&&m.push("-c","conda-forge"),v&&v.name?(m.push("--name"),m.push(v.name.toCommandArgumentForPythonExt())):v&&v.path&&(m.push("--prefix"),m.push(v.path.fileToCommandArgumentForPythonExt())),n&h.ModuleInstallFlags.updateDependencies&&m.push("--update-deps"),n&h.ModuleInstallFlags.reInstall&&m.push("--force-reinstall"),m.push(e),m.push("-y"),{args:m,execPath:a,useShell:o}}async isCurrentEnvironmentACondaEnvironment(e){var t;const n=this.serviceContainer.get(s.IComponentAdapter),r=(0,p.isResource)(e)?this.serviceContainer.get(u.IConfigurationService).getSettings(e).pythonPath:null!==(t=(0,c.getEnvPath)(e.path,e.envPath).path)&&void 0!==t?t:"";return n.isCondaEnvironment(r)}};t.CondaInstaller=f,t.CondaInstaller=f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],f)},9418:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.translateProductToModule=t.ModuleInstaller=void 0;const a=n(25891),c=s(n(16928)),l=n(54980),u=n(29413),p=n(61905),d=n(25297),h=n(51535),f=n(53322),v=n(54661),m=n(7854),g=n(22408),y=s(n(13931)),b=n(35026),_=n(23935),E=n(86156),S=n(98803),w=n(19065);let P=class{constructor(e){this.serviceContainer=e}async installModule(e,t,n,r,i){const o=!(null==i?void 0:i.installAsProcess),s="string"==typeof e?e:T(e),a="string"==typeof e?s:w.ProductNames.get(e);(0,h.sendTelemetryEvent)(f.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:this.displayName,productName:a});const p=(0,S.isResource)(t)?t:void 0,b=await this.getExecutionInfo(s,t,r),_=async e=>{var n;const r=await this.processInstallArgs(b.args,t);if(b.moduleName){const i=this.serviceContainer.get(E.IConfigurationService).getSettings(p),a=this.serviceContainer.get(u.IInterpreterService),l=(0,S.isResource)(t)?await a.getActiveInterpreter(t):t,h=null!==(n=null==l?void 0:l.path)&&void 0!==n?n:i.pythonPath,f=(0,S.isResource)(t)?h:t.path,v=y.execModule(b.moduleName,r);if(l&&l.envType===d.EnvironmentType.Unknown)if(i.globalModuleInstallation){const n=this.serviceContainer.get(g.IFileSystem);await n.isDirReadonly(c.dirname(f)).catch((e=>!0))?this.elevatedInstall(f,v):await this.executeCommand(o,t,f,v,e,b.useShell)}else s===T(E.Product.pip)||d.virtualEnvTypes.includes(l.envType)?await this.executeCommand(o,t,f,v,e,b.useShell):await this.executeCommand(o,t,f,v.concat(["--user"]),e,b.useShell);else await this.executeCommand(o,t,f,v,e,b.useShell)}else await this.executeCommand(o,t,b.execPath,r,e,b.useShell)};if(n&&!(null==i?void 0:i.hideProgress)){const e=this.serviceContainer.get(v.IApplicationShell),t={location:l.ProgressLocation.Notification,cancellable:!0,title:l.l10n.t("Installing {0}",s)};await e.withProgress(t,(async(e,t)=>_((0,m.wrapCancellationTokens)(t,n))))}else await _(n)}elevatedInstall(e,t){const r=this.serviceContainer.get(E.ILogOutputChannel),i=`"${e.replace(/\\/g,"/")}" ${t.join(" ")}`;(0,p.traceLog)(`[Elevated] ${i}`),n(51586).exec(i,{name:"VS Code Python"},(async(e,t,n)=>{if(e){const t=this.serviceContainer.get(v.IApplicationShell);await t.showErrorMessage(e)}else r.show(),t&&(0,p.traceLog)(t),n&&(0,p.traceError)(`Warning: ${n}`)}))}async processInstallArgs(e,t){const n=e.findIndex((e=>"PYLINT"===e.toUpperCase()));if(-1===n)return e;const r=this.serviceContainer.get(u.IInterpreterService),i=(0,S.isResource)(t)?await r.getActiveInterpreter(t):t;if(i&&i.version&&2===i.version.major){const t=[...e];return t[n]='"pylint<2.0.0"',t}return e}async executeCommand(e,t,n,r,i,o){const s={};if((0,S.isResource)(t)?s.resource=t:s.interpreter=t,e)this.serviceContainer.get(_.ITerminalServiceFactory).getTerminalService(s).sendCommand(n,r,i);else{const e=this.serviceContainer.get(b.IProcessServiceFactory),t=await e.create(s.resource);if(o){const e=[n,...r].reduce(((e,t)=>e?`${e} ${t.toCommandArgumentForPythonExt()}`:`${t.toCommandArgumentForPythonExt()}`),"");await t.shellExec(e)}else await t.exec(n,r)}}};function T(e){switch(e){case E.Product.pytest:return"pytest";case E.Product.unittest:return"unittest";case E.Product.tensorboard:return"tensorboard";case E.Product.torchProfilerInstallName:return"torch-tb-profiler";case E.Product.torchProfilerImportName:return"torch_tb_profiler";case E.Product.pip:return"pip";case E.Product.ensurepip:return"ensurepip";case E.Product.python:return"python";default:throw new Error(`Product ${e} cannot be installed as a Python Module.`)}}t.ModuleInstaller=P,t.ModuleInstaller=P=o([(0,a.injectable)()],P),t.translateProductToModule=T},91342:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvInstaller=t.pipenvName=void 0;const o=n(25891),s=n(29413),a=n(9100),c=n(35864),l=n(25297),u=n(54661),p=n(98803),d=n(9418),h=n(18399);t.pipenvName="pipenv";let f=class extends d.ModuleInstaller{get name(){return"pipenv"}get type(){return l.ModuleInstallerType.Pipenv}get displayName(){return t.pipenvName}get priority(){return 10}constructor(e){super(e)}async isSupported(e){if((0,p.isResource)(e)){const t=await this.serviceContainer.get(s.IInterpreterService).getActiveInterpreter(e),n=e?this.serviceContainer.get(u.IWorkspaceService).getWorkspaceFolder(e):void 0;return!(!t||!n||t.envType!==l.EnvironmentType.Pipenv)&&(0,c.isPipenvEnvironmentRelatedToFolder)(t.path,n.uri.fsPath)}return e.envType===l.EnvironmentType.Pipenv}async getExecutionInfo(e,n,r=0){return{args:[r&h.ModuleInstallFlags.reInstall||r&h.ModuleInstallFlags.updateDependencies||r&h.ModuleInstallFlags.upgrade?"update":"install",e,"--dev"],execPath:t.pipenvName}}};t.PipEnvInstaller=f,t.PipEnvInstaller=f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],f)},97539:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipInstaller=void 0;const c=n(25891),l=n(9100),u=n(25297),p=n(54661),d=n(35026),h=n(86156),f=n(98803),v=n(9418),m=n(18399),g=s(n(16928)),y=n(3931),b=n(19065),_=n(51535),E=n(53322),S=n(29413),w=n(25943);let P=class extends v.ModuleInstaller{get name(){return"Pip"}get type(){return u.ModuleInstallerType.Pip}get displayName(){return"Pip"}get priority(){return 0}constructor(e){super(e)}async isSupported(e){return!1!==await async function(e,t){var n;const r=e.get(S.IInterpreterService),i=(0,f.isResource)(t)?await r.getActiveInterpreter(t):t;if(i)return!((null===(n=i.envPath)||void 0===n?void 0:n.length)&&i.envType===u.EnvironmentType.Conda&&!(0,w.isParentPath)(null==i?void 0:i.path,i.envPath))}(this.serviceContainer,e)&&this.isPipAvailable(e)}async getExecutionInfo(e,t,n=0){var r,i,o;if(e===(0,v.translateProductToModule)(h.Product.pip)){const e=(0,f.isResource)(t)?"":`${(null===(r=t.version)||void 0===r?void 0:r.major)||""}.${(null===(i=t.version)||void 0===i?void 0:i.minor)||""}.${(null===(o=t.version)||void 0===o?void 0:o.patch)||""}`,n=(0,f.isResource)(t)?void 0:t.envType;(0,_.sendTelemetryEvent)(E.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",requiredInstaller:u.ModuleInstallerType.Pip,productName:b.ProductNames.get(h.Product.pip),version:e,envType:n});const s=this.serviceContainer.get(h.IInstaller);if(await s.isInstalled(h.Product.ensurepip,t))return{args:[],moduleName:"ensurepip"};(0,_.sendTelemetryEvent)(E.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",requiredInstaller:u.ModuleInstallerType.Pip,productName:b.ProductNames.get(h.Product.ensurepip),version:e,envType:n});const a=this.serviceContainer.get(S.IInterpreterService),c=(0,f.isResource)(t)?await a.getActiveInterpreter(t):t;return{execPath:c?c.path:"python",args:[g.join(y._SCRIPTS_DIR,"get-pip.py")]}}const s=[],a=this.serviceContainer.get(p.IWorkspaceService).getConfiguration("http").get("proxy","");return a.length>0&&(s.push("--proxy"),s.push(a)),s.push("install","-U"),n&m.ModuleInstallFlags.reInstall&&s.push("--force-reinstall"),{args:[...s,e],moduleName:"pip"}}isPipAvailable(e){const t=this.serviceContainer.get(d.IPythonExecutionFactory),n=(0,f.isResource)(e)?e:void 0,r=(0,f.isResource)(e)?void 0:e.path;return t.create({resource:n,pythonPath:r}).then((e=>e.isModuleInstalled("pip"))).catch((()=>!1))}};t.PipInstaller=P,t.PipInstaller=P=o([(0,c.injectable)(),a(0,(0,c.inject)(l.IServiceContainer))],P)},57970:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PixiInstaller=void 0;const o=n(25891),s=n(29413),a=n(9100),c=n(6514),l=n(25297),u=n(86156),p=n(98803),d=n(9418),h=n(8164);let f=class extends d.ModuleInstaller{constructor(e,t){super(e),this.configurationService=t}get name(){return"Pixi"}get displayName(){return"pixi"}get type(){return l.ModuleInstallerType.Pixi}get priority(){return 20}async isSupported(e){if((0,p.isResource)(e)){const t=await this.serviceContainer.get(s.IInterpreterService).getActiveInterpreter(e);return!(!t||t.envType!==l.EnvironmentType.Pixi)&&void 0!==await(0,h.getPixiEnvironmentFromInterpreter)(t.path)}return e.envType===l.EnvironmentType.Pixi}async getExecutionInfo(e,t){var n;const r=(0,p.isResource)(t)?this.configurationService.getSettings(t).pythonPath:null!==(n=(0,c.getEnvPath)(t.path,t.envPath).path)&&void 0!==n?n:"",i=await(0,h.getPixiEnvironmentFromInterpreter)(r),o=null==i?void 0:i.pixi.command;let s=["add",e];const a=null==i?void 0:i.manifestPath;return void 0!==a&&(s=s.concat(["--manifest-path",a])),{args:s,execPath:o}}};t.PixiInstaller=f,t.PixiInstaller=f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer)),i(1,(0,o.inject)(u.IConfigurationService))],f)},47565:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PoetryInstaller=t.poetryName=void 0;const o=n(25891),s=n(29413),a=n(9100),c=n(60649),l=n(25297),u=n(54661),p=n(86156),d=n(98803),h=n(9418);t.poetryName="poetry";let f=class extends h.ModuleInstaller{get name(){return"poetry"}get type(){return l.ModuleInstallerType.Poetry}get displayName(){return t.poetryName}get priority(){return 10}constructor(e,t,n){super(e),this.workspaceService=t,this.configurationService=n}async isSupported(e){if(!e)return!1;if(!(0,d.isResource)(e))return!1;const t=await this.serviceContainer.get(s.IInterpreterService).getActiveInterpreter(e),n=e?this.workspaceService.getWorkspaceFolder(e):void 0;return!(!t||!n||t.envType!==l.EnvironmentType.Poetry)&&(0,c.isPoetryEnvironmentRelatedToFolder)(t.path,n.uri.fsPath,this.configurationService.getSettings(e).poetryPath)}async getExecutionInfo(e,t){return{args:["add","--group","dev",e],execPath:this.configurationService.getSettings((0,d.isResource)(t)?t:void 0).poetryPath}}};t.PoetryInstaller=f,t.PoetryInstaller=f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer)),i(1,(0,o.inject)(u.IWorkspaceService)),i(2,(0,o.inject)(p.IConfigurationService))],f)},9737:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductInstaller=t.PythonInstaller=t.DataScienceInstaller=t.TestFrameworkInstaller=t.Product=void 0;const c=n(25891),l=s(n(99589)),u=n(54980);n(87295);const p=n(29413),d=n(9100),h=n(25297),f=n(51535),v=n(53322),m=n(54661),g=n(35026),y=n(86156),b=n(14152),_=n(98803),E=n(9418),S=n(19065),w=n(18399),P=n(61905),T=n(25943);var C=n(86156);Object.defineProperty(t,"Product",{enumerable:!0,get:function(){return C.Product}});const x=new Map([[y.Product.torchProfilerInstallName,new Set([h.EnvironmentType.Conda,h.EnvironmentType.Pixi])]]);class I{constructor(e){this.serviceContainer=e,this.appShell=e.get(m.IApplicationShell),this.configService=e.get(y.IConfigurationService),this.workspaceService=e.get(m.IWorkspaceService),this.productService=e.get(w.IProductService),this.persistentStateFactory=e.get(y.IPersistentStateFactory)}promptToInstall(e,t,n,r){const i=t&&(0,_.isResource)(t)?this.workspaceService.getWorkspaceFolder(t):void 0,o=`${e}${i?i.uri.fsPath:""}`;if(I.PromptPromises.has(o))return I.PromptPromises.get(o);const s=this.promptToInstallImplementation(e,t,n,r);return I.PromptPromises.set(o,s),s.then((()=>I.PromptPromises.delete(o))).ignoreErrors(),s.catch((()=>I.PromptPromises.delete(o))).ignoreErrors(),s}async install(e,t,n,r,i){if(e===y.Product.unittest)return y.InstallerResponse.Installed;const o=this.serviceContainer.get(w.IInstallationChannelManager),s=await o.getInstallationChannel(e,t);return s?(await s.installModule(e,t,n,r,i).catch((t=>(0,P.traceError)(`Error in installing the product '${S.ProductNames.get(e)}', ${t}`))),this.isInstalled(e,t).then((t=>((0,f.sendTelemetryEvent)(v.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:s.displayName,productName:S.ProductNames.get(e),isInstalled:t}),t?y.InstallerResponse.Installed:y.InstallerResponse.Ignore)))):((0,f.sendTelemetryEvent)(v.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",productName:S.ProductNames.get(e)}),y.InstallerResponse.Ignore)}async isProductVersionCompatible(e,t,n){const r=await this.getProductSemVer(e,n);return r?l.satisfies(r,t)?y.ProductInstallStatus.Installed:y.ProductInstallStatus.NeedsUpgrade:y.ProductInstallStatus.NotInstalled}async getProductSemVer(e,t){const n=(0,_.isResource)(t)?void 0:t,r=(0,_.isResource)(t)?t:void 0,i=this.getExecutableNameFromSettings(e,r);let o;if(this.isExecutableAModule(e,r)){const e=await this.serviceContainer.get(g.IPythonExecutionFactory).createActivatedEnvironment({resource:r,interpreter:n,allowEnvironmentFetchExceptions:!0});o=await e.getModuleVersion(i)}else{const e=await this.serviceContainer.get(g.IProcessServiceFactory).create(r);o=(await e.exec(i,["--version"],{mergeStdOutErr:!0})).stdout.trim()}if(!o)return null;try{return l.coerce(o)}catch(t){return(0,P.traceError)(`Unable to parse version ${o} for product ${e}: `,t),null}}async isInstalled(e,t){if(e===y.Product.unittest)return!0;const n=(0,_.isResource)(t)?void 0:t,r=(0,_.isResource)(t)?t:void 0,i=this.getExecutableNameFromSettings(e,r);return this.isExecutableAModule(e,r)?(await this.serviceContainer.get(g.IPythonExecutionFactory).createActivatedEnvironment({resource:r,interpreter:n,allowEnvironmentFetchExceptions:!0})).isModuleInstalled(i):(await this.serviceContainer.get(g.IProcessServiceFactory).create(r)).exec(i,["--version"],{mergeStdOutErr:!0}).then((()=>!0)).catch((()=>!1))}getExecutableNameFromSettings(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(w.IProductPathService,n).getExecutableNameFromSettings(e,t)}isExecutableAModule(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(w.IProductPathService,n).isExecutableAModule(e,t)}}I.PromptPromises=new Map;class O extends I{async promptToInstallImplementation(e,t,n,r){const i=S.ProductNames.get(e),o=[];let s=u.l10n.t("Test framework {0} is not installed. Install?",i);if(this.isExecutableAModule(e,t))o.push(b.Common.bannerLabelYes,b.Common.bannerLabelNo);else{const n=this.getExecutableNameFromSettings(e,t);s=u.l10n.t("Path to the {0} test framework is invalid ({1})",i,n)}return await this.appShell.showErrorMessage(s,...o)===b.Common.bannerLabelYes?this.install(e,t,n):y.InstallerResponse.Ignore}}t.TestFrameworkInstaller=O;class R extends I{async install(e,t,n,r){var i,o,s,a;if((0,_.isResource)(t))throw new Error("All data science packages require an interpreter be passed in");const c=t;let l=await this.serviceContainer.get(w.IInstallationChannelManager).getInstallationChannels(c);const p=(0,E.translateProductToModule)(e),d=`${(null===(i=c.version)||void 0===i?void 0:i.major)||""}.${(null===(o=c.version)||void 0===o?void 0:o.minor)||""}.${(null===(s=c.version)||void 0===s?void 0:s.patch)||""}`;if(r&&r&w.ModuleInstallFlags.installPipIfRequired&&c.envType!==h.EnvironmentType.Conda&&!l.some((e=>e.type===h.ModuleInstallerType.Pip))){const e=this.serviceContainer.getAll(w.IModuleInstaller).find((e=>e.type===h.ModuleInstallerType.Pip));e?((0,P.traceInfo)(`Installing pip as its not available to install ${p}.`),await e.installModule(y.Product.pip,c,n).catch((e=>(0,P.traceError)(`Error in installing the module '${p} as Pip could not be installed', ${e}`))),await this.isInstalled(y.Product.pip,c).then((t=>{(0,f.sendTelemetryEvent)(v.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:e.displayName,requiredInstaller:h.ModuleInstallerType.Pip,version:d,envType:c.envType,isInstalled:t,productName:S.ProductNames.get(y.Product.pip)})})).catch(_.noop),l=await this.serviceContainer.get(w.IInstallationChannelManager).getInstallationChannels(c)):((0,f.sendTelemetryEvent)(v.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",requiredInstaller:h.ModuleInstallerType.Pip,productName:S.ProductNames.get(y.Product.pip),version:d,envType:c.envType}),(0,P.traceError)("Unable to install pip when its required."))}const m=!(null===(a=x.get(e))||void 0===a?void 0:a.has(h.EnvironmentType.Conda));let g=h.ModuleInstallerType.Unknown;if(c.envType===h.EnvironmentType.Conda&&m)g=h.ModuleInstallerType.Conda;else if(c.envType!==h.EnvironmentType.Conda||m)switch(c.envType){case h.EnvironmentType.Pipenv:g=h.ModuleInstallerType.Pipenv;break;case h.EnvironmentType.Poetry:g=h.ModuleInstallerType.Poetry;break;default:g=h.ModuleInstallerType.Pip}else(0,P.traceInfo)(`Interpreter type is conda but package ${p} is not available through conda, using pip instead.`),g=h.ModuleInstallerType.Pip;const b=l.find((e=>e.type===g));return b?(await b.installModule(e,c,n,r).catch((e=>(0,P.traceError)(`Error in installing the module '${p}', ${e}`))),this.isInstalled(e,c).then((t=>((0,f.sendTelemetryEvent)(v.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:b.displayName||"",requiredInstaller:g,version:d,envType:c.envType,isInstalled:t,productName:S.ProductNames.get(e)}),t?y.InstallerResponse.Installed:y.InstallerResponse.Ignore)))):(this.appShell.showErrorMessage(u.l10n.t("Could not install {0}. If pip is not available, please use the package manager of your choice to manually install this library into your Python environment.",p)).then(_.noop,_.noop),(0,f.sendTelemetryEvent)(v.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",requiredInstaller:g,productName:S.ProductNames.get(e),version:d,envType:c.envType}),y.InstallerResponse.Ignore)}async promptToInstallImplementation(e,t,n,r){const i=S.ProductNames.get(e);return await this.appShell.showErrorMessage(u.l10n.t("Data Science library {0} is not installed. Install?",i),b.Common.bannerLabelYes,b.Common.bannerLabelNo)===b.Common.bannerLabelYes?this.install(e,t,n):y.InstallerResponse.Ignore}}t.DataScienceInstaller=R;let D=class{constructor(e){this.serviceContainer=e}async isInstalled(e,t){var n;if(e!==y.Product.python)throw new Error(`${e} cannot be installed via conda python installer`);const r=this.serviceContainer.get(p.IInterpreterService),i=(0,_.isResource)(t)?await r.getActiveInterpreter(t):t;return!i||!((null===(n=i.envPath)||void 0===n?void 0:n.length)&&i.envType===h.EnvironmentType.Conda&&!(0,T.isParentPath)(null==i?void 0:i.path,i.envPath))}async install(e,t,n,r){if(e!==y.Product.python)throw new Error(`${e} cannot be installed via python installer`);const i=this.serviceContainer.getAll(w.IModuleInstaller).find((e=>e.type===h.ModuleInstallerType.Conda));if(!i||!await i.isSupported(t))return(0,P.traceError)("Conda installer not available for installing python in the given environment"),y.InstallerResponse.Ignore;const o=(0,E.translateProductToModule)(e);return await i.installModule(y.Product.python,t,void 0,void 0,{installAsProcess:!0}).catch((e=>(0,P.traceError)(`Error in installing the module '${o}', ${e}`))),this.isInstalled(e,t).then((e=>e?y.InstallerResponse.Installed:y.InstallerResponse.Ignore))}async promptToInstall(e,t,n,r){return y.InstallerResponse.Ignore}async isProductVersionCompatible(e,t,n){return y.ProductInstallStatus.Installed}};t.PythonInstaller=D,t.PythonInstaller=D=o([a(0,(0,c.inject)(d.IServiceContainer))],D);let k=class{constructor(e){this.serviceContainer=e,this.productService=e.get(w.IProductService),this.interpreterService=this.serviceContainer.get(p.IInterpreterService)}dispose(){}async promptToInstall(e,t,n,r){return((0,_.isResource)(t)?await this.interpreterService.getActiveInterpreter(t):t)?this.createInstaller(e).promptToInstall(e,t,n,r):y.InstallerResponse.Ignore}async isProductVersionCompatible(e,t,n){return this.createInstaller(e).isProductVersionCompatible(e,t,n)}async install(e,t,n,r,i){return this.createInstaller(e).install(e,t,n,r,i)}async isInstalled(e,t){return this.createInstaller(e).isInstalled(e,t)}translateProductToModuleName(e){return(0,E.translateProductToModule)(e)}createInstaller(e){switch(this.productService.getProductType(e)){case y.ProductType.TestFramework:return new O(this.serviceContainer);case y.ProductType.DataScience:return new R(this.serviceContainer);case y.ProductType.Python:return new D(this.serviceContainer)}throw new Error(`Unknown product ${e}`)}};t.ProductInstaller=k,t.ProductInstaller=k=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IServiceContainer))],k)},19065:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductNames=void 0;const r=n(86156);t.ProductNames=new Map,t.ProductNames.set(r.Product.pytest,"pytest"),t.ProductNames.set(r.Product.tensorboard,"tensorboard"),t.ProductNames.set(r.Product.torchProfilerInstallName,"torch-tb-profiler"),t.ProductNames.set(r.Product.torchProfilerImportName,"torch_tb_profiler"),t.ProductNames.set(r.Product.pip,"pip"),t.ProductNames.set(r.Product.ensurepip,"ensurepip")},52390:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataScienceProductPathService=t.TestFrameworkProductPathService=t.BaseProductPathsService=void 0;const c=n(25891),l=s(n(16928)),u=n(9100),p=n(89113),d=n(86156);let h=class{constructor(e){this.serviceContainer=e,this.configService=e.get(d.IConfigurationService),this.productInstaller=e.get(d.IInstaller)}isExecutableAModule(e,t){let n;try{n=this.productInstaller.translateProductToModuleName(e)}catch(e){}const r=this.getExecutableNameFromSettings(e,t);return"string"==typeof n&&n.length>0&&l.basename(r)===r}};t.BaseProductPathsService=h,t.BaseProductPathsService=h=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IServiceContainer))],h);let f=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){const n=this.serviceContainer.get(p.ITestingService).getSettingsPropertyNames(e);return n.pathName?this.configService.getSettings(t).testing[n.pathName]:this.productInstaller.translateProductToModuleName(e)}};t.TestFrameworkProductPathService=f,t.TestFrameworkProductPathService=f=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IServiceContainer))],f);let v=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){return this.productInstaller.translateProductToModuleName(e)}};t.DataScienceProductPathService=v,t.DataScienceProductPathService=v=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IServiceContainer))],v)},96562:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductService=void 0;const i=n(25891),o=n(86156);let s=class{constructor(){this.ProductTypes=new Map,this.ProductTypes.set(o.Product.pytest,o.ProductType.TestFramework),this.ProductTypes.set(o.Product.unittest,o.ProductType.TestFramework),this.ProductTypes.set(o.Product.tensorboard,o.ProductType.DataScience),this.ProductTypes.set(o.Product.torchProfilerInstallName,o.ProductType.DataScience),this.ProductTypes.set(o.Product.torchProfilerImportName,o.ProductType.DataScience),this.ProductTypes.set(o.Product.pip,o.ProductType.DataScience),this.ProductTypes.set(o.Product.ensurepip,o.ProductType.DataScience),this.ProductTypes.set(o.Product.python,o.ProductType.Python)}getProductType(e){return this.ProductTypes.get(e)}};t.ProductService=s,t.ProductService=s=r([(0,i.injectable)()],s)},37494:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(86156),i=n(8534),o=n(29449),s=n(91342),a=n(97539),c=n(57970),l=n(47565),u=n(52390),p=n(96562),d=n(18399);t.registerTypes=function(e){e.addSingleton(d.IModuleInstaller,c.PixiInstaller),e.addSingleton(d.IModuleInstaller,o.CondaInstaller),e.addSingleton(d.IModuleInstaller,a.PipInstaller),e.addSingleton(d.IModuleInstaller,s.PipEnvInstaller),e.addSingleton(d.IModuleInstaller,l.PoetryInstaller),e.addSingleton(d.IInstallationChannelManager,i.InstallationChannelManager),e.addSingleton(d.IProductService,p.ProductService),e.addSingleton(d.IProductPathService,u.TestFrameworkProductPathService,r.ProductType.TestFramework),e.addSingleton(d.IProductPathService,u.DataScienceProductPathService,r.ProductType.DataScience)}},18399:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleInstallFlags=t.IProductPathService=t.IProductService=t.IInstallationChannelManager=t.IPythonInstallation=t.IBaseInstaller=t.IModuleInstaller=void 0,t.IModuleInstaller=Symbol("IModuleInstaller"),t.IBaseInstaller=Symbol("IBaseInstaller"),t.IPythonInstallation=Symbol("IPythonInstallation"),t.IInstallationChannelManager=Symbol("IInstallationChannelManager"),t.IProductService=Symbol("IProductService"),t.IProductPathService=Symbol("IProductPathService"),function(e){e[e.none=0]="none",e[e.upgrade=1]="upgrade",e[e.updateDependencies=2]="updateDependencies",e[e.reInstall=4]="reInstall",e[e.installPipIfRequired=8]="installPipIfRequired"}(n||(t.ModuleInstallFlags=n={}))},18761:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterPathService=t.getCIPythonPath=t.defaultInterpreterPathSetting=t.isRemoteGlobalSettingCopiedKey=t.remoteWorkspaceFolderKeysForWhichTheCopyIsDone_Key=t.remoteWorkspaceKeysForWhichTheCopyIsDone_Key=void 0;const c=s(n(25943)),l=n(25891),u=n(54980),p=n(61905),d=n(54661),h=n(41414),f=n(552),v=n(25943),m=n(86156),g=n(79985);t.remoteWorkspaceKeysForWhichTheCopyIsDone_Key="remoteWorkspaceKeysForWhichTheCopyIsDone_Key",t.remoteWorkspaceFolderKeysForWhichTheCopyIsDone_Key="remoteWorkspaceFolderKeysForWhichTheCopyIsDone_Key",t.isRemoteGlobalSettingCopiedKey="isRemoteGlobalSettingCopiedKey",t.defaultInterpreterPathSetting="defaultInterpreterPath";const y=b();function b(){return process.env.CI_PYTHON_PATH&&c.existsSync(process.env.CI_PYTHON_PATH)?process.env.CI_PYTHON_PATH:"python"}t.getCIPythonPath=b;let _=class{get onDidChange(){return this._didChangeInterpreterEmitter.event}constructor(e,t,n,r){this.persistentStateFactory=e,this.workspaceService=t,this.appEnvironment=r,this._didChangeInterpreterEmitter=new u.EventEmitter,n.push(this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this))),this.fileSystemPaths=v.FileSystemPaths.withDefaults()}async onDidChangeConfiguration(e){e.affectsConfiguration(`python.${t.defaultInterpreterPathSetting}`)&&(this._didChangeInterpreterEmitter.fire({uri:void 0,configTarget:u.ConfigurationTarget.Global}),(0,p.traceVerbose)("Interpreter Path updated",`python.${t.defaultInterpreterPathSetting}`))}inspect(e,t=!1){var n,r;let i,o;(e=h.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri)&&(i=this.persistentStateFactory.createGlobalPersistentState(this.getSettingKey(e,u.ConfigurationTarget.WorkspaceFolder,t),void 0),o=this.persistentStateFactory.createGlobalPersistentState(this.getSettingKey(e,u.ConfigurationTarget.Workspace,t),void 0));const s=null!==(r=null===(n=this.workspaceService.getConfiguration("python",e))||void 0===n?void 0:n.inspect("defaultInterpreterPath"))&&void 0!==r?r:{};return{globalValue:s.globalValue,workspaceFolderValue:(null==i?void 0:i.value)&&"python"!==(null==i?void 0:i.value)?i.value:s.workspaceFolderValue,workspaceValue:(null==o?void 0:o.value)&&"python"!==(null==o?void 0:o.value)?o.value:s.workspaceValue}}get(e){var t;const n=this.inspect(e),r=n.workspaceFolderValue||n.workspaceValue||n.globalValue||((0,f.isTestExecution)()?y:"python");return new g.SystemVariables(void 0,null===(t=this.workspaceService.getWorkspaceFolder(e))||void 0===t?void 0:t.uri.fsPath,this.workspaceService).resolveAny(r)}async update(e,t,n){if(e=h.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri,t===u.ConfigurationTarget.Global){const e=this.workspaceService.getConfiguration("python");return void(e.inspect("defaultInterpreterPath").globalValue!==n&&await e.update("defaultInterpreterPath",n,!0))}if(!e)return void(0,p.traceError)("Cannot update workspace settings as no workspace is opened");const r=this.getSettingKey(e,t),i=this.persistentStateFactory.createGlobalPersistentState(r,void 0);i.value!==n&&(await i.updateValue(n),this._didChangeInterpreterEmitter.fire({uri:e,configTarget:t}),(0,p.traceVerbose)("Interpreter Path updated",r,n))}getSettingKey(e,t,n=!1){let r;const i=this.workspaceService.getWorkspaceFolderIdentifier(e);return r=t===u.ConfigurationTarget.WorkspaceFolder?`WORKSPACE_FOLDER_INTERPRETER_PATH_${i}`:this.workspaceService.workspaceFile?`WORKSPACE_INTERPRETER_PATH_${this.fileSystemPaths.normCase(this.workspaceService.workspaceFile.fsPath)}`:`WORKSPACE_FOLDER_INTERPRETER_PATH_${i}`,!n&&this.appEnvironment.remoteName?`${this.appEnvironment.remoteName}_${r}`:r}async copyOldInterpreterStorageValuesToNew(e){e=h.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri;const t=this.inspect(e,!0);await Promise.all([this._copyWorkspaceFolderValueToNewStorage(e,t.workspaceFolderValue),this._copyWorkspaceValueToNewStorage(e,t.workspaceValue),this._moveGlobalSettingValueToNewStorage(t.globalValue)])}async _copyWorkspaceFolderValueToNewStorage(e,n){const r=this.workspaceService.getWorkspaceFolderIdentifier(e,"");if(""===r)return;const i=this.persistentStateFactory.createGlobalPersistentState(t.remoteWorkspaceFolderKeysForWhichTheCopyIsDone_Key,[]),o=i.value;!o.includes(r)&&(await this.update(e,u.ConfigurationTarget.WorkspaceFolder,n),await i.updateValue([r,...o]))}async _copyWorkspaceValueToNewStorage(e,n){const r=this.workspaceService.workspaceFile?this.fileSystemPaths.normCase(this.workspaceService.workspaceFile.fsPath):void 0;if(!r)return;const i=this.persistentStateFactory.createGlobalPersistentState(t.remoteWorkspaceKeysForWhichTheCopyIsDone_Key,[]),o=i.value;!o.includes(r)&&(await this.update(e,u.ConfigurationTarget.Workspace,n),await i.updateValue([r,...o]))}async _moveGlobalSettingValueToNewStorage(e){const n=this.persistentStateFactory.createGlobalPersistentState(t.isRemoteGlobalSettingCopiedKey,!1);!n.value&&(await this.update(void 0,u.ConfigurationTarget.Global,e),await n.updateValue(!0))}};t.InterpreterPathService=_,t.InterpreterPathService=_=o([(0,l.injectable)(),a(0,(0,l.inject)(m.IPersistentStateFactory)),a(1,(0,l.inject)(d.IWorkspaceService)),a(2,(0,l.inject)(m.IDisposableRegistry)),a(3,(0,l.inject)(d.IApplicationEnvironment))],_)},66673:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserService=t.launch=void 0;const i=n(25891),o=n(54980);function s(e){o.env.openExternal(o.Uri.parse(e))}t.launch=s;let a=class{launch(e){s(e)}};t.BrowserService=a,t.BrowserService=a=r([(0,i.injectable)()],a)},9923:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalStorage=t.PersistentStateFactory=t.GLOBAL_PERSISTENT_KEYS=t.WORKSPACE_PERSISTENT_KEYS_DEPRECATED=t.GLOBAL_PERSISTENT_KEYS_DEPRECATED=t.PersistentState=t.updateWorkspaceStateValue=t.getWorkspaceStateValue=t.initializePersistentStateForTriggers=void 0;const o=n(25891),s=n(61905),a=n(54661),c=n(552),l=n(86156),u=n(68989),p=n(98803),d=n(14601),h=n(36380);let f;const v=[];function m(e,t){if(!f)throw new Error("Workspace state not initialized");return void 0===t?f.get(e):f.get(e,t)}async function g(e,t){if(!f)throw new Error("Workspace state not initialized");try{v.push(e),await f.update(e,t);const n=m(e);JSON.stringify(n)!==JSON.stringify(t)&&(await f.update(e,void 0),await f.update(e,t),(0,s.traceError)("Error while updating workspace state for key:",e))}catch(t){(0,s.traceError)(`Error while updating workspace state for key [${e}]:`,t)}}t.initializePersistentStateForTriggers=function(e){f=e.workspaceState},t.getWorkspaceStateValue=m,t.updateWorkspaceStateValue=g;class y{constructor(e,t,n,r){this.storage=e,this.key=t,this.defaultValue=n,this.expiryDurationMs=r}get value(){if(this.expiryDurationMs){const e=this.storage.get(this.key,{data:this.defaultValue});return!e||!e.expiry||e.expiry<Date.now()?this.defaultValue:e.data}return this.storage.get(this.key,this.defaultValue)}async updateValue(e,t=!0){try{this.expiryDurationMs?await this.storage.update(this.key,{data:e,expiry:Date.now()+this.expiryDurationMs}):await this.storage.update(this.key,e),t&&JSON.stringify(this.value)!=JSON.stringify(e)&&(await this.updateValue(void 0,!1),await this.updateValue(e,!1))}catch(e){(0,s.traceError)("Error while updating storage for key:",this.key,e)}}}t.PersistentState=y,t.GLOBAL_PERSISTENT_KEYS_DEPRECATED="PYTHON_EXTENSION_GLOBAL_STORAGE_KEYS",t.WORKSPACE_PERSISTENT_KEYS_DEPRECATED="PYTHON_EXTENSION_WORKSPACE_STORAGE_KEYS",t.GLOBAL_PERSISTENT_KEYS="PYTHON_GLOBAL_STORAGE_KEYS";let b=class{constructor(e,n,r,i){this.globalState=e,this.workspaceState=n,this.cmdManager=r,this.context=i,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0},this._globalKeysStorage=new y(this.globalState,t.GLOBAL_PERSISTENT_KEYS,[]),this._workspaceKeysStorage=new y(this.workspaceState,"PYTHON_WORKSPACE_STORAGE_KEYS",[])}async activate(){var e;null===(e=this.cmdManager)||void 0===e||e.registerCommand(c.Commands.ClearStorage,(async()=>{await async function(){void 0!==f&&await Promise.all(v.map((e=>g(e,void 0))))}(),await this.cleanAllPersistentStates(),(0,h.useEnvExtension)()&&await(0,h.clearCache)()}));const n=this.createGlobalPersistentState(t.GLOBAL_PERSISTENT_KEYS_DEPRECATED,[]),r=this.createWorkspacePersistentState(t.WORKSPACE_PERSISTENT_KEYS_DEPRECATED,[]);n.value.length>0&&n.updateValue([]).ignoreErrors(),r.value.length>0&&r.updateValue([]).ignoreErrors()}createGlobalPersistentState(e,t,n){return this.addKeyToStorage("global",e,t).ignoreErrors(),new y(this.globalState,e,t,n)}createWorkspacePersistentState(e,t,n){return this.addKeyToStorage("workspace",e,t).ignoreErrors(),new y(this.workspaceState,e,t,n)}async addKeyToStorage(e,t,n){const r="global"===e?this._globalKeysStorage:this._workspaceKeysStorage;r.value.find((e=>e.key===t))||await r.updateValue([{key:t,defaultValue:n},...r.value])}async cleanAllPersistentStates(){var e;const t=this.context?(0,d.clearCacheDirectory)(this.context).catch():Promise.resolve();await Promise.all(this._globalKeysStorage.value.map((async e=>{const t=this.createGlobalPersistentState(e.key);await t.updateValue(e.defaultValue)}))),await Promise.all(this._workspaceKeysStorage.value.map((async e=>{const t=this.createWorkspacePersistentState(e.key);await t.updateValue(e.defaultValue)}))),await this._globalKeysStorage.updateValue([]),await this._workspaceKeysStorage.updateValue([]),await t,null===(e=this.cmdManager)||void 0===e||e.executeCommand("workbench.action.reloadWindow").then(p.noop)}};t.PersistentStateFactory=b,r([(0,u.cache)(-1,!0)],b.prototype,"addKeyToStorage",null),t.PersistentStateFactory=b=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IMemento)),i(0,(0,o.named)(l.GLOBAL_MEMENTO)),i(1,(0,o.inject)(l.IMemento)),i(1,(0,o.named)(l.WORKSPACE_MEMENTO)),i(2,(0,o.inject)(a.ICommandManager)),i(3,(0,o.inject)(l.IExtensionContext)),i(3,(0,o.optional)())],b),t.getGlobalStorage=function(e,n,r){const i=new y(e.globalState,t.GLOBAL_PERSISTENT_KEYS,[]);if(!i.value.find((e=>e.key===n))){const e=[{key:n,defaultValue:r},...i.value];i.updateValue(e).ignoreErrors()}const o=new y(e.globalState,n,r);return{get:()=>o.value,set:e=>o.updateValue(e)}}},73673:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createReaderPipe=t.createWriterPipe=t.generateRandomPipeName=void 0;const s=o(n(35317)),a=o(n(76982)),c=o(n(21605)),l=o(n(69278)),u=o(n(70857)),p=o(n(16928)),d=o(n(77123)),h=n(54980),f=n(61905),v=n(48112),m=n(7855),g=n(98803),{XDG_RUNTIME_DIR:y}=process.env;async function b(e){return new Promise(((t,n)=>{const r=s.spawn("mkfifo",[e]);r.on("error",(e=>{n(e)})),r.on("exit",(e=>{0===e&&t()}))}))}t.generateRandomPipeName=function(e){const t=a.randomBytes(10).toString("hex");if(0===e.length&&(e="python-ext-rpc"),"win32"===process.platform)return`\\\\.\\pipe\\${e}-${t}`;let n;return n=y?p.join(y,`${e}-${t}`):p.join(u.tmpdir(),`${e}-${t}`),n},t.createWriterPipe=async function(e,t){if((0,v.isWindows)()){const n=(0,m.createDeferred)(),r=l.createServer((t=>{(0,f.traceVerbose)(`Pipe connected: ${e}`),r.close(),n.resolve(new d.SocketMessageWriter(t,"utf-8"))}));return r.on("error",n.reject),r.listen(e),t&&t.onCancellationRequested((()=>{r.listening&&r.close(),n.reject(new h.CancellationError)})),n.promise}await b(e);try{await c.chmod(e,438)}catch(e){}const n=c.createWriteStream(e,{encoding:"utf-8"});return new d.StreamMessageWriter(n,"utf-8")};class _{constructor(){this._onError=new d.Emitter,this._onClose=new d.Emitter,this._onPartialMessage=new d.Emitter,this._callback=()=>{},this._disposables=[],this._readers=[],this.onError=this._onError.event,this.onClose=this._onClose.event,this.onPartialMessage=this._onPartialMessage.event,this._disposables.push(this._onClose,this._onError,this._onPartialMessage)}listen(e){return this._callback=e,new h.Disposable((()=>this._callback=()=>{}))}add(e){this._readers.push(e),e.listen((e=>{this._callback(e)})),this._disposables.push(e),e.onClose((()=>{this.remove(e),0===this._readers.length&&this._onClose.fire()})),e.onError((t=>{this.remove(e),this._onError.fire(t)}))}remove(e){this._readers.find((t=>t===e))&&(this._readers=this._readers.filter((t=>t!==e)),e.dispose())}dispose(){this._readers.forEach((e=>e.dispose())),this._readers=[],this._disposables.forEach((e=>e.dispose())),this._disposables=[]}}t.createReaderPipe=async function(e,t){if((0,v.isWindows)()){const n=(0,m.createDeferred)(),r=new _;let i=0;const o=l.createServer((t=>{(0,f.traceVerbose)(`Pipe connected: ${e}`),i+=1,t.on("close",(()=>{i-=1,i<=0&&o.close()})),r.add(new d.SocketMessageReader(t,"utf-8"))}));return o.on("error",n.reject),o.listen(e),t&&t.onCancellationRequested((()=>{o.listening&&o.close(),n.reject(new h.CancellationError)})),n.resolve(r),n.promise}await b(e);try{await c.chmod(e,438)}catch(e){}const n=await c.open(e,c.constants.O_RDONLY|c.constants.O_NONBLOCK),r=new l.Socket({fd:n}),i=new d.SocketMessageReader(r,"utf-8");return r.on("close",(()=>{c.close(n).catch(g.noop),i.dispose()})),i}},35094:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isNoPermissionsError=t.isNotDirError=t.isFileIsDirError=t.isFileExistsError=t.isFileNotFoundError=t.createDirNotEmptyError=void 0;const s=o(n(54980));var a;function c(e,t){const n=e.code;if(n)return n===t}!function(e){const t=s.FileSystemError.FileNotFound().name,n=s.FileSystemError.FileExists().name,r=s.FileSystemError.FileIsADirectory().name,i=s.FileSystemError.FileNotADirectory().name,o=s.FileSystemError.NoPermissions().name,a=[t,n,r,i,o];function c(e,t){if(a.includes(e.name))return e.name===t}e.isFileNotFound=function(e){return c(e,t)},e.isFileExists=function(e){return c(e,n)},e.isFileIsDir=function(e){return c(e,r)},e.isNotDir=function(e){return c(e,i)},e.isNoPermissions=function(e){return c(e,o)}}(a||(a={})),t.createDirNotEmptyError=function(e){const t=new Error(`directory "${e}" not empty`);return t.name="SystemError",t.code="ENOTEMPTY",t.path=e,t.syscall="rmdir",t},t.isFileNotFoundError=function(e){const t=e,n=a.isFileNotFound(t);return void 0!==n?n:c(t,"ENOENT")},t.isFileExistsError=function(e){const t=e,n=a.isFileExists(t);return void 0!==n?n:c(t,"EEXIST")},t.isFileIsDirError=function(e){const t=a.isFileIsDir(e);return void 0!==t?t:c(e,"EISDIR")},t.isNotDirError=function(e){const t=a.isNotDir(e);return void 0!==t?t:c(e,"ENOTDIR")},t.isNoPermissionsError=function(e){const t=e,n=a.isNoPermissions(t);return void 0!==n?n:c(t,"EACCES")}},89390:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystem=t.getHashString=t.FileSystemUtils=t.RawFileSystem=t.convertStat=void 0;const a=n(76982),c=s(n(21605)),l=s(n(53577)),u=n(25891),p=n(39023),d=s(n(54980)),h=n(61905);n(87295);const f=n(77476),v=n(35094),m=n(25943),g=n(58241),y=n(22408),b="utf8";function _(e,t){return{type:t,size:e.size,ctime:Math.round(e.ctimeMs),mtime:Math.round(e.mtimeMs)}}function E(e,t){return t===y.FileType.Unknown?e.filter((([e,t])=>t===y.FileType.Unknown||t===(y.FileType.SymbolicLink&y.FileType.Unknown))):e.filter((([e,n])=>(n&t)>0))}t.convertStat=_;class S{constructor(e,t,n){this.paths=e,this.vscfs=t,this.fsExtra=n}static withDefaults(e,t,n){return new S(e||m.FileSystemPaths.withDefaults(),t||d.workspace.fs,n||c)}async pathExists(e){return this.fsExtra.pathExists(e)}async stat(e){const t=d.Uri.file(e);return this.vscfs.stat(t)}async lstat(e){const t=await this.fsExtra.lstat(e);return _(t,(0,f.convertFileType)(t))}async chmod(e,t){return this.fsExtra.chmod(e,t)}async move(e,t){const n=d.Uri.file(e),r=d.Uri.file(t);await this.vscfs.stat(d.Uri.file(this.paths.dirname(t)));const i={overwrite:!1};try{await this.vscfs.rename(n,r,i)}catch(e){if(!(0,v.isFileExistsError)(e))throw e;if((await this.vscfs.stat(r)).type===y.FileType.Directory)throw e;i.overwrite=!0,await this.vscfs.rename(n,r,i)}}async readData(e){const t=d.Uri.file(e),n=await this.vscfs.readFile(t);return Buffer.from(n)}async readText(e){const t=d.Uri.file(e),n=await this.vscfs.readFile(t);return Buffer.from(n).toString(b)}async writeText(e,t){const n=d.Uri.file(e),r=Buffer.from(t);await this.vscfs.writeFile(n,r)}async appendText(e,t){return this.fsExtra.appendFile(e,t)}async copyFile(e,t){const n=d.Uri.file(e),r=d.Uri.file(t);await this.vscfs.stat(d.Uri.file(this.paths.dirname(t))),await this.vscfs.copy(n,r,{overwrite:!0})}async rmfile(e){const t=d.Uri.file(e);return this.vscfs.delete(t,{recursive:!1,useTrash:!1})}async rmdir(e){const t=d.Uri.file(e),n=await this.vscfs.readDirectory(t);if(n&&n.length>0)throw(0,v.createDirNotEmptyError)(e);return this.vscfs.delete(t,{recursive:!0,useTrash:!1})}async rmtree(e){const t=d.Uri.file(e);return await this.vscfs.stat(t),this.vscfs.delete(t,{recursive:!0,useTrash:!1})}async mkdirp(e){const t=d.Uri.file(e);await this.vscfs.createDirectory(t)}async listdir(e){const t=d.Uri.file(e);return(await this.vscfs.readDirectory(t)).map((([t,n])=>[this.paths.join(e,t),n]))}statSync(e){let t=this.fsExtra.lstatSync(e),n=y.FileType.Unknown;return t.isSymbolicLink()&&(n=y.FileType.SymbolicLink,t=this.fsExtra.statSync(e)),n|=(0,f.convertFileType)(t),_(t,n)}readTextSync(e){return this.fsExtra.readFileSync(e,b)}createReadStream(e){return this.fsExtra.createReadStream(e)}createWriteStream(e){return this.fsExtra.createWriteStream(e)}}t.RawFileSystem=S;class w{constructor(e,t,n,r,i,o){this.raw=e,this.pathUtils=t,this.paths=n,this.tmp=r,this.getHash=i,this.globFiles=o}static withDefaults(e,t,n,r,i){return t=t||m.FileSystemPathUtils.withDefaults(),new w(e||S.withDefaults(t.paths),t,t.paths,n||g.TemporaryFileSystem.withDefaults(),r||P,i||(0,p.promisify)(l.default))}async createDirectory(e){return this.raw.mkdirp(e)}async deleteDirectory(e){return this.raw.rmdir(e)}async deleteFile(e){return this.raw.rmfile(e)}async pathExists(e,t){if(void 0===t)return this.raw.pathExists(e);let n;try{n=await this.raw.stat(e)}catch(t){return(0,v.isFileNotFoundError)(t)||(0,h.traceError)(`stat() failed for "${e}"`,t),!1}return t===y.FileType.Unknown?n.type===y.FileType.Unknown:(n.type&t)===t}async fileExists(e){return this.pathExists(e,y.FileType.File)}async directoryExists(e){return this.pathExists(e,y.FileType.Directory)}async listdir(e){try{return await this.raw.listdir(e)}catch(t){if(!await this.pathExists(e))return[];throw t}}async getSubDirectories(e){return E(await this.listdir(e),y.FileType.Directory).map((([e,t])=>e))}async getFiles(e){return E(await this.listdir(e),y.FileType.File).map((([e,t])=>e))}async isDirReadonly(e){const t=`${e}${this.paths.sep}___vscpTest___`;try{await this.raw.stat(e),await this.raw.writeText(t,"")}catch(e){if((0,v.isNoPermissionsError)(e))return!0;throw e}return this.raw.rmfile(t).ignoreErrors(),!1}async getFileHash(e){const t=await this.raw.lstat(e),n=`${t.ctime}-${t.mtime}`;return this.getHash(n)}async search(e,t,n){let r;t&&(r={...r,cwd:t}),n&&(r={...r,dot:n});const i=await this.globFiles(e,r);return Array.isArray(i)?i:[]}fileExistsSync(e){try{this.raw.statSync(e)}catch(e){if((0,v.isFileNotFoundError)(e))return!1;throw e}return!0}}function P(e){const t=(0,a.createHash)("sha512");return t.update(e),t.digest("hex")}t.FileSystemUtils=w,t.getHashString=P;let T=class{constructor(){this.utils=w.withDefaults()}get directorySeparatorChar(){return this.utils.paths.sep}arePathsSame(e,t){return this.utils.pathUtils.arePathsSame(e,t)}getDisplayName(e){return this.utils.pathUtils.getDisplayName(e)}async stat(e){return this.utils.raw.stat(e)}async createDirectory(e){return this.utils.createDirectory(e)}async deleteDirectory(e){return this.utils.deleteDirectory(e)}async listdir(e){return this.utils.listdir(e)}async readFile(e){return this.utils.raw.readText(e)}async readData(e){return this.utils.raw.readData(e)}async writeFile(e,t){return this.utils.raw.writeText(e,t)}async appendFile(e,t){return this.utils.raw.appendText(e,t)}async copyFile(e,t){return this.utils.raw.copyFile(e,t)}async deleteFile(e){return this.utils.deleteFile(e)}async chmod(e,t){return this.utils.raw.chmod(e,t)}async move(e,t){await this.utils.raw.move(e,t)}readFileSync(e){return this.utils.raw.readTextSync(e)}createReadStream(e){return this.utils.raw.createReadStream(e)}createWriteStream(e){return this.utils.raw.createWriteStream(e)}async fileExists(e){return this.utils.fileExists(e)}pathExists(e){return this.utils.pathExists(e)}fileExistsSync(e){return this.utils.fileExistsSync(e)}async directoryExists(e){return this.utils.directoryExists(e)}async getSubDirectories(e){return this.utils.getSubDirectories(e)}async getFiles(e){return this.utils.getFiles(e)}async getFileHash(e){return this.utils.getFileHash(e)}async search(e,t,n){return this.utils.search(e,t,n)}async createTemporaryFile(e,t){return this.utils.tmp.createFile(e,t)}async isDirReadonly(e){return this.utils.isDirReadonly(e)}};t.FileSystem=T,t.FileSystem=T=o([(0,u.injectable)()],T)},29104:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.watchLocationForPattern=t.FileChangeType=void 0;const r=n(54980),i=n(61905),o=n(51271);var s;!function(e){e.Changed="changed",e.Created="created",e.Deleted="deleted"}(s||(t.FileChangeType=s={})),t.watchLocationForPattern=function(e,t,n){const a=new r.RelativePattern(e,t),c=new o.Disposables;(0,i.traceVerbose)(`Start watching: ${e} with pattern ${t} using VSCode API`);const l=r.workspace.createFileSystemWatcher(a);return c.push(l.onDidCreate((e=>n(s.Created,e.fsPath)))),c.push(l.onDidChange((e=>n(s.Changed,e.fsPath)))),c.push(l.onDidDelete((e=>n(s.Deleted,e.fsPath)))),c}},25943:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.emptyDir=t.readdir=t.appendFile=t.ensureSymlink=t.ensureFile=t.ensureDir=t.rename=t.mkdirp=t.mkdir=t.writeFile=t.readJson=t.readFile=t.remove=t.rmdir=t.createFile=t.pathExists=t.pathExistsSync=t.createWriteStream=t.createReadStream=t.chmod=t.lstat=t.stat=t.statSync=t.unlinkSync=t.symlinkSync=t.symlink=t.unlink=t.readlink=t.readdirSync=t.readJSONSync=t.readFileSync=t.existsSync=t.Dirent=t.ReadStream=t.WriteStream=t.Stats=t.copyFile=t.arePathsSame=t.isParentPath=t.normCase=t.normCasePath=t.FileSystemPathUtils=t.Executables=t.FileSystemPaths=void 0;const s=o(n(16928)),a=n(62982),c=o(n(21605)),l=o(n(70857)),u=n(48112);class p{constructor(e,t){this.isCaseInsensitive=e,this.raw=t}static withDefaults(e){return void 0===e&&(e=(0,u.getOSType)()===u.OSType.Windows),new p(e,s)}get sep(){return this.raw.sep}join(...e){return this.raw.join(...e)}dirname(e){return this.raw.dirname(e)}basename(e,t){return this.raw.basename(e,t)}normalize(e){return this.raw.normalize(e)}normCase(e){return e=this.raw.normalize(e),this.isCaseInsensitive?e.toUpperCase():e}}t.FileSystemPaths=p;class d{constructor(e,t){this.delimiter=e,this.osType=t}static withDefaults(){return new d(s.delimiter,(0,u.getOSType)())}get envVar(){return(0,a.getSearchPathEnvVarNames)(this.osType)[0]}}t.Executables=d;class h{constructor(e,t,n,r){this.home=e,this.paths=t,this.executables=n,this.raw=r}static withDefaults(e){return void 0===e&&(e=p.withDefaults()),new h(l.homedir(),e,d.withDefaults(),s)}arePathsSame(e,t){return(e=this.paths.normCase(e))===this.paths.normCase(t)}getDisplayName(e,t){return t&&m(e,t)?`.${this.paths.sep}${this.raw.relative(t,e)}`:m(e,this.home)?`~${this.paths.sep}${this.raw.relative(this.home,e)}`:e}}function f(e){return v(s.normalize(e))}function v(e){return(0,u.getOSType)()===u.OSType.Windows?e.toUpperCase():e}function m(e,t){return t.endsWith(s.sep)||(t+=s.sep),e.endsWith(s.sep)||(e+=s.sep),f(e).startsWith(f(t))}t.FileSystemPathUtils=h,t.normCasePath=f,t.normCase=v,t.isParentPath=m,t.arePathsSame=function(e,t){return f(e)===f(t)},t.copyFile=async function(e,t){const n=s.dirname(t);await c.pathExists(n)||await c.mkdirp(n),await c.copy(e,t,{overwrite:!0})};var g=n(21605);Object.defineProperty(t,"Stats",{enumerable:!0,get:function(){return g.Stats}}),Object.defineProperty(t,"WriteStream",{enumerable:!0,get:function(){return g.WriteStream}}),Object.defineProperty(t,"ReadStream",{enumerable:!0,get:function(){return g.ReadStream}}),Object.defineProperty(t,"Dirent",{enumerable:!0,get:function(){return g.Dirent}}),t.existsSync=function(e){return c.existsSync(e)},t.readFileSync=function(e,t){return"string"==typeof t?c.readFileSync(e,{encoding:t}):c.readFileSync(e,t)},t.readJSONSync=function(e){return c.readJSONSync(e)},t.readdirSync=function(e,t){return void 0===t||!1===t.withFileTypes?c.readdirSync(e):c.readdirSync(e,{...t,withFileTypes:!0})},t.readlink=function(e){return c.readlink(e)},t.unlink=function(e){return c.unlink(e)},t.symlink=function(e,t,n){return c.symlink(e,t,n)},t.symlinkSync=function(e,t,n){return c.symlinkSync(e,t,n)},t.unlinkSync=function(e){return c.unlinkSync(e)},t.statSync=function(e){return c.statSync(e)},t.stat=function(e){return c.stat(e)},t.lstat=function(e){return c.lstat(e)},t.chmod=function(e,t){return c.chmod(e,t)},t.createReadStream=function(e){return c.createReadStream(e)},t.createWriteStream=function(e){return c.createWriteStream(e)},t.pathExistsSync=function(e){return c.pathExistsSync(e)},t.pathExists=function(e){return c.pathExists(e)},t.createFile=function(e){return c.createFile(e)},t.rmdir=function(e,t){return c.rmdir(e,t)},t.remove=function(e){return c.remove(e)},t.readFile=function(e,t){return"string"==typeof t?c.readFile(e,{encoding:t}):c.readFile(e,t)},t.readJson=function(e){return c.readJson(e)},t.writeFile=function(e,t,n){return c.writeFile(e,t,n)},t.mkdir=function(e){return c.mkdir(e)},t.mkdirp=function(e){return c.mkdirp(e)},t.rename=function(e,t){return c.rename(e,t)},t.ensureDir=function(e){return c.ensureDir(e)},t.ensureFile=function(e){return c.ensureFile(e)},t.ensureSymlink=function(e,t,n){return c.ensureSymlink(e,t,n)},t.appendFile=function(e,t,n){return c.appendFile(e,t,n)},t.readdir=function(e,t){return void 0===t?c.readdir(e):c.readdir(e,t)},t.emptyDir=function(e){return c.emptyDir(e)}},58241:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryFileSystem=void 0;const s=o(n(35083));class a{constructor(e){this.raw=e}static withDefaults(){return new a(s)}createFile(e,t){const n={postfix:e,mode:t};return new Promise(((e,t)=>{const{name:r,removeCallback:i}=this.raw.fileSync(n);if(!r)return t(new Error("Failed to create temp file"));e({filePath:r,dispose:i})}))}}t.TemporaryFileSystem=a},14865:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PathUtils=void 0;const c=n(25891),l=s(n(16928)),u=n(86156),p=n(48112),d=n(25943),h=n(65900);let f=class{constructor(e){const t=e?p.OSType.Windows:p.OSType.Unknown;this.utils=new d.FileSystemPathUtils((0,h.untildify)("~"),d.FileSystemPaths.withDefaults(),new d.Executables(l.delimiter,t),l)}get home(){return this.utils.home}get delimiter(){return this.utils.executables.delimiter}get separator(){return this.utils.paths.sep}getPathVariableName(){return this.utils.executables.envVar}getDisplayName(e,t){return this.utils.getDisplayName(e,t)}basename(e,t){return this.utils.paths.basename(e,t)}};t.PathUtils=f,t.PathUtils=f=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IsWindows))],f)},15095:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformService=void 0;const a=n(25891),c=s(n(70857)),l=n(99589),u=n(62982),p=n(48112),d=n(8727);let h=class{constructor(){this.osType=(0,p.getOSType)()}get pathVariableName(){return(0,u.getSearchPathEnvVarNames)(this.osType)[0]}get virtualEnvBinName(){return this.isWindows?"Scripts":"bin"}async getVersion(){if(this.version)return this.version;switch(this.osType){case p.OSType.Windows:case p.OSType.OSX:try{const e=(0,l.coerce)(c.release());if(e)return this.version=e,this.version;throw new Error("Unable to parse version")}catch(e){return(0,d.parseSemVerSafe)(c.release())}default:throw new Error("Not Supported")}}get isWindows(){return(0,p.isWindows)()}get isMac(){return this.osType===p.OSType.OSX}get isLinux(){return this.osType===p.OSType.Linux}get osRelease(){return c.release()}get is64bit(){return(0,p.getArchitecture)()===p.Architecture.x64}};t.PlatformService=h,t.PlatformService=h=o([(0,a.injectable)()],h)},95774:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.getArchitectureDisplayName=t.RegistryImplementation=void 0;const i=n(25891),o=n(61905),s=n(48112),a=n(22408);var c;!function(e){e.x86="x86",e.x64="x64"}(c||(c={}));let l=class{async getKeys(e,t,r){return async function(e){const t=n(62802);return new Promise((n=>{new t(e).keys(((e,t)=>{if(e||!Array.isArray(t))return n([]);n(t.filter((e=>"string"==typeof e.key)).map((e=>e.key)))}))}))}({hive:p(t),arch:u(r),key:e}).catch((e=>((0,o.traceError)("Fetching keys from windows registry resulted in an error",e),[])))}async getValue(e,t,r,i=""){return async function(e,t=""){const r=n(62802);return new Promise((n=>{new r(e).get(t,((e,t)=>{if(e||!t||"string"!=typeof t.value)return n(void 0);n(t.value)}))}))}({hive:p(t),arch:u(r),key:e},i).catch((e=>{(0,o.traceError)("Fetching key value from windows registry resulted in an error",e)}))}};function u(e){switch(e){case s.Architecture.x86:return c.x86;case s.Architecture.x64:return c.x64;default:return}}function p(e){const t=n(62802);switch(e){case a.RegistryHive.HKCU:return t.HKCU;case a.RegistryHive.HKLM:return t.HKLM;default:return}}t.RegistryImplementation=l,t.RegistryImplementation=l=r([(0,i.injectable)()],l),t.getArchitectureDisplayName=function(e){switch(e){case s.Architecture.x64:return"64-bit";case s.Architecture.x86:return"32-bit";default:return""}}},84021:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(89390),i=n(15095),o=n(95774),s=n(22408);t.registerTypes=function(e){e.addSingleton(s.IPlatformService,i.PlatformService),e.addSingleton(s.IFileSystem,r.FileSystem),e.addSingleton(s.IRegistry,o.RegistryImplementation)}},22408:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.IFileSystem=t.IFileSystemPathUtils=t.IPlatformService=t.IRegistry=t.RegistryHive=t.FileType=void 0;const s=o(n(54980));var a;t.FileType=s.FileType,function(e){e[e.HKCU=0]="HKCU",e[e.HKLM=1]="HKLM"}(a||(t.RegistryHive=a={})),t.IRegistry=Symbol("IRegistry"),t.IPlatformService=Symbol("IPlatformService"),t.IFileSystemPathUtils=Symbol("IFileSystemPathUtils"),t.IFileSystem=Symbol("IFileSystem")},4578:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ENCODING=void 0,t.DEFAULT_ENCODING="utf8"},92545:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentProcess=void 0;const i=n(25891);let o=class{constructor(){this.on=(e,t)=>(process.on(e,t),process)}get env(){return process.env}get argv(){return process.argv}get stdout(){return process.stdout}get stdin(){return process.stdin}get execPath(){return process.execPath}};t.CurrentProcess=o,t.CurrentProcess=o=r([(0,i.injectable)()],o)},2467:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBuffer=void 0;const s=o(n(95249)),a=n(4578);t.decodeBuffer=function(e,t=a.DEFAULT_ENCODING){return t=s.encodingExists(t)?t:a.DEFAULT_ENCODING,s.decode(Buffer.concat(e),t)}},13931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModuleVersion=t.isModuleInstalled=t.isValid=t.getUserSitePackages=t.getSitePackages=t.getExecutable=t.execModule=t.execCode=void 0,t.execCode=function(e){return["-c",e]},t.execModule=function(e,t){return["-m",e,...t]},t.getExecutable=function(){return[["-c","import sys;print(sys.executable)"],function(e){return e.trim()}]},t.getSitePackages=function(){return[["-c","from distutils.sysconfig import get_python_lib; print(get_python_lib())"],function(e){return e.trim()}]},t.getUserSitePackages=function(){return[["site","--user-site"],function(e){return e.trim()}]},t.isValid=function(){return[["-c","print(1234)"],function(e){return e.startsWith("1234")}]},t.isModuleInstalled=function(e){return[["-c",`import ${e}`],function(e){return!0}]},t.getModuleVersion=function(e){return[["-c",`import ${e}; print(${e}.__version__)`],function(e){return e.trim()}]}},3931:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t._SCRIPTS_DIR=void 0;const s=o(n(16928)),a=n(552);t._SCRIPTS_DIR=s.join(a.EXTENSION_ROOT_DIR,"python_files")},8370:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.installedCheckScript=t.createCondaScript=t.createVenvScript=t.linterScript=t.tensorboardLauncher=t.execution_py_testlauncher=t.visualstudio_py_testlauncher=t.pytestlauncher=t.testlauncher=t.shell_exec=t.printEnvVariables=t.normalizeSelection=t.interpreterInfo=t.OUTPUT_MARKER_SCRIPT=t.testingTools=void 0;const s=o(n(16928)),a=n(3931),c=a._SCRIPTS_DIR;t.testingTools=o(n(58166)),t.OUTPUT_MARKER_SCRIPT=s.join(a._SCRIPTS_DIR,"get_output_via_markers.py"),t.interpreterInfo=function(){const e=[s.join(c,"interpreterInfo.py")];return[e,function(t){try{return JSON.parse(t)}catch(n){throw Error(`python ${e} returned bad JSON (${t}) (${n})`)}}]},t.normalizeSelection=function(){return[[s.join(c,"normalizeSelection.py")],function(e){return e}]},t.printEnvVariables=function(){return[[s.join(c,"printEnvVariables.py").fileToCommandArgumentForPythonExt()],function(e){return JSON.parse(e)}]},t.shell_exec=function(e,t,n){return[s.join(c,"shell_exec.py"),e.fileToCommandArgumentForPythonExt(),...n,t.fileToCommandArgumentForPythonExt()]},t.testlauncher=function(e){return[s.join(c,"testlauncher.py"),...e]},t.pytestlauncher=function(e){return[s.join(c,"vscode_pytest","run_pytest_script.py"),...e]},t.visualstudio_py_testlauncher=function(e){return[s.join(c,"visualstudio_py_testlauncher.py"),...e]},t.execution_py_testlauncher=function(e){return[s.join(c,"unittestadapter","execution.py"),...e]},t.tensorboardLauncher=function(e){return[s.join(c,"tensorboard_launcher.py"),...e]},t.linterScript=function(){return s.join(c,"linter.py")},t.createVenvScript=function(){return s.join(c,"create_venv.py")},t.createCondaScript=function(){return s.join(c,"create_conda.py")},t.installedCheckScript=function(){return s.join(c,"installed_check.py")}},58166:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.unittestDiscovery=t.runAdapter=void 0;const s=o(n(16928)),a=n(3931),c=s.join(a._SCRIPTS_DIR,"testing_tools");t.runAdapter=function(e){return[s.join(c,"run_adapter.py"),...e]},t.unittestDiscovery=function(e){return[s.join(c,"unittest_discovery.py"),...e]}},89711:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessLogger=void 0;const o=n(25891),s=n(61905),a=n(54661),c=n(552),l=n(48112),u=n(2543),p=n(74399),d=n(18065);n(87295);let h=class{constructor(e){this.workspaceService=e}logProcess(e,t,n){var r;if(!(0,c.isTestExecution)()&&c.isCI&&process.env.UITEST_DISABLE_PROCESS_LOGGING)return;let i=t?[e,...t].map((e=>e.trimQuotes().toCommandArgumentForPythonExt())).join(" "):e;const o=[`> ${this.getDisplayCommands(i)}`];if(null==n?void 0:n.cwd){const e="string"==typeof(null==n?void 0:n.cwd)?null==n?void 0:n.cwd:null===(r=null==n?void 0:n.cwd)||void 0===r?void 0:r.toString();o.push(`cwd: ${this.getDisplayCommands(e)}`)}"string"==typeof(null==n?void 0:n.shell)&&o.push(`shell: ${(0,d.identifyShellFromShellPath)(null==n?void 0:n.shell)}`),o.forEach((e=>{(0,s.traceLog)(e)}))}getDisplayCommands(e){this.workspaceService.workspaceFolders&&1===this.workspaceService.workspaceFolders.length&&(e=f(e,this.workspaceService.workspaceFolders[0].uri.fsPath,"."));const t=(0,l.getUserHomeDir)();return t&&(e=f(e,t,"~")),e}};function f(e,t,n){function r(e){let t=(0,u.escapeRegExp)(e);return(0,l.getOSType)()===l.OSType.Windows&&(t=(0,p.replaceAll)(t,"\\\\","(\\\\|/)")),new RegExp(t,"ig")}let i=e.split(" ");for(let e=0;e<i.length;e++){let o=r(t);const s=o.exec(i[e]);if(s){const a=s.index;a>0&&i[e][a-1].match(/[a-z]/)&&(o=r(t.substring(1))),i[e]=i[e].replace(o,n)}}return i.join(" ")}t.ProcessLogger=h,t.ProcessLogger=h=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IWorkspaceService))],h)},69292:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessService=void 0;const r=n(24434),i=n(61905),o=n(43761),s=n(6856);class a extends r.EventEmitter{constructor(e){super(),this.env=e,this.processesToKill=new Set}static isAlive(e){try{return process.kill(e,0),!0}catch(e){return!1}}static kill(e){(0,o.killPid)(e)}dispose(){this.removeAllListeners(),this.processesToKill.forEach((e=>{try{e.dispose()}catch(e){}}))}execObservable(e,t,n={}){const r={...n,doNotLog:!0},i=(0,o.execObservable)(e,t,r,this.env,this.processesToKill);return this.emit("exec",e,t,n),i}exec(e,t,n={}){if(this.emit("exec",e,t,n),n.useWorker)return(0,s.workerPlainExec)(e,t,n);const r={...n,doNotLog:!0};return(0,o.plainExec)(e,t,r,this.env,this.processesToKill)}shellExec(e,t={}){if(this.emit("exec",e,void 0,t),t.useWorker)return(0,s.workerShellExec)(e,t);const n=new Set,r={...t,doNotLog:!0};return(0,o.shellExec)(e,r,this.env,n).finally((()=>{n.forEach((t=>{try{t.dispose()}catch(t){(0,i.traceError)(`Unable to kill process for ${e}`)}}))}))}}t.ProcessService=a},86074:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessServiceFactory=void 0;const o=n(25891),s=n(86156),a=n(53694),c=n(69292),l=n(35026);let u=class{constructor(e,t,n){this.envVarsService=e,this.processLogger=t,this.disposableRegistry=n}async create(e,t){const n=(null==t?void 0:t.doNotUseCustomEnvs)?void 0:await this.envVarsService.getEnvironmentVariables(e),r=new c.ProcessService(n);return this.disposableRegistry.push(r),r.on("exec",this.processLogger.logProcess.bind(this.processLogger))}};t.ProcessServiceFactory=u,t.ProcessServiceFactory=u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IEnvironmentVariablesProvider)),i(1,(0,o.inject)(l.IProcessLogger)),i(2,(0,o.inject)(s.IDisposableRegistry))],u)},81556:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createMicrosoftStoreEnv=t.createPixiEnv=t.createCondaEnv=t.createPythonEnv=void 0;const s=o(n(16928)),a=n(61905),c=n(95885),l=n(20467),u=n(86157),p=n(43803),d=n(552),h=o(n(13931)),f=new Map;class v{constructor(e,t){this.pythonPath=e,this.deps=t,this.cachedInterpreterInformation=null}getExecutionInfo(e=[],t){const n=this.deps.getPythonArgv(this.pythonPath);return(0,l.buildPythonExecInfo)(n,e,t)}getExecutionObservableInfo(e=[],t){const n=this.deps.getObservablePythonArgv(this.pythonPath);return(0,l.buildPythonExecInfo)(n,e,t)}async getInterpreterInformation(){return null===this.cachedInterpreterInformation&&(this.cachedInterpreterInformation=await this.getInterpreterInformationImpl()),this.cachedInterpreterInformation}async getExecutablePath(){if(await this.deps.isValidExecutable(this.pythonPath))return this.pythonPath;const e=f.get(this.pythonPath);if(void 0!==e&&!(0,d.isTestExecution)())return e;const t=this.getExecutionInfo(),n=(0,u.getExecutablePath)(t,this.deps.shellExec);return f.set(this.pythonPath,n),n}async getModuleVersion(e){const[t,n]=h.getModuleVersion(e),r=this.getExecutionInfo(t);let i;try{i=await this.deps.exec(r.command,r.args)}catch(t){return void(0,a.traceVerbose)(`Error when getting version of module ${e}`,t)}return n(i.stdout)}async isModuleInstalled(e){const[t]=h.isModuleInstalled(e),n=this.getExecutionInfo(t);try{await this.deps.exec(n.command,n.args)}catch(t){return(0,a.traceVerbose)(`Error when checking if module is installed ${e}`,t),!1}return!0}async getInterpreterInformationImpl(){try{const e=this.getExecutionInfo();return await(0,p.getInterpreterInfo)(e,this.deps.shellExec,{verbose:a.traceVerbose,error:a.traceError})}catch(e){(0,a.traceError)(`Failed to get interpreter information for '${this.pythonPath}'`,e)}}}function m(e,t,n,r,i){return{getPythonArgv:e=>(s.basename(e)===e&&(t=e.split(" ")),t||[e]),getObservablePythonArgv:e=>(s.basename(e)===e&&(n=e.split(" ")),n||[e]),isValidExecutable:e,exec:async(e,t)=>r(e,t,{throwOnStdErr:!0}),shellExec:i}}t.createPythonEnv=function(e,t,n){const r=m((async e=>n.pathExists(e)),void 0,void 0,((e,n,r)=>t.exec(e,n,r)),((e,n)=>t.shellExec(e,n)));return new v(e,r)},t.createCondaEnv=async function(e,t,n){const r=await c.Conda.getConda(),i=await(null==r?void 0:r.getRunPythonArgs({name:e.name,prefix:e.path}));if(!i)return;const o=m((async e=>n.pathExists(e)),i,i,((e,n,r)=>t.exec(e,n,r)),((e,n)=>t.shellExec(e,n))),s=await(null==r?void 0:r.getInterpreterPathForEnvironment({name:e.name,prefix:e.path}));return s?new v(s,o):void 0},t.createPixiEnv=async function(e,t,n){const r=e.pixi.getRunPythonArgs(e.manifestPath,e.envName),i=m((async e=>n.pathExists(e)),r,r,((e,n,r)=>t.exec(e,n,r)),((e,n)=>t.shellExec(e,n)));return new v(e.interpreterPath,i)},t.createMicrosoftStoreEnv=function(e,t){const n=m((async e=>!0),void 0,void 0,((e,n,r)=>t.exec(e,n,r)),((e,n)=>t.shellExec(e,n)));return new v(e,n)}},26637:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExecutionFactory=void 0;const o=n(25891),s=n(67714),a=n(29413),c=n(9100),l=n(51535),u=n(53322),p=n(22408),d=n(86156),h=n(69292),f=n(81556),v=n(42536),m=n(35026),g=n(23167),y=n(7855),b=n(61905),_=n(8164);let E=class{constructor(e,t,n,r,i,o,s){this.serviceContainer=e,this.activationHelper=t,this.processServiceFactory=n,this.configService=r,this.pyenvs=i,this.autoSelection=o,this.interpreterPathExpHelper=s,this.disposables=this.serviceContainer.get(d.IDisposableRegistry),this.logger=this.serviceContainer.get(m.IProcessLogger),this.fileSystem=this.serviceContainer.get(p.IFileSystem)}async create(e){let{pythonPath:t}=e;if(!t||"python"===t){const n=this.serviceContainer.get(a.IActivatedEnvironmentLaunch);await n.selectIfLaunchedViaActivatedEnv();const r=this.interpreterPathExpHelper.get(e.resource);r&&"python"!==r||await Promise.race([this.autoSelection.autoSelectInterpreter(e.resource).then((()=>!0)),(0,y.sleep)(5e4).then((()=>!1))])||(0,b.traceError)("Autoselection timeout out, this is likely a issue with how consumer called execution factory API. Using default python to execute."),t=this.configService.getSettings(e.resource).pythonPath}const n=await this.processServiceFactory.create(e.resource);if(await(0,_.getPixi)()){const e=await this.createPixiExecutionService(t,n);if(e)return e}const r=await this.createCondaExecutionService(t,n);if(r)return r;const i=this.pyenvs.isMicrosoftStoreInterpreter.bind(this.pyenvs);return S(n,await i(t)?(0,f.createMicrosoftStoreEnv)(t,n):(0,f.createPythonEnv)(t,n,this.fileSystem))}async createActivatedEnvironment(e){const t=await this.activationHelper.getActivatedEnvironmentVariables(e.resource,e.interpreter,e.allowEnvironmentFetchExceptions),n=t&&Object.keys(t).length>0;if((0,l.sendTelemetryEvent)(u.EventName.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES,void 0,{hasEnvVars:n}),!n)return this.create({resource:e.resource,pythonPath:e.interpreter?e.interpreter.path:void 0});const r=e.interpreter?e.interpreter.path:this.configService.getSettings(e.resource).pythonPath,i=new h.ProcessService({...t});if(i.on("exec",this.logger.logProcess.bind(this.logger)),this.disposables.push(i),await(0,_.getPixi)()){const e=await this.createPixiExecutionService(r,i);if(e)return e}const o=await this.createCondaExecutionService(r,i);return o||S(i,(0,f.createPythonEnv)(r,i,this.fileSystem))}async createCondaExecutionService(e,t){const n=this.serviceContainer.get(a.IComponentAdapter),[r]=await Promise.all([n.getCondaEnvironment(e)]);if(!r)return;const i=await(0,f.createCondaEnv)(r,t,this.fileSystem);return i?S(t,i):void 0}async createPixiExecutionService(e,t){const n=await(0,_.getPixiEnvironmentFromInterpreter)(e);if(!n)return;const r=await(0,f.createPixiEnv)(n,t,this.fileSystem);return r?S(t,r):void 0}};function S(e,t){const n=(0,v.createPythonProcessService)(e,t);return{getInterpreterInformation:()=>t.getInterpreterInformation(),getExecutablePath:()=>t.getExecutablePath(),isModuleInstalled:e=>t.isModuleInstalled(e),getModuleVersion:e=>t.getModuleVersion(e),getExecutionInfo:e=>t.getExecutionInfo(e),execObservable:(e,t)=>n.execObservable(e,t),execModuleObservable:(e,t,r)=>n.execModuleObservable(e,t,r),exec:(e,t)=>n.exec(e,t),execModule:(e,t,r)=>n.execModule(e,t,r),execForLinter:(e,t,r)=>n.execForLinter(e,t,r)}}t.PythonExecutionFactory=E,t.PythonExecutionFactory=E=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer)),i(1,(0,o.inject)(s.IEnvironmentActivationService)),i(2,(0,o.inject)(m.IProcessServiceFactory)),i(3,(0,o.inject)(d.IConfigurationService)),i(4,(0,o.inject)(a.IComponentAdapter)),i(5,(0,o.inject)(g.IInterpreterAutoSelectionService)),i(6,(0,o.inject)(d.IInterpreterPathService))],E)},42536:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createPythonProcessService=void 0;const s=n(76366),a=n(45612),c=o(n(13931));class l{constructor(e){this.deps=e}execObservable(e,t){const n={...t},r=this.deps.getExecutionObservableInfo(e);return this.deps.execObservable(r.command,r.args,n)}execModuleObservable(e,t,n){const r=c.execModule(e,t),i={...n},o=this.deps.getExecutionObservableInfo(r);return this.deps.execObservable(o.command,o.args,i)}async exec(e,t){const n={...t},r=this.deps.getExecutionInfo(e);return this.deps.exec(r.command,r.args,n)}async execModule(e,t,n){const r=c.execModule(e,t),i={...n},o=this.deps.getExecutionInfo(r),l=await this.deps.exec(o.command,o.args,i);if(e&&s.ErrorUtils.outputHasModuleNotInstalledError(e,l.stderr)&&!await this.deps.isModuleInstalled(e))throw new a.ModuleNotInstalledError(e);return l}async execForLinter(e,t,n){const r={...n},i=this.deps.getExecutionInfo(t),o=await this.deps.exec(i.command,i.args,r);if(e&&s.ErrorUtils.outputHasModuleNotInstalledError(e,o.stderr)&&!await this.deps.isModuleInstalled(e))throw new a.ModuleNotInstalledError(e);return o}}t.createPythonProcessService=function(e,t){return new l({isModuleInstalled:async e=>t.isModuleInstalled(e),getExecutionInfo:e=>t.getExecutionInfo(e),getExecutionObservableInfo:e=>t.getExecutionObservableInfo(e),exec:async(t,n,r)=>e.exec(t,n,r),execObservable:(t,n,r)=>e.execObservable(t,n,r)})}},70964:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonToolExecutionService=void 0;const o=n(25891),s=n(9100),a=n(35026);let c=class{constructor(e){this.serviceContainer=e}async execObservable(e,t,n){if(t.env)throw new Error("Environment variables are not supported");return e.moduleName&&e.moduleName.length>0?(await this.serviceContainer.get(a.IPythonExecutionFactory).create({resource:n})).execModuleObservable(e.moduleName,e.args,t):(await this.serviceContainer.get(a.IProcessServiceFactory).create(n)).execObservable(e.execPath,e.args,{...t})}async exec(e,t,n){if(t.env)throw new Error("Environment variables are not supported");return e.moduleName&&e.moduleName.length>0?(await this.serviceContainer.get(a.IPythonExecutionFactory).create({resource:n})).execModule(e.moduleName,e.args,t):(await this.serviceContainer.get(a.IProcessServiceFactory).create(n)).exec(e.execPath,e.args,{...t})}async execForLinter(e,t,n){if(t.env)throw new Error("Environment variables are not supported");const r=await this.serviceContainer.get(a.IPythonExecutionFactory).create({resource:n});return e.execPath?r.exec(e.args,t):r.execForLinter(e.moduleName,e.args,t)}};t.PythonToolExecutionService=c,t.PythonToolExecutionService=c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IServiceContainer))],c)},43761:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.killPid=t.execObservable=t.plainExec=t.shellExec=void 0;const r=n(35317),i=n(29707),o=n(7855),s=n(4578),a=n(35026),c=n(98803),l=n(2467),u=n(61905),p=n(68397),d=n(89711),h=/your [0-9]+x[0-9]+ screen size is bogus\. expect trouble/;function f(e,t){const n={...e},r=n;if(r){r.encoding="string"==typeof r.encoding&&r.encoding.length>0?r.encoding:s.DEFAULT_ENCODING;const{encoding:e}=r;delete r.encoding,r.encoding=e}if(n.env&&0!==Object.keys(n.env).length)n.env={...n.env};else{const e=t||process.env;n.env={...e}}return r&&r.extraVariables&&(n.env={...n.env,...r.extraVariables}),n.env.PYTHONUNBUFFERED="1",n.env.PYTHONIOENCODING||(n.env.PYTHONIOENCODING="utf-8"),n}function v(e){const t=e.match(/>>>PYTHON-EXEC-OUTPUT([\s\S]*)<<<PYTHON-EXEC-OUTPUT/),n=null!==t&&t.length>=2?t[1].trim():void 0;return void 0!==n?n:e}function m(e){try{"win32"===process.platform?(0,r.execSync)(`taskkill /pid ${e} /T /F`):process.kill(e)}catch(t){(0,u.traceVerbose)("Unable to kill process with pid",e)}}t.shellExec=function(e,t={},n,i){const o=f(t,n);return t.doNotLog||new d.ProcessLogger(new p.WorkspaceService).logProcess(e,void 0,o),new Promise(((t,n)=>{let s=!1;const a=(0,r.exec)(e,o,((e,r,i)=>{e&&null!==e?n(e):o.throwOnStdErr&&i&&i.length?n(new Error(i)):(r=v(r),t({stderr:i&&i.length>0?i:void 0,stdout:r}))}));a.once("close",(()=>{s=!0})),a.once("exit",(()=>{s=!0})),a.once("error",(()=>{s=!0}));const c={dispose:()=>{s||a.killed||(a.pid?m(a.pid):a.kill())}};i&&i.add(c)}))},t.plainExec=function(e,t,n={},i,s){var u,g;const y=f(n,i),b=y.encoding?y.encoding:"utf8";n.doNotLog||new d.ProcessLogger(new p.WorkspaceService).logProcess(e,t,n);const _=(0,r.spawn)(e,t,y);null===(u=_.stdout)||void 0===u||u.on("error",c.noop),null===(g=_.stderr)||void 0===g||g.on("error",c.noop);const E=(0,o.createDeferred)(),S={dispose:()=>{_.killed||E.completed||(_.pid?m(_.pid):_.kill())}};null==s||s.add(S);const w=[],P=(e,t,n)=>{null==e||e.on(t,n),w.push({dispose:()=>null==e?void 0:e.removeListener(t,n)})};n.token&&w.push(n.token.onCancellationRequested(S.dispose));const T=[];P(_.stdout,"data",(e=>{var t;T.push(e),null===(t=n.outputChannel)||void 0===t||t.append(e.toString())}));const C=[];return P(_.stderr,"data",(e=>{var t;n.mergeStdOutErr?(T.push(e),C.push(e)):C.push(e),null===(t=n.outputChannel)||void 0===t||t.append(e.toString())})),_.once("close",(()=>{if(E.completed)return;const e=0===C.length?void 0:(0,l.decodeBuffer)(C,b);if(e&&e.length>0&&n.throwOnStdErr&&(!h.test(e)||0!==e.replace(h,"").trim().length))E.reject(new a.StdErrError(e));else{let t=(0,l.decodeBuffer)(T,b);t=v(t),E.resolve({stdout:t,stderr:e})}w.forEach((e=>e.dispose())),S.dispose()})),_.once("error",(e=>{E.reject(e),w.forEach((e=>e.dispose())),S.dispose()})),E.promise},t.execObservable=function(e,t,n={},o,s){const c=f(n,o),u=c.encoding?c.encoding:"utf8";n.doNotLog||new d.ProcessLogger(new p.WorkspaceService).logProcess(e,t,n);const h=(0,r.spawn)(e,t,c);let v=!1;const g={dispose(){h&&h.pid&&!h.killed&&!v&&m(h.pid),h&&h.unref()}};null==s||s.add(g);const y=new i.Observable((e=>{var t,r;const i=[],o=(e,t,n)=>{null==e||e.on(t,n),i.push({dispose:()=>null==e?void 0:e.removeListener(t,n)})};n.token&&i.push(n.token.onCancellationRequested((()=>{v||h.killed||(h.pid?m(h.pid):h.kill(),v=!0)})));const s=(t,r)=>{let i=(0,l.decodeBuffer)([r],u);"stderr"===t&&n.throwOnStdErr?e.error(new a.StdErrError(i)):(i=function(e){return(e=e.replace(">>>PYTHON-EXEC-OUTPUT\r\n","").replace(">>>PYTHON-EXEC-OUTPUT\n","")).replace("<<<PYTHON-EXEC-OUTPUT\r\n","").replace("<<<PYTHON-EXEC-OUTPUT\n","")}(i),e.next({source:t,out:i}))};o(h.stdout,"data",(e=>s("stdout",e))),o(h.stderr,"data",(e=>s("stderr",e))),h.once("close",(()=>{v=!0,e.complete(),i.forEach((e=>e.dispose()))})),h.once("exit",(()=>{v=!0,e.complete(),i.forEach((e=>e.dispose()))})),h.once("error",(t=>{v=!0,e.error(t),i.forEach((e=>e.dispose()))})),void 0!==n.stdinStr&&(null===(t=h.stdin)||void 0===t||t.write(n.stdinStr),null===(r=h.stdin)||void 0===r||r.end())}));return{proc:h,out:y,dispose:g.dispose}},t.killPid=m},42219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(86074),i=n(26637),o=n(70964),s=n(35026);t.registerTypes=function(e){e.addSingleton(s.IProcessServiceFactory,r.ProcessServiceFactory),e.addSingleton(s.IPythonExecutionFactory,i.PythonExecutionFactory),e.addSingleton(s.IPythonToolExecutionService,o.PythonToolExecutionService)}},35026:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPythonToolExecutionService=t.StdErrError=t.IPythonExecutionService=t.IPythonExecutionFactory=t.IProcessServiceFactory=t.IProcessLogger=void 0,t.IProcessLogger=Symbol("IProcessLogger"),t.IProcessServiceFactory=Symbol("IProcessServiceFactory"),t.IPythonExecutionFactory=Symbol("IPythonExecutionFactory"),t.IPythonExecutionService=Symbol("IPythonExecutionService");class n extends Error{constructor(e){super(e)}}t.StdErrError=n,t.IPythonToolExecutionService=Symbol("IPythonToolRunnerService")},3989:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.executeWorkerFile=void 0;const s=n(28167),a=o(n(16928)),c=n(61905);t.executeWorkerFile=async function(e,t){if(!e.endsWith(".worker.js"))throw new Error('Worker file must end with ".worker.js" for webpack to bundle webworkers');return new Promise(((n,r)=>{const i=new s.Worker(e,{workerData:t}),o=i.threadId;(0,c.traceVerbose)(`Worker id ${o} for file ${a.basename(e)} with data ${JSON.stringify(t)}`),i.on("message",(e=>{e.err&&r(e.err),n(e.res)})),i.on("error",(t=>{(0,c.traceError)(`Error in worker ${e}`,t),r(t)})),i.on("exit",(t=>{(0,c.traceVerbose)(`Worker id ${o} exited with code ${t}`),0!==t&&r(new Error(`Worker ${e} stopped with exit code ${t}`))}))}))}},6856:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.workerPlainExec=t.workerShellExec=void 0;const s=o(n(16928)),a=n(3989);t.workerShellExec=function(e,t){return(0,a.executeWorkerFile)(s.join(__dirname,"shellExec.worker.js"),{command:e,options:t})},t.workerPlainExec=function(e,t,n={}){return(0,a.executeWorkerFile)(s.join(__dirname,"plainExec.worker.js"),{file:e,args:t,options:n})}},96777:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(11925),i=n(86156),o=n(46003),s=n(95440),a=n(81274),c=n(92544),l=n(17913),u=n(17850),p=n(99382),d=n(36418),h=n(19329),f=n(40205),v=n(49044),m=n(51536),g=n(90256),y=n(44137),b=n(22099),_=n(54661),E=n(68397),S=n(84599),w=n(21590),P=n(169),T=n(9737),C=n(18761),x=n(66673),I=n(9923),O=n(14865),R=n(92545),D=n(89711),k=n(35026),A=n(6122),N=n(57242),j=n(93934),M=n(29007),L=n(44233),F=n(16744),V=n(27977),U=n(1021),W=n(90344),H=n(90688),q=n(41777),$=n(81367),B=n(556),K=n(50209),G=n(23935),z=n(70670),Y=n(41140),J=n(55597),X=n(54083),Q=n(15555),Z=n(48112),ee=n(62829);t.registerTypes=function(e){e.addSingletonInstance(i.IsWindows,(0,Z.isWindows)()),e.addSingleton(_.IActiveResourceService,c.ActiveResourceService),e.addSingleton(i.IInterpreterPathService,C.InterpreterPathService),e.addSingleton(i.IExtensions,g.Extensions),e.addSingleton(i.IRandom,Y.Random),e.addSingleton(i.IPersistentStateFactory,I.PersistentStateFactory),e.addBinding(i.IPersistentStateFactory,r.IExtensionSingleActivationService),e.addSingleton(G.ITerminalServiceFactory,W.TerminalServiceFactory),e.addSingleton(i.IPathUtils,O.PathUtils),e.addSingleton(_.IApplicationShell,u.ApplicationShell),e.addSingleton(_.IClipboard,p.ClipboardService),e.addSingleton(i.ICurrentProcess,R.CurrentProcess),e.addSingleton(i.IInstaller,T.ProductInstaller),e.addSingleton(_.IJupyterExtensionDependencyManager,o.JupyterExtensionDependencyManager),e.addSingleton(r.IExtensionSingleActivationService,Q.RequireJupyterPrompt),e.addSingleton(r.IExtensionSingleActivationService,X.CreatePythonFileCommandHandler),e.addSingleton(_.ICommandManager,d.CommandManager),e.addSingleton(_.IContextKeyManager,J.ContextKeyManager),e.addSingleton(i.IConfigurationService,S.ConfigurationService),e.addSingleton(_.IWorkspaceService,E.WorkspaceService),e.addSingleton(k.IProcessLogger,D.ProcessLogger),e.addSingleton(_.IDocumentManager,m.DocumentManager),e.addSingleton(_.ITerminalManager,b.TerminalManager),e.addSingleton(_.IDebugService,v.DebugService),e.addSingleton(_.IApplicationEnvironment,l.ApplicationEnvironment),e.addSingleton(_.ILanguageService,y.LanguageService),e.addSingleton(i.IBrowserService,x.BrowserService),e.addSingleton(G.ITerminalActivator,A.TerminalActivator),e.addSingleton(G.ITerminalActivationHandler,N.PowershellTerminalActivationFailedHandler),e.addSingleton(i.IExperimentService,P.ExperimentService),e.addSingleton(G.ITerminalHelper,H.TerminalHelper),e.addSingleton(G.ITerminalActivationCommandProvider,j.Bash,G.TerminalActivationProviders.bashCShellFish),e.addSingleton(G.ITerminalActivationCommandProvider,L.CommandPromptAndPowerShell,G.TerminalActivationProviders.commandPromptAndPowerShell),e.addSingleton(G.ITerminalActivationCommandProvider,M.Nushell,G.TerminalActivationProviders.nushell),e.addSingleton(G.ITerminalActivationCommandProvider,U.PyEnvActivationCommandProvider,G.TerminalActivationProviders.pyenv),e.addSingleton(G.ITerminalActivationCommandProvider,F.CondaActivationCommandProvider,G.TerminalActivationProviders.conda),e.addSingleton(G.ITerminalActivationCommandProvider,ee.PixiActivationCommandProvider,G.TerminalActivationProviders.pixi),e.addSingleton(G.ITerminalActivationCommandProvider,V.PipEnvActivationCommandProvider,G.TerminalActivationProviders.pipenv),e.addSingleton(i.IToolExecutionPath,w.PipEnvExecutionPath,i.ToolExecutionPath.pipenv),e.addSingleton(z.IMultiStepInputFactory,z.MultiStepInputFactory),e.addSingleton(a.IImportTracker,s.ImportTracker),e.addBinding(a.IImportTracker,r.IExtensionSingleActivationService),e.addSingleton(G.IShellDetector,$.TerminalNameShellDetector),e.addSingleton(G.IShellDetector,q.SettingsShellDetector),e.addSingleton(G.IShellDetector,B.UserEnvironmentShellDetector),e.addSingleton(G.IShellDetector,K.VSCEnvironmentShellDetector),e.addSingleton(r.IExtensionSingleActivationService,h.ReloadVSCodeCommandHandler),e.addSingleton(r.IExtensionSingleActivationService,f.ReportIssueCommandHandler)}},74399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceAll=t.splitLines=void 0,t.splitLines=function(e,t={removeEmptyEntries:!0,trim:!0}){let n=e.split(/\r?\n/g);return(null==t?void 0:t.trim)&&(n=n.map((e=>e.trim()))),(null==t?void 0:t.removeEmptyEntries)&&(n=n.filter((e=>e.length>0))),n},t.replaceAll=function(e,t,n){return e?e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n):e}},81777:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTerminalActivator=void 0;const r=n(61905),i=n(7855);t.BaseTerminalActivator=class{constructor(e){this.helper=e,this.activatedTerminals=new Map}async activateEnvironmentInTerminal(e,t){if(this.activatedTerminals.has(e))return this.activatedTerminals.get(e);const n=(0,i.createDeferred)();this.activatedTerminals.set(e,n.promise);const o=this.helper.identifyTerminalShell(e),s=await this.helper.getEnvironmentActivationCommands(o,null==t?void 0:t.resource,null==t?void 0:t.interpreter);let a=!1;if(s)for(const n of s)e.show(null==t?void 0:t.preserveFocus),(0,r.traceVerbose)(`Command sent to terminal: ${n}`),e.sendText(n),await this.waitForCommandToProcess(o),a=!0;return n.resolve(a),a}async waitForCommandToProcess(e){await(0,i.sleep)(500)}}},6122:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalActivator=void 0;const o=n(25891),s=n(86156),a=n(23935),c=n(81777),l=n(8103),u=n(36380),p=n(53322),d=n(51535);let h=class{constructor(e,t,n,r){this.helper=e,this.handlers=t,this.configurationService=n,this.experimentService=r,this.pendingActivations=new WeakMap,this.initialize()}async activateEnvironmentInTerminal(e,t){let n=this.pendingActivations.get(e);return n||(n=this.activateEnvironmentInTerminalImpl(e,t),this.pendingActivations.set(e,n),n)}async activateEnvironmentInTerminalImpl(e,t){if(!this.configurationService.getSettings(null==t?void 0:t.resource).terminal.activateEnvironment||(0,l.inTerminalEnvVarExperiment)(this.experimentService)||(null==t?void 0:t.hideFromUser)||(0,u.useEnvExtension)())return(0,u.useEnvExtension)()&&(0,d.sendTelemetryEvent)(p.EventName.PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL),!1;const n=await this.baseActivator.activateEnvironmentInTerminal(e,t);return this.handlers.forEach((r=>r.handleActivation(e,null==t?void 0:t.resource,!0===(null==t?void 0:t.preserveFocus),n).ignoreErrors())),n}initialize(){this.baseActivator=new c.BaseTerminalActivator(this.helper)}};t.TerminalActivator=h,t.TerminalActivator=h=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ITerminalHelper)),i(1,(0,o.multiInject)(a.ITerminalActivationHandler)),i(2,(0,o.inject)(s.IConfigurationService)),i(3,(0,o.inject)(s.IExperimentService))],h)},57242:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PowershellTerminalActivationFailedHandler=void 0;const o=n(25891),s=n(34470),a=n(79576),c=n(22408),l=n(23935);let u=class{constructor(e,t,n){this.helper=e,this.platformService=t,this.diagnosticService=n}async handleActivation(e,t,n,r){if(r||!this.platformService.isWindows)return;const i=this.helper.identifyTerminalShell(e);if(i!==l.TerminalShellType.powershell&&i!==l.TerminalShellType.powershellCore)return;const o=await this.helper.getEnvironmentActivationCommands(l.TerminalShellType.commandPrompt,t);o&&Array.isArray(o)&&0!==o.length&&this.diagnosticService.handle([new s.PowershellActivationNotAvailableDiagnostic(t)]).ignoreErrors()}};t.PowershellTerminalActivationFailedHandler=u,t.PowershellTerminalActivationFailedHandler=u=r([(0,o.injectable)(),i(0,(0,o.inject)(l.ITerminalHelper)),i(1,(0,o.inject)(c.IPlatformService)),i(2,(0,o.inject)(a.IDiagnosticsService)),i(2,(0,o.named)(s.PowerShellActivationHackDiagnosticsServiceId))],u)},32077:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useCommandPromptAsDefaultShell=t.getCommandPromptLocation=void 0;const s=o(n(16928)),a=n(54980);function c(e){const t=e.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),n=s.join(e.env.windir,t?"Sysnative":"System32");return s.join(n,"cmd.exe")}t.getCommandPromptLocation=c,t.useCommandPromptAsDefaultShell=async function(e,t){const n=c(e);await t.updateSectionSetting("terminal","integrated.shell.windows",n,void 0,a.ConfigurationTarget.Global)}},26948:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VenvBaseActivationCommandProvider=void 0;const c=n(25891),l=s(n(16928)),u=n(29413),p=n(9100),d=n(22408);let h=class{constructor(e){this.serviceContainer=e}async getActivationCommands(e,t){const n=await this.serviceContainer.get(u.IInterpreterService).getActiveInterpreter(e);if(n)return this.getActivationCommandsForInterpreter(n.path,t)}};h=o([(0,c.injectable)(),a(0,(0,c.inject)(p.IServiceContainer))],h),t.VenvBaseActivationCommandProvider=class extends h{isShellSupported(e){return void 0!==this.scripts[e]}async findScriptFile(e,t){const n=this.serviceContainer.get(d.IFileSystem),r=this.scripts[t];if(r)return function(e,t,r){const i="string"==typeof e?[e]:e;return async e=>{const o=t(e);for(const e of i){const t=r(o,e);if(await(s=t,n.fileExists(s)))return t}var s}}(r,l.dirname,l.join)(e)}}},93934:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Bash=t.getAllScripts=void 0;const i=n(25891);n(87295);const o=n(23935),s=n(26948),a={[o.TerminalShellType.wsl]:["activate.sh","activate"],[o.TerminalShellType.ksh]:["activate.sh","activate"],[o.TerminalShellType.zsh]:["activate.sh","activate"],[o.TerminalShellType.gitbash]:["activate.sh","activate"],[o.TerminalShellType.bash]:["activate.sh","activate"],[o.TerminalShellType.tcshell]:["activate.csh"],[o.TerminalShellType.cshell]:["activate.csh"],[o.TerminalShellType.fish]:["activate.fish"]};t.getAllScripts=function(){const e=[];for(const t of Object.values(a))for(const n of t)e.includes(n)||e.push(n);return e};let c=class extends s.VenvBaseActivationCommandProvider{constructor(){super(...arguments),this.scripts=a}async getActivationCommandsForInterpreter(e,t){const n=await this.findScriptFile(e,t);if(n)return[`source ${n.fileToCommandArgumentForPythonExt()}`]}};t.Bash=c,t.Bash=c=r([(0,i.injectable)()],c)},44233:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandPromptAndPowerShell=t.getAllScripts=void 0;const c=n(25891),l=s(n(16928)),u=n(9100);n(87295);const p=n(23935),d=n(26948),h={[p.TerminalShellType.commandPrompt]:["activate.bat","Activate.ps1"],[p.TerminalShellType.powershell]:["Activate.ps1","activate.bat"],[p.TerminalShellType.powershellCore]:["Activate.ps1","activate.bat"]};t.getAllScripts=function(e){const t=[];for(const n of Object.values(h))for(const r of n)t.includes(r)||t.push(r,e("Scripts",r),e("scripts",r));return t};let f=class extends d.VenvBaseActivationCommandProvider{constructor(e){super(e),this.scripts={};for(const[e,t]of Object.entries(h)){const n=e,r=[];for(const e of t)r.push(e,l.join("Scripts",e),l.join("scripts",e));this.scripts[n]=r}}async getActivationCommandsForInterpreter(e,t){const n=await this.findScriptFile(e,t);if(n)return t===p.TerminalShellType.commandPrompt&&n.endsWith("activate.bat")?[n.fileToCommandArgumentForPythonExt()]:t!==p.TerminalShellType.powershell&&t!==p.TerminalShellType.powershellCore||!n.endsWith("Activate.ps1")?t===p.TerminalShellType.commandPrompt&&n.endsWith("Activate.ps1")?[]:void 0:[`& ${n.fileToCommandArgumentForPythonExt()}`]}};t.CommandPromptAndPowerShell=f,t.CommandPromptAndPowerShell=f=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IServiceContainer))],f)},16744:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t._getPowershellCommands=t.CondaActivationCommandProvider=void 0,n(87295);const c=n(25891),l=s(n(16928)),u=n(61905),p=n(29413),d=n(22408),h=n(86156),f=n(23935);let v=class{constructor(e,t,n,r){this.condaService=e,this.platform=t,this.configService=n,this.pyenvs=r}isShellSupported(){return!0}getActivationCommands(e,t){const{pythonPath:n}=this.configService.getSettings(e);return this.getActivationCommandsForInterpreter(n,t)}async getActivationCommandsForInterpreter(e,t){(0,u.traceVerbose)(`Getting conda activation commands for interpreter ${e} with shell ${t}`);const n=await this.pyenvs.getCondaEnvironment(e);if(!n)return void(0,u.traceWarn)(`No conda environment found for interpreter ${e}`);(0,u.traceVerbose)(`Found conda environment: ${JSON.stringify(n)}`);const r=n.name.length>0?n.name:n.path,i=await this.condaService.getInterpreterPathForEnvironment(n);(0,u.traceInfo)(`Using interpreter path: ${i}`);const o=await this.condaService.getActivationScriptFromInterpreter(i,n.name);if((0,u.traceVerbose)(`Got activation script: ${null==o?void 0:o.path}} with type: ${null==o?void 0:o.type}`),null==o?void 0:o.path){if(this.platform.isWindows&&t!==f.TerminalShellType.bash&&t!==f.TerminalShellType.gitbash){const e=[o.path,`conda activate ${r.toCommandArgumentForPythonExt()}`];return(0,u.traceInfo)(`Using Windows-specific commands: ${e.join(", ")}`),e}const e=await this.condaService.getCondaInfo();if((0,u.traceVerbose)(`Conda shell level: ${null==e?void 0:e.conda_shlvl}`),"global"!==o.type||void 0===(null==e?void 0:e.conda_shlvl)||-1===e.conda_shlvl){if("activate"===o.path){const e=[`source ${o.path}`,`conda activate ${r.toCommandArgumentForPythonExt()}`];return(0,u.traceInfo)(`Using source activate commands: ${e.join(", ")}`),e}const e=[`source ${o.path} ${r.toCommandArgumentForPythonExt()}`];return(0,u.traceInfo)(`Using single source command: ${e}`),e}const n=[`conda activate ${r.toCommandArgumentForPythonExt()}`];return(0,u.traceInfo)(`Using direct conda activate command: ${n}`),n}switch(t){case f.TerminalShellType.powershell:case f.TerminalShellType.powershellCore:return(0,u.traceVerbose)("Using PowerShell-specific activation"),m(r);case f.TerminalShellType.fish:return(0,u.traceVerbose)("Using Fish shell-specific activation"),async function(e,t){return[`${t.fileToCommandArgumentForPythonExt()} activate ${e.toCommandArgumentForPythonExt()}`]}(r,await this.condaService.getCondaFile());default:return this.platform.isWindows?((0,u.traceVerbose)("Using Windows shell-specific activation fallback option."),this.getWindowsCommands(r)):async function(e,t){const n=l.dirname(t);return[`source ${l.join(n,"activate").fileToCommandArgumentForPythonExt()} ${e.toCommandArgumentForPythonExt()}`]}(r,await this.condaService.getCondaFile())}}async getWindowsActivateCommand(){let e="activate";const t=await this.condaService.getCondaFile();if(t&&l.basename(t)!==t){const n=l.dirname(t);e=l.join(n,e),e=e.toCommandArgumentForPythonExt()}return e}async getWindowsCommands(e){return[`${await this.getWindowsActivateCommand()} ${e.toCommandArgumentForPythonExt()}`]}};async function m(e){return[`conda activate ${e.toCommandArgumentForPythonExt()}`]}t.CondaActivationCommandProvider=v,t.CondaActivationCommandProvider=v=o([(0,c.injectable)(),a(0,(0,c.inject)(p.ICondaService)),a(1,(0,c.inject)(d.IPlatformService)),a(2,(0,c.inject)(h.IConfigurationService)),a(3,(0,c.inject)(p.IComponentAdapter))],v),t._getPowershellCommands=m},29007:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Nushell=t.getAllScripts=void 0;const i=n(25891);n(87295);const o=n(23935),s=n(26948),a={[o.TerminalShellType.nushell]:["activate.nu"]};t.getAllScripts=function(){const e=[];for(const t of Object.values(a))for(const n of t)e.includes(n)||e.push(n);return e};let c=class extends s.VenvBaseActivationCommandProvider{constructor(){super(...arguments),this.scripts=a}async getActivationCommandsForInterpreter(e,t){const n=await this.findScriptFile(e,t);if(n)return[`overlay use ${n.fileToCommandArgumentForPythonExt()}`]}};t.Nushell=c,t.Nushell=c=r([(0,i.injectable)()],c)},27977:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvActivationCommandProvider=void 0;const o=n(25891);n(87295);const s=n(29413),a=n(35864),c=n(25297),l=n(54661),u=n(86156);let p=class{constructor(e,t,n){this.interpreterService=e,this.pipEnvExecution=t,this.workspaceService=n}isShellSupported(){return!1}async getActivationCommands(e){const t=await this.interpreterService.getActiveInterpreter(e);if(!t||t.envType!==c.EnvironmentType.Pipenv)return;const n=e?this.workspaceService.getWorkspaceFolder(e):void 0;return!n||await(0,a.isPipenvEnvironmentRelatedToFolder)(t.path,null==n?void 0:n.uri.fsPath)?[`${this.pipEnvExecution.executable.fileToCommandArgumentForPythonExt()} shell`]:void 0}async getActivationCommandsForInterpreter(e){const t=await this.interpreterService.getInterpreterDetails(e);if(t&&t.envType===c.EnvironmentType.Pipenv)return[`${this.pipEnvExecution.executable.fileToCommandArgumentForPythonExt()} shell`]}};t.PipEnvActivationCommandProvider=p,t.PipEnvActivationCommandProvider=p=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IInterpreterService)),i(1,(0,o.inject)(u.IToolExecutionPath)),i(1,(0,o.named)(u.ToolExecutionPath.pipenv)),i(2,(0,o.inject)(l.IWorkspaceService))],p)},62829:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PixiActivationCommandProvider=void 0;const o=n(25891),s=n(29413),a=n(23935),c=n(8164);let l=class{constructor(e){this.interpreterService=e}isShellSupported(e){return void 0!==function(e){switch(e){case a.TerminalShellType.powershell:case a.TerminalShellType.powershellCore:return"powershell";case a.TerminalShellType.commandPrompt:return"cmd";case a.TerminalShellType.zsh:return"zsh";case a.TerminalShellType.fish:return"fish";case a.TerminalShellType.nushell:return"nushell";case a.TerminalShellType.xonsh:return"xonsh";case a.TerminalShellType.cshell:return;case a.TerminalShellType.gitbash:case a.TerminalShellType.bash:case a.TerminalShellType.wsl:case a.TerminalShellType.tcshell:case a.TerminalShellType.other:default:return"bash"}}(e)}async getActivationCommands(e,t){const n=await this.interpreterService.getActiveInterpreter(e);if(n)return this.getActivationCommandsForInterpreter(n.path,t)}getActivationCommandsForInterpreter(e,t){return(0,c.getPixiActivationCommands)(e,t)}};t.PixiActivationCommandProvider=l,t.PixiActivationCommandProvider=l=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IInterpreterService))],l)},1021:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PyEnvActivationCommandProvider=void 0;const o=n(25891),s=n(29413),a=n(9100),c=n(25297);let l=class{constructor(e){this.serviceContainer=e}isShellSupported(e){return!0}async getActivationCommands(e,t){const n=await this.serviceContainer.get(s.IInterpreterService).getActiveInterpreter(e);if(n&&n.envType===c.EnvironmentType.Pyenv&&n.envName)return[`pyenv shell ${n.envName.toCommandArgumentForPythonExt()}`]}async getActivationCommandsForInterpreter(e,t){const n=await this.serviceContainer.get(s.IInterpreterService).getInterpreterDetails(e);if(n&&n.envType===c.EnvironmentType.Pyenv&&n.envName)return[`pyenv shell ${n.envName.toCommandArgumentForPythonExt()}`]}};t.PyEnvActivationCommandProvider=l,t.PyEnvActivationCommandProvider=l=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],l)},90344:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalServiceFactory=void 0;const c=n(25891),l=s(n(16928)),u=n(29413),p=n(9100),d=n(54661),h=n(22408),f=n(30137),v=n(97716);let m=class{constructor(e,t,n){this.serviceContainer=e,this.fs=t,this.interpreterService=n,this.terminalServices=new Map}getTerminalService(e){const t=null==e?void 0:e.resource,n=null==e?void 0:e.title;let r="string"==typeof n&&n.trim().length>0?n.trim():"Python";const i=null==e?void 0:e.interpreter,o=this.getTerminalId(r,t,i,e.newTerminalPerFile);if(!this.terminalServices.has(o)){t&&e.newTerminalPerFile&&(r=`${r}: ${l.basename(t.fsPath).replace(".py","")}`),e.title=r;const n=new f.TerminalService(this.serviceContainer,e);this.terminalServices.set(o,n)}return new v.SynchronousTerminalService(this.fs,this.interpreterService,this.terminalServices.get(o),i)}createTerminalService(e,t){return t="string"==typeof t&&t.trim().length>0?t.trim():"Python",new f.TerminalService(this.serviceContainer,{resource:e,title:t})}getTerminalId(e,t,n,r){if(!t&&!n)return e;const i=this.serviceContainer.get(d.IWorkspaceService).getWorkspaceFolder(t||void 0),o=t&&r?t.fsPath:"";return`${e}:${(null==i?void 0:i.uri.fsPath)||""}:${null==n?void 0:n.path}:${o}`}};t.TerminalServiceFactory=m,t.TerminalServiceFactory=m=o([(0,c.injectable)(),a(0,(0,c.inject)(p.IServiceContainer)),a(1,(0,c.inject)(h.IFileSystem)),a(2,(0,c.inject)(u.IInterpreterService))],m)},90688:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalHelper=void 0;const o=n(25891),s=n(29413),a=n(9100),c=n(61905),l=n(25297),u=n(51535),p=n(53322),d=n(54661);n(87295);const h=n(22408),f=n(86156),v=n(48112),m=n(6294),g=n(23935),y=n(8164);let b=class{constructor(e,t,n,r,i,o,s,a,c,l,u,p,d){this.platform=e,this.terminalManager=t,this.serviceContainer=n,this.interpreterService=r,this.configurationService=i,this.conda=o,this.bashCShellFish=s,this.commandPromptAndPowerShell=a,this.nushell=c,this.pyenv=l,this.pipenv=u,this.pixi=p,this.shellDetector=new m.ShellDetector(this.platform,d)}createTerminal(e){return this.terminalManager.createTerminal({name:e})}identifyTerminalShell(e){return this.shellDetector.identifyTerminalShell(e)}buildCommandForTerminal(e,t,n){const r=e===g.TerminalShellType.powershell||e===g.TerminalShellType.powershellCore?"& ":"",i=n.map((e=>e.toCommandArgumentForPythonExt()));return`${r}${t.fileToCommandArgumentForPythonExt()} ${i.join(" ")}`.trim()}async getEnvironmentActivationCommands(e,t,n){const r=[this.pixi,this.pipenv,this.pyenv,this.bashCShellFish,this.commandPromptAndPowerShell,this.nushell],i=this.getActivationCommands(t||void 0,n,e,r);return this.sendTelemetry(e,p.EventName.PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL,n,i).ignoreErrors(),i}async getEnvironmentActivationShellCommands(e,t,n){if(this.platform.osType===v.OSType.Unknown)return;const r=[this.pixi,this.bashCShellFish,this.commandPromptAndPowerShell,this.nushell],i=this.getActivationCommands(e,n,t,r);return this.sendTelemetry(t,p.EventName.PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE,n,i).ignoreErrors(),i}async sendTelemetry(e,t,n,r){let i=!1,o=!1;try{const e=await r;i=Array.isArray(e)&&e.length>0}catch(e){o=!0,(0,c.traceError)("Failed to get activation commands",e)}const s=n&&n.version?n.version.raw:void 0,a={failed:o,hasCommands:i,interpreterType:n?n.envType:l.EnvironmentType.Unknown,terminal:e,pythonVersion:s};(0,u.sendTelemetryEvent)(t,void 0,a)}async getActivationCommands(e,t,n,r){const i=this.configurationService.getSettings(e);if(t?t.envType===l.EnvironmentType.Pixi:await(0,y.isPixiEnvironment)(i.pythonPath)){const r=t?await this.pixi.getActivationCommandsForInterpreter(t.path,n):await this.pixi.getActivationCommands(e,n);if(Array.isArray(r))return r}const o=this.serviceContainer.get(s.IComponentAdapter);if(t?t.envType===l.EnvironmentType.Conda:await o.isCondaEnvironment(i.pythonPath)){const r=t?await this.conda.getActivationCommandsForInterpreter(t.path,n):await this.conda.getActivationCommands(e,n);if(Array.isArray(r))return r}const a=r.filter((e=>e.isShellSupported(n)));for(const r of a){const i=t?await r.getActivationCommandsForInterpreter(t.path,n):await r.getActivationCommands(e,n);if(Array.isArray(i)&&i.length>0)return i}}};t.TerminalHelper=b,r([(0,c.traceDecoratorError)("Failed to capture telemetry")],b.prototype,"sendTelemetry",null),t.TerminalHelper=b=r([(0,o.injectable)(),i(0,(0,o.inject)(h.IPlatformService)),i(1,(0,o.inject)(d.ITerminalManager)),i(2,(0,o.inject)(a.IServiceContainer)),i(3,(0,o.inject)(s.IInterpreterService)),i(4,(0,o.inject)(f.IConfigurationService)),i(5,(0,o.inject)(g.ITerminalActivationCommandProvider)),i(5,(0,o.named)(g.TerminalActivationProviders.conda)),i(6,(0,o.inject)(g.ITerminalActivationCommandProvider)),i(6,(0,o.named)(g.TerminalActivationProviders.bashCShellFish)),i(7,(0,o.inject)(g.ITerminalActivationCommandProvider)),i(7,(0,o.named)(g.TerminalActivationProviders.commandPromptAndPowerShell)),i(8,(0,o.inject)(g.ITerminalActivationCommandProvider)),i(8,(0,o.named)(g.TerminalActivationProviders.nushell)),i(9,(0,o.inject)(g.ITerminalActivationCommandProvider)),i(9,(0,o.named)(g.TerminalActivationProviders.pyenv)),i(10,(0,o.inject)(g.ITerminalActivationCommandProvider)),i(10,(0,o.named)(g.TerminalActivationProviders.pipenv)),i(11,(0,o.inject)(g.ITerminalActivationCommandProvider)),i(11,(0,o.named)(g.TerminalActivationProviders.pixi)),i(12,(0,o.multiInject)(g.IShellDetector))],b)},30137:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalService=void 0;const o=n(25891),s=n(54980);n(87295);const a=n(29413),c=n(9100),l=n(51535),u=n(53322),p=n(52060),d=n(54661),h=n(86156),f=n(23935),v=n(61905),m=n(8841),g=n(36380),y=n(95241),b=n(7855),_=n(48112),E=n(56251);let S=class{get onDidCloseTerminal(){return this.terminalClosed.event.bind(this.terminalClosed)}constructor(e,t){this.serviceContainer=e,this.options=t,this.terminalClosed=new s.EventEmitter,this.executeCommandListeners=new Set,this._terminalFirstLaunched=!0;const n=this.serviceContainer.get(h.IDisposableRegistry);n.push(this),this.terminalHelper=this.serviceContainer.get(f.ITerminalHelper),this.terminalManager=this.serviceContainer.get(d.ITerminalManager),this.terminalAutoActivator=this.serviceContainer.get(p.ITerminalAutoActivation),this.terminalManager.onDidCloseTerminal(this.terminalCloseHandler,this,n),this.terminalActivator=this.serviceContainer.get(f.ITerminalActivator)}dispose(){var e;null===(e=this.terminal)||void 0===e||e.dispose(),this.executeCommandListeners&&this.executeCommandListeners.size>0&&this.executeCommandListeners.forEach((e=>{null==e||e.dispose()}))}async sendCommand(e,t,n){var r;await this.ensureTerminal();const i=this.terminalHelper.buildCommandForTerminal(this.terminalShellType,e,t);(null===(r=this.options)||void 0===r?void 0:r.hideFromUser)||this.terminal.show(!0),await this.executeCommand(i,!1)}async sendText(e){var t;await this.ensureTerminal(),(null===(t=this.options)||void 0===t?void 0:t.hideFromUser)||this.terminal.show(!0),this.terminal.sendText(e)}async executeCommand(e,t){var n,r;const i=this.terminal;if((null===(n=this.options)||void 0===n?void 0:n.hideFromUser)||i.show(!0),!i.shellIntegration&&this._terminalFirstLaunched){this._terminalFirstLaunched=!1;const e=new Promise((e=>{const t=this.terminalManager.onDidChangeTerminalShellIntegration((()=>{clearTimeout(n),t.dispose(),e(!0)})),n=setTimeout((()=>{t.dispose(),e(!0)}),500)}));await e}const o=(0,m.getConfiguration)("python").get("terminal.shellIntegration.enabled"),s=(null===(r=this.options)||void 0===r?void 0:r.resource)?await(0,E.getPythonMinorVersion)(this.options.resource,this.serviceContainer.get(a.IInterpreterService)):void 0;if(t&&!o||t&&(0,_.isWindows)()||(null!=s?s:0)>=13)i.sendText(e);else{if(i.shellIntegration){const t=i.shellIntegration.executeCommand(e);return(0,v.traceVerbose)(`Shell Integration is enabled, executeCommand: ${e}`),t}i.sendText(e),(0,v.traceVerbose)(`Shell Integration is disabled, sendText: ${e}`)}}async show(e=!0){var t;await this.ensureTerminal(e),(null===(t=this.options)||void 0===t?void 0:t.hideFromUser)||this.terminal.show(e)}async ensureTerminal(e=!0){var t,n,r,i,o,s,a,c,l;this.terminal||((0,g.useEnvExtension)()?this.terminal=await(0,y.ensureTerminalLegacy)(null===(t=this.options)||void 0===t?void 0:t.resource,{name:(null===(n=this.options)||void 0===n?void 0:n.title)||"Python",hideFromUser:null===(r=this.options)||void 0===r?void 0:r.hideFromUser}):(this.terminalShellType=this.terminalHelper.identifyTerminalShell(this.terminal),this.terminal=this.terminalManager.createTerminal({name:(null===(i=this.options)||void 0===i?void 0:i.title)||"Python",hideFromUser:null===(o=this.options)||void 0===o?void 0:o.hideFromUser}),this.terminalAutoActivator.disableAutoActivation(this.terminal),await(0,b.sleep)(100),await this.terminalActivator.activateEnvironmentInTerminal(this.terminal,{resource:null===(s=this.options)||void 0===s?void 0:s.resource,preserveFocus:e,interpreter:null===(a=this.options)||void 0===a?void 0:a.interpreter,hideFromUser:null===(c=this.options)||void 0===c?void 0:c.hideFromUser})),(null===(l=this.options)||void 0===l?void 0:l.hideFromUser)||this.terminal.show(e),this.sendTelemetry().ignoreErrors())}terminalCloseHandler(e){e===this.terminal&&(this.terminalClosed.fire(),this.terminal=void 0)}async sendTelemetry(){var e,t;const n=this.serviceContainer.get(h.IConfigurationService).getSettings(null===(e=this.options)||void 0===e?void 0:e.resource).pythonPath,r=(null===(t=this.options)||void 0===t?void 0:t.interpreter)||await this.serviceContainer.get(a.IInterpreterService).getInterpreterDetails(n),i=r&&r.version?r.version.raw:void 0,o=r?r.envType:void 0;(0,l.captureTelemetry)(u.EventName.TERMINAL_CREATE,{terminal:this.terminalShellType,pythonVersion:i,interpreterType:o})}};t.TerminalService=S,t.TerminalService=S=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer))],S)},6294:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShellDetector=void 0;const o=n(25891),s=n(54980),a=n(61905),c=n(51535),l=n(53322);n(87295);const u=n(22408),p=n(48112),d=n(23935),h={[p.OSType.Linux]:d.TerminalShellType.bash,[p.OSType.OSX]:d.TerminalShellType.bash,[p.OSType.Windows]:d.TerminalShellType.commandPrompt,[p.OSType.Unknown]:d.TerminalShellType.other};let f=class{constructor(e,t){this.platform=e,this.shellDetectors=t}identifyTerminalShell(e){let t;const n={failed:!0,shellIdentificationSource:"default",terminalProvided:!!e,hasCustomShell:void 0,hasShellInEnv:void 0},r=this.shellDetectors.slice().sort(((e,t)=>t.priority-e.priority));for(const i of r)if(t=i.identify(n,e),t&&t!==d.TerminalShellType.other){n.failed=!1;break}return(0,c.sendTelemetryEvent)(l.EventName.TERMINAL_SHELL_IDENTIFICATION,void 0,n),(0,a.traceVerbose)(`Shell identified as ${t} ${e?`(Terminal name is ${e.name})`:""}`),void 0!==t&&t!==d.TerminalShellType.other||((0,a.traceError)("Unable to identify shell",s.env.shell," for OS ",this.platform.osType),(0,a.traceVerbose)("Using default OS shell"),t=h[this.platform.osType]),t}};t.ShellDetector=f,t.ShellDetector=f=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IPlatformService)),i(1,(0,o.multiInject)(d.IShellDetector))],f)},18065:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.identifyShellFromShellPath=t.BaseShellDetector=void 0;const o=n(25891),s=n(23935),a=new Map;a.set(s.TerminalShellType.powershell,/(powershell$)/i),a.set(s.TerminalShellType.gitbash,/(gitbash$)/i),a.set(s.TerminalShellType.bash,/(bash$)/i),a.set(s.TerminalShellType.wsl,/(wsl$)/i),a.set(s.TerminalShellType.zsh,/(zsh$)/i),a.set(s.TerminalShellType.ksh,/(ksh$)/i),a.set(s.TerminalShellType.commandPrompt,/(cmd$)/i),a.set(s.TerminalShellType.fish,/(fish$)/i),a.set(s.TerminalShellType.tcshell,/(tcsh$)/i),a.set(s.TerminalShellType.cshell,/(csh$)/i),a.set(s.TerminalShellType.nushell,/(nu$)/i),a.set(s.TerminalShellType.powershellCore,/(pwsh$)/i),a.set(s.TerminalShellType.xonsh,/(xonsh$)/i);let c=class{constructor(e){this.priority=e}identifyShellFromShellPath(e){return l(e)}};function l(e){const t=e.replace(/\.exe$/i,"");return Array.from(a.keys()).reduce(((e,n)=>{if(e===s.TerminalShellType.other){const e=a.get(n);if(e&&e.test(t))return n}return e}),s.TerminalShellType.other)}t.BaseShellDetector=c,t.BaseShellDetector=c=r([(0,o.injectable)(),i(0,(0,o.unmanaged)())],c),t.identifyShellFromShellPath=l},41777:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsShellDetector=void 0;const o=n(25891),s=n(54661),a=n(22408),c=n(48112),l=n(23935),u=n(18065);let p=class extends u.BaseShellDetector{constructor(e,t){super(2),this.workspace=e,this.platform=t}getTerminalShellPath(){const e=this.workspace.getConfiguration("terminal.integrated.shell");let t="";switch(this.platform.osType){case c.OSType.Windows:t="windows";break;case c.OSType.OSX:t="osx";break;case c.OSType.Linux:t="linux";break;default:return""}return e.get(t)}identify(e,t){const n=this.getTerminalShellPath();e.hasCustomShell=!!n;const r=n?this.identifyShellFromShellPath(n):l.TerminalShellType.other;return r!==l.TerminalShellType.other?e.shellIdentificationSource="environment":e.shellIdentificationSource="settings",r}};t.SettingsShellDetector=p,t.SettingsShellDetector=p=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IWorkspaceService)),i(1,(0,o.inject)(a.IPlatformService))],p)},81367:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalNameShellDetector=void 0;const i=n(25891),o=n(61905),s=n(23935),a=n(18065);let c=class extends a.BaseShellDetector{constructor(){super(4)}identify(e,t){if(!t)return;const n=this.identifyShellFromShellPath(t.name);return(0,o.traceVerbose)(`Terminal name '${t.name}' identified as shell '${n}'`),e.shellIdentificationSource=n===s.TerminalShellType.other?e.shellIdentificationSource:"terminalName",n}};t.TerminalNameShellDetector=c,t.TerminalNameShellDetector=c=r([(0,i.injectable)()],c)},556:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserEnvironmentShellDetector=void 0;const o=n(25891),s=n(22408),a=n(86156),c=n(48112),l=n(23935),u=n(18065);let p=class extends u.BaseShellDetector{constructor(e,t){super(1),this.currentProcess=e,this.platform=t}getDefaultPlatformShell(){return e=this.platform,t=this.currentProcess,e.osType===c.OSType.Windows?function(e,t){const n=parseFloat(e.osRelease)>=10,r=t.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),i=`${t.env.windir}\\${r?"Sysnative":"System32"}\\WindowsPowerShell\\v1.0\\powershell.exe`;return n?i:function(e){return e.env.comspec||"cmd.exe"}(t)}(e,t):t.env.SHELL&&"/bin/false"!==t.env.SHELL?t.env.SHELL:"/bin/bash";var e,t}identify(e,t){const n=this.getDefaultPlatformShell();e.hasShellInEnv=!!n;const r=this.identifyShellFromShellPath(n);return r!==l.TerminalShellType.other&&(e.shellIdentificationSource="environment"),r}};t.UserEnvironmentShellDetector=p,t.UserEnvironmentShellDetector=p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ICurrentProcess)),i(1,(0,o.inject)(s.IPlatformService))],p)},50209:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VSCEnvironmentShellDetector=void 0;const o=n(25891),s=n(61905),a=n(54661),c=n(23935),l=n(18065);let u=class extends l.BaseShellDetector{constructor(e){super(3),this.appEnv=e}identify(e,t){const n=(null==t?void 0:t.creationOptions)&&"shellPath"in t.creationOptions&&t.creationOptions.shellPath?t.creationOptions.shellPath:this.appEnv.shell;if(!n)return;const r=this.identifyShellFromShellPath(n);return(0,s.traceVerbose)(`Terminal shell path '${n}' identified as shell '${r}'`),e.shellIdentificationSource=r===c.TerminalShellType.other?e.shellIdentificationSource:"vscode",e.failed=r!==c.TerminalShellType.other,r}};t.VSCEnvironmentShellDetector=u,t.VSCEnvironmentShellDetector=u=r([i(0,(0,o.inject)(a.IApplicationEnvironment))],u)},97716:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronousTerminalService=void 0;const c=n(25891),l=n(29413),u=n(61905),p=n(7854),d=n(22408),h=s(n(8370)),f=n(7855),v=n(98803);var m;!function(e){e[e.notStarted=0]="notStarted",e[e.started=1]="started",e[e.completed=2]="completed",e[e.errored=4]="errored"}(m||(m={}));class g{constructor(e,t,n){this.lockFile=e,this.fs=t,this.command=n,this.state=m.notStarted,this._completed=(0,f.createDeferred)(),this.registerStateUpdate(),this._completed.promise.finally((()=>this.dispose())).ignoreErrors()}get completed(){return this._completed.promise}dispose(){this.disposable&&(this.disposable.dispose(),this.disposable=void 0)}registerStateUpdate(){const e=setInterval((async()=>{const e=await this.getLockFileState(this.lockFile);if(e!==this.state&&(0,u.traceVerbose)(`Command state changed to ${e}. ${this.command.join(" ")}`),this.state=e,e&m.errored){const e=await this.fs.readFile(`${this.lockFile}.error`).catch((()=>""));this._completed.reject(new Error(`Command failed with errors, check the terminal for details. Command: ${this.command.join(" ")}\n${e}`))}else e&m.completed&&this._completed.resolve()}),100);this.disposable={dispose:()=>clearInterval(e)}}async getLockFileState(e){const t=await this.fs.readFile(e);let n=m.notStarted;return t.includes("START")&&(n|=m.started),t.includes("END")&&(n|=m.completed),t.includes("FAIL")&&(n|=m.completed|m.errored),n}}let y=class{get onDidCloseTerminal(){return this.terminalService.onDidCloseTerminal}constructor(e,t,n,r){this.fs=e,this.interpreter=t,this.terminalService=n,this.pythonInterpreter=r,this.disposables=[]}dispose(){for(this.terminalService.dispose();this.disposables.length;){const e=this.disposables.shift();if(!e)break;try{e.dispose()}catch(e){(0,v.noop)()}}}async sendCommand(e,t,n,r=!0){if(!n)return this.terminalService.sendCommand(e,t);const i=await this.createLockFile(),o=new g(i.filePath,this.fs,[e,...t]);try{const s=this.pythonInterpreter||await this.interpreter.getActiveInterpreter(void 0),a=h.shell_exec(e,i.filePath,t);await this.terminalService.sendCommand((null==s?void 0:s.path)||"python",a);const c=r?o.completed:o.completed.catch(v.noop);await p.Cancellation.race((()=>c),n)}finally{o.dispose(),i.dispose()}}sendText(e){return this.terminalService.sendText(e)}executeCommand(e,t){return this.terminalService.executeCommand(e,t)}show(e){return this.terminalService.show(e)}createLockFile(){return this.fs.createTemporaryFile(".log").then((e=>(this.disposables.push(e),e)))}};t.SynchronousTerminalService=y,t.SynchronousTerminalService=y=o([a(0,(0,c.inject)(d.IFileSystem)),a(1,(0,c.inject)(l.IInterpreterService))],y)},23935:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.IShellDetector=t.ITerminalActivationHandler=t.ITerminalActivationCommandProvider=t.ITerminalActivator=t.ITerminalHelper=t.ITerminalServiceFactory=t.TerminalShellType=t.TerminalActivationProviders=void 0,function(e){e.bashCShellFish="bashCShellFish",e.commandPromptAndPowerShell="commandPromptAndPowerShell",e.nushell="nushell",e.pyenv="pyenv",e.conda="conda",e.pipenv="pipenv",e.pixi="pixi"}(n||(t.TerminalActivationProviders=n={})),function(e){e.powershell="powershell",e.powershellCore="powershellCore",e.commandPrompt="commandPrompt",e.gitbash="gitbash",e.bash="bash",e.zsh="zsh",e.ksh="ksh",e.fish="fish",e.cshell="cshell",e.tcshell="tshell",e.nushell="nushell",e.wsl="wsl",e.xonsh="xonsh",e.other="other"}(r||(t.TerminalShellType=r={})),t.ITerminalServiceFactory=Symbol("ITerminalServiceFactory"),t.ITerminalHelper=Symbol("ITerminalHelper"),t.ITerminalActivator=Symbol("ITerminalActivator"),t.ITerminalActivationCommandProvider=Symbol("ITerminalActivationCommandProvider"),t.ITerminalActivationHandler=Symbol("ITerminalActivationHandler"),t.IShellDetector=Symbol("IShellDetector")},86156:(e,t)=>{"use strict";var n,r,i,o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.IDefaultLanguageServer=t.IInterpreterPathService=t.IExperimentService=t.IBrowserService=t.IExtensions=t.IExtensionContext=t.ISocketServer=t.ToolExecutionPath=t.IToolExecutionPath=t.IConfigurationService=t.ICurrentProcess=t.IRandom=t.IPathUtils=t.IInstaller=t.Product=t.ProductType=t.ProductInstallStatus=t.InstallerResponse=t.IPersistentStateFactory=t.WORKSPACE_MEMENTO=t.GLOBAL_MEMENTO=t.IMemento=t.IDisposableRegistry=t.IsWindows=t.IDocumentSymbolProvider=t.ILogOutputChannel=void 0,t.ILogOutputChannel=Symbol("ILogOutputChannel"),t.IDocumentSymbolProvider=Symbol("IDocumentSymbolProvider"),t.IsWindows=Symbol("IS_WINDOWS"),t.IDisposableRegistry=Symbol("IDisposableRegistry"),t.IMemento=Symbol("IGlobalMemento"),t.GLOBAL_MEMENTO=Symbol("IGlobalMemento"),t.WORKSPACE_MEMENTO=Symbol("IWorkspaceMemento"),t.IPersistentStateFactory=Symbol("IPersistentStateFactory"),function(e){e[e.Installed=0]="Installed",e[e.Disabled=1]="Disabled",e[e.Ignore=2]="Ignore"}(n||(t.InstallerResponse=n={})),function(e){e[e.Installed=0]="Installed",e[e.NotInstalled=1]="NotInstalled",e[e.NeedsUpgrade=2]="NeedsUpgrade"}(r||(t.ProductInstallStatus=r={})),function(e){e.TestFramework="TestFramework",e.DataScience="DataScience",e.Python="Python"}(i||(t.ProductType=i={})),function(e){e[e.pytest=1]="pytest",e[e.unittest=12]="unittest",e[e.tensorboard=24]="tensorboard",e[e.torchProfilerInstallName=25]="torchProfilerInstallName",e[e.torchProfilerImportName=26]="torchProfilerImportName",e[e.pip=27]="pip",e[e.ensurepip=28]="ensurepip",e[e.python=29]="python"}(o||(t.Product=o={})),t.IInstaller=Symbol("IInstaller"),t.IPathUtils=Symbol("IPathUtils"),t.IRandom=Symbol("IRandom"),t.ICurrentProcess=Symbol("ICurrentProcess"),t.IConfigurationService=Symbol("IConfigurationService"),t.IToolExecutionPath=Symbol("IToolExecutionPath"),function(e){e.pipenv="pipenv"}(s||(t.ToolExecutionPath=s={})),t.ISocketServer=Symbol("ISocketServer"),t.IExtensionContext=Symbol("ExtensionContext"),t.IExtensions=Symbol("IExtensions"),t.IBrowserService=Symbol("IBrowserService"),t.IExperimentService=Symbol("IExperimentService"),t.IInterpreterPathService=Symbol("IInterpreterPathService"),t.IDefaultLanguageServer=Symbol("IDefaultLanguageServer")},83597:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncForEach=t.asyncFilter=void 0,t.asyncFilter=async function(e,t){const n=await Promise.all(e.map(t));return e.filter(((e,t)=>n[t]))},t.asyncForEach=async function(e,t){await Promise.all(e.map(t))}},7855:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raceTimeout=t.isPromiseLike=t.waitForCondition=t.flattenIterable=t.flattenIterator=t.iterable=t.mapToIterator=t.chain=t.iterEmpty=t.createDeferredFromPromise=t.createDeferredFrom=t.createDeferred=t.isPromise=t.isThenable=t.sleep=void 0,t.sleep=async function(e){return new Promise((t=>{setTimeout((()=>t(e)),e)}))},t.isThenable=function(e){return"function"==typeof(null==e?void 0:e.then)},t.isPromise=function(e){return"function"==typeof(null==e?void 0:e.then)&&"function"==typeof(null==e?void 0:e.catch)};class n{constructor(e=null){this.scope=e,this._resolved=!1,this._rejected=!1,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}resolve(e){this.completed||(this._resolve.apply(this.scope?this.scope:this,[e]),this._resolved=!0)}reject(e){this.completed||(this._reject.apply(this.scope?this.scope:this,[e]),this._rejected=!0)}get promise(){return this._promise}get resolved(){return this._resolved}get rejected(){return this._rejected}get completed(){return this._rejected||this._resolved}}function r(e=null){return new n(e)}async function i(e,t){const n=void 0===t?-1:t;try{return{index:n,result:await e.next(),err:null}}catch(e){return{index:n,err:e,result:null}}}t.createDeferred=r,t.createDeferredFrom=function(...e){const t=r();return Promise.all(e).then(t.resolve.bind(t)).catch(t.reject.bind(t)),t},t.createDeferredFromPromise=function(e){const t=r();return e.then(t.resolve.bind(t)).catch(t.reject.bind(t)),t},t.iterEmpty=function(){return async function*(){}()};const o=new Promise((()=>{}));async function*s(e,t){const n=e.map(i);let r=e.length;for(;r>0;){const{index:s,result:a,err:c}=await Promise.race(n);null!==c?(n[s]=o,r-=1,void 0!==t&&await t(c,s)):a.done?(n[s]=o,r-=1,void 0!==a.value&&(yield a.value)):(n[s]=i(e[s],s),yield a.value)}}function a(e){const t=e;return void 0===t[Symbol.asyncIterator]&&(t[Symbol.asyncIterator]=()=>t),t}function c(e){return"function"==typeof(null==e?void 0:e.then)}t.chain=s,t.mapToIterator=async function*(e,t,n=!0){if(n){const n=e.map((e=>async function*(){yield t(e)}()));yield*a(s(n))}else yield*e.map(t)},t.iterable=a,t.flattenIterator=async function(e){const t=[];for await(const n of a(e))t.push(n);return t},t.flattenIterable=async function(e){const t=[];for await(const n of e)t.push(n);return t},t.waitForCondition=async function(e,t,n){return new Promise((async(r,i)=>{const o=setTimeout((()=>{clearTimeout(o),clearTimeout(s),i(new Error(n))}),t),s=setInterval((async()=>{await e().catch((()=>!1))&&(clearTimeout(o),clearTimeout(s),r())}),10)}))},t.isPromiseLike=c,t.raceTimeout=function(e,t,...n){const r=c(t)?void 0:t;let i;c(t)&&n.push(t);const o=setTimeout((()=>null==i?void 0:i(r)),e);return Promise.race([Promise.race(n).finally((()=>clearTimeout(o))),new Promise((e=>i=e))])}},99652:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryCache=t.clearCache=t.getCacheKeyFromFunctionArgs=t.getGlobalCacheStore=void 0;const n=new Map;t.getGlobalCacheStore=function(){return n},t.getCacheKeyFromFunctionArgs=function(e,t){return`KeyPrefix=${e}-Args=${t.map((e=>`${JSON.stringify(e)}`)).join("-Arg-Separator-")}`},t.clearCache=function(){n.clear()},t.InMemoryCache=class{constructor(e){this.expiryDurationMs=e}get hasData(){return!(!this.cacheData||this.hasExpired(this.cacheData.expiry))||(this.cacheData=void 0,!1)}get data(){var e;if(this.hasData)return null===(e=this.cacheData)||void 0===e?void 0:e.value}set data(e){this.cacheData=void 0!==e?{expiry:this.calculateExpiry(),value:e}:void 0}clear(){this.cacheData=void 0}hasExpired(e){return e<=Date.now()}calculateExpiry(){return Date.now()+this.expiryDurationMs}}},68989:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.swallowExceptions=t.cache=t.makeDebounceAsyncDecorator=t.makeDebounceDecorator=t.debounceAsync=t.debounceSync=void 0,n(87295);const r=n(61905),i=n(552),o=n(7855),s=n(99652),a=n(51080),c=n(38221);function l(e){return function(t,n,r){const i=r.value,o=c((function(){return i.apply(this,arguments)}),e,{});r.value=o}}function u(e){return function(t,n,r){const i=r.value,s={started:!1,deferred:void 0,timer:void 0};r.value=function(){const t=s.deferred;if(t&&s.started)return t.promise;const n=t&&t.completed,r=s.deferred=!t||n?(0,o.createDeferred)():t;return s.timer&&clearTimeout(s.timer),s.timer=setTimeout((async()=>{s.started=!0,i.apply(this).then((e=>{s.started=!1,r.resolve(e)})).catch((e=>{s.started=!1,r.reject(e)}))}),e||0),r.promise}}}t.debounceSync=function(e){return(0,i.isTestExecution)()&&(e=void 0),l(e)},t.debounceAsync=function(e){return(0,i.isTestExecution)()&&(e=void 0),u(e)},t.makeDebounceDecorator=l,t.makeDebounceAsyncDecorator=u;const p=(0,s.getGlobalCacheStore)(),d=new a.StopWatch;t.cache=function(e,t=!1,n){return function(o,a,c){const l=c.value,u=`Cache_Method_Output_${"constructor"in o&&o.constructor.name?o.constructor.name:""}.${a}`;c.value=async function(...o){if((0,i.isTestExecution)())return l.apply(this,o);let a;try{a=(0,s.getCacheKeyFromFunctionArgs)(u,o)}catch(e){return(0,r.traceError)("Error while creating key for keyPrefix:",u,e),l.apply(this,o)}const c=p.get(a);if(c&&(c.expiry>Date.now()||-1===e))return Promise.resolve(c.data);const h=n&&d.elapsedTime>2e5?n:e,f=l.apply(this,o);return t?p.set(a,{data:f,expiry:Date.now()+h}):f.then((e=>p.set(a,{data:e,expiry:Date.now()+h}))).ignoreErrors(),f}}},t.swallowExceptions=function(e){return function(t,n,o){const s=o.value,a=`Python Extension (Error in ${e||n}, method:${n}):`;o.value=function(...e){try{const t=s.apply(this,e);if(t&&"function"==typeof t.then&&"function"==typeof t.catch)return t.catch((e=>{(0,i.isTestExecution)()||(0,r.traceError)(a,e)}))}catch(e){if((0,i.isTestExecution)())return;(0,r.traceError)(a,e)}}}}},56218:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DelayedTrigger=void 0;const r=n(53557),i=n(61905);t.DelayedTrigger=class{constructor(e,t,n){this.callback=e,this.ms=t,this.name=n,this.triggeredCounter=0,this.calledCounter=0}trigger(...e){this.triggeredCounter+=1,this.timerId&&(0,r.clearTimeout)(this.timerId),this.timerId=(0,r.setTimeout)((()=>{this.calledCounter+=1,(0,i.traceVerbose)(`Delay Trigger[${this.name}]: triggered=${this.triggeredCounter}, called=${this.calledCounter}`),this.callback(...e)}),this.ms)}dispose(){this.timerId&&(0,r.clearTimeout)(this.timerId)}}},62982:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidAndExecutable=t.getSearchPathEntries=t.getSearchPathEnvVarNames=void 0;const s=o(n(79896)),a=o(n(16928)),c=n(48112);function l(e=(0,c.getOSType)()){return e===c.OSType.Windows?["Path","PATH"]:["PATH"]}t.getSearchPathEnvVarNames=l,t.getSearchPathEntries=function(){const e=l();for(const t of e){const e=(0,c.getEnvironmentVariable)(t);if(void 0!==e)return e.split(a.delimiter).map((e=>e.trim())).filter((e=>e.length>0))}return[]},t.isValidAndExecutable=async function(e){try{await s.promises.access(e,s.constants.X_OK)}catch(e){return!1}if((0,c.getOSType)()!==c.OSType.Windows)return!0}},77476:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getFileFilter=t.getFileType=t.convertFileType=t.FileType=void 0;const s=o(n(79896)),a=o(n(54980)),c=n(61905);function l(e){return e.isFile()?t.FileType.File:e.isDirectory()?t.FileType.Directory:e.isSymbolicLink()?t.FileType.SymbolicLink:t.FileType.Unknown}async function u(e,n={ignoreErrors:!0}){let r;try{r=await s.promises.lstat(e)}catch(r){if("ENOENT"===r.code)return;if(n.ignoreErrors)return(0,c.traceError)(`lstat() failed for "${e}" (${r})`),t.FileType.Unknown;throw r}return l(r)}t.FileType=a.FileType,t.convertFileType=l,t.getFileType=u,t.getFileFilter=function(e={ignoreMissing:!0}){const n=function(e){if(void 0!==e){if(Array.isArray(e)){if(0===e.length)return;return e}return[e]}}(e.ignoreFileType);if(e.ignoreMissing||n)return async function(r){let i=await async function(e,t={}){let n;if("string"!=typeof e){if(!t.ensure){if(void 0===t.onMissing)return e;if(void 0!==await u(e.filename))return e}n=e.filename}else n=e;const r=await u(n)||t.onMissing;if(void 0!==r)return{filename:n,filetype:r}}(r,{ensure:e.ensureEntry});if(!i){if(e.ignoreMissing)return!1;i={filename:"string"==typeof r?r:r.filename,filetype:t.FileType.Unknown}}return!n||!n.includes(i.filetype)}}},65717:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getIcon=void 0;const s=o(n(16928)),a=n(54980),c=n(84090),l=s.join(c.EXTENSION_ROOT_DIR,"resources","dark"),u=s.join(c.EXTENSION_ROOT_DIR,"resources","light");t.getIcon=function(e){return{dark:a.Uri.file(s.join(l,e)),light:a.Uri.file(s.join(u,e))}}},6301:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Iterable=void 0,function(e){e.is=function(e){return e&&"object"==typeof e&&"function"==typeof e[Symbol.iterator]}}(n||(t.Iterable=n={}))},14152:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateEnv=t.SwitchToDefaultLS=t.Python27Support=t.OutdatedDebugger=t.Testing=t.DebugConfigStrings=t.ExtensionSurveyBanner=t.Installer=t.Linters=t.OutputChannelNames=t.InterpreterQuickPickList=t.Interpreters=t.LanguageService=t.TensorBoard=t.Pylance=t.Repl=t.AttachProcess=t.CommonSurvey=t.Common=t.Diagnostics=void 0;const r=n(54980),i=n(552);var o,s,a,c,l,u,p,d,h,f,v,m,g,y,b,_,E,S,w,P;!function(e){e.lsNotSupported=r.l10n.t("Your operating system does not meet the minimum requirements of the Python Language Server. Reverting to the alternative autocompletion provider, Jedi."),e.invalidPythonPathInDebuggerSettings=r.l10n.t('You need to select a Python interpreter before you start debugging.\n\nTip: click on "Select Interpreter" in the status bar.'),e.invalidPythonPathInDebuggerLaunch=r.l10n.t("The Python path in your debug configuration is invalid."),e.invalidDebuggerTypeDiagnostic=r.l10n.t('Your launch.json file needs to be updated to change the "pythonExperimental" debug configurations to use the "python" debugger type, otherwise Python debugging may not work. Would you like to automatically update your launch.json file now?'),e.consoleTypeDiagnostic=r.l10n.t('Your launch.json file needs to be updated to change the console type string from "none" to "internalConsole", otherwise Python debugging may not work. Would you like to automatically update your launch.json file now?'),e.justMyCodeDiagnostic=r.l10n.t('Configuration "debugStdLib" in launch.json is no longer supported. It\'s recommended to replace it with "justMyCode", which is the exact opposite of using "debugStdLib". Would you like to automatically update your launch.json file to do that?'),e.yesUpdateLaunch=r.l10n.t("Yes, update launch.json"),e.invalidTestSettings=r.l10n.t('Your settings needs to be updated to change the setting "python.unitTest." to "python.testing.", otherwise testing Python code using the extension may not work. Would you like to automatically update your settings now?'),e.updateSettings=r.l10n.t("Yes, update settings"),e.pylanceDefaultMessage=r.l10n.t("The Python extension now includes Pylance to improve completions, code navigation, overall performance and much more! You can learn more about the update and learn how to change your language server [here](https://aka.ms/new-python-bundle).\n\nRead Pylance's license [here](https://marketplace.visualstudio.com/items/ms-python.vscode-pylance/license)."),e.invalidSmartSendMessage=r.l10n.t("Python is unable to parse the code provided. Please\n    turn off Smart Send if you wish to always run line by line or explicitly select code\n    to force run. See [logs](command:{0}) for more details",i.Commands.ViewOutput)}(o||(t.Diagnostics=o={})),function(e){e.allow=r.l10n.t("Allow"),e.seeInstructions=r.l10n.t("See Instructions"),e.close=r.l10n.t("Close"),e.bannerLabelYes=r.l10n.t("Yes"),e.bannerLabelNo=r.l10n.t("No"),e.canceled=r.l10n.t("Canceled"),e.cancel=r.l10n.t("Cancel"),e.ok=r.l10n.t("Ok"),e.error=r.l10n.t("Error"),e.gotIt=r.l10n.t("Got it!"),e.install=r.l10n.t("Install"),e.loadingExtension=r.l10n.t("Python extension loading..."),e.openOutputPanel=r.l10n.t("Show output"),e.noIWillDoItLater=r.l10n.t("No, I will do it later"),e.notNow=r.l10n.t("Not now"),e.doNotShowAgain=r.l10n.t("Don't show again"),e.editSomething=r.l10n.t("Edit {0}"),e.reload=r.l10n.t("Reload"),e.moreInfo=r.l10n.t("More Info"),e.learnMore=r.l10n.t("Learn more"),e.and=r.l10n.t("and"),e.reportThisIssue=r.l10n.t("Report this issue"),e.recommended=r.l10n.t("Recommended"),e.clearAll=r.l10n.t("Clear all"),e.alwaysIgnore=r.l10n.t("Always Ignore"),e.ignore=r.l10n.t("Ignore"),e.selectPythonInterpreter=r.l10n.t("Select Python Interpreter"),e.openLaunch=r.l10n.t("Open launch.json"),e.useCommandPrompt=r.l10n.t("Use Command Prompt"),e.download=r.l10n.t("Download"),e.showLogs=r.l10n.t("Show logs"),e.openFolder=r.l10n.t("Open Folder...")}(s||(t.Common=s={})),function(e){e.remindMeLaterLabel=r.l10n.t("Remind me later"),e.yesLabel=r.l10n.t("Yes, take survey now"),e.noLabel=r.l10n.t("No, thanks")}(a||(t.CommonSurvey=a={})),function(e){e.attachTitle=r.l10n.t("Attach to process"),e.selectProcessPlaceholder=r.l10n.t("Select the process to attach to"),e.noProcessSelected=r.l10n.t("No process selected"),e.refreshList=r.l10n.t("Refresh process list")}(c||(t.AttachProcess=c={})),function(e){e.disableSmartSend=r.l10n.t("Disable Smart Send"),e.launchNativeRepl=r.l10n.t("Launch VS Code Native REPL")}(l||(t.Repl=l={})),function(e){e.remindMeLater=r.l10n.t("Remind me later"),e.pylanceNotInstalledMessage=r.l10n.t("Pylance extension is not installed."),e.pylanceInstalledReloadPromptMessage=r.l10n.t("Pylance extension is now installed. Reload window to activate?"),e.pylanceRevertToJediPrompt=r.l10n.t('The Pylance extension is not installed but the python.languageServer value is set to "Pylance". Would you like to install the Pylance extension to use Pylance, or revert back to Jedi?'),e.pylanceInstallPylance=r.l10n.t("Install Pylance"),e.pylanceRevertToJedi=r.l10n.t("Revert to Jedi")}(u||(t.Pylance=u={})),function(e){e.enterRemoteUrl=r.l10n.t("Enter remote URL"),e.enterRemoteUrlDetail=r.l10n.t("Enter a URL pointing to a remote directory containing your TensorBoard log files"),e.useCurrentWorkingDirectoryDetail=r.l10n.t("TensorBoard will search for tfevent files in all subdirectories of the current working directory"),e.useCurrentWorkingDirectory=r.l10n.t("Use current working directory"),e.logDirectoryPrompt=r.l10n.t("Select a log directory to start TensorBoard with"),e.progressMessage=r.l10n.t("Starting TensorBoard session..."),e.nativeTensorBoardPrompt=r.l10n.t('VS Code now has integrated TensorBoard support. Would you like to launch TensorBoard?  (Tip: Launch TensorBoard anytime by opening the command palette and searching for "Launch TensorBoard".)'),e.selectAFolder=r.l10n.t("Select a folder"),e.selectAFolderDetail=r.l10n.t("Select a log directory containing tfevent files"),e.selectAnotherFolder=r.l10n.t("Select another folder"),e.selectAnotherFolderDetail=r.l10n.t("Use the file explorer to select another folder"),e.installPrompt=r.l10n.t("The package TensorBoard is required to launch a TensorBoard session. Would you like to install it?"),e.installTensorBoardAndProfilerPluginPrompt=r.l10n.t("TensorBoard >= 2.4.1 and the PyTorch Profiler TensorBoard plugin >= 0.2.0 are required. Would you like to install these packages?"),e.installProfilerPluginPrompt=r.l10n.t("We recommend installing version >= 0.2.0 of the PyTorch Profiler TensorBoard plugin. Would you like to install the package?"),e.upgradePrompt=r.l10n.t("Integrated TensorBoard support is only available for TensorBoard >= 2.4.1. Would you like to upgrade your copy of TensorBoard?"),e.missingSourceFile=r.l10n.t("The Python extension could not locate the requested source file on disk. Please manually specify the file."),e.selectMissingSourceFile=r.l10n.t("Choose File"),e.selectMissingSourceFileDescription=r.l10n.t("The source file's contents may not match the original contents in the trace.")}(p||(t.TensorBoard=p={})),function(e){e.virtualWorkspaceStatusItem={detail:r.l10n.t("Limited IntelliSense supported by Jedi and Pylance")},e.statusItem={name:r.l10n.t("Python IntelliSense Status"),text:r.l10n.t("Partial Mode"),detail:r.l10n.t("Limited IntelliSense provided by Pylance")},e.startingPylance=r.l10n.t("Starting Pylance language server."),e.startingNone=r.l10n.t("Editor support is inactive since language server is set to None."),e.untrustedWorkspaceMessage=r.l10n.t("Only Pylance is supported in untrusted workspaces, setting language server to None."),e.reloadAfterLanguageServerChange=r.l10n.t("Reload the window after switching between language servers."),e.lsFailedToStart=r.l10n.t("We encountered an issue starting the language server. Reverting to Jedi language engine. Check the Python output panel for details."),e.lsFailedToDownload=r.l10n.t("We encountered an issue downloading the language server. Reverting to Jedi language engine. Check the Python output panel for details."),e.lsFailedToExtract=r.l10n.t("We encountered an issue extracting the language server. Reverting to Jedi language engine. Check the Python output panel for details."),e.downloadFailedOutputMessage=r.l10n.t("Language server download failed."),e.extractionFailedOutputMessage=r.l10n.t("Language server extraction failed."),e.extractionCompletedOutputMessage=r.l10n.t("Language server download complete."),e.extractionDoneOutputMessage=r.l10n.t("done."),e.reloadVSCodeIfSeachPathHasChanged=r.l10n.t("Search paths have changed for this Python interpreter. Reload the extension to ensure that the IntelliSense works correctly.")}(d||(t.LanguageService=d={})),function(e){e.requireJupyter=r.l10n.t("Running in Interactive window requires Jupyter Extension. Would you like to install it? [Learn more](https://aka.ms/pythonJupyterSupport)."),e.installingPython=r.l10n.t("Installing Python into Environment..."),e.discovering=r.l10n.t("Discovering Python Interpreters"),e.refreshing=r.l10n.t("Refreshing Python Interpreters"),e.condaInheritEnvMessage=r.l10n.t('We noticed you\'re using a conda environment. If you are experiencing issues with this environment in the integrated terminal, we recommend that you let the Python extension change "terminal.integrated.inheritEnv" to false in your user settings. [Learn more](https://aka.ms/AA66i8f).'),e.activatingTerminals=r.l10n.t("Reactivating terminals..."),e.activateTerminalDescription=r.l10n.t("Activated environment for"),e.terminalEnvVarCollectionPrompt=r.l10n.t("{0} environment was successfully activated, even though {1} indicator may not be present in the terminal prompt. [Learn more](https://aka.ms/vscodePythonTerminalActivation)."),e.terminalDeactivateProgress=r.l10n.t("Editing {0}..."),e.restartingTerminal=r.l10n.t("Restarting terminal and deactivating..."),e.terminalDeactivatePrompt=r.l10n.t('Deactivating virtual environments may not work by default. To make it work, edit your "{0}" and then restart your shell. [Learn more](https://aka.ms/AAmx2ft).'),e.activatedCondaEnvLaunch=r.l10n.t("We noticed VS Code was launched from an activated conda environment, would you like to select it?"),e.environmentPromptMessage=r.l10n.t("We noticed a new environment has been created. Do you want to select it for the workspace folder?"),e.entireWorkspace=r.l10n.t("Select at workspace level"),e.clearAtWorkspace=r.l10n.t("Clear at workspace level"),e.selectInterpreterTip=r.l10n.t("Tip: you can change the Python interpreter used by the Python extension by clicking on the Python version in the status bar"),e.installPythonTerminalMessageLinux=r.l10n.t(" Try installing the Python package using your package manager. Alternatively you can also download it from https://www.python.org/downloads"),e.installPythonTerminalMacMessage=r.l10n.t(" Brew does not seem to be available. You can download Python from https://www.python.org/downloads. Alternatively, you can install the Python package using some other available package manager."),e.changePythonInterpreter=r.l10n.t("Change Python Interpreter"),e.selectedPythonInterpreter=r.l10n.t("Selected Python Interpreter")}(h||(t.Interpreters=h={})),function(e){e.condaEnvWithoutPythonTooltip=r.l10n.t("Python is not available in this environment, it will automatically be installed upon selecting it"),e.noPythonInstalled=r.l10n.t("Python is not installed"),e.clickForInstructions=r.l10n.t("Click for instructions..."),e.globalGroupName=r.l10n.t("Global"),e.workspaceGroupName=r.l10n.t("Workspace"),e.enterPath={label:r.l10n.t("Enter interpreter path..."),placeholder:r.l10n.t("Enter path to a Python interpreter.")},e.defaultInterpreterPath={label:r.l10n.t("Use Python from `python.defaultInterpreterPath` setting")},e.browsePath={label:r.l10n.t("Find..."),detail:r.l10n.t("Browse your file system to find a Python interpreter."),openButtonLabel:r.l10n.t("Select Interpreter"),title:r.l10n.t("Select Python interpreter")},e.refreshInterpreterList=r.l10n.t("Refresh Interpreter list"),e.refreshingInterpreterList=r.l10n.t("Refreshing Interpreter list..."),e.create={label:r.l10n.t("Create Virtual Environment...")}}(f||(t.InterpreterQuickPickList=f={})),function(e){e.languageServer=r.l10n.t("Python Language Server"),e.python=r.l10n.t("Python")}(v||(t.OutputChannelNames=v={})),function(e){e.selectLinter=r.l10n.t("Select Linter")}(m||(t.Linters=m={})),function(e){e.noCondaOrPipInstaller=r.l10n.t("There is no Conda or Pip installer available in the selected environment."),e.noPipInstaller=r.l10n.t("There is no Pip installer available in the selected environment."),e.searchForHelp=r.l10n.t("Search for help")}(g||(t.Installer=g={})),function(e){e.bannerMessage=r.l10n.t("Can you take 2 minutes to tell us how the Python extension is working for you?"),e.bannerLabelYes=r.l10n.t("Yes, take survey now"),e.bannerLabelNo=r.l10n.t("No, thanks"),e.maybeLater=r.l10n.t("Maybe later")}(y||(t.ExtensionSurveyBanner=y={})),function(e){let t,n,i,o,s,a,c,l;e.selectConfiguration={title:r.l10n.t("Select a debug configuration"),placeholder:r.l10n.t("Debug Configuration")},e.launchJsonCompletions={label:r.l10n.t("Python"),description:r.l10n.t("Select a Python debug configuration")},function(e){e.snippet={name:r.l10n.t("Python: Current File")},e.selectConfiguration={label:r.l10n.t("Python File"),description:r.l10n.t("Debug the currently active Python file")}}(t=e.file||(e.file={})),function(e){e.snippet={name:r.l10n.t("Python: Module"),default:r.l10n.t("enter-your-module-name")},e.selectConfiguration={label:r.l10n.t("Module"),description:r.l10n.t("Debug a Python module by invoking it with '-m'")},e.enterModule={title:r.l10n.t("Debug Module"),prompt:r.l10n.t("Enter a Python module/package name"),default:r.l10n.t("enter-your-module-name"),invalid:r.l10n.t("Enter a valid module name")}}(n=e.module||(e.module={})),function(e){e.snippet={name:r.l10n.t("Python: Remote Attach")},e.selectConfiguration={label:r.l10n.t("Remote Attach"),description:r.l10n.t("Attach to a remote debug server")},e.enterRemoteHost={title:r.l10n.t("Remote Debugging"),prompt:r.l10n.t("Enter a valid host name or IP address"),invalid:r.l10n.t("Enter a valid host name or IP address")},e.enterRemotePort={title:r.l10n.t("Remote Debugging"),prompt:r.l10n.t("Enter the port number that the debug server is listening on"),invalid:r.l10n.t("Enter a valid port number")}}(i=e.attach||(e.attach={})),function(e){e.snippet={name:r.l10n.t("Python: Attach using Process Id")},e.selectConfiguration={label:r.l10n.t("Attach using Process ID"),description:r.l10n.t("Attach to a local process")}}(o=e.attachPid||(e.attachPid={})),function(e){e.snippet={name:r.l10n.t("Python: Django")},e.selectConfiguration={label:r.l10n.t("Django"),description:r.l10n.t("Launch and debug a Django web application")},e.enterManagePyPath={title:r.l10n.t("Debug Django"),prompt:r.l10n.t("Enter the path to manage.py ('${workspaceFolder}' points to the root of the current workspace folder)"),invalid:r.l10n.t("Enter a valid Python file path")}}(s=e.django||(e.django={})),function(e){e.snippet={name:r.l10n.t("Python: FastAPI")},e.selectConfiguration={label:r.l10n.t("FastAPI"),description:r.l10n.t("Launch and debug a FastAPI web application")},e.enterAppPathOrNamePath={title:r.l10n.t("Debug FastAPI"),prompt:r.l10n.t("Enter the path to the application, e.g. 'main.py' or 'main'"),invalid:r.l10n.t("Enter a valid name")}}(a=e.fastapi||(e.fastapi={})),function(e){e.snippet={name:r.l10n.t("Python: Flask")},e.selectConfiguration={label:r.l10n.t("Flask"),description:r.l10n.t("Launch and debug a Flask web application")},e.enterAppPathOrNamePath={title:r.l10n.t("Debug Flask"),prompt:r.l10n.t("Python: Flask"),invalid:r.l10n.t("Enter a valid name")}}(c=e.flask||(e.flask={})),function(e){e.snippet={name:r.l10n.t("Python: Pyramid Application")},e.selectConfiguration={label:r.l10n.t("Pyramid"),description:r.l10n.t("Launch and debug a Pyramid web application")},e.enterDevelopmentIniPath={title:r.l10n.t("Debug Pyramid"),invalid:r.l10n.t("Enter a valid file path")}}(l=e.pyramid||(e.pyramid={}))}(b||(t.DebugConfigStrings=b={})),function(e){e.configureTests=r.l10n.t("Configure Test Framework"),e.cancelUnittestDiscovery=r.l10n.t("Canceled unittest test discovery"),e.errorUnittestDiscovery=r.l10n.t("Unittest test discovery error"),e.cancelPytestDiscovery=r.l10n.t("Canceled pytest test discovery"),e.errorPytestDiscovery=r.l10n.t("pytest test discovery error"),e.seePythonOutput=r.l10n.t("(see Output > Python)"),e.cancelUnittestExecution=r.l10n.t("Canceled unittest test execution"),e.errorUnittestExecution=r.l10n.t("Unittest test execution error"),e.cancelPytestExecution=r.l10n.t("Canceled pytest test execution"),e.errorPytestExecution=r.l10n.t("pytest test execution error"),e.copilotSetupMessage=r.l10n.t("Confirm your Python testing framework to enable test discovery.")}(_||(t.Testing=_={})),function(e){e.outdatedDebuggerMessage=r.l10n.t("We noticed you are attaching to ptvsd (Python debugger), which was deprecated on May 1st, 2020. Use [debugpy](https://aka.ms/migrateToDebugpy) instead.")}(E||(t.OutdatedDebugger=E={})),function(e){e.jediMessage=r.l10n.t("IntelliSense with Jedi for Python 2.7 is no longer supported. [Learn more](https://aka.ms/python-27-support).")}(S||(t.Python27Support=S={})),function(e){e.bannerMessage=r.l10n.t("The Microsoft Python Language Server has reached end of life. Your language server has been set to the default for Python in VS Code, Pylance.\n\nIf you'd like to change your language server, you can learn about how to do so [here](https://devblogs.microsoft.com/python/python-in-visual-studio-code-may-2021-release/#configuring-your-language-server).\n\nRead Pylance's license [here](https://marketplace.visualstudio.com/items/ms-python.vscode-pylance/license).")}(w||(t.SwitchToDefaultLS=w={})),function(e){let t,n,i;e.informEnvCreation=r.l10n.t("The following environment is selected:"),e.statusTitle=r.l10n.t("Creating environment"),e.statusStarting=r.l10n.t("Starting..."),e.hasVirtualEnv=r.l10n.t("Workspace folder contains a virtual environment"),e.noWorkspace=r.l10n.t("A workspace is required when creating an environment using venv."),e.pickWorkspacePlaceholder=r.l10n.t("Select a workspace to create environment"),e.providersQuickPickPlaceholder=r.l10n.t("Select an environment type"),function(e){e.creating=r.l10n.t("Creating venv..."),e.creatingMicrovenv=r.l10n.t("Creating microvenv..."),e.created=r.l10n.t("Environment created..."),e.existing=r.l10n.t("Using existing environment..."),e.downloadingPip=r.l10n.t("Downloading pip..."),e.installingPip=r.l10n.t("Installing pip..."),e.upgradingPip=r.l10n.t("Upgrading pip..."),e.installingPackages=r.l10n.t("Installing packages..."),e.errorCreatingEnvironment=r.l10n.t("Error while creating virtual environment."),e.selectPythonPlaceHolder=r.l10n.t("Select a Python installation to create the virtual environment"),e.providerDescription=r.l10n.t("Creates a `.venv` virtual environment in the current workspace"),e.error=r.l10n.t("Creating virtual environment failed with error."),e.tomlExtrasQuickPickTitle=r.l10n.t("Select optional dependencies to install from pyproject.toml"),e.requirementsQuickPickTitle=r.l10n.t("Select dependencies to install"),e.recreate=r.l10n.t("Delete and Recreate"),e.recreateDescription=r.l10n.t('Delete existing ".venv" directory and create a new ".venv" environment'),e.useExisting=r.l10n.t("Use Existing"),e.useExistingDescription=r.l10n.t('Use existing ".venv" environment with no changes to it'),e.existingVenvQuickPickPlaceholder=r.l10n.t('Choose an option to handle the existing ".venv" environment'),e.deletingEnvironmentProgress=r.l10n.t('Deleting existing ".venv" environment...'),e.errorDeletingEnvironment=r.l10n.t('Error while deleting existing ".venv" environment.'),e.openRequirementsFile=r.l10n.t("Open requirements file")}(t=e.Venv||(e.Venv={})),function(e){e.condaMissing=r.l10n.t("Install `conda` to create conda environments."),e.created=r.l10n.t("Environment created..."),e.installingPackages=r.l10n.t("Installing packages..."),e.errorCreatingEnvironment=r.l10n.t("Error while creating conda environment."),e.selectPythonQuickPickPlaceholder=r.l10n.t("Select the version of Python to install in the environment"),e.creating=r.l10n.t("Creating conda environment..."),e.providerDescription=r.l10n.t("Creates a `.conda` Conda environment in the current workspace"),e.recreate=r.l10n.t("Delete and Recreate"),e.recreateDescription=r.l10n.t('Delete existing ".conda" environment and create a new one'),e.useExisting=r.l10n.t("Use Existing"),e.useExistingDescription=r.l10n.t('Use existing ".conda" environment with no changes to it'),e.existingCondaQuickPickPlaceholder=r.l10n.t('Choose an option to handle the existing ".conda" environment'),e.deletingEnvironmentProgress=r.l10n.t('Deleting existing ".conda" environment...'),e.errorDeletingEnvironment=r.l10n.t('Error while deleting existing ".conda" environment.')}(n=e.Conda||(e.Conda={})),function(e){e.workspaceTriggerMessage=r.l10n.t("A virtual environment is not currently selected for your Python interpreter. Would you like to create a virtual environment?"),e.createEnvironment=r.l10n.t("Create"),e.globalPipInstallTriggerMessage=r.l10n.t("You may have installed Python packages into your global environment, which can cause conflicts between package versions. Would you like to create a virtual environment with these packages to isolate your dependencies?")}(i=e.Trigger||(e.Trigger={}))}(P||(t.CreateEnv=P={}))},98803:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNotebookCell=t.getURIFilter=t.isResource=t.noop=void 0;const r=n(552),i=n(25943);t.noop=function(){},t.isResource=function(e){if(!e)return!0;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme},t.getURIFilter=function(e,t={checkParent:!0}){let n=e.path;for(;n.endsWith("/");)n=n.slice(0,-1);const r=`${n}/`;return function(e){let o=e.path;for(;o.endsWith("/");)o=o.slice(0,-1);if(t.checkParent&&(0,i.isParentPath)(o,r))return!0;if(t.checkChild){const e=`${o}/`;if((0,i.isParentPath)(n,e))return!0}return!1}},t.isNotebookCell=function(e){const t=function(e){if(!e)return!1;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme}(e)?e:e.uri;return t.scheme.includes(r.NotebookCellScheme)||t.scheme.includes(r.InteractiveInputScheme)}},70670:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiStepInputFactory=t.IMultiStepInputFactory=t.MultiStepInput=t.InputFlowAction=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(7855);class l{constructor(){}}t.InputFlowAction=l,l.back=new l,l.cancel=new l,l.resume=new l;class u{constructor(e){this.shell=e,this.steps=[]}run(e,t){return this.stepThrough(e,t)}async showQuickPick({title:e,step:t,totalSteps:n,items:r,activeItem:i,placeholder:o,customButtonSetups:a,matchOnDescription:u,matchOnDetail:p,acceptFilterBoxTextAsSelection:d,onChangeItem:h,keepScrollPosition:f,sortByLabel:v,initialize:m}){const g=[],y=this.shell.createQuickPick();if(y.title=e,y.step=t,y.sortByLabel=v||!1,y.totalSteps=n,y.placeholder=o,y.ignoreFocusOut=!0,y.items=r,y.matchOnDescription=u||!1,y.matchOnDetail=p||!1,y.buttons=this.steps.length>1?[s.QuickInputButtons.Back]:[],a)for(const e of a)y.buttons=[...y.buttons,e.button];this.current&&this.current.dispose(),this.current=y,h&&g.push(h.event((e=>h.callback(e,y)))),m&&m(y),i?"function"==typeof i&&i(y).then((e=>{0===y.activeItems.length&&(y.activeItems=[e])})):y.activeItems=[],this.current.show(),y.keepScrollPosition=f;const b=(0,c.createDeferred)();g.push(y.onDidTriggerButton((async e=>{if(e===s.QuickInputButtons.Back&&(b.reject(l.back),y.hide()),a)for(const t of a)JSON.stringify(e)===JSON.stringify(null==t?void 0:t.button)&&await(null==t?void 0:t.callback(y))})),y.onDidChangeSelection((e=>b.resolve(e[0]))),y.onDidHide((()=>{b.completed||b.resolve(void 0)}))),d&&g.push(y.onDidAccept((()=>{b.resolve(y.value)})));try{return await b.promise}finally{g.forEach((e=>e.dispose()))}}async showInputBox({title:e,step:t,totalSteps:n,value:r,prompt:i,validate:o,password:a,buttons:c}){const u=[];try{return await new Promise(((p,d)=>{const h=this.shell.createInputBox();h.title=e,h.step=t,h.totalSteps=n,h.password=!!a,h.value=r||"",h.prompt=i,h.ignoreFocusOut=!0,h.buttons=[...this.steps.length>1?[s.QuickInputButtons.Back]:[],...c||[]];let f=o("");u.push(h.onDidTriggerButton((e=>{e===s.QuickInputButtons.Back?d(l.back):p(e)})),h.onDidAccept((async()=>{const e=h.value;h.enabled=!1,h.busy=!0,await o(e)||p(e),h.enabled=!0,h.busy=!1})),h.onDidChangeValue((async e=>{const t=o(e);f=t;const n=await t;t===f&&(h.validationMessage=n)})),h.onDidHide((()=>{p(void 0)}))),this.current&&this.current.dispose(),this.current=h,this.current.show()}))}finally{u.forEach((e=>e.dispose()))}}async stepThrough(e,t){let n=e;for(;n;){this.steps.push(n),this.current&&(this.current.enabled=!1,this.current.busy=!0);try{n=await n(this,t)}catch(e){if(e===l.back){if(this.steps.pop(),n=this.steps.pop(),void 0===n)throw e}else if(e===l.resume)n=this.steps.pop();else{if(e!==l.cancel)throw e;n=void 0}}}this.current&&this.current.dispose()}}t.MultiStepInput=u,t.IMultiStepInputFactory=Symbol("IMultiStepInputFactory");let p=class{constructor(e){this.shell=e}create(){return new u(this.shell)}};t.MultiStepInputFactory=p,t.MultiStepInputFactory=p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IApplicationShell))],p)},48112:(e,t,n)=>{"use strict";var r,i;function o(e=process.platform){return/^win/.test(e)?i.Windows:/^darwin/.test(e)?i.OSX:/^linux/.test(e)?i.Linux:i.Unknown}Object.defineProperty(t,"__esModule",{value:!0}),t.getPathEnvVariable=t.isWindows=t.getUserHomeDir=t.getEnvironmentVariable=t.getArchitecture=t.getOSType=t.OSType=t.Architecture=void 0,function(e){e[e.Unknown=1]="Unknown",e[e.x86=2]="x86",e[e.x64=3]="x64"}(r||(t.Architecture=r={})),function(e){e.Unknown="Unknown",e.Windows="Windows",e.OSX="OSX",e.Linux="Linux"}(i||(t.OSType=i={})),t.getOSType=o;const s={x86:r.x86,x64:r.x64,"":r.Unknown};function a(e){return process.env[e]}function c(){return o()===i.Windows}t.getArchitecture=function(){const e=s[process.arch];if(void 0!==e)return e;const t=n(59241);return s[t()]||r.Unknown},t.getEnvironmentVariable=a,t.getUserHomeDir=function(){return o()===i.Windows?a("USERPROFILE"):a("HOME")||a("HOMEPATH")},t.isWindows=c,t.getPathEnvVariable=function(){const e=a("PATH")||a("Path");return e?e.split(c()?";":":"):[]}},41140:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Random=void 0;const a=s(n(76982)),c=n(25891);let l=class{getRandomInt(e=0,t=10){return function(e=0,t=10){return e+function(){let e=0;const t=a.randomBytes(2);return e=(t.readUInt8(0)<<8)+t.readUInt8(1),e/(Math.pow(16,4)-1)}()*(t-e)}(e,t)}};t.Random=l,t.Random=l=o([(0,c.injectable)()],l)},5406:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verboseRegExp=void 0,t.verboseRegExp=function(e,t){return e=(e=e.replace(/(^| {2})# .*$/gm,"")).replace(/\s+?/g,""),RegExp(e,t)}},51271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisposableBase=t.DisposableStore=t.Disposables=t.disposeAll=t.dispose=t.EmptyDisposable=void 0;const r=n(61905),i=n(6301);function o(e){if(i.Iterable.is(e)){for(const t of e)if(t)try{t.dispose()}catch(e){(0,r.traceWarn)(`dispose() failed for ${t}`,e)}return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}async function s(e){await Promise.all(e.map((async e=>{try{return Promise.resolve(e.dispose())}catch(e){}return Promise.resolve()})))}t.EmptyDisposable={dispose:()=>{}},t.dispose=o,t.disposeAll=s,t.Disposables=class{constructor(...e){this.disposables=[],this.disposables.push(...e)}push(...e){this.disposables.push(...e)}async dispose(){const{disposables:e}=this;this.disposables=[],await s(e)}};class a{constructor(...e){this._toDispose=new Set,this._isDisposed=!1,e.forEach((e=>this.add(e)))}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(0!==this._toDispose.size)try{o(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?a.DISABLE_DISPOSED_WARNING||(0,r.traceWarn)(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}t.DisposableStore=a,a.DISABLE_DISPOSED_WARNING=!1,t.DisposableBase=class{get isDisposed(){return this._isDisposed}constructor(...e){this._store=new a,this._isDisposed=!1,e.forEach((e=>this._store.add(e)))}dispose(){this._store.dispose(),this._isDisposed=!0}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}},91738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runAfterActivation=t.addItemsToRunAfterActivation=void 0;const n=[];let r=!1;t.addItemsToRunAfterActivation=function(e){r?e():n.push(e)},t.runAfterActivation=function(){for(r=!0;n.length>0;){const e=n.shift();e&&e()}}},51080:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopWatch=void 0,t.StopWatch=class{constructor(){this.started=(new Date).getTime()}get elapsedTime(){return(new Date).getTime()-this.started}reset(){this.started=(new Date).getTime()}}},75941:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=t.isObject=t.isString=t.isArray=void 0;const n="number";t.isArray=function(e){return Array.isArray?Array.isArray(e):!(!e||typeof e.length!==n||e.constructor!==Array)},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)},t.isNumber=function(e){return(typeof e===n||e instanceof Number)&&!isNaN(e)}},8727:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSemVerSafe=t.areSimilarVersions=t.areIdenticalVersion=t.parseVersionInfo=t.validateVersionInfo=t.normalizeVersionInfo=t.compareVersions=t.isVersionInfoEmpty=t.parseBasicVersionInfo=t.getVersionString=t.EMPTY_VERSION=void 0;const s=o(n(99589)),a=n(5406);function c(e){if("number"==typeof e)return Number.isNaN(e)?[-1,"missing"]:e<0?[-1,""]:[e,""];if("string"==typeof e){const t=parseInt(e,10);return Number.isNaN(t)?[-1,"string not numeric"]:t<0?[-1,""]:[t,""]}return null==e?[-1,"missing"]:[-1,"unsupported type"]}function l(e,t,n){if(!(0===t||t>0)&&n&&""!==n)throw Error(`invalid ${e} version (failed to normalize; ${n})`)}t.EMPTY_VERSION={major:-1,minor:-1,micro:-1},Object.freeze(t.EMPTY_VERSION),t.getVersionString=function(e){return e.major<0?"":e.minor<0?`${e.major}`:e.micro<0?`${e.major}.${e.minor}`:`${e.major}.${e.minor}.${e.micro}`};const u=(0,a.verboseRegExp)("\n    ^\n    (.*?)  # <before>\n    (\\d+)  # <major>\n    (?:\n        [.]\n        (\\d+)  # <minor>\n        (?:\n            [.]\n            (\\d+)  # <micro>\n        )?\n    )?\n    ([^\\d].*)?  # <after>\n    $\n","s");function p(e){const t=e.match(u);if(!t)return;const[,n,r,i,o,s]=t;if(!n||!n.endsWith(".")){if(s&&""!==s){if("."===s)return;if(!(n&&""!==n||o&&""!==o))return}return{version:{major:parseInt(r,10),minor:i?parseInt(i,10):-1,micro:o?parseInt(o,10):-1},before:n||"",after:s||""}}}function d(e,t,n){return e.major<t.major?[1,"major"]:e.major>t.major?[-1,"major"]:-1===e.major?[0,""]:e.minor<t.minor?[1,"minor"]:e.minor>t.minor?[-1,"minor"]:-1===e.minor?[0,""]:e.micro<t.micro?[1,"micro"]:e.micro>t.micro?[-1,"micro"]:void 0!==n?n(e,t):[0,""]}t.parseBasicVersionInfo=p,t.isVersionInfoEmpty=function(e){return!!e&&"number"==typeof e.major&&"number"==typeof e.minor&&"number"==typeof e.micro&&e.major<0&&e.minor<0&&e.micro<0},t.compareVersions=d,t.normalizeVersionInfo=function(e){const n=function(e){if(!e)return t.EMPTY_VERSION;const n=function(e){const t={major:e.major,minor:e.minor,micro:e.micro},{unnormalized:n}=e;return void 0!==n&&(t.unnormalized={major:n.major,minor:n.minor,micro:n.micro}),t}(e);return void 0===n.unnormalized&&(n.unnormalized={},[n.major,n.unnormalized.major]=c(n.major),[n.minor,n.unnormalized.minor]=c(n.minor),[n.micro,n.unnormalized.micro]=c(n.micro)),n}(e);return n.raw=e.raw,n.raw||(n.raw=""),n},t.validateVersionInfo=function(e){!function(e){var t,n,r;const i=e;if(l("major",e.major,null===(t=i.unnormalized)||void 0===t?void 0:t.major),l("minor",e.minor,null===(n=i.unnormalized)||void 0===n?void 0:n.minor),l("micro",e.micro,null===(r=i.unnormalized)||void 0===r?void 0:r.micro),e.major<0)throw Error("missing major version");if(e.minor<0&&(0===e.micro||e.micro>0))throw Error("missing minor version")}(e)},t.parseVersionInfo=function(e){const t=p(e);if(void 0!==t)return t.version.raw=e,t},t.areIdenticalVersion=function(e,t,n){const[r]=d(e,t,n);return 0===r},t.areSimilarVersions=function(e,t,n){const[r,i]=d(e,t,n);return 0===r||"major"!==i&&(r<0?-1===t[i]:-1===e[i])},t.parseSemVerSafe=function(e){e=e.replace(/\.00*(?=[1-9]|0\.)/,".");const t=s.coerce(e);return null!==t&&s.valid(t)?t:new s.SemVer("0.0.0")}},79979:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRunningWorkerPool=t.QueuePosition=void 0;const r=n(61905),i=n(7855);var o;!function(e){e[e.Back=0]="Back",e[e.Front=1]="Front"}(o||(t.QueuePosition=o={}));class s{constructor(e,t,n,r){this.next=e,this.workFunc=t,this.postResult=n,this.name=r,this.stopProcessing=!1}stop(){this.stopProcessing=!0}async start(){for(;!this.stopProcessing;)try{const e=await this.next();try{const t=await this.workFunc(e);this.postResult(e,t)}catch(t){this.postResult(e,void 0,t)}}catch(e){(0,r.traceError)(`Error while running worker[${this.name}].`,e);continue}}}class a{constructor(){this.items=[],this.results=new Map}add(e,t){const n={item:e};t===o.Front?this.items.unshift(n):this.items.push(n);const r=(0,i.createDeferred)();return this.results.set(n,r),r.promise}completed(e,t,n){const r=this.results.get(e);void 0!==r&&(this.results.delete(e),void 0!==n&&r.reject(n),r.resolve(t))}next(){return this.items.shift()}clear(){this.results.forEach(((e,t,n)=>{e.reject(Error("Queue stopped processing")),n.delete(t)}))}}class c{constructor(e,t=2,n="Worker"){this.workerFunc=e,this.numWorkers=t,this.name=n,this.workers=[],this.waitingWorkersUnblockQueue=[],this.queue=new a,this.stopProcessing=!1}addToQueue(e,t){if(this.stopProcessing)throw Error("Queue is stopped");const n=this.queue.add(e,t),i=this.waitingWorkersUnblockQueue.shift();if(i){const e=this.queue.next();void 0!==e?i.unblock(e):(0,r.traceError)("Work queue was empty immediately after adding item.")}return n}start(){this.stopProcessing=!1;let e=this.numWorkers;for(;e>0;)this.workers.push(new s((()=>this.nextWorkItem()),(e=>this.workerFunc(e.item)),((e,t,n)=>this.queue.completed(e,t,n)),`${this.name} ${e}`)),e-=1;this.workers.forEach((async e=>e.start()))}stop(){this.stopProcessing=!0;let e=this.workers.shift();for(;e;)e.stop(),e=this.workers.shift();this.queue.clear();let t=this.waitingWorkersUnblockQueue.shift();for(;t;)t.stop(),t=this.waitingWorkersUnblockQueue.shift()}nextWorkItem(){const e=this.queue.next();return void 0!==e?Promise.resolve(e):new Promise(((e,t)=>{this.waitingWorkersUnblockQueue.push({unblock:n=>{this.stopProcessing&&t(),e(n)},stop:()=>{t()}})}))}}t.createRunningWorkerPool=function(e,t,n){const r=new c(e,t,n);return r.start(),r}},76722:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.matchTarget=t.restoreKeys=t.normCaseKeys=t.parseEnvFile=t.EnvironmentVariablesService=void 0;const c=n(25943),l=n(25891),u=s(n(16928)),p=n(61905),d=n(51535),h=n(53322),f=n(22408),v=n(86156),m=n(25943);let g=class{constructor(e,t){this.pathUtils=e,this.fs=t}async parseFile(e,t){if(!e||!await this.fs.pathExists(e))return;const n=await this.fs.readFile(e).catch((e=>{(0,p.traceError)("Custom .env is likely not pointing to a valid file",e)}));return n?y(n,t):void 0}parseFileSync(e,t){if(!e||!(0,c.pathExistsSync)(e))return;let n;try{n=(0,c.readFileSync)(e,{encoding:"utf8"})}catch(e){(0,p.traceError)("Custom .env is likely not pointing to a valid file",e)}return n?y(n,t):void 0}mergeVariables(e,t,n){if(!t)return;const r=t;t=_(t),e=_(e);const i=["PYTHONPATH",this.pathVariable];Object.keys(e).forEach((r=>{!(null==n?void 0:n.mergeAll)&&i.indexOf(r)>=0||(void 0===t[r]||(null==n?void 0:n.overwrite))&&(t[r]=e[r])})),E(t),S(r,t)}appendPythonPath(e,...t){return this.appendPaths(e,"PYTHONPATH",...t)}appendPath(e,...t){return this.appendPaths(e,this.pathVariable,...t)}get pathVariable(){return this._pathVariable||(this._pathVariable=this.pathUtils.getPathVariableName()),(0,m.normCase)(this._pathVariable)}appendPaths(e,t,...n){const r=e;return e=_(e),t=(0,m.normCase)(t),E(e=this._appendPaths(e,t,...n)),S(r,e),e}_appendPaths(e,t,...n){const r=n.filter((e=>"string"==typeof e&&e.trim().length>0)).map((e=>e.trim())).join(u.delimiter);if(0===r.length)return e;const i=e?e[t]:void 0;return i&&"string"==typeof i&&i.length>0?e[t]=i+u.delimiter+r:e[t]=r,e}};function y(e,t){const n=t||{},r={};return e.toString().split("\n").forEach(((e,t)=>{const[i,o]=function(e){const t=e.match(/^\s*(_*[a-zA-Z]\w*)\s*=\s*(.*?)?\s*$/);if(!t)return["",""];const n=t[1];let r=t[2];return r&&""!==r?("'"===r[0]&&"'"===r[r.length-1]||'"'===r[0]&&'"'===r[r.length-1])&&(r=r.substring(1,r.length-1),r=r.replace(/\\n/gm,"\n")):r="",[n,r]}(e);""!==i&&(r[i]=function(e,t,n,r=""){let i=!1,o=e;return o=o.replace(b,((e,o,s,a,c)=>a>0&&"\\"===c[a-1]?e:s&&""!==s||!o||""===o?(i=!0,e):t[o]||n[o]||r)),i||o===e||(e=o,(0,d.sendTelemetryEvent)(h.EventName.ENVFILE_VARIABLE_SUBSTITUTION)),e.replace(/\\\$/g,"$")}(o,r,n))})),r}t.EnvironmentVariablesService=g,t.EnvironmentVariablesService=g=o([(0,l.injectable)(),a(0,(0,l.inject)(v.IPathUtils)),a(1,(0,l.inject)(f.IFileSystem))],g),t.parseEnvFile=y;const b=/\${([a-zA-Z]\w*)?([^}\w].*)?}/g;function _(e){const t={};return Object.keys(e).forEach((n=>{const r=(0,m.normCase)(n);t[r]=e[n]})),t}function E(e){Object.keys(process.env).forEach((t=>{const n=(0,m.normCase)(t);n!==t&&void 0!==e[n]&&(e[t]=e[n],delete e[n])}))}function S(e,t){Object.keys(e).forEach((n=>{t.hasOwnProperty(n)?e[n]=t[n]:delete e[n]})),Object.keys(t).forEach((n=>{e.hasOwnProperty(n)||(e[n]=t[n])}))}t.normCaseKeys=_,t.restoreKeys=E,t.matchTarget=S},52160:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentVariablesProvider=void 0;const c=n(25891),l=s(n(16928)),u=n(54980),p=n(61905),d=n(63999),h=n(54661),f=n(41414),v=n(22408),m=n(86156),g=n(99652),y=n(79985),b=n(53694);let _=class{constructor(e,t,n,r,i,o=36e5){this.envVarsService=e,this.platformService=n,this.workspaceService=r,this.process=i,this.cacheDuration=o,this.trackedWorkspaceFolders=new Set,this.fileWatchers=new Map,this.disposables=[],this.envVarCaches=new Map,t.push(this),this.changeEventEmitter=new u.EventEmitter;const s=this.workspaceService.onDidChangeConfiguration(this.configurationChanged,this);this.disposables.push(s)}get onDidEnvironmentVariablesChange(){return this.changeEventEmitter.event}dispose(){this.changeEventEmitter.dispose(),this.fileWatchers.forEach((e=>{e&&e.dispose()}))}async getEnvironmentVariables(e){const t=this.getCachedEnvironmentVariables(e);if(t)return t;const n=await this._getEnvironmentVariables(e);return this.setCachedEnvironmentVariables(e,n),(0,p.traceVerbose)("Dump environment variables",JSON.stringify(n,null,4)),n}getEnvironmentVariablesSync(e){const t=this.getCachedEnvironmentVariables(e);if(t)return t;const n=this._getEnvironmentVariablesSync(e);return this.setCachedEnvironmentVariables(e,n),n}getCachedEnvironmentVariables(e){var t,n;const r=null!==(n=null===(t=this.getWorkspaceFolderUri(e))||void 0===t?void 0:t.fsPath)&&void 0!==n?n:"",i=this.envVarCaches.get(r);if(i){const e=i.data;if(e)return{...e}}}setCachedEnvironmentVariables(e,t){var n,r;const i=null!==(r=null===(n=this.getWorkspaceFolderUri(e))||void 0===n?void 0:n.fsPath)&&void 0!==r?r:"",o=new g.InMemoryCache(this.cacheDuration);this.envVarCaches.set(i,o),o.data={...t}}async _getEnvironmentVariables(e){const t=await this.getCustomEnvironmentVariables(e);return this.getMergedEnvironmentVariables(t)}_getEnvironmentVariablesSync(e){const t=this.getCustomEnvironmentVariablesSync(e);return this.getMergedEnvironmentVariables(t)}getMergedEnvironmentVariables(e){e||(e={}),this.envVarsService.mergeVariables(this.process.env,e);const t=this.platformService.pathVariableName,n=this.process.env[t];return n&&this.envVarsService.appendPath(e,n),this.process.env.PYTHONPATH&&this.envVarsService.appendPythonPath(e,this.process.env.PYTHONPATH),e}async getCustomEnvironmentVariables(e){return this.envVarsService.parseFile(this.getEnvFile(e),this.process.env)}getCustomEnvironmentVariablesSync(e){return this.envVarsService.parseFileSync(this.getEnvFile(e),this.process.env)}getEnvFile(e){var t;const n=new y.SystemVariables(void 0,null===(t=f.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri)||void 0===t?void 0:t.fsPath,this.workspaceService),r=this.getWorkspaceFolderUri(e),i=this.workspaceService.getConfiguration("python",e).get("envFile"),o=n.resolveAny(i);return void 0===o?((0,p.traceError)("Unable to read `python.envFile` setting for resource",JSON.stringify(e)),(null==r?void 0:r.fsPath)?l.join(null==r?void 0:r.fsPath,".env"):""):(this.trackedWorkspaceFolders.add(r?r.fsPath:""),this.createFileWatcher(o,r),o)}configurationChanged(e){this.trackedWorkspaceFolders.forEach((t=>{const n=t&&t.length>0?u.Uri.file(t):void 0;e.affectsConfiguration("python.envFile",n)&&this.onEnvironmentFileChanged(n)}))}createFileWatcher(e,t){if(this.fileWatchers.has(e))return;const n=this.workspaceService.createFileSystemWatcher(e);this.fileWatchers.set(e,n),n&&(this.disposables.push(n.onDidChange((()=>this.onEnvironmentFileChanged(t)))),this.disposables.push(n.onDidCreate((()=>this.onEnvironmentFileCreated(t)))),this.disposables.push(n.onDidDelete((()=>this.onEnvironmentFileChanged(t)))))}getWorkspaceFolderUri(e){if(!e)return;const t=this.workspaceService.getWorkspaceFolder(e);return t?t.uri:void 0}onEnvironmentFileCreated(e){this.onEnvironmentFileChanged(e),(0,d.sendFileCreationTelemetry)()}onEnvironmentFileChanged(e){this.envVarCaches.clear(),this.changeEventEmitter.fire(e)}};t.EnvironmentVariablesProvider=_,t.EnvironmentVariablesProvider=_=o([(0,c.injectable)(),a(0,(0,c.inject)(b.IEnvironmentVariablesService)),a(1,(0,c.inject)(m.IDisposableRegistry)),a(2,(0,c.inject)(v.IPlatformService)),a(3,(0,c.inject)(h.IWorkspaceService)),a(4,(0,c.inject)(m.ICurrentProcess))],_)},90679:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(76722),i=n(52160),o=n(53694);t.registerTypes=function(e){e.addSingleton(o.IEnvironmentVariablesService,r.EnvironmentVariablesService),e.addSingleton(o.IEnvironmentVariablesProvider,i.EnvironmentVariablesProvider)}},79985:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemVariables=void 0;const s=o(n(16928)),a=n(54980),c=n(68397),l=o(n(75941));class u{resolve(e){return l.isString(e)?this.__resolveString(e):l.isArray(e)?this.__resolveArray(e):l.isObject(e)?this.__resolveLiteral(e):e}resolveAny(e){return l.isString(e)?this.__resolveString(e):l.isArray(e)?this.__resolveAnyArray(e):l.isObject(e)?this.__resolveAnyLiteral(e):e}__resolveString(e){return e.replace(/\$\{(.*?)\}/g,((e,t)=>{const n=this[t];return l.isString(n)?n:e&&(e.indexOf("env.")>0||e.indexOf("env:")>0)?"":e}))}__resolveLiteral(e){const t=Object.create(null);return Object.keys(e).forEach((n=>{const r=e[n];t[n]=this.resolve(r)})),t}__resolveAnyLiteral(e){const t=Object.create(null);return Object.keys(e).forEach((n=>{const r=e[n];t[n]=this.resolveAny(r)})),t}__resolveArray(e){return e.map((e=>this.__resolveString(e)))}__resolveAnyArray(e){return e.map((e=>this.resolveAny(e)))}}t.SystemVariables=class extends u{constructor(e,t,n,r){var i;super();const o=n&&e?n.getWorkspaceFolder(e):void 0;this._workspaceFolder=o?o.uri.fsPath:t||__dirname,this._workspaceFolderName=s.basename(this._workspaceFolder),this._filePath=e?e.fsPath:void 0,r&&r.activeTextEditor&&(this._lineNumber=r.activeTextEditor.selection.anchor.line+1,this._selectedText=r.activeTextEditor.document.getText(new a.Range(r.activeTextEditor.selection.start,r.activeTextEditor.selection.end))),this._execPath=process.execPath,Object.keys(process.env).forEach((e=>{this[`env:${e}`]=this[`env.${e}`]=process.env[e]})),n=null!=n?n:new c.WorkspaceService;try{null===(i=n.workspaceFolders)||void 0===i||i.forEach((e=>{this[`workspaceFolder:${s.basename(e.uri.fsPath)}`]=e.uri.fsPath,this[`workspaceFolder:${e.name}`]=e.uri.fsPath}))}catch(e){}}get cwd(){return this.workspaceFolder}get workspaceRoot(){return this._workspaceFolder}get workspaceFolder(){return this._workspaceFolder}get workspaceRootFolderName(){return this._workspaceFolderName}get workspaceFolderBasename(){return this._workspaceFolderName}get file(){return this._filePath}get relativeFile(){return this.file?s.relative(this._workspaceFolder,this.file):void 0}get relativeFileDirname(){return this.relativeFile?s.dirname(this.relativeFile):void 0}get fileBasename(){return this.file?s.basename(this.file):void 0}get fileBasenameNoExtension(){return this.file?s.parse(this.file).name:void 0}get fileDirname(){return this.file?s.dirname(this.file):void 0}get fileExtname(){return this.file?s.extname(this.file):void 0}get lineNumber(){return this._lineNumber}get selectedText(){return this._selectedText}get execPath(){return this._execPath}}},53694:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEnvironmentVariablesProvider=t.IEnvironmentVariablesService=void 0,t.IEnvironmentVariablesService=Symbol("IEnvironmentVariablesService"),t.IEnvironmentVariablesProvider=Symbol("IEnvironmentVariablesProvider")},30556:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.launch=void 0;const r=n(54980);t.launch=function(e){r.env.openExternal(r.Uri.parse(e))}},93029:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerCommand=t.executeCommand=void 0;const r=n(54980);t.executeCommand=function(e,...t){return r.commands.executeCommand(e,...t)},t.registerCommand=function(e,t,n){return r.commands.registerCommand(e,t,n)}},34467:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensions=t.isInsider=t.isExtensionDisabled=t.isExtensionEnabled=t.getExtension=void 0;const s=o(n(16928)),a=o(n(54980)),c=o(n(25943)),l=n(552);function u(e){return a.extensions.getExtension(e)}t.getExtension=u,t.isExtensionEnabled=function(e){return void 0!==a.extensions.getExtension(e)},t.isExtensionDisabled=function(e){const t=u(l.PVSC_EXTENSION_ID);if(t){let n=!1;return c.readdirSync(s.dirname(t.extensionPath),{withFileTypes:!1}).forEach((t=>{t.toString().startsWith(e)&&(n=!0)})),n}return!1},t.isInsider=function(){return a.env.appName.includes("Insider")},t.getExtensions=function(){return a.extensions.all}},37938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onDidChangeDiagnostics=t.createDiagnosticCollection=void 0;const r=n(54980);t.createDiagnosticCollection=function(e){return r.languages.createDiagnosticCollection(e)},t.onDidChangeDiagnostics=function(e){return r.languages.onDidChangeDiagnostics(e)}},85784:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTerminalLinkProvider=t.createLogOutputChannel=t.createOutputChannel=t.getActiveResource=t.createStepForwardEndNode=t.createStepBackEndNode=t.MultiStepNode=t.showQuickPickWithBack=t.MultiStepAction=t.onDidStartTerminalShellExecution=t.onDidChangeActiveTextEditor=t.getActiveTextEditor=t.withProgress=t.showInformationMessage=t.showWarningMessage=t.showErrorMessage=t.createQuickPick=t.showQuickPick=t.showNotebookDocument=t.showTextDocument=void 0;const r=n(54980),i=n(7855),o=n(8841);var s;t.showTextDocument=function(e){return r.window.showTextDocument(e)},t.showNotebookDocument=function(e,t){return r.window.showNotebookDocument(e,t)},t.showQuickPick=function(e,t,n){return r.window.showQuickPick(e,t,n)},t.createQuickPick=function(){return r.window.createQuickPick()},t.showErrorMessage=function(e,...t){return r.window.showErrorMessage(e,...t)},t.showWarningMessage=function(e,...t){return r.window.showWarningMessage(e,...t)},t.showInformationMessage=function(e,...t){return r.window.showInformationMessage(e,...t)},t.withProgress=function(e,t){return r.window.withProgress(e,t)},t.getActiveTextEditor=function(){const{activeTextEditor:e}=r.window;return e},t.onDidChangeActiveTextEditor=function(e){return r.window.onDidChangeActiveTextEditor(e)},t.onDidStartTerminalShellExecution=function(e){return r.window.onDidStartTerminalShellExecution(e)},function(e){e.Back="Back",e.Cancel="Cancel",e.Continue="Continue"}(s||(t.MultiStepAction=s={})),t.showQuickPickWithBack=async function(e,t,n,o){var a,c,l,u;const p=r.window.createQuickPick(),d=[p];p.items=e,p.buttons=[r.QuickInputButtons.Back],p.canSelectMany=null!==(a=null==t?void 0:t.canPickMany)&&void 0!==a&&a,p.ignoreFocusOut=null!==(c=null==t?void 0:t.ignoreFocusOut)&&void 0!==c&&c,p.matchOnDescription=null!==(l=null==t?void 0:t.matchOnDescription)&&void 0!==l&&l,p.matchOnDetail=null!==(u=null==t?void 0:t.matchOnDetail)&&void 0!==u&&u,p.placeholder=null==t?void 0:t.placeHolder,p.title=null==t?void 0:t.title;const h=(0,i.createDeferred)();d.push(p,p.onDidTriggerButton((e=>{e===r.QuickInputButtons.Back&&(h.reject(s.Back),p.hide())})),p.onDidAccept((()=>{h.completed||(p.canSelectMany?h.resolve(p.selectedItems.map((e=>e))):h.resolve(p.selectedItems[0]),p.hide())})),p.onDidHide((()=>{h.completed||h.resolve(void 0)})),p.onDidTriggerItemButton((e=>{o&&o(e)}))),n&&d.push(n.onCancellationRequested((()=>{p.hide()}))),p.show();try{return await h.promise}finally{d.forEach((e=>e.dispose()))}};class a{constructor(e,t,n){this.previous=e,this.current=t,this.next=n}static async run(e,t){let n=e,r=await n.current(t);for(;void 0!==n;){if(r===s.Cancel)return r;r===s.Back&&(n=null==n?void 0:n.previous),r===s.Continue&&(n=null==n?void 0:n.next),n&&(r=await(null==n?void 0:n.current(r)))}return r}}t.MultiStepNode=a,t.createStepBackEndNode=function(e){return new a(void 0,(async()=>(e&&e.reject(s.Back),Promise.resolve(s.Back))),void 0)},t.createStepForwardEndNode=function(e,t){return new a(void 0,(async()=>(e&&e.resolve(t),Promise.resolve(s.Back))),void 0)},t.getActiveResource=function(){const e=r.window.activeTextEditor;if(e&&!e.document.isUntitled)return e.document.uri;const t=(0,o.getWorkspaceFolders)();return Array.isArray(t)&&t.length>0?t[0].uri:void 0},t.createOutputChannel=function(e,t){return r.window.createOutputChannel(e,t)},t.createLogOutputChannel=function(e,t){return r.window.createOutputChannel(e,t)},t.registerTerminalLinkProvider=function(e){return r.window.registerTerminalLinkProvider(e)}},8841:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.copy=t.openNotebookDocument=t.createDirectory=t.onDidGrantWorkspaceTrust=t.isTrusted=t.isVirtualWorkspace=t.onDidChangeWorkspaceFolders=t.createFileSystemWatcher=t.onDidCloseNotebookDocument=t.onDidChangeConfiguration=t.onDidChangeTextDocument=t.onDidOpenTextDocument=t.getOpenTextDocuments=t.onDidSaveTextDocument=t.onDidCloseTextDocument=t.findFiles=t.applyEdit=t.getConfiguration=t.getWorkspaceFolderPaths=t.getWorkspaceFolder=t.getWorkspaceFolders=void 0;const s=o(n(54980));t.getWorkspaceFolders=function(){return s.workspace.workspaceFolders},t.getWorkspaceFolder=function(e){return e?s.workspace.getWorkspaceFolder(e):void 0},t.getWorkspaceFolderPaths=function(){var e,t;return null!==(t=null===(e=s.workspace.workspaceFolders)||void 0===e?void 0:e.map((e=>e.uri.fsPath)))&&void 0!==t?t:[]},t.getConfiguration=function(e,t){return s.workspace.getConfiguration(e,t)},t.applyEdit=function(e){return s.workspace.applyEdit(e)},t.findFiles=function(e,t,n,r){return s.workspace.findFiles(e,t,n,r)},t.onDidCloseTextDocument=function(e){return s.workspace.onDidCloseTextDocument(e)},t.onDidSaveTextDocument=function(e){return s.workspace.onDidSaveTextDocument(e)},t.getOpenTextDocuments=function(){return s.workspace.textDocuments},t.onDidOpenTextDocument=function(e){return s.workspace.onDidOpenTextDocument(e)},t.onDidChangeTextDocument=function(e){return s.workspace.onDidChangeTextDocument(e)},t.onDidChangeConfiguration=function(e){return s.workspace.onDidChangeConfiguration(e)},t.onDidCloseNotebookDocument=function(e){return s.workspace.onDidCloseNotebookDocument(e)},t.createFileSystemWatcher=function(e,t,n,r){return s.workspace.createFileSystemWatcher(e,t,n,r)},t.onDidChangeWorkspaceFolders=function(e){return s.workspace.onDidChangeWorkspaceFolders(e)},t.isVirtualWorkspace=function(){return!(!s.workspace.workspaceFolders||!s.workspace.workspaceFolders.every((e=>"file"!==e.uri.scheme)))},t.isTrusted=function(){return s.workspace.isTrusted},t.onDidGrantWorkspaceTrust=function(e){return s.workspace.onDidGrantWorkspaceTrust(e)},t.createDirectory=function(e){return s.workspace.fs.createDirectory(e)},t.openNotebookDocument=function(e,t){return s.workspace.openNotebookDocument(e,t)},t.copy=function(e,t,n){return s.workspace.fs.copy(e,t,n)}},84090:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HiddenFilePrefix=t.EXTENSION_ROOT_DIR=void 0;const s=o(n(16928)),a=s.basename(__dirname);t.EXTENSION_ROOT_DIR="client"===a?s.join(__dirname,"..",".."):s.join(__dirname,"..","..","..",".."),t.HiddenFilePrefix="_HiddenFile_"},54786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonDebuggerTypeName=t.DebuggerTypeName=void 0,t.DebuggerTypeName="python",t.PythonDebuggerTypeName="debugpy"},78518:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugAdapterActivator=void 0;const o=n(25891),s=n(54661),a=n(86156),c=n(54661),l=n(54786),u=n(47586),p=n(46108);let d=class{constructor(e,t,n,r,i,o,s,a){this.debugService=e,this.configSettings=t,this.commandManager=n,this.descriptorFactory=r,this.debugSessionLoggingFactory=i,this.debuggerPromptFactory=o,this.disposables=s,this.attachProcessProviderFactory=a,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!1}}async activate(){this.attachProcessProviderFactory.registerCommands(),this.disposables.push(this.debugService.registerDebugAdapterTrackerFactory(l.DebuggerTypeName,this.debugSessionLoggingFactory)),this.disposables.push(this.debugService.registerDebugAdapterTrackerFactory(l.DebuggerTypeName,this.debuggerPromptFactory)),this.disposables.push(this.debugService.registerDebugAdapterDescriptorFactory(l.DebuggerTypeName,this.descriptorFactory)),this.disposables.push(this.debugService.onDidStartDebugSession((e=>{var t;this.shouldTerminalFocusOnStart(null===(t=e.workspaceFolder)||void 0===t?void 0:t.uri)&&this.commandManager.executeCommand("workbench.action.terminal.focus")})))}shouldTerminalFocusOnStart(e){var t;return null===(t=this.configSettings.getSettings(e))||void 0===t?void 0:t.terminal.focusAfterLaunch}};t.DebugAdapterActivator=d,t.DebugAdapterActivator=d=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDebugService)),i(1,(0,o.inject)(a.IConfigurationService)),i(2,(0,o.inject)(c.ICommandManager)),i(3,(0,o.inject)(p.IDebugAdapterDescriptorFactory)),i(4,(0,o.inject)(p.IDebugSessionLoggingFactory)),i(5,(0,o.inject)(p.IOutdatedDebuggerPromptFactory)),i(6,(0,o.inject)(a.IDisposableRegistry)),i(7,(0,o.inject)(u.IAttachProcessProviderFactory))],d)},32075:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugAdapterDescriptorFactory=t.debugStateKeys=void 0;const c=n(25891),l=s(n(16928)),u=n(54980),p=n(84090),d=n(29413),h=n(61905),f=n(85784),v=n(14152),m=n(86156),g=n(552),y=n(54661),b=n(73354);var _;!function(e){e.doNotShowAgain="doNotShowPython36DebugDeprecatedAgain"}(_||(t.debugStateKeys=_={}));let E=class{constructor(e,t,n){this.commandManager=e,this.interpreterService=t,this.persistentState=n}async createDebugAdapterDescriptor(e,t){var n,r,i,o,s;const a=e.configuration;if("attach"===a.request){if(void 0!==a.connect)return(0,h.traceLog)(`Connecting to DAP Server at:  ${null!==(n=a.connect.host)&&void 0!==n?n:"127.0.0.1"}:${a.connect.port}`),new u.DebugAdapterServer(a.connect.port,null!==(r=a.connect.host)&&void 0!==r?r:"127.0.0.1");if(void 0!==a.port)return(0,h.traceLog)(`Connecting to DAP Server at:  ${null!==(i=a.host)&&void 0!==i?i:"127.0.0.1"}:${a.port}`),new u.DebugAdapterServer(a.port,null!==(o=a.host)&&void 0!==o?o:"127.0.0.1");if(void 0===a.listen&&void 0===a.processId)throw new Error('"request":"attach" requires either "connect", "listen", or "processId"')}const c=await this.getDebugAdapterPython(a,e.workspaceFolder);if(0!==c.length){const e=null!==(s=c.shift())&&void 0!==s?s:"python",t=a.logToFile?["--log-dir",p.EXTENSION_ROOT_DIR]:[];if(void 0!==a.debugAdapterPath){const n=c.concat([a.debugAdapterPath,...t]);return(0,h.traceLog)(`DAP Server launched with command: ${e} ${n.join(" ")}`),new u.DebugAdapterExecutable(e,n)}const n=await(0,b.getDebugpyPath)();if(!n)throw(0,h.traceError)("Could not find debugpy path."),new Error("Could not find debugpy path.");const r=l.join(n,"adapter"),i=c.concat([r,...t]);return(0,h.traceLog)(`DAP Server launched with command: ${e} ${i.join(" ")}`),new u.DebugAdapterExecutable(e,i)}throw new Error("Debug Adapter Executable not provided")}async getDebugAdapterPython(e,t){if(void 0!==e.debugAdapterPython)return this.getExecutableCommand(await this.interpreterService.getInterpreterDetails(e.debugAdapterPython));if(e.pythonPath)return this.getExecutableCommand(await this.interpreterService.getInterpreterDetails(e.pythonPath));const n=t?t.uri:void 0,r=await this.interpreterService.getActiveInterpreter(n);if(r)return(0,h.traceVerbose)(`Selecting active interpreter as Python Executable for DA '${r.path}'`),this.getExecutableCommand(r);await this.interpreterService.hasInterpreters();const i=this.interpreterService.getInterpreters(n);return 0===i.length?(this.notifySelectInterpreter().ignoreErrors(),[]):((0,h.traceVerbose)(`Picking first available interpreter to launch the DA '${i[0].path}'`),this.getExecutableCommand(i[0]))}async showDeprecatedPythonMessage(){if(this.persistentState.createGlobalPersistentState(_.doNotShowAgain,!1).value)return;const e=[v.Interpreters.changePythonInterpreter,v.Common.doNotShowAgain],t=await(0,f.showErrorMessage)(u.l10n.t("The debugger in the python extension no longer supports python versions minor than 3.7."),{modal:!0},...e);t&&(t==v.Interpreters.changePythonInterpreter&&await this.commandManager.executeCommand(g.Commands.Set_Interpreter),t==v.Common.doNotShowAgain&&await this.persistentState.createGlobalPersistentState(_.doNotShowAgain,!1).updateValue(!0))}async getExecutableCommand(e){var t,n,r,i,o,s;return e?(((null!==(n=null===(t=e.version)||void 0===t?void 0:t.major)&&void 0!==n?n:0)<3||(null!==(i=null===(r=e.version)||void 0===r?void 0:r.major)&&void 0!==i?i:0)<=3&&(null!==(s=null===(o=e.version)||void 0===o?void 0:o.minor)&&void 0!==s?s:0)<=6)&&this.showDeprecatedPythonMessage(),e.path.length>0?[e.path]:[]):[]}async notifySelectInterpreter(){await(0,f.showErrorMessage)(u.l10n.t("Install Python or select a Python Interpreter to use the debugger."))}};t.DebugAdapterDescriptorFactory=E,t.DebugAdapterDescriptorFactory=E=o([(0,c.injectable)(),a(0,(0,c.inject)(y.ICommandManager)),a(1,(0,c.inject)(d.IInterpreterService)),a(2,(0,c.inject)(m.IPersistentStateFactory))],E)},20652:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSessionLoggingFactory=void 0;const c=n(25891),l=s(n(16928)),u=n(22408),p=n(51080),d=n(84090);class h{constructor(e,t){if(this.session=e,this.enabled=!1,this.timer=new p.StopWatch,this.enabled=this.session.configuration.logToFile,this.enabled){const e=`debugger.vscode_${this.session.id}.log`;this.stream=t.createWriteStream(l.join(d.EXTENSION_ROOT_DIR,e))}}onWillStartSession(){this.timer.reset(),this.log(`Starting Session:\n${this.stringify(this.session.configuration)}\n`)}onWillReceiveMessage(e){this.log(`Client --\x3e Adapter:\n${this.stringify(e)}\n`)}onDidSendMessage(e){this.log(`Client <-- Adapter:\n${this.stringify(e)}\n`)}onWillStopSession(){this.log("Stopping Session\n")}onError(e){this.log(`Error:\n${this.stringify(e)}\n`)}onExit(e,t){var n;this.log(`Exit:\nExit-Code: ${e||0}\nSignal: ${t||"none"}\n`),null===(n=this.stream)||void 0===n||n.close()}log(e){this.enabled&&this.stream.write(`${this.timer.elapsedTime} ${e}`)}stringify(e){return JSON.stringify(e,null,4)}}let f=class{constructor(e){this.fileSystem=e}createDebugAdapterTracker(e){return new h(e,this.fileSystem)}};t.DebugSessionLoggingFactory=f,t.DebugSessionLoggingFactory=f=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IFileSystem))],f)},13836:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.OutdatedDebuggerPromptFactory=void 0;const i=n(25891),o=n(14152),s=n(30556),a=n(85784);class c{constructor(e){this.promptCheck=e}onDidSendMessage(e){if(this.promptCheck.shouldShowPrompt()&&this.isPtvsd(e)){const e=[o.Common.moreInfo];(0,a.showInformationMessage)(o.OutdatedDebugger.outdatedDebuggerMessage,...e).then((t=>{t===e[0]&&(0,s.launch)("https://aka.ms/migrateToDebugpy")}))}}isPtvsd(e){if("event"===e.type){const t=e;if("output"===t.event){const e=t;if("telemetry"===e.body.category){if("ptvsd"===e.body.output&&!e.body.data.packageVersion.startsWith("1"))return this.promptCheck.setShowPrompt(!1),!0;"debugpy"===e.body.output&&this.promptCheck.setShowPrompt(!1)}}}return!1}}class l{constructor(){this.shouldShow=!0}shouldShowPrompt(){return this.shouldShow}setShowPrompt(e){this.shouldShow=e}}let u=class{constructor(){this.promptCheck=new l}createDebugAdapterTracker(e){return new c(this.promptCheck)}};t.OutdatedDebuggerPromptFactory=u,t.OutdatedDebuggerPromptFactory=u=r([(0,i.injectable)()],u)},62582:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDebugpyLauncherArgs=void 0,n(87295);const r=n(73354);t.getDebugpyLauncherArgs=async function(e,t){t||(t=await(0,r.getDebugpyPath)());const n=e.waitUntilDebuggerAttaches?["--wait-for-client"]:[];return[t.fileToCommandArgumentForPythonExt(),"--listen",`${e.host}:${e.port}`,...n]}},9645:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AttachProcessProviderFactory=void 0;const o=n(25891),s=n(54661),a=n(552),c=n(22408),l=n(35026),u=n(86156),p=n(67513),d=n(96366);let h=class{constructor(e,t,n,r,i){this.applicationShell=e,this.commandManager=t,this.platformService=n,this.processServiceFactory=r,this.disposableRegistry=i}registerCommands(){const e=new d.AttachProcessProvider(this.platformService,this.processServiceFactory),t=new p.AttachPicker(this.applicationShell,e),n=this.commandManager.registerCommand(a.Commands.PickLocalProcess,(()=>t.showQuickPick()),this);this.disposableRegistry.push(n)}};t.AttachProcessProviderFactory=h,t.AttachProcessProviderFactory=h=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IApplicationShell)),i(1,(0,o.inject)(s.ICommandManager)),i(2,(0,o.inject)(c.IPlatformService)),i(3,(0,o.inject)(l.IProcessServiceFactory)),i(4,(0,o.inject)(u.IDisposableRegistry))],h)},67513:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AttachPicker=void 0;const o=n(25891),s=n(54661),a=n(65717),c=n(14152),l=n(47586);let u=class{constructor(e,t){this.applicationShell=e,this.attachItemsProvider=t}showQuickPick(){return new Promise((async(e,t)=>{const n=await this.attachItemsProvider.getAttachItems(),r={iconPath:(0,a.getIcon)(l.REFRESH_BUTTON_ICON),tooltip:c.AttachProcess.refreshList},i=this.applicationShell.createQuickPick();i.title=c.AttachProcess.attachTitle,i.placeholder=c.AttachProcess.selectProcessPlaceholder,i.canSelectMany=!1,i.matchOnDescription=!0,i.matchOnDetail=!0,i.items=n,i.buttons=[r];const o=[];i.onDidTriggerButton((async()=>{i.busy=!0;const e=await this.attachItemsProvider.getAttachItems();i.items=e,i.busy=!1}),this,o),i.onDidAccept((()=>{1!==i.selectedItems.length&&t(new Error(c.AttachProcess.noProcessSelected));const n=i.selectedItems[0].id;o.forEach((e=>e.dispose())),i.dispose(),e(n)}),void 0,o),i.onDidHide((()=>{o.forEach((e=>e.dispose())),i.dispose(),t(new Error(c.AttachProcess.noProcessSelected))}),void 0,o),i.show()}))}};t.AttachPicker=u,t.AttachPicker=u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IApplicationShell))],u)},96366:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AttachProcessProvider=void 0;const o=n(25891),s=n(54980),a=n(22408),c=n(35026),l=n(87818),u=n(33873);let p=class{constructor(e,t){this.platformService=e,this.processServiceFactory=t}getAttachItems(){return this._getInternalProcessEntries().then((e=>(e.sort((({processName:e,commandLine:t},{processName:n,commandLine:r})=>{const i=(e,t)=>{const n=e.toLowerCase(),r=t.toLowerCase();return n===r?0:n<r?-1:1},o=e.startsWith("python"),s=n.startsWith("python");return o||s?o&&!s?-1:s&&!o?1:o?i(t,r):i(r,t):i(e,n)})),e)))}async _getInternalProcessEntries(){let e;if(this.platformService.isMac)e=l.PsProcessParser.psDarwinCommand;else if(this.platformService.isLinux)e=l.PsProcessParser.psLinuxCommand;else{if(!this.platformService.isWindows)throw new Error(s.l10n.t("Operating system '{0}' not supported.",this.platformService.osType));e=u.WmicProcessParser.wmicCommand}const t=await this.processServiceFactory.create(),n=await t.exec(e.command,e.args,{throwOnStdErr:!0});return this.platformService.isWindows?u.WmicProcessParser.parseProcesses(n.stdout):l.PsProcessParser.parseProcesses(n.stdout)}};t.AttachProcessProvider=p,t.AttachProcessProvider=p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IPlatformService)),i(1,(0,o.inject)(c.IProcessServiceFactory))],p)},87818:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PsProcessParser=void 0,function(e){const t="".padStart(50,"a");function n(e){const t=new RegExp("^\\s*([0-9]+)\\s+(.{49})\\s+(.*)$").exec(e);if(4===(null==t?void 0:t.length)){const e=t[1].trim(),n=t[2].trim(),r=t[3].trim();return{label:n,description:e,detail:r,id:e,processName:n,commandLine:r}}}e.psLinuxCommand={command:"ps",args:["axww","-o",`pid=,comm=${t},args=`]},e.psDarwinCommand={command:"ps",args:["axww","-o",`pid=,comm=${t},args=`,"-c"]},e.parseProcesses=function(e){return function(e){const t=[];for(let r=1;r<e.length;r+=1){const i=e[r];if(!i)continue;const o=n(i);o&&t.push(o)}return t}(e.split("\n"))}}(n||(t.PsProcessParser=n={}))},47586:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REFRESH_BUTTON_ICON=t.IAttachProcessProviderFactory=void 0,t.IAttachProcessProviderFactory=Symbol("IAttachProcessProviderFactory"),t.REFRESH_BUTTON_ICON="refresh.svg"},33873:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WmicProcessParser=void 0,function(e){const t="ProcessId",n={label:"",description:"",detail:"",id:"",processName:"",commandLine:""};function r(e,n){const r=e.indexOf("="),i=n;if(r>0){const n=e.slice(0,r).trim();let o=e.slice(r+1).trim();if("Name"===n)i.label=o,i.processName=o;else if(n===t)i.description=o,i.id=o;else if("CommandLine"===n){const e="\\??\\";0===o.lastIndexOf(e,0)&&(o=o.slice(e.length)),i.detail=o,i.commandLine=o}}return i}e.wmicCommand={command:"wmic",args:["process","get","Name,ProcessId,CommandLine","/FORMAT:list"]},e.parseProcesses=function(e){const i=e.split("\r\n"),o=[];let s={...n};for(const e of i)e.length&&(r(e,s),0===e.lastIndexOf(t,0)&&(o.push(s),s={...n}));return o}}(n||(t.WmicProcessParser=n={}))},74090:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonDebugConfigurationService=void 0;const o=n(25891),s=n(2769);let a=class{constructor(e,t){this.attachResolver=e,this.launchResolver=t}async resolveDebugConfiguration(e,t,n){if("attach"===t.request)return this.attachResolver.resolveDebugConfiguration(e,t,n);if("test"===t.request)throw Error('This configuration can only be used by the test debugging commands. `"request": "test"` is deprecated, please keep as `"request": "launch"` and add `"purpose": ["debug-test"]` instead.');return 0!==Object.keys(t).length?this.launchResolver.resolveDebugConfiguration(e,t,n):void 0}async resolveDebugConfigurationWithSubstitutedVariables(e,t,n){function r(r){return r.resolveDebugConfigurationWithSubstitutedVariables(e,t,n)}return"attach"===t.request?r(this.attachResolver):r(this.launchResolver)}};t.PythonDebugConfigurationService=a,t.PythonDebugConfigurationService=a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDebugConfigurationResolver)),i(0,(0,o.named)("attach")),i(1,(0,o.inject)(s.IDebugConfigurationResolver)),i(1,(0,o.named)("launch"))],a)},21114:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getConfigurationsByUri=t.getConfigurationsForWorkspace=void 0;const s=o(n(16928)),a=n(25887),c=o(n(25943)),l=n(8841),u=n(61905);async function p(e){const t=s.join(e.uri.fsPath,".vscode","launch.json");if(!await c.pathExists(t)){const t=(0,l.getConfiguration)("launch",e);return t.configurations&&Array.isArray(t.configurations)?((0,u.traceLog)("Using configuration in workspace"),t.configurations):[]}const n=await c.readFile(t,"utf-8"),r=(0,a.parse)(n,[],{allowTrailingComma:!0,disallowComments:!1});if(!r.configurations||!Array.isArray(r.configurations))throw Error("Missing field in launch.json: configurations");if(!r.version)throw Error("Missing field in launch.json: version");return(0,u.traceLog)("Using configuration in launch.json"),r.configurations}t.getConfigurationsForWorkspace=p,t.getConfigurationsByUri=async function(e){if(e){const t=(0,l.getWorkspaceFolder)(e);if(t)return p(t)}return[]}},5659:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.AttachConfigurationResolver=void 0;const o=n(25891),s=n(48112),a=n(59858),c=n(41907);let l=r=class extends c.BaseConfigurationResolver{async resolveDebugConfigurationWithSubstitutedVariables(e,t,n){const i=r.getWorkspaceFolder(e);await this.provideAttachDefaults(i,t);const o=t;return Array.isArray(o.debugOptions)&&(o.debugOptions=o.debugOptions.filter(((e,t)=>o.debugOptions.indexOf(e)===t))),void 0===t.clientOS&&(t.clientOS=(0,s.getOSType)()===s.OSType.Windows?"windows":"unix"),t}async provideAttachDefaults(e,t){Array.isArray(t.debugOptions)||(t.debugOptions=[]),t.connect||t.listen||t.host||(t.host="localhost"),t.showReturnValue=!1!==t.showReturnValue,t.workspaceFolder=e?e.fsPath:void 0;const n=t.debugOptions;t.django&&r.debugOption(n,a.DebugOptions.Django),t.jinja&&r.debugOption(n,a.DebugOptions.Jinja),!0===t.subProcess&&r.debugOption(n,a.DebugOptions.SubProcess),t.pyramid&&-1===n.indexOf(a.DebugOptions.Jinja)&&!1!==t.jinja&&r.debugOption(n,a.DebugOptions.Jinja),(t.redirectOutput||void 0===t.redirectOutput)&&r.debugOption(n,a.DebugOptions.RedirectOutput);const i=r.isLocalHost(t.host);(0,s.getOSType)()===s.OSType.Windows&&i&&r.debugOption(n,a.DebugOptions.FixFilePathCase),void 0===t.clientOS&&(t.clientOS=(0,s.getOSType)()===s.OSType.Windows?"windows":"unix"),t.showReturnValue&&r.debugOption(n,a.DebugOptions.ShowReturnValue),t.pathMappings=this.resolvePathMappings(t.pathMappings||[],t.host,t.localRoot,t.remoteRoot,e)}resolvePathMappings(e,t,n,i,o){return n&&i&&e.push({localRoot:n,remoteRoot:i}),r.isLocalHost(t)&&(e=r.fixUpPathMappings(e,o?o.fsPath:"")),e.length>0?e:void 0}};t.AttachConfigurationResolver=l,t.AttachConfigurationResolver=l=r=i([(0,o.injectable)()],l)},41907:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseConfigurationResolver=void 0;const c=n(25891),l=a(n(16928)),u=n(54980),p=n(48112),d=n(8841),h=n(46108),f=n(77113),v=n(56090);let m=r=class{constructor(e,t){this.configurationService=e,this.interpreterService=t,this.pythonPathSource=h.PythonPathSource.launchJson}async resolveDebugConfiguration(e,t,n){return void 0===t.clientOS&&(t.clientOS=(0,p.getOSType)()===p.OSType.Windows?"windows":"unix"),t}static getWorkspaceFolder(e){if(e)return e.uri;const t=(0,v.getProgram)(),n=(0,d.getWorkspaceFolders)();if(!Array.isArray(n)||0===n.length)return t?u.Uri.file(l.dirname(t)):void 0;if(1===n.length)return n[0].uri;if(t){const e=(0,d.getWorkspaceFolder)(u.Uri.file(t));if(e)return e.uri}}async resolveAndUpdatePaths(e,t){r.resolveAndUpdateEnvFilePath(e,t),await this.resolveAndUpdatePythonPath(e,t)}static resolveAndUpdateEnvFilePath(e,t){t&&t.envFile&&(e||t.cwd)&&(t.envFile=(0,f.resolveVariables)(t.envFile,(e?e.fsPath:void 0)||t.cwd,void 0))}async resolveAndUpdatePythonPath(e,t){var n,r,i,o,s,a,c;if(t){if("${command:python.interpreterPath}"!==t.pythonPath&&t.pythonPath)t.pythonPath=(0,f.resolveVariables)(t.pythonPath?t.pythonPath:void 0,null==e?void 0:e.fsPath,void 0);else{const i=null!==(r=null===(n=await this.interpreterService.getActiveInterpreter(e))||void 0===n?void 0:n.path)&&void 0!==r?r:this.configurationService.getSettings(e).pythonPath;t.pythonPath=i}if("${command:python.interpreterPath}"===t.python){this.pythonPathSource=h.PythonPathSource.settingsJson;const n=null!==(o=null===(i=await this.interpreterService.getActiveInterpreter(e))||void 0===i?void 0:i.path)&&void 0!==o?o:this.configurationService.getSettings(e).pythonPath;t.python=n}else void 0===t.python?(this.pythonPathSource=h.PythonPathSource.settingsJson,t.python=t.pythonPath):(this.pythonPathSource=h.PythonPathSource.launchJson,t.python=(0,f.resolveVariables)(null!==(s=t.python)&&void 0!==s?s:t.pythonPath,null==e?void 0:e.fsPath,void 0));"${command:python.interpreterPath}"!==t.debugAdapterPython&&void 0!==t.debugAdapterPython||(t.debugAdapterPython=null!==(a=t.pythonPath)&&void 0!==a?a:t.python),"${command:python.interpreterPath}"!==t.debugLauncherPython&&void 0!==t.debugLauncherPython||(t.debugLauncherPython=null!==(c=t.pythonPath)&&void 0!==c?c:t.python),delete t.pythonPath}}static debugOption(e,t){e.indexOf(t)>=0||e.push(t)}static isLocalHost(e){return!!(e&&["localhost","127.0.0.1","::1"].indexOf(e.toLowerCase())>=0)}static fixUpPathMappings(e,t,n){return t?(n||(n=t),e=0===e.length?[{localRoot:t,remoteRoot:n}]:e.map((({localRoot:e,remoteRoot:n})=>({localRoot:(0,f.resolveVariables)(e,t,void 0)||"",remoteRoot:n}))),(0,p.getOSType)()===p.OSType.Windows&&(e=e.map((({localRoot:e,remoteRoot:t})=>{let n=e;return e.match(/^[A-Z]:/)&&(n=`${e[0].toLowerCase()}${e.substr(1)}`),{localRoot:n,remoteRoot:t}}))),e):[]}static isDebuggingFastAPI(e){return!(!e.module||"FASTAPI"!==e.module.toUpperCase())}static isDebuggingFlask(e){return!(!e.module||"FLASK"!==e.module.toUpperCase())}};t.BaseConfigurationResolver=m,t.BaseConfigurationResolver=m=r=s([(0,c.injectable)()],m)},56090:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getProgram=t.DebugEnvironmentVariablesHelper=t.IDebugEnvironmentVariablesService=void 0;const o=n(25891),s=n(86156),a=n(53694),c=n(552),l=n(85784),u=n(62982);t.IDebugEnvironmentVariablesService=Symbol("IDebugEnvironmentVariablesService");let p=class{constructor(e,t){this.envParser=e,this.process=t}async getEnvironmentVariables(e,t){var n;const r=(0,u.getSearchPathEnvVarNames)()[0],i=e.env&&Object.keys(e.env).length>0?{...e.env}:{},o=await this.envParser.parseFile(e.envFile,i),s=o?{...o}:{};return this.envParser.mergeVariables(i,s,{overwrite:!0}),t&&this.envParser.mergeVariables(t,s,{mergeAll:!0}),this.envParser.appendPath(s,null!==(n=i[r])&&void 0!==n?n:i[r.toUpperCase()]),this.envParser.appendPythonPath(s,i.PYTHONPATH),"string"==typeof s[r]&&s[r].length>0&&this.envParser.appendPath(s,this.process.env[r]),"string"==typeof s.PYTHONPATH&&s.PYTHONPATH.length>0&&this.envParser.appendPythonPath(s,this.process.env.PYTHONPATH),"internalConsole"===e.console&&(this.envParser.mergeVariables(this.process.env,s),void 0===s[r]&&"string"==typeof this.process.env[r]&&(s[r]=this.process.env[r]),void 0===s.PYTHONPATH&&"string"==typeof this.process.env.PYTHONPATH&&(s.PYTHONPATH=this.process.env.PYTHONPATH)),s.hasOwnProperty("PYTHONIOENCODING")||(s.PYTHONIOENCODING="UTF-8"),s.hasOwnProperty("PYTHONUNBUFFERED")||(s.PYTHONUNBUFFERED="1"),e.gevent&&(s.GEVENT_SUPPORT="True"),s}};t.DebugEnvironmentVariablesHelper=p,t.DebugEnvironmentVariablesHelper=p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IEnvironmentVariablesService)),i(1,(0,o.inject)(s.ICurrentProcess))],p),t.getProgram=function(){const e=(0,l.getActiveTextEditor)();if(e&&e.document.languageId===c.PYTHON_LANGUAGE)return e.document.fileName}},20825:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchConfigurationResolver=void 0;const s=n(25891),a=n(98285),c=n(79576),l=n(86156),u=n(48112),p=n(67714),d=n(29413),h=n(54786),f=n(59858),v=n(41907),m=n(56090),g=n(58137),y=n(51535),b=n(53322);let _=r=class extends v.BaseConfigurationResolver{constructor(e,t,n,r,i){super(t,r),this.invalidPythonPathInDebuggerService=e,this.debugEnvHelper=n,this.environmentActivationService=i,this.isCustomPythonSet=!1}async resolveDebugConfiguration(e,t,n){if(this.isCustomPythonSet=void 0!==t.python,void 0===t.name&&void 0===t.type&&void 0===t.request&&void 0===t.program&&void 0===t.env){const e=(0,m.getProgram)();t.name="Launch",t.type=h.DebuggerTypeName,t.request="launch",t.program=null!=e?e:"",t.env={}}const i=r.getWorkspaceFolder(e);return t.workspaceFolder=null==i?void 0:i.fsPath,await this.resolveAndUpdatePaths(i,t),void 0===t.clientOS&&(t.clientOS=(0,u.getOSType)()===u.OSType.Windows?"windows":"unix"),t}async resolveDebugConfigurationWithSubstitutedVariables(e,t,n){const i=r.getWorkspaceFolder(e);if(await this.provideLaunchDefaults(i,t),await this.validateLaunchConfiguration(e,t))return Array.isArray(t.debugOptions)&&(t.debugOptions=t.debugOptions.filter(((e,n)=>t.debugOptions.indexOf(e)===n))),(0,y.sendTelemetryEvent)(b.EventName.ENVIRONMENT_CHECK_TRIGGER,void 0,{trigger:"debug"}),(0,g.triggerCreateEnvironmentCheckNonBlocking)(g.CreateEnvironmentCheckKind.Workspace,i),t}async provideLaunchDefaults(e,t){var n;if(void 0===t.python&&(t.python=t.pythonPath),void 0===t.debugAdapterPython&&(t.debugAdapterPython=t.pythonPath),void 0===t.debugLauncherPython&&(t.debugLauncherPython=t.pythonPath),delete t.pythonPath,"string"!=typeof t.cwd&&e&&(t.cwd=e.fsPath),"string"!=typeof t.envFile&&e){const n=this.configurationService.getSettings(e);t.envFile=n.envFile}let i;(this.isCustomPythonSet||"integratedTerminal"!==t.console)&&(i=await this.environmentActivationService.getActivatedEnvironmentVariables(e,await this.interpreterService.getInterpreterDetails(null!==(n=t.python)&&void 0!==n?n:""))),t.env=await this.debugEnvHelper.getEnvironmentVariables(t,i),"boolean"!=typeof t.stopOnEntry&&(t.stopOnEntry=!1),t.showReturnValue=!1!==t.showReturnValue,t.console||(t.console="integratedTerminal"),"internalConsole"===t.console||t.internalConsoleOptions||(t.internalConsoleOptions="neverOpen"),Array.isArray(t.debugOptions)||(t.debugOptions=[]);const o=t.debugOptions;t.stopOnEntry&&r.debugOption(o,f.DebugOptions.StopOnEntry),t.showReturnValue&&r.debugOption(o,f.DebugOptions.ShowReturnValue),t.django&&r.debugOption(o,f.DebugOptions.Django),t.jinja&&r.debugOption(o,f.DebugOptions.Jinja),void 0===t.redirectOutput&&"internalConsole"===t.console&&(t.redirectOutput=!0),t.redirectOutput&&r.debugOption(o,f.DebugOptions.RedirectOutput),t.sudo&&r.debugOption(o,f.DebugOptions.Sudo),!0===t.subProcess&&r.debugOption(o,f.DebugOptions.SubProcess),(0,u.getOSType)()===u.OSType.Windows&&r.debugOption(o,f.DebugOptions.FixFilePathCase);const s=r.isDebuggingFastAPI(t),a=r.isDebuggingFlask(t);if((t.pyramid||a||s)&&-1===o.indexOf(f.DebugOptions.Jinja)&&!1!==t.jinja&&r.debugOption(o,f.DebugOptions.Jinja),t.pathMappings){let{pathMappings:n}=t;n.length>0&&(n=r.fixUpPathMappings(n||[],e?e.fsPath:"")),t.pathMappings=n.length>0?n:void 0}}async validateLaunchConfiguration(e,t){const n=this.invalidPythonPathInDebuggerService;for(const r of[t.python,t.debugAdapterPython,t.debugLauncherPython])if(!await n.validatePythonPath(r,this.pythonPathSource,null==e?void 0:e.uri))return!1;return!0}};t.LaunchConfigurationResolver=_,t.LaunchConfigurationResolver=_=r=i([(0,s.injectable)(),o(0,(0,s.inject)(c.IDiagnosticsService)),o(0,(0,s.named)(a.InvalidPythonPathInDebuggerServiceId)),o(1,(0,s.inject)(l.IConfigurationService)),o(2,(0,s.inject)(m.IDebugEnvironmentVariablesService)),o(3,(0,s.inject)(d.IInterpreterService)),o(4,(0,s.inject)(p.IEnvironmentActivationService))],_)},2769:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDebugConfigurationResolver=void 0,t.IDebugConfigurationResolver=Symbol("IDebugConfigurationResolver")},77113:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveVariables=void 0;const r=n(8841);t.resolveVariables=function(e,t,n){if(e){const i=n?(0,r.getWorkspaceFolder)(n.uri):void 0,o={};o.workspaceFolder=i?i.uri.fsPath:t;const s=/\$\{(.*?)\}/g;return e.replace(s,((e,t)=>{const n=o[t];return"string"==typeof(r=n)||r instanceof String?n:e&&(e.indexOf("env.")>0||e.indexOf("env:")>0)?"":e;var r}))}return e}},21896:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugCommands=void 0;const l=a(n(16928)),u=n(25891),p=n(54661),d=n(552),h=n(86156),f=n(51535),v=n(53322),m=n(59858),g=n(29413),y=n(98803),b=n(21114),_=n(58137);let E=r=class{constructor(e,t,n,r){this.commandManager=e,this.debugService=t,this.disposables=n,this.interpreterService=r,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!1}}activate(){return this.disposables.push(this.commandManager.registerCommand(d.Commands.Debug_In_Terminal,(async e=>{if(!await this.interpreterService.getActiveInterpreter(e))return void this.commandManager.executeCommand(d.Commands.TriggerEnvironmentSelection,e).then(y.noop,y.noop);(0,f.sendTelemetryEvent)(v.EventName.ENVIRONMENT_CHECK_TRIGGER,void 0,{trigger:"debug-in-terminal"}),(0,_.triggerCreateEnvironmentCheckNonBlocking)(_.CreateEnvironmentCheckKind.File,e);const t=await r.getDebugConfiguration(e);this.debugService.startDebugging(void 0,t)}))),Promise.resolve()}static async getDebugConfiguration(e){var t,n,r;const i=(await(0,b.getConfigurationsByUri)(e)).filter((e=>"launch"===e.request));for(const r of i)if(null===(t=r.purpose)||void 0===t?void 0:t.includes(m.DebugPurpose.DebugInTerminal))return r.program||r.module||r.code||(r.program=null!==(n=null==e?void 0:e.fsPath)&&void 0!==n?n:"${file}"),r.purpose=[],r;return{name:`Debug ${e?l.basename(e.fsPath):"File"}`,type:"python",request:"launch",program:null!==(r=null==e?void 0:e.fsPath)&&void 0!==r?r:"${file}",console:"integratedTerminal"}}};t.DebugCommands=E,t.DebugCommands=E=r=s([(0,u.injectable)(),c(0,(0,u.inject)(p.ICommandManager)),c(1,(0,u.inject)(p.IDebugService)),c(2,(0,u.inject)(h.IDisposableRegistry)),c(3,(0,u.inject)(g.IInterpreterService))],E)},42228:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChildProcessAttachEventHandler=void 0;const o=n(25891),s=n(68989),a=n(13083),c=n(67715),l=n(54786);let u=class{constructor(e){this.childProcessAttachService=e}async handleCustomEvent(e){if(!e||e.session.configuration.type!==l.DebuggerTypeName)return;let t;e.event!==a.DebuggerEvents.PtvsdAttachToSubprocess&&e.event!==a.DebuggerEvents.DebugpyAttachToSubprocess||(t=e.body,Object.keys(t).length>0&&await this.childProcessAttachService.attach(t,e.session))}};t.ChildProcessAttachEventHandler=u,r([(0,s.swallowExceptions)("Handle child process launch")],u.prototype,"handleCustomEvent",null),t.ChildProcessAttachEventHandler=u=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IChildProcessAttachService))],u)},41575:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChildProcessAttachService=void 0;const o=n(25891),s=n(54661),a=n(54980),c=n(98803),l=n(85784),u=n(8841);let p=class{constructor(e){this.debugService=e}async attach(e,t){const n=e,r=this.getRelatedWorkspaceFolder(n),i={parentSession:t,lifecycleManagedByParent:!0};await this.debugService.startDebugging(r,n,i)||(0,l.showErrorMessage)(a.l10n.t("Failed to launch debugger for child process {0}",n.subProcessId)).then(c.noop,c.noop)}getRelatedWorkspaceFolder(e){var t;const n=e.workspaceFolder;if(((null===(t=(0,u.getWorkspaceFolders)())||void 0===t?void 0:t.length)||0)>0&&n)return(0,u.getWorkspaceFolders)().find((e=>e.uri.fsPath===n))}};t.ChildProcessAttachService=p,t.ChildProcessAttachService=p=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDebugService))],p)},13083:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerEvents=void 0,function(e){e.PtvsdAttachToSubprocess="ptvsd_attach",e.DebugpyAttachToSubprocess="debugpyAttach"}(n||(t.DebuggerEvents=n={}))},30741:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSessionEventDispatcher=void 0;const o=n(25891),s=n(54661),a=n(86156),c=n(67715);let l=class{constructor(e,t,n){this.eventHandlers=e,this.debugService=t,this.disposables=n}registerEventHandlers(){this.disposables.push(this.debugService.onDidReceiveDebugSessionCustomEvent((e=>{this.eventHandlers.forEach((t=>t.handleCustomEvent?t.handleCustomEvent(e).ignoreErrors():void 0))}))),this.disposables.push(this.debugService.onDidTerminateDebugSession((e=>{this.eventHandlers.forEach((t=>t.handleTerminateEvent?t.handleTerminateEvent(e).ignoreErrors():void 0))})))}};t.DebugSessionEventDispatcher=l,t.DebugSessionEventDispatcher=l=r([i(0,(0,o.multiInject)(c.IDebugSessionEventHandlers)),i(1,(0,o.inject)(s.IDebugService)),i(2,(0,o.inject)(a.IDisposableRegistry))],l)},67715:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IChildProcessAttachService=t.IDebugSessionEventHandlers=void 0,t.IDebugSessionEventHandlers=Symbol("IDebugSessionEventHandlers"),t.IChildProcessAttachService=Symbol("IChildProcessAttachService")},11833:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(11925),i=n(78518),o=n(32075),s=n(20652),a=n(13836),c=n(9645),l=n(47586),u=n(74090),p=n(5659),d=n(56090),h=n(20825),f=n(2769),v=n(21896),m=n(42228),g=n(41575),y=n(67715),b=n(46108);t.registerTypes=function(e){e.addSingleton(b.IDebugConfigurationService,u.PythonDebugConfigurationService),e.addSingleton(y.IChildProcessAttachService,g.ChildProcessAttachService),e.addSingleton(y.IDebugSessionEventHandlers,m.ChildProcessAttachEventHandler),e.addSingleton(f.IDebugConfigurationResolver,h.LaunchConfigurationResolver,"launch"),e.addSingleton(f.IDebugConfigurationResolver,p.AttachConfigurationResolver,"attach"),e.addSingleton(d.IDebugEnvironmentVariablesService,d.DebugEnvironmentVariablesHelper),e.addSingleton(r.IExtensionSingleActivationService,i.DebugAdapterActivator),e.addSingleton(b.IDebugAdapterDescriptorFactory,o.DebugAdapterDescriptorFactory),e.addSingleton(b.IDebugSessionLoggingFactory,s.DebugSessionLoggingFactory),e.addSingleton(b.IOutdatedDebuggerPromptFactory,a.OutdatedDebuggerPromptFactory),e.addSingleton(l.IAttachProcessProviderFactory,c.AttachProcessProviderFactory),e.addSingleton(r.IExtensionSingleActivationService,v.DebugCommands)}},46108:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PythonPathSource=t.IOutdatedDebuggerPromptFactory=t.IDebugSessionLoggingFactory=t.IDebugAdapterDescriptorFactory=t.IDebugConfigurationService=void 0,t.IDebugConfigurationService=Symbol("IDebugConfigurationService"),t.IDebugAdapterDescriptorFactory=Symbol("IDebugAdapterDescriptorFactory"),t.IDebugSessionLoggingFactory=Symbol("IDebugSessionLoggingFactory"),t.IOutdatedDebuggerPromptFactory=Symbol("IOutdatedDebuggerPromptFactory"),function(e){e.launchJson="launch.json",e.settingsJson="settings.json"}(n||(t.PythonPathSource=n={}))},73354:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDebugpyPath=void 0;const r=n(54980);t.getDebugpyPath=async function(){var e;const t=await async function(){const e=await async function(){const e=r.extensions.getExtension("ms-python.debugpy");return e&&(e.isActive||await e.activate()),e}();return null==e?void 0:e.exports}();return null!==(e=null==t?void 0:t.debug.getDebuggerPackagePath())&&void 0!==e?e:""}},59858:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.DebugPurpose=t.DebugOptions=void 0,function(e){e.RedirectOutput="RedirectOutput",e.Django="Django",e.Jinja="Jinja",e.Sudo="Sudo",e.Pyramid="Pyramid",e.FixFilePathCase="FixFilePathCase",e.WindowsClient="WindowsClient",e.UnixClient="UnixClient",e.StopOnEntry="StopOnEntry",e.ShowReturnValue="ShowReturnValue",e.SubProcess="Multiprocess"}(n||(t.DebugOptions=n={})),function(e){e.DebugTest="debug-test",e.DebugInTerminal="debug-in-terminal"}(r||(t.DebugPurpose=r={}))},69466:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildDeprecatedProposedApi=t.reportActiveInterpreterChangedDeprecated=t.reportInterpretersChanged=void 0;const r=n(54980),i=n(25943),o=n(86156),s=n(29413),a=n(61905),c=n(6514),l=n(51535),u=n(53322),p=new r.EventEmitter;t.reportInterpretersChanged=function(e){p.fire(e)};const d=new r.EventEmitter;function h(e){const t=[`${e.version.major}`,`${e.version.minor}`,`${e.version.micro}`];return e.version.release&&(t.push(`${e.version.release}`),e.version.sysVersion&&t.push(`${e.version.release}`)),t}t.reportActiveInterpreterChangedDeprecated=function(e){d.fire(e)},t.buildDeprecatedProposedApi=function(e,t){const n=t.get(o.IInterpreterPathService),f=t.get(s.IInterpreterService),v=t.get(o.IExtensions),m=new Set;function g(e,t=!0){v.determineExtensionFromCallStack().then((n=>{(0,l.sendTelemetryEvent)(u.EventName.PYTHON_ENVIRONMENTS_API,void 0,{apiName:e,extensionId:n.extensionId}),(0,a.traceVerbose)(`Extension ${n.extensionId} accessed ${e}`),t&&!m.has(n.extensionId)&&((0,a.traceWarn)(`${n.extensionId} extension is using deprecated python APIs which will be removed soon.`),m.add(n.extensionId))})).ignoreErrors()}return{environment:{async getExecutionDetails(e){g("deprecated.getExecutionDetails");const t=await f.getActiveInterpreter(e);return t?{execCommand:[t.path]}:{execCommand:void 0}},async getActiveEnvironmentPath(e){g("deprecated.getActiveEnvironmentPath");const t=await f.getActiveInterpreter(e);if(t)return(0,c.getEnvPath)(t.path,t.envPath)},async getEnvironmentDetails(t,n){let r;if(g("deprecated.getEnvironmentDetails"),(null==n?void 0:n.useCache)&&(r=e.getEnvs().find((e=>function(e,t){return(0,i.arePathsSame)(e,t.location)||(0,i.arePathsSame)(e,t.executable.filename)}(t,e)))),r||(r=await e.resolveEnv(t),r))return{interpreterPath:r.executable.filename,envFolderPath:r.location.length?r.location:void 0,version:h(r),environmentType:[r.kind],metadata:{sysPrefix:r.executable.sysPrefix,bitness:r.arch,project:r.searchLocation}}},getEnvironmentPaths(){g("deprecated.getEnvironmentPaths");const t=e.getEnvs().map((e=>(0,c.getEnvPath)(e.executable.filename,e.location)));return Promise.resolve(t)},setActiveEnvironment:(e,t)=>(g("deprecated.setActiveEnvironment"),n.update(t,r.ConfigurationTarget.WorkspaceFolder,e)),async refreshEnvironment(){g("deprecated.refreshEnvironment"),await e.triggerRefresh();const t=e.getEnvs().map((e=>(0,c.getEnvPath)(e.executable.filename,e.location)));return Promise.resolve(t)},getRefreshPromise:t=>(g("deprecated.getRefreshPromise"),e.getRefreshPromise(t)),get onDidChangeExecutionDetails(){return g("deprecated.onDidChangeExecutionDetails",!1),f.onDidChangeInterpreterConfiguration},get onDidEnvironmentsChanged(){return g("deprecated.onDidEnvironmentsChanged",!1),p.event},get onDidActiveEnvironmentChanged(){return g("deprecated.onDidActiveEnvironmentChanged",!1),d.event},get onRefreshProgress(){return g("deprecated.onRefreshProgress",!1),e.onProgress}}}}},36380:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerEnvExtFeatures=t.clearCache=t.runInDedicatedTerminal=t.runInTerminal=t.refreshEnvironments=t.resolveEnvironment=t.getEnvironment=t.runInBackground=t.getEnvExtApi=t.onDidChangeEnvironmentEnvExt=t.useEnvExtension=t.ENVS_EXTENSION_ID=void 0;const r=n(54980),i=n(34467),o=n(93029),s=n(8841);let a;function c(){if(void 0!==a)return a;const e=(0,s.getConfiguration)("python").get("useEnvironmentsExtension",!1);return a=!!(0,i.getExtension)(t.ENVS_EXTENSION_ID)&&e,a}t.ENVS_EXTENSION_ID="ms-python.vscode-python-envs",t.useEnvExtension=c;const l=new r.EventEmitter;function u(e,t,n){return l.event(e,t,n)}let p;async function d(){if(p)return p;const e=(0,i.getExtension)(t.ENVS_EXTENSION_ID);if(!e)throw new Error("Python Environments extension not found.");return(null==e?void 0:e.isActive)||await e.activate(),p=e.exports,p.onDidChangeEnvironment((e=>{l.fire(e)})),p}async function h(e){return(await d()).getEnvironment(e)}t.onDidChangeEnvironmentEnvExt=u,t.getEnvExtApi=d,t.runInBackground=async function(e,t){return(await d()).runInBackground(e,t)},t.getEnvironment=h,t.resolveEnvironment=async function(e){return(await d()).resolveEnvironment(r.Uri.file(e))},t.refreshEnvironments=async function(e){return(await d()).refreshEnvironments(e)},t.runInTerminal=async function(e,t,n,r){var i;const o=await d(),s=await h(e),a=e?o.getPythonProject(e):void 0;if(s&&e)return o.runInTerminal(s,{cwd:null!==(i=null!=n?n:null==a?void 0:a.uri)&&void 0!==i?i:process.cwd(),args:t,show:r});throw new Error("Invalid arguments to run in terminal")},t.runInDedicatedTerminal=async function(e,t,n,r){var i;const o=await d(),s=await h(e),a=e?o.getPythonProject(e):void 0;if(s)return o.runInDedicatedTerminal(null!=e?e:"global",s,{cwd:null!==(i=null!=n?n:null==a?void 0:a.uri)&&void 0!==i?i:process.cwd(),args:t,show:r});throw new Error("Invalid arguments to run in dedicated terminal")},t.clearCache=async function(){await d()&&await(0,o.executeCommand)("python-envs.clearCache")},t.registerEnvExtFeatures=function(e,t){c()&&e.push(u((async e=>{var n,i,o;t.get(e.uri)!==(null===(n=e.new)||void 0===n?void 0:n.environmentPath.fsPath)&&(e.uri?await t.update(e.uri,r.ConfigurationTarget.WorkspaceFolder,null===(i=e.new)||void 0===i?void 0:i.environmentPath.fsPath):await t.update(void 0,r.ConfigurationTarget.Global,null===(o=e.new)||void 0===o?void 0:o.environmentPath.fsPath))})))}},95241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureTerminalLegacy=t.resetInterpreterLegacy=t.setInterpreterLegacy=t.getActiveInterpreterLegacy=void 0;const r=n(54980),i=n(36380),o=n(25297),s=n(48112),a=n(71067),c=n(15721),l=n(61905),u=n(65532),p=n(8841);function d(e){switch(e){case o.EnvironmentType.Pipenv:case o.EnvironmentType.VirtualEnv:case o.EnvironmentType.Pyenv:case o.EnvironmentType.Venv:case o.EnvironmentType.Poetry:case o.EnvironmentType.Hatch:case o.EnvironmentType.Pixi:case o.EnvironmentType.VirtualEnvWrapper:case o.EnvironmentType.ActiveState:return c.PythonEnvType.Virtual;case o.EnvironmentType.Conda:return c.PythonEnvType.Conda;case o.EnvironmentType.MicrosoftStore:case o.EnvironmentType.Global:case o.EnvironmentType.System:default:return}}function h(e){const t=(0,a.parseVersion)(e.version),n=(r=e).envId.managerId.toLowerCase().endsWith("system")?o.EnvironmentType.System:r.envId.managerId.toLowerCase().endsWith("venv")?o.EnvironmentType.Venv:r.envId.managerId.toLowerCase().endsWith("virtualenv")?o.EnvironmentType.VirtualEnv:r.envId.managerId.toLowerCase().endsWith("conda")?o.EnvironmentType.Conda:r.envId.managerId.toLowerCase().endsWith("pipenv")?o.EnvironmentType.Pipenv:r.envId.managerId.toLowerCase().endsWith("poetry")?o.EnvironmentType.Poetry:r.envId.managerId.toLowerCase().endsWith("pyenv")?o.EnvironmentType.Pyenv:r.envId.managerId.toLowerCase().endsWith("hatch")?o.EnvironmentType.Hatch:r.envId.managerId.toLowerCase().endsWith("pixi")?o.EnvironmentType.Pixi:r.envId.managerId.toLowerCase().endsWith("virtualenvwrapper")?o.EnvironmentType.VirtualEnvWrapper:r.envId.managerId.toLowerCase().endsWith("activestate")?o.EnvironmentType.ActiveState:o.EnvironmentType.Unknown;var r;return{id:e.execInfo.run.executable,displayName:e.displayName,detailedDisplayName:e.name,envType:n,envPath:e.sysPrefix,type:d(n),path:e.execInfo.run.executable,version:{raw:e.version,major:t.major,minor:t.minor,patch:t.micro,build:[],prerelease:[]},sysVersion:e.version,architecture:s.Architecture.x64,sysPrefix:e.sysPrefix}}const f=new Map;t.getActiveInterpreterLegacy=async function(e){var t,n;const r=await(0,i.getEnvExtApi)(),o=e?null===(t=r.getPythonProject(e))||void 0===t?void 0:t.uri:void 0,s=await(0,i.getEnvironment)(e),a=f.get((null==o?void 0:o.fsPath)||""),c=s?h(s):void 0,l=null!==(n=(0,p.getWorkspaceFolders)())&&void 0!==n?n:[];return(0===l.length&&void 0===e||l.length>0&&void 0!==e)&&c&&(null==a?void 0:a.envId.id)!==(null==s?void 0:s.envId.id)&&((0,u.reportActiveInterpreterChanged)({resource:(0,p.getWorkspaceFolder)(e),path:c.path}),f.set((null==o?void 0:o.fsPath)||"",s)),s?h(s):void 0},t.setInterpreterLegacy=async function(e,t){const n=await(0,i.getEnvExtApi)(),o=await n.resolveEnvironment(r.Uri.file(e));o?await n.setEnvironment(t,o):(0,l.traceError)(`EnvExt: Failed to resolve environment for ${e}`)},t.resetInterpreterLegacy=async function(e){const t=await(0,i.getEnvExtApi)();await t.setEnvironment(e,void 0)},t.ensureTerminalLegacy=async function(e,t){const n=await(0,i.getEnvExtApi)(),r=await n.getEnvironment(e),o=e?n.getPythonProject(e):void 0;if(r&&o){const e=t?{...t}:{cwd:o.uri};return await n.createTerminal(r,e)}throw new Error("Invalid arguments to create terminal")}},58136:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createEnvExtApi=void 0;const s=o(n(16928)),a=n(54980),c=n(15721),l=n(18162),u=n(36380),p=n(7855),d=n(51080),h=n(61905),f=n(84391),v=n(29104),m=n(48112),g=n(71067);function y(e){switch(e){case c.PythonEnvKind.Poetry:case c.PythonEnvKind.Pyenv:case c.PythonEnvKind.VirtualEnv:case c.PythonEnvKind.Venv:case c.PythonEnvKind.VirtualEnvWrapper:case c.PythonEnvKind.OtherVirtual:case c.PythonEnvKind.Pipenv:case c.PythonEnvKind.ActiveState:case c.PythonEnvKind.Hatch:case c.PythonEnvKind.Pixi:return c.PythonEnvType.Virtual;case c.PythonEnvKind.Conda:return c.PythonEnvType.Conda;case c.PythonEnvKind.System:case c.PythonEnvKind.Unknown:case c.PythonEnvKind.OtherGlobal:case c.PythonEnvKind.Custom:case c.PythonEnvKind.MicrosoftStore:default:return}}function b(e){const t=function(e){return e.envId.managerId.toLowerCase().endsWith("system")?c.PythonEnvKind.System:e.envId.managerId.toLowerCase().endsWith("conda")?c.PythonEnvKind.Conda:e.envId.managerId.toLowerCase().endsWith("venv")?c.PythonEnvKind.Venv:e.envId.managerId.toLowerCase().endsWith("virtualenv")?c.PythonEnvKind.VirtualEnv:e.envId.managerId.toLowerCase().endsWith("virtualenvwrapper")?c.PythonEnvKind.VirtualEnvWrapper:e.envId.managerId.toLowerCase().endsWith("pyenv")?c.PythonEnvKind.Pyenv:e.envId.managerId.toLowerCase().endsWith("pipenv")?c.PythonEnvKind.Pipenv:e.envId.managerId.toLowerCase().endsWith("poetry")?c.PythonEnvKind.Poetry:e.envId.managerId.toLowerCase().endsWith("pixi")?c.PythonEnvKind.Pixi:e.envId.managerId.toLowerCase().endsWith("hatch")?c.PythonEnvKind.Hatch:e.envId.managerId.toLowerCase().endsWith("activestate")?c.PythonEnvKind.ActiveState:c.PythonEnvKind.Unknown}(e),n=m.Architecture.x64,r=(0,g.parseVersion)(e.version),{name:i,displayName:o,sysPrefix:a}=e,l=function(e){var t,n,r,i;if(null===(n=null===(t=e.execInfo)||void 0===t?void 0:t.run)||void 0===n?void 0:n.executable)return null===(i=null===(r=e.execInfo)||void 0===r?void 0:r.run)||void 0===i?void 0:i.executable;const o=s.basename(e.environmentPath.fsPath).toLowerCase();return(0,m.isWindows)()&&o.startsWith("python")&&o.endsWith(".exe")||!(0,m.isWindows)()&&o.startsWith("python")?e.environmentPath.fsPath:(a=e.sysPrefix)?"win32"===process.platform?s.join(a,"python.exe"):s.join(a,"python"):"win32"===process.platform?"python.exe":"python";var a}(e),u=function(e){return e.envId.managerId.toLowerCase().endsWith("conda")?e.sysPrefix:e.environmentPath.fsPath}(e);return{name:i,location:u,kind:t,id:l,executable:{filename:l,sysPrefix:a,ctime:-1,mtime:-1},version:{sysVersion:e.version,major:r.major,minor:r.minor,micro:r.micro},arch:n,distro:{org:""},source:[],detailedDisplayName:o,display:o,type:y(t)}}class _{constructor(e){this.envExtApi=e,this._envs=[],this._disposables=[],this._onProgress=new a.EventEmitter,this._onChanged=new a.EventEmitter,this.onProgress=this._onProgress.event,this.onChanged=this._onChanged.event,this.refreshState=l.ProgressReportStage.idle,this._disposables.push(this._onProgress,this._onChanged,this.envExtApi.onDidChangeEnvironments((e=>this.onDidChangeEnvironments(e))),this.envExtApi.onDidChangeEnvironment((e=>{this._onChanged.fire({type:v.FileChangeType.Changed,searchLocation:e.uri,old:e.old?b(e.old):void 0,new:e.new?b(e.new):void 0})})))}getRefreshPromise(e){var t;return null===(t=this._refreshPromise)||void 0===t?void 0:t.promise}triggerRefresh(e,t){var n,r,i;const o=new d.StopWatch;return(0,h.traceLog)("Native locator: Refresh started"),this.refreshState===l.ProgressReportStage.discoveryStarted&&(null===(n=this._refreshPromise)||void 0===n?void 0:n.promise)?null===(r=this._refreshPromise)||void 0===r?void 0:r.promise:(this.refreshState=l.ProgressReportStage.discoveryStarted,this._onProgress.fire({stage:this.refreshState}),this._refreshPromise=(0,p.createDeferred)(),setImmediate((async()=>{var e,t;try{await this.envExtApi.refreshEnvironments(void 0),null===(e=this._refreshPromise)||void 0===e||e.resolve()}catch(e){null===(t=this._refreshPromise)||void 0===t||t.reject(e)}finally{(0,h.traceLog)(`Native locator: Refresh finished in ${o.elapsedTime} ms`),this.refreshState=l.ProgressReportStage.discoveryFinished,this._refreshPromise=void 0,this._onProgress.fire({stage:this.refreshState})}})),null===(i=this._refreshPromise)||void 0===i?void 0:i.promise)}getEnvs(e){return this._envs}addEnv(e,t){const n=b(e);if(n){const e=this._envs.find((e=>e.executable.filename===n.executable.filename));e?(this._envs=this._envs.filter((e=>e.executable.filename!==n.executable.filename)),this._envs.push(n),function(e,t){return e.executable.filename!==t.executable.filename||e.version.major!==t.version.major||e.version.minor!==t.version.minor||e.version.micro!==t.version.micro||e.location!==t.location||e.kind!==t.kind||e.arch!==t.arch}(e,n)&&this._onChanged.fire({type:v.FileChangeType.Changed,old:e,new:n,searchLocation:t})):(this._envs.push(n),this._onChanged.fire({type:v.FileChangeType.Created,new:n,searchLocation:t}))}return n}removeEnv(e){if("string"==typeof e){const t=this._envs.find((t=>t.executable.filename===e));return this._envs=this._envs.filter((t=>t.executable.filename!==e)),void this._onChanged.fire({type:v.FileChangeType.Deleted,old:t})}this._envs=this._envs.filter((t=>t.executable.filename!==e.executable.filename)),this._onChanged.fire({type:v.FileChangeType.Deleted,old:e})}async resolveEnv(e){if(void 0===e)return;const t=await this.envExtApi.resolveEnvironment(a.Uri.file(e));return t?this.addEnv(t):void 0}dispose(){this._disposables.forEach((e=>e.dispose()))}onDidChangeEnvironments(e){e.forEach((e=>{e.kind===f.EnvironmentChangeKind.remove&&this.removeEnv(e.environment.environmentPath.fsPath),e.kind===f.EnvironmentChangeKind.add&&this.addEnv(e.environment)}))}}t.createEnvExtApi=async function(e){const t=new _(await(0,u.getEnvExtApi)());return e.push(t),t}},84391:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.PackageChangeKind=t.EnvironmentChangeKind=void 0,function(e){e.add="add",e.remove="remove"}(n||(t.EnvironmentChangeKind=n={})),function(e){e.add="add",e.remove="remove"}(r||(t.PackageChangeKind=r={}))},65532:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.convertEnvInfo=t.convertCompleteEnvInfo=t.buildEnvironmentApi=t.EnvironmentReference=t.reportActiveInterpreterChanged=void 0;const s=n(54980),a=o(n(16928)),c=n(86156),l=n(48112),u=n(15721),p=n(6514),d=n(18162),h=n(35026),f=n(61905),v=n(25943),m=n(51535),g=n(53322),y=n(69466),b=n(53694),_=n(8841),E=n(50499),S=n(53533),w=n(98803),P=new s.EventEmitter,T=new Map;t.reportActiveInterpreterChanged=function(e){var t,n,r,i,o;T.get(null!==(n=null===(t=e.resource)||void 0===t?void 0:t.uri.fsPath)&&void 0!==n?n:"")!==e.path&&(T.set(null!==(i=null===(r=e.resource)||void 0===r?void 0:r.uri.fsPath)&&void 0!==i?i:"",e.path),P.fire({id:M(e.path),path:e.path,resource:e.resource}),(0,y.reportActiveInterpreterChangedDeprecated)({path:e.path,resource:null===(o=e.resource)||void 0===o?void 0:o.uri}))};const C=new s.EventEmitter,x=new s.EventEmitter,I=new Map;class O{constructor(e){this.internal=e,this.id=e.id}get executable(){return Object.freeze(this.internal.executable)}get environment(){return Object.freeze(this.internal.environment)}get version(){return Object.freeze(this.internal.version)}get tools(){return Object.freeze(this.internal.tools)}get path(){return Object.freeze(this.internal.path)}updateEnv(e){this.internal=e}}function R(e){let t=I.get(e.id);return t?t.updateEnv(e):t=new O(e),I.set(e.id,t),t}function D(e){const t=(0,_.getWorkspaceFolders)();if(e.searchLocation){const n=e.searchLocation;return!!t&&t.some((e=>(0,v.isParentPath)(n.fsPath,e.uri.fsPath)))}return!0}function k(e){const t={...e.version,sysVersion:e.version.sysVersion};let n=function(e){switch(e){case u.PythonEnvKind.Venv:return"Venv";case u.PythonEnvKind.Pipenv:return"Pipenv";case u.PythonEnvKind.Poetry:return"Poetry";case u.PythonEnvKind.Hatch:return"Hatch";case u.PythonEnvKind.VirtualEnvWrapper:return"VirtualEnvWrapper";case u.PythonEnvKind.VirtualEnv:return"VirtualEnv";case u.PythonEnvKind.Conda:return"Conda";case u.PythonEnvKind.Pyenv:return"Pyenv";default:return}}(e.kind);e.type&&!n&&(n="Unknown");const{path:r}=(0,p.getEnvPath)(e.executable.filename,e.location);return{path:r,id:e.id,executable:{uri:"python"===e.executable.filename?void 0:s.Uri.file(e.executable.filename),bitness:j(e.arch),sysPrefix:e.executable.sysPrefix},environment:e.type?{type:(i=e.type,i===u.PythonEnvType.Conda?"Conda":i===u.PythonEnvType.Virtual?"VirtualEnvironment":"Unknown"),name:""===e.name?void 0:e.name,folderUri:s.Uri.file(e.location),workspaceFolder:(0,_.getWorkspaceFolder)(e.searchLocation)}:void 0,version:"python"===e.executable.filename?void 0:t,tools:n?[n]:[]};var i}function A(e){var t,n,r,i;const o=k(e);return""===o.executable.sysPrefix&&(o.executable.sysPrefix=void 0),""===(null===(t=o.version)||void 0===t?void 0:t.sysVersion)&&(o.version.sysVersion=void 0),-1===(null===(n=o.version)||void 0===n?void 0:n.major)&&(o.version.major=void 0),-1===(null===(r=o.version)||void 0===r?void 0:r.micro)&&(o.version.micro=void 0),-1===(null===(i=o.version)||void 0===i?void 0:i.minor)&&(o.version.minor=void 0),o}function N(e){return R(A(e))}function j(e){switch(e){case l.Architecture.x64:return"64-bit";case l.Architecture.x86:return"32-bit";default:return"Unknown"}}function M(e){return(0,v.normCasePath)(e)}t.EnvironmentReference=O,t.buildEnvironmentApi=function(e,t,n){const r=t.get(c.IInterpreterPathService),i=t.get(c.IConfigurationService),o=t.get(c.IDisposableRegistry),l=t.get(c.IExtensions),u=t.get(b.IEnvironmentVariablesProvider);let v;function T(){const t=e.getEnvs().filter((e=>D(e))).map((e=>N(e)));return new S.EnvironmentKnownCache(t)}function I(e,t){l.determineExtensionFromCallStack().then((n=>{Math.random()<=.001&&(0,m.sendTelemetryEvent)(g.EventName.PYTHON_ENVIRONMENTS_API,void 0,{apiName:e,extensionId:n.extensionId}),(0,f.traceVerbose)(`Extension ${n.extensionId} accessed ${e} with args: ${JSON.stringify(t)}`)})).ignoreErrors()}function O(e){const t=(e=e&&"uri"in e?e.uri:e)&&n.getPythonEnvironment?n.getPythonEnvironment(e):void 0;if(t)return(0,f.traceVerbose)("Python Environment returned from Jupyter",null==e?void 0:e.fsPath,t.id),{id:t.id,path:t.path};const r=i.getSettings(e).pythonPath;return{id:"python"===r?"DEFAULT_PYTHON":M(r),path:r}}return o.push(P.event((e=>{let t="global";e.resource&&(t=e.resource instanceof s.Uri?e.resource.fsPath:e.resource.uri.fsPath),(0,f.traceInfo)(`Active interpreter [${t}]: `,e.path)})),e.onProgress((e=>{e.stage===d.ProgressReportStage.discoveryFinished&&(v=T())})),e.onChanged((e=>{var t;const n=null!==(t=e.new)&&void 0!==t?t:e.old;if(n&&D(n))if(v||(v=T()),e.old)if(e.new){const t=N(e.new);v.updateEnv(A(e.old),t),(0,f.traceVerbose)("Python API env change detected",n.id,"update"),C.fire({type:"update",env:t}),(0,y.reportInterpretersChanged)([{path:(0,p.getEnvPath)(e.new.executable.filename,e.new.location).path,type:"update"}])}else{const t=N(e.old);v.updateEnv(t,void 0),(0,f.traceVerbose)("Python API env change detected",n.id,"remove"),C.fire({type:"remove",env:t}),(0,y.reportInterpretersChanged)([{path:(0,p.getEnvPath)(e.old.executable.filename,e.old.location).path,type:"remove"}])}else if(e.new){const t=N(e.new);v.addEnv(t),(0,f.traceVerbose)("Python API env change detected",n.id,"add"),C.fire({type:"add",env:t}),(0,y.reportInterpretersChanged)([{path:(0,p.getEnvPath)(e.new.executable.filename,e.new.location).path,type:"add"}])}})),u.onDidEnvironmentVariablesChange((e=>{x.fire({resource:(0,_.getWorkspaceFolder)(e),env:u.getEnvironmentVariablesSync(e)})})),C,x,n.onDidChangePythonEnvironment?n.onDidChangePythonEnvironment((e=>{const t=O(e);P.fire({id:t.id,path:t.path,resource:e})}),void 0):{dispose:w.noop}),v||(v=T()),{getEnvironmentVariables:e=>(I("getEnvironmentVariables"),e=e&&"uri"in e?e.uri:e,u.getEnvironmentVariablesSync(e)),get onDidEnvironmentVariablesChange(){return I("onDidEnvironmentVariablesChange"),x.event},getActiveEnvironmentPath:e=>(I("getActiveEnvironmentPath"),O(e)),updateActiveEnvironmentPath(e,t){I("updateActiveEnvironmentPath");const n="string"!=typeof e?e.path:e;return t=t&&"uri"in t?t.uri:t,r.update(t,s.ConfigurationTarget.WorkspaceFolder,n)},get onDidChangeActiveEnvironmentPath(){return I("onDidChangeActiveEnvironmentPath"),P.event},resolveEnvironment:async n=>{if(!s.workspace.isTrusted)throw new Error("Not allowed to resolve environment in an untrusted workspace");let r="string"!=typeof n?n.path:n;if(a.basename(r)===r){const e=t.get(h.IPythonExecutionFactory),n=await e.create({pythonPath:r}),i=await n.getExecutablePath().catch((e=>{(0,f.traceError)("Cannot resolve full path",e)}));if(!i)return;r=i}return I("resolveEnvironment",n),async function(e,t){var n,r,i;const o=await t.resolveEnv(e);if(!o)return;const s=R(k(o));return-1!==(null===(n=s.version)||void 0===n?void 0:n.major)&&-1!==(null===(r=s.version)||void 0===r?void 0:r.minor)&&-1!==(null===(i=s.version)||void 0===i?void 0:i.micro)||(0,f.traceError)(`Invalid version for ${e}: ${JSON.stringify(o)}`),s}(r,e)},get known(){return v.envs},async refreshEnvironments(t){s.workspace.isTrusted?(await e.triggerRefresh(void 0,{ifNotTriggerredAlready:!(null==t?void 0:t.forceRefresh)}),I("refreshEnvironments")):(0,f.traceError)("Not allowed to refresh environments in an untrusted workspace")},get onDidChangeEnvironments(){return I("onDidChangeEnvironments"),C.event},...(0,E.buildEnvironmentCreationApi)()}},t.convertCompleteEnvInfo=k,t.convertEnvInfo=A},53533:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentKnownCache=void 0,t.EnvironmentKnownCache=class{constructor(e){this._envs=[],this._envs=e}get envs(){return this._envs}addEnv(e){this._envs.find((t=>e.id===t.id))||this._envs.push(e)}updateEnv(e,t){const n=this._envs.findIndex((t=>e.id===t.id));-1!==n&&(void 0===t?this._envs.splice(n,1):this._envs[n]=t)}}},96130:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.activateFeatures=t.activateComponents=void 0;const s=n(54980),a=n(1048),c=n(11925),l=n(72290),u=n(9019),p=n(54661),d=n(552),h=n(37494),f=n(22408),v=n(86156),m=n(98803),g=n(11833),y=n(46108),b=n(29413),_=n(85602),E=n(13460),S=n(65422),w=n(62365),P=n(85120),T=n(50315),C=n(95609),x=n(52060),I=n(61516),O=o(n(51172)),R=n(29408),D=n(49044),k=n(30741),A=n(67715),N=n(68397),j=n(34614),M=n(30966),L=n(58137),F=n(9923),V=n(54786),U=n(57062),W=n(54380),H=n(5274),q=n(8164),$=n(83295),B=n(36380);t.activateComponents=async function(e,t,n){const r=await async function(e,t){const{legacyIOC:n}=e,{serviceManager:r,serviceContainer:i}=n,o=r.get(f.IFileSystem);await(0,P.setExtensionInstallTelemetryProperties)(o);const O=r.get(p.IApplicationEnvironment),{enableProposedApi:N}=O.packageJson;r.addSingletonInstance(d.UseProposedApi,N),(0,I.registerTypes)(r),(0,h.registerTypes)(r),(0,C.registerTypes)(r),(0,g.registerTypes)(r),(0,T.registerTypes)(r);const j=i.get(v.IExtensions);await(0,R.setDefaultLanguageServer)(j,r),i.get(v.IConfigurationService).getSettings().register(),(0,l.registerTypes)(r),(0,S.registerTypes)(r),(0,a.registerTypes)(r);const M=r.get(v.IDisposableRegistry),U=i.get(p.IWorkspaceService),W=i.get(p.ICommandManager);if(s.languages.setLanguageConfiguration(d.PYTHON_LANGUAGE,(0,_.getLanguageConfiguration)()),U.isTrusted&&(i.get(b.IInterpreterService).initialize(),!U.isVirtualWorkspace)){const t=r.getAll(A.IDebugSessionEventHandlers);new k.DebugSessionEventDispatcher(t,D.DebugService.instance,M).registerEventHandlers();const n=r.get(v.ILogOutputChannel);M.push(W.registerCommand(d.Commands.ViewOutput,(()=>n.show()))),W.executeCommand("setContext","python.vscode.channel",O.channel).then(m.noop,m.noop),i.get(u.IApplicationDiagnostics).register(),r.get(x.ITerminalAutoActivation).register(),await(0,H.registerPythonStartup)(e.context),r.get(x.ICodeExecutionManager).registerCommands(),M.push(new E.ReplProvider(i));const o=new w.TerminalProvider(i);o.initialize(s.window.activeTerminal).ignoreErrors(),i.getAll(y.IDebugConfigurationService).forEach((e=>{M.push(s.debug.registerDebugConfigurationProvider(V.DebuggerTypeName,e))})),M.push(o),(0,L.registerCreateEnvironmentTriggers)(M),(0,F.initializePersistentStateForTriggers)(e.context)}const q=i.get(c.IExtensionActivationManager);M.push(q);return{fullyReady:q.activate(t)}}(e,n);if(!(new N.WorkspaceService).isTrusted)return[r];const i=[O.activate(t.pythonEnvs,e)];return Promise.all([r,...i])},t.activateFeatures=function(e,t){const n=e.legacyIOC.serviceContainer.get(j.IInterpreterQuickPick),r=e.legacyIOC.serviceContainer.get(v.IInterpreterPathService),i=e.legacyIOC.serviceContainer.get(b.IInterpreterService);(0,B.registerEnvExtFeatures)(e.disposables,r);const o=e.legacyIOC.serviceContainer.get(v.IPathUtils);(0,q.registerPixiFeatures)(e.disposables),(0,M.registerAllCreateEnvironmentFeatures)(e.disposables,n,e.legacyIOC.serviceContainer.get(j.IPythonPathUpdaterServiceManager),i,o);const s=e.legacyIOC.serviceContainer.get(x.ICodeExecutionHelper),a=e.legacyIOC.serviceContainer.get(p.ICommandManager);(0,W.registerTriggerForTerminalREPL)(e.disposables),(0,U.registerStartNativeReplCommand)(e.disposables,i),(0,U.registerReplCommands)(e.disposables,i,s,a),(0,U.registerReplExecuteOnEnter)(e.disposables,i,a),(0,$.registerCustomTerminalLinkProvider)(e.disposables)}},49892:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.initializeComponents=t.initializeStandard=t.initializeGlobals=void 0;const s=n(25891),a=n(54980),c=n(84021),l=n(42219),u=n(96777),p=n(74702),d=n(86156),h=n(90679),f=n(14152),v=n(92938),m=n(38927),g=n(9100),y=o(n(51172)),b=n(61905),_=n(36901);t.initializeGlobals=function(e){const t=e.subscriptions,n=new s.Container({skipBaseClassChecks:!0}),r=new m.ServiceManager(n),i=new v.ServiceContainer(n);r.addSingletonInstance(g.IServiceContainer,i),r.addSingletonInstance(g.IServiceManager,r),r.addSingletonInstance(d.IDisposableRegistry,t),r.addSingletonInstance(d.IMemento,e.globalState,d.GLOBAL_MEMENTO),r.addSingletonInstance(d.IMemento,e.workspaceState,d.WORKSPACE_MEMENTO),r.addSingletonInstance(d.IExtensionContext,e);const o=a.window.createOutputChannel(f.OutputChannelNames.python,{log:!0});return t.push(o),t.push((0,b.registerLogger)(new _.OutputChannelLogger(o))),r.addSingletonInstance(d.ILogOutputChannel,o),{context:e,disposables:t,legacyIOC:{serviceManager:r,serviceContainer:i}}},t.initializeStandard=function(e){const{serviceManager:t}=e.legacyIOC;(0,u.registerTypes)(t),(0,h.registerTypes)(t),(0,c.registerTypes)(t),(0,l.registerTypes)(t),(0,p.registerTypes)(t)},t.initializeComponents=async function(e){return{pythonEnvs:await y.initialize(e)}}},15656:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentActivationService=t.EnvironmentActivationServiceCache=t.defaultShells=void 0,n(87295);const c=s(n(16928)),l=n(25891),u=n(54661),p=n(552),d=n(22408),h=s(n(8370)),f=n(35026),v=n(23935),m=n(86156),g=n(7855),y=n(99652),b=n(48112),_=n(53694),E=n(25297),S=n(51535),w=n(53322),P=n(29413),T=n(580),C=n(61905),x=n(95885),I=n(51080),O=n(18065),R=n(62982),D=n(68989),k=n(8164),A="e8b39361-0157-4923-80e1-22d70d46dee6";t.defaultShells={[b.OSType.Windows]:{shell:"cmd",shellType:v.TerminalShellType.commandPrompt},[b.OSType.OSX]:{shell:"bash",shellType:v.TerminalShellType.bash},[b.OSType.Linux]:{shell:"bash",shellType:v.TerminalShellType.bash},[b.OSType.Unknown]:void 0};const N=["The process cannot access the file because it is being used by another process","The directory is not empty"];class j{constructor(){this.normalMap=new Map}static forceUseStatic(){j.useStatic=!0}static forceUseNormal(){j.useStatic=!1}get(e){return j.useStatic?j.staticMap.get(e):this.normalMap.get(e)}set(e,t){j.useStatic?j.staticMap.set(e,t):this.normalMap.set(e,t)}delete(e){j.useStatic?j.staticMap.delete(e):this.normalMap.delete(e)}clear(){j.useStatic||this.normalMap.clear()}}t.EnvironmentActivationServiceCache=j,j.useStatic=!1,j.staticMap=new Map;let M=class{constructor(e,t,n,r,i,o,s){this.helper=e,this.platform=t,this.processServiceFactory=n,this.currentProcess=r,this.workspace=i,this.interpreterService=o,this.envVarsService=s,this.disposables=[],this.activatedEnvVariablesCache=new j,this.envVarsService.onDidEnvironmentVariablesChange((()=>this.activatedEnvVariablesCache.clear()),this,this.disposables)}dispose(){this.disposables.forEach((e=>e.dispose()))}async getActivatedEnvironmentVariables(e,t,n,r){var i;const o=new I.StopWatch,s=this.workspace.getWorkspaceFolderIdentifier(e);t=null!=t?t:await this.interpreterService.getActiveInterpreter(e);const a=`${s}_${this.platform.isWindows?null==t?void 0:t.path.toLowerCase():null==t?void 0:t.path}_${r}`;if(null===(i=this.activatedEnvVariablesCache.get(a))||void 0===i?void 0:i.hasData)return this.activatedEnvVariablesCache.get(a).data;const c=new y.InMemoryCache(6e5);return this.getActivatedEnvironmentVariablesImpl(e,t,n,r).then((e=>(c.data=e,this.activatedEnvVariablesCache.set(a,c),(0,S.sendTelemetryEvent)(w.EventName.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES,o.elapsedTime,{failed:!1}),e))).catch((e=>{throw(0,S.sendTelemetryEvent)(w.EventName.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES,o.elapsedTime,{failed:!0}),e}))}async getProcessEnvironmentVariables(e,t){const n=this.interpreterService.getInterpreters().filter((e=>!E.virtualEnvTypes.includes(e.envType))),r=n.length>0&&n[0]?n[0].path:"python";try{const[n,i]=h.printEnvVariables();n.forEach(((e,t)=>{n[t]=e.toCommandArgumentForPythonExt()}));const o=`${r} ${n.join(" ")}`,s=await this.processServiceFactory.create(e,{doNotUseCustomEnvs:!0}),a=await s.shellExec(o,{shell:t,timeout:3e4,maxBuffer:1e6,throwOnStdErr:!1}),c=this.parseEnvironmentOutput(a.stdout,i);return null!=c?c:process.env}catch(e){return process.env}}async getEnvironmentActivationShellCommands(e,n){const r=t.defaultShells[this.platform.osType];return r?this.helper.getEnvironmentActivationShellCommands(e,r.shellType,n):[]}async getActivatedEnvironmentVariablesImpl(e,n,r,i){var o,s;let a=t.defaultShells[this.platform.osType];if(a){i&&(a={shellType:(0,O.identifyShellFromShellPath)(i),shell:i});try{const t=await this.processServiceFactory.create(e),r=null!==(o=await this.envVarsService.getEnvironmentVariables(e))&&void 0!==o?o:{},u=Object.keys(r).length?r:{...this.currentProcess.env};let d;const[f,m]=h.printEnvVariables();if(f.forEach(((e,t)=>{f[t]=e.toCommandArgumentForPythonExt()})),(null==n?void 0:n.envType)===E.EnvironmentType.Conda){const e=await x.Conda.getConda(i),t=await(null==e?void 0:e.getRunPythonArgs({name:n.envName,prefix:null!==(s=n.envPath)&&void 0!==s?s:""}));t&&(d=[...t,...f].map((e=>e.toCommandArgumentForPythonExt())).join(" "))}else if((null==n?void 0:n.envType)===E.EnvironmentType.Pixi){const e=await(0,k.getRunPixiPythonCommand)(n.path);e&&(d=[...e,...f].map((e=>e.toCommandArgumentForPythonExt())).join(" "))}if(!d){const t=await this.helper.getEnvironmentActivationShellCommands(e,a.shellType,n);if((0,C.traceVerbose)(`Activation Commands received ${t} for shell ${a.shell}, resource ${null==e?void 0:e.fsPath} and interpreter ${null==n?void 0:n.path}`),!t||!Array.isArray(t)||0===t.length){if(n&&[E.EnvironmentType.Venv,E.EnvironmentType.Pyenv].includes(null==n?void 0:n.envType)){const e=(0,R.getSearchPathEnvVarNames)()[0];return u[e]?u[e]=`${c.dirname(n.path)}${c.delimiter}${u[e]}`:u[e]=`${c.dirname(n.path)}`,u}return}const r=[v.TerminalShellType.powershell,v.TerminalShellType.powershellCore].includes(a.shellType)?";":"&&";d=`${(l=t,l.map((e=>e.replace(/^source\s+/,". ")))).join(` ${r} `)} ${r} echo '${A}' ${r} python ${f.join(" ")}`}const y=u[p.PYTHON_WARNINGS];let b;u[p.PYTHON_WARNINGS]="ignore",(0,C.traceVerbose)(`Activating Environment to capture Environment variables, ${d}`);let _,S=1;for(;!b;)try{b=await t.shellExec(d,{env:u,shell:a.shell,timeout:(null==n?void 0:n.envType)===E.EnvironmentType.Conda?6e4:3e4,maxBuffer:1e6,throwOnStdErr:!1});try{_=this.parseEnvironmentOutput(b.stdout,m)}catch(e){if(!b.stderr)throw e}if(b.stderr){if(!_)throw new Error(`StdErr from ShellExec, ${b.stderr} for ${d}`);if((0,C.traceWarn)("Got env variables but with errors",b.stderr,_),b.stderr.includes("running scripts is disabled")||b.stderr.includes("FullyQualifiedErrorId : UnauthorizedAccess"))throw new Error(`Skipping returned result when powershell execution is disabled, stderr ${b.stderr} for ${d}`)}}catch(e){const t=e.toString();if(!(N.find((e=>t.includes(e)))&&S<10))throw e;(0,C.traceInfo)("Conda is busy, attempting to retry ..."),b=void 0,S+=1,await(0,g.sleep)(500)}return y&&_?_[p.PYTHON_WARNINGS]=y:_&&delete _[p.PYTHON_WARNINGS],_}catch(e){if((0,C.traceError)("getActivatedEnvironmentVariables",e),(0,S.sendTelemetryEvent)(w.EventName.ACTIVATE_ENV_TO_GET_ENV_VARS_FAILED,void 0,{isPossiblyCondaEnv:(null==n?void 0:n.envType)===E.EnvironmentType.Conda,terminal:a.shellType}),r)throw e}var l}}parseEnvironmentOutput(e,t){return-1===e.indexOf(A)?t(e):t((e=e.substring(e.indexOf(A)+36)).substring(e.indexOf("{")).trim())}};t.EnvironmentActivationService=M,o([(0,C.traceDecoratorVerbose)("getActivatedEnvironmentVariables",T.TraceOptions.Arguments)],M.prototype,"getActivatedEnvironmentVariables",null),o([(0,D.cache)(-1,!0)],M.prototype,"getProcessEnvironmentVariables",null),o([(0,C.traceDecoratorError)("Failed to parse Environment variables"),(0,C.traceDecoratorVerbose)("parseEnvironmentOutput",T.TraceOptions.None)],M.prototype,"parseEnvironmentOutput",null),t.EnvironmentActivationService=M=o([(0,l.injectable)(),a(0,(0,l.inject)(v.ITerminalHelper)),a(1,(0,l.inject)(d.IPlatformService)),a(2,(0,l.inject)(f.IProcessServiceFactory)),a(3,(0,l.inject)(m.ICurrentProcess)),a(4,(0,l.inject)(u.IWorkspaceService)),a(5,(0,l.inject)(P.IInterpreterService)),a(6,(0,l.inject)(_.IEnvironmentVariablesProvider))],M)},67714:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEnvironmentActivationService=void 0,t.IEnvironmentActivationService=Symbol("IEnvironmentActivationService")},7318:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterAutoSelectionService=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(94496);n(87295);const l=n(22408),u=n(86156),p=n(7855),d=n(71067),h=n(18162),f=n(51535),v=n(53322),m=n(34614),g=n(29413),y=n(23167),b="preferredGlobalPyInterpreter";let _=class{constructor(e,t,n,r,i,o,a,c){this.workspaceService=e,this.stateFactory=t,this.fs=n,this.interpreterService=r,this.envTypeComparer=i,this.interpreterHelper=a,this.experimentService=c,this.autoSelectedWorkspacePromises=new Map,this.didAutoSelectedInterpreterEmitter=new s.EventEmitter,this.autoSelectedInterpreterByWorkspace=new Map,this.globallyPreferredInterpreter=this.stateFactory.createGlobalPersistentState(b,void 0),o.registerInstance(this)}async autoSelectInterpreter(e){const t=this.getWorkspacePathKey(e),n=this.autoSelectedWorkspacePromises.has(t);if(!n){const n=(0,p.createDeferred)();this.autoSelectedWorkspacePromises.set(t,n),await this.initializeStore(e),await this.clearWorkspaceStoreIfInvalid(e),await this.autoselectInterpreterWithLocators(e),n.resolve()}return(0,f.sendTelemetryEvent)(v.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,void 0,{useCachedInterpreter:n}),this.autoSelectedWorkspacePromises.get(t).promise}get onDidChangeAutoSelectedInterpreter(){return this.didAutoSelectedInterpreterEmitter.event}getAutoSelectedInterpreter(e){const t=this.getWorkspaceState(e);if(t&&t.value)return t.value;const n=this.getWorkspacePathKey(e);return this.autoSelectedInterpreterByWorkspace.has(n)?this.autoSelectedInterpreterByWorkspace.get(n):this.globallyPreferredInterpreter.value}async setWorkspaceInterpreter(e,t){await this.storeAutoSelectedInterpreter(e,t)}async setGlobalInterpreter(e){await this.storeAutoSelectedInterpreter(void 0,e)}async clearWorkspaceStoreIfInvalid(e){const t=this.getWorkspaceState(e);t&&t.value&&!await this.fs.fileExists(t.value.path)&&await t.updateValue(void 0)}async storeAutoSelectedInterpreter(e,t){const n=this.getWorkspacePathKey(e);if(""===n){if(this.globallyPreferredInterpreter.value&&this.globallyPreferredInterpreter.value.version&&t&&t.version&&(0,d.compareSemVerLikeVersions)(this.globallyPreferredInterpreter.value.version,t.version)>0)return;await this.globallyPreferredInterpreter.updateValue(t),this.autoSelectedInterpreterByWorkspace.set(n,t)}else{const r=this.getWorkspaceState(e);r&&t&&await r.updateValue(t),this.autoSelectedInterpreterByWorkspace.set(n,t)}}async initializeStore(e){const t=this.getWorkspacePathKey(e);this.autoSelectedInterpreterByWorkspace.delete(t),this.globallyPreferredInterpreter||await this.clearStoreIfFileIsInvalid()}async clearStoreIfFileIsInvalid(){this.globallyPreferredInterpreter=this.stateFactory.createGlobalPersistentState(b,void 0),this.globallyPreferredInterpreter.value&&!await this.fs.fileExists(this.globallyPreferredInterpreter.value.path)&&await this.globallyPreferredInterpreter.updateValue(void 0)}getWorkspacePathKey(e){return this.workspaceService.getWorkspaceFolderIdentifier(e,"")}getWorkspaceState(e){const t=this.interpreterHelper.getActiveWorkspaceUri(e);if(t){const e=`autoSelectedWorkspacePythonInterpreter-${t.folderUri.fsPath}`;return this.stateFactory.createWorkspacePersistentState(e,void 0)}}getAutoSelectionInterpretersQueryState(e){const t=this.interpreterHelper.getActiveWorkspaceUri(e),n=`autoSelectionInterpretersQueried-${(null==t?void 0:t.folderUri.fsPath)||"global"}`;return this.stateFactory.createWorkspacePersistentState(n,void 0)}getAutoSelectionQueriedOnceState(){return this.stateFactory.createGlobalPersistentState("autoSelectionInterpretersQueriedOnce",void 0)}async autoselectInterpreterWithLocators(e){const t=this.getAutoSelectionInterpretersQueryState(e),n=this.getAutoSelectionQueriedOnceState();n.value&&!0!==t.value&&e&&await this.interpreterService.triggerRefresh({searchLocations:{roots:[e],doNotIncludeNonRooted:!0}}),await this.envTypeComparer.initialize(e);const r=this.experimentService.inExperimentSync(c.DiscoveryUsingWorkers.experiment),i=this.interpreterHelper.getActiveWorkspaceUri(e);let o;if(r){n.value||await this.interpreterService.getRefreshPromise({stage:h.ProgressReportStage.allPathsDiscovered});let t=this.interpreterService.getInterpreters(e);o=this.envTypeComparer.getRecommended(t,null==i?void 0:i.folderUri),(o?await this.interpreterService.getInterpreterDetails(o.path):void 0)&&o||(await this.interpreterService.refreshPromise,t=this.interpreterService.getInterpreters(e),o=this.envTypeComparer.getRecommended(t,null==i?void 0:i.folderUri))}else{n.value||await this.interpreterService.refreshPromise;const t=this.interpreterService.getInterpreters(e);o=this.envTypeComparer.getRecommended(t,null==i?void 0:i.folderUri)}o&&(i?this.setWorkspaceInterpreter(i.folderUri,o):this.setGlobalInterpreter(o),t.updateValue(!0),n.updateValue(!0),this.didAutoSelectedInterpreterEmitter.fire())}};t.InterpreterAutoSelectionService=_,t.InterpreterAutoSelectionService=_=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IWorkspaceService)),i(1,(0,o.inject)(u.IPersistentStateFactory)),i(2,(0,o.inject)(l.IFileSystem)),i(3,(0,o.inject)(g.IInterpreterService)),i(4,(0,o.inject)(m.IInterpreterComparer)),i(5,(0,o.inject)(y.IInterpreterAutoSelectionProxyService)),i(6,(0,o.inject)(g.IInterpreterHelper)),i(7,(0,o.inject)(u.IExperimentService))],_)},97238:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterAutoSelectionProxyService=void 0;const o=n(25891),s=n(54980),a=n(86156);let c=class{constructor(e){this.disposables=e,this.didAutoSelectedInterpreterEmitter=new s.EventEmitter}registerInstance(e){this.instance=e,this.disposables.push(this.instance.onDidChangeAutoSelectedInterpreter((()=>this.didAutoSelectedInterpreterEmitter.fire())))}get onDidChangeAutoSelectedInterpreter(){return this.didAutoSelectedInterpreterEmitter.event}getAutoSelectedInterpreter(e){return this.instance?this.instance.getAutoSelectedInterpreter(e):void 0}async setWorkspaceInterpreter(e,t){return this.instance?this.instance.setWorkspaceInterpreter(e,t):void 0}};t.InterpreterAutoSelectionProxyService=c,t.InterpreterAutoSelectionProxyService=c=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IDisposableRegistry))],c)},23167:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AutoSelectionRule=t.IInterpreterAutoSelectionService=t.IInterpreterAutoSelectionProxyService=void 0,t.IInterpreterAutoSelectionProxyService=Symbol("IInterpreterAutoSelectionProxyService"),t.IInterpreterAutoSelectionService=Symbol("IInterpreterAutoSelectionService"),function(e){e.all="all",e.currentPath="currentPath",e.workspaceVirtualEnvs="workspaceEnvs",e.settings="settings",e.cachedInterpreters="cachedInterpreters",e.systemWide="system",e.windowsRegistry="windowsRegistry"}(n||(t.AutoSelectionRule=n={}))},68681:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvLocationHeuristic=t.isProblematicCondaEnvironment=t.EnvironmentTypeComparer=t.EnvLocationHeuristic=void 0;const o=n(25891),s=n(48112),a=n(74857),c=n(69396),l=n(25297),u=n(29413),p=n(60852),d=n(25943);var h;!function(e){e[e.Local=1]="Local",e[e.Global=2]="Global"}(h||(t.EnvLocationHeuristic=h={}));let f=class{constructor(e){var t,n;this.interpreterHelper=e,this.preferredPyenvInterpreterPath=new Map,this.workspaceFolderPath=null!==(n=null===(t=this.interpreterHelper.getActiveWorkspaceUri(void 0))||void 0===t?void 0:t.folderUri.fsPath)&&void 0!==n?n:""}compare(e,t){if(g(e))return 1;if(g(t))return-1;const n=function(e,t,n){const r=y(e,n),i=y(t,n);return Math.sign(r-i)}(e,t,this.workspaceFolderPath);if(0!==n)return n;if(e.envType===l.EnvironmentType.Pyenv&&t.envType===l.EnvironmentType.Pyenv){const n=this.preferredPyenvInterpreterPath.get(this.workspaceFolderPath);if(n){if((0,d.arePathsSame)(n,t.path))return 1;if((0,d.arePathsSame)(n,e.path))return-1}}const r=function(e,t){if(!e.type&&!t.type)return e.envType===l.EnvironmentType.Pyenv&&t.envType!==l.EnvironmentType.Pyenv?-1:e.envType!==l.EnvironmentType.Pyenv&&t.envType===l.EnvironmentType.Pyenv?1:0;const n=[l.EnvironmentType.Poetry,l.EnvironmentType.Pipenv,l.EnvironmentType.VirtualEnvWrapper,l.EnvironmentType.Hatch,l.EnvironmentType.Venv,l.EnvironmentType.VirtualEnv,l.EnvironmentType.ActiveState,l.EnvironmentType.Conda,l.EnvironmentType.Pyenv,l.EnvironmentType.MicrosoftStore,l.EnvironmentType.Global,l.EnvironmentType.System,l.EnvironmentType.Unknown];return Math.sign(n.indexOf(e.envType)-n.indexOf(t.envType))}(e,t);if(0!==r)return r;const i=function(e,t){return e?t?e.raw===t.raw?0:e.major===t.major?e.minor===t.minor?e.patch===t.patch?e.build.join(" ")>t.build.join(" ")?-1:1:e.patch>t.patch?-1:1:e.minor>t.minor?-1:1:e.major>t.major?-1:1:-1:1}(e.version,t.version);if(0!==i)return i;if(m(e))return 1;if(m(t))return-1;const o=v(e,this.interpreterHelper),s=v(t,this.interpreterHelper);return o===s?0:o>s?1:-1}async initialize(e){const t=this.interpreterHelper.getActiveWorkspaceUri(e),n=null==t?void 0:t.folderUri.fsPath;if(!n)return;const r=await(0,p.getActivePyenvForDirectory)(n);this.preferredPyenvInterpreterPath.set(n,r)}getRecommended(e,t){const n=this.interpreterHelper.getActiveWorkspaceUri(t),r=e.filter((e=>{var t;return!(g(e)||!(e.envType!==l.EnvironmentType.ActiveState||e.path&&n&&(0,a.isActiveStateEnvironmentForWorkspace)(e.path,n.folderUri.fsPath))||y(e,(null==n?void 0:n.folderUri.fsPath)||"")!==h.Local&&(!l.workspaceVirtualEnvTypes.includes(e.envType)&&l.virtualEnvTypes.includes(e.envType)||2===(null===(t=e.version)||void 0===t?void 0:t.major)))}));return r.sort(this.compare.bind(this)),r.length?r[0]:void 0}};function v(e,t){const n=[],r=[];if(e.version&&n.push(e.version.raw),e.architecture&&n.push(function(e){switch(e){case s.Architecture.x64:return"x64";case s.Architecture.x86:return"x86";default:return""}}(e.architecture)),e.companyDisplayName&&e.companyDisplayName.length>0?n.push(e.companyDisplayName.trim()):n.push("Python"),e.envType){const n=t.getInterpreterTypeDisplayName(e.envType);n&&r.push(n)}e.envName&&e.envName.length>0&&r.push(e.envName);const i=0===r.length?"":`(${r.join(": ")})`;return`${n.join(" ")} ${i}`.trim()}function m(e){return e.envType===l.EnvironmentType.Conda&&("base"===e.envName||"miniconda"===e.envName)}function g(e){return e.envType===l.EnvironmentType.Conda&&"python"===e.path}function y(e,t){return t.length>0&&(e.envPath&&(0,c.isParentPath)(e.envPath,t)||e.path&&(0,c.isParentPath)(e.path,t))?h.Local:h.Global}t.EnvironmentTypeComparer=f,t.EnvironmentTypeComparer=f=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IInterpreterHelper))],f),t.isProblematicCondaEnvironment=g,t.getEnvLocationHeuristic=y},77693:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseInterpreterSelectorCommand=void 0;const c=n(25891),l=s(n(16928)),u=n(54980),p=n(14152);let d=class{constructor(e,t,n,r,i,o){this.pythonPathUpdaterService=e,this.commandManager=t,this.applicationShell=n,this.workspaceService=r,this.pathUtils=i,this.configurationService=o,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0},this.disposables=[],this.disposables.push(this)}dispose(){this.disposables.forEach((e=>e.dispose()))}async getConfigTargets(e){const t=this.workspaceService.workspaceFolders;if(void 0===t||0===t.length)return[{folderUri:void 0,configTarget:u.ConfigurationTarget.Global}];if(1===t.length)return[{folderUri:t[0].uri,configTarget:u.ConfigurationTarget.WorkspaceFolder}];let n=(null==e?void 0:e.resetTarget)?[{label:p.Common.clearAll}]:[];n.push(...t.map((e=>{const t=this.pathUtils.getDisplayName(this.configurationService.getSettings(e.uri).pythonPath,e.uri.fsPath);return{label:e.name,description:this.pathUtils.getDisplayName(l.dirname(e.uri.fsPath)),uri:e.uri,detail:t}})),{label:(null==e?void 0:e.resetTarget)?p.Interpreters.clearAtWorkspace:p.Interpreters.entireWorkspace,uri:t[0].uri});const r=await this.applicationShell.showQuickPick(n,{placeHolder:(null==e?void 0:e.resetTarget)?"Select the workspace folder to clear the interpreter for":"Select the workspace folder to set the interpreter"});return(null==r?void 0:r.label)===p.Common.clearAll?[...t.map((e=>({folderUri:e.uri,configTarget:u.ConfigurationTarget.WorkspaceFolder}))),{folderUri:t[0].uri,configTarget:u.ConfigurationTarget.Workspace}]:r?r.label===p.Interpreters.entireWorkspace||r.label===p.Interpreters.clearAtWorkspace?[{folderUri:r.uri,configTarget:u.ConfigurationTarget.Workspace}]:[{folderUri:r.uri,configTarget:u.ConfigurationTarget.WorkspaceFolder}]:void 0}};t.BaseInterpreterSelectorCommand=d,t.BaseInterpreterSelectorCommand=d=o([(0,c.injectable)(),a(0,(0,c.unmanaged)()),a(1,(0,c.unmanaged)()),a(2,(0,c.unmanaged)()),a(3,(0,c.unmanaged)()),a(4,(0,c.unmanaged)()),a(5,(0,c.unmanaged)())],d)},35880:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstallPythonCommand=void 0;const o=n(25891),s=n(19419),a=n(54661),c=n(2761),l=n(552),u=n(86156),p=n(22408);let d=class{constructor(e,t,n,r,i){this.commandManager=e,this.contextManager=t,this.browserService=n,this.platformService=r,this.disposables=i,this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!1}}async activate(){this.disposables.push(this.commandManager.registerCommand(l.Commands.InstallPython,(()=>this._installPython())))}async _installPython(){this.platformService.isWindows&&(await this.platformService.getVersion()).major>8?this.browserService.launch("ms-windows-store://pdp/?ProductId=9NRWMJP3717K"):this.showInstallPythonTile()}showInstallPythonTile(){let e;this.contextManager.setContext(s.ExtensionContextKey.showInstallPythonTile,!0),e=this.platformService.isWindows?c.PythonWelcome.windowsInstallId:this.platformService.isLinux?c.PythonWelcome.linuxInstallId:c.PythonWelcome.macOSInstallId,this.commandManager.executeCommand("workbench.action.openWalkthrough",{category:`${l.PVSC_EXTENSION_ID}#${c.PythonWelcome.name}`,step:`${l.PVSC_EXTENSION_ID}#${c.PythonWelcome.name}#${e}`},!1)}};t.InstallPythonCommand=d,t.InstallPythonCommand=d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ICommandManager)),i(1,(0,o.inject)(a.IContextKeyManager)),i(2,(0,o.inject)(u.IBrowserService)),i(3,(0,o.inject)(p.IPlatformService)),i(4,(0,o.inject)(u.IDisposableRegistry))],d)},61149:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstallPythonViaTerminal=void 0;const o=n(25891),s=n(552),a=n(86156),c=n(54661),l=n(7855),u=n(48112),p=n(61905),d=n(14152);var h;!function(e){e.brew="brew",e.apt="apt",e.dnf="dnf"}(h||(h={}));let f=class{constructor(e,t,n){this.commandManager=e,this.terminalManager=t,this.disposables=n,this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!1},this.packageManagerCommands={brew:["brew install python3"],dnf:["sudo dnf install python3"],apt:["sudo apt-get update","sudo apt-get install python3 python3-venv python3-pip"]}}async activate(){this.disposables.push(this.commandManager.registerCommand(s.Commands.InstallPythonOnMac,(()=>this._installPythonOnUnix(u.OSType.OSX)))),this.disposables.push(this.commandManager.registerCommand(s.Commands.InstallPythonOnLinux,(()=>this._installPythonOnUnix(u.OSType.Linux))))}async _installPythonOnUnix(e){const t=await this.getCommands(e),n=e===u.OSType.OSX?d.Interpreters.installPythonTerminalMacMessage:d.Interpreters.installPythonTerminalMessageLinux,r=this.terminalManager.createTerminal({name:"Python",message:t.length?void 0:n});r.show(!0),await async function(){await(0,l.sleep)(100)}();for(const e of t)r.sendText(e),await m()}async getCommands(e){if(e===u.OSType.OSX)return this.getCommandsForPackageManagers([h.brew]);if(e===u.OSType.Linux)return this.getCommandsForPackageManagers([h.apt,h.dnf]);throw new Error("OS not supported")}async getCommandsForPackageManagers(e){for(const t of e)if(await v(t))return this.packageManagerCommands[t];return[]}};async function v(e){try{const t=n(46911),r=await t.default(e);return(0,p.traceVerbose)(`Resolved path to ${e} module:`,r),r.trim().length>0}catch(t){return(0,p.traceVerbose)(`${e} not found`,t),!1}}async function m(){await(0,l.sleep)(500)}t.InstallPythonViaTerminal=f,t.InstallPythonViaTerminal=f=r([(0,o.injectable)(),i(0,(0,o.inject)(c.ICommandManager)),i(1,(0,o.inject)(c.ITerminalManager)),i(2,(0,o.inject)(a.IDisposableRegistry))],f)},75763:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ResetInterpreterCommand=void 0;const o=n(25891),s=n(54661),a=n(552),c=n(86156),l=n(34614),u=n(77693),p=n(36380),d=n(95241);let h=class extends u.BaseInterpreterSelectorCommand{constructor(e,t,n,r,i,o){super(e,t,n,r,i,o)}async activate(){this.disposables.push(this.commandManager.registerCommand(a.Commands.ClearWorkspaceInterpreter,this.resetInterpreter.bind(this)))}async resetInterpreter(){const e=await this.getConfigTargets({resetTarget:!0});e&&await Promise.all(e.map((async e=>{const t=e.configTarget,n=e.folderUri;await this.pythonPathUpdaterService.updatePythonPath(void 0,t,"ui",n),(0,p.useEnvExtension)()&&await(0,d.resetInterpreterLegacy)(n)})))}};t.ResetInterpreterCommand=h,t.ResetInterpreterCommand=h=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IPythonPathUpdaterServiceManager)),i(1,(0,o.inject)(s.ICommandManager)),i(2,(0,o.inject)(s.IApplicationShell)),i(3,(0,o.inject)(s.IWorkspaceService)),i(4,(0,o.inject)(c.IPathUtils)),i(5,(0,o.inject)(c.IConfigurationService))],h)},97482:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SetInterpreterCommand=t.EnvGroups=void 0;const c=n(25891),l=n(2543),u=s(n(16928)),p=n(54980),d=n(54661),h=n(552),f=n(25943),v=n(22408),m=n(86156),g=n(14152),y=n(98803),b=n(70670),_=n(79985),E=n(25297),S=n(51535),w=n(53322),P=n(29413),T=n(68681),C=n(34614),x=n(77693),I=n(65900),O=n(36380),R=n(95241);function D(e){return"interpreter"in e}function k(e){return"alwaysShow"in e}function A(e){return"kind"in e&&e.kind===p.QuickPickItemKind.Separator}var N;!function(e){e.Workspace=g.InterpreterQuickPickList.workspaceGroupName,e.Conda="Conda",e.Global=g.InterpreterQuickPickList.globalGroupName,e.VirtualEnv="VirtualEnv",e.PipEnv="PipEnv",e.Pyenv="Pyenv",e.Venv="Venv",e.Poetry="Poetry",e.Hatch="Hatch",e.Pixi="Pixi",e.VirtualEnvWrapper="VirtualEnvWrapper",e.ActiveState="ActiveState",e.Recommended=g.Common.recommended}(N||(t.EnvGroups=N={}));let j=class extends x.BaseInterpreterSelectorCommand{constructor(e,t,n,r,i,o,s,a,c,l){super(n,i,e,c,t,r),this.multiStepFactory=o,this.platformService=s,this.interpreterSelector=a,this.interpreterService=l,this.createEnvironmentSuggestion={label:`${h.Octicons.Add} ${g.InterpreterQuickPickList.create.label}`,alwaysShow:!0},this.manualEntrySuggestion={label:`${h.Octicons.Folder} ${g.InterpreterQuickPickList.enterPath.label}`,alwaysShow:!0},this.refreshButton={iconPath:new p.ThemeIcon(h.ThemeIcons.Refresh),tooltip:g.InterpreterQuickPickList.refreshInterpreterList},this.noPythonInstalled={label:`${h.Octicons.Error} ${g.InterpreterQuickPickList.noPythonInstalled}`,detail:g.InterpreterQuickPickList.clickForInstructions,alwaysShow:!0},this.wasNoPythonInstalledItemClicked=!1,this.tipToReloadWindow={label:`${h.Octicons.Lightbulb} Reload the window if you installed Python but don't see it`,detail:"Click to run `Developer: Reload Window` command",alwaysShow:!0}}async activate(){this.disposables.push(this.commandManager.registerCommand(h.Commands.Set_Interpreter,this.setInterpreter.bind(this)))}async _pickInterpreter(e,t,n,r){var i,o;const s=!!this.interpreterService.refreshPromise,a=this._getItems(t.workspace,n,r);t.path=void 0;const c=this.pathUtils.getDisplayName(this.configurationService.getSettings(t.workspace).pythonPath,t.workspace?t.workspace.fsPath:void 0),l=null===(null==r?void 0:r.placeholder)?void 0:null!==(i=null==r?void 0:r.placeholder)&&void 0!==i?i:p.l10n.t("Selected Interpreter: {0}",c),u=null===(null==r?void 0:r.title)?void 0:null!==(o=null==r?void 0:r.title)&&void 0!==o?o:g.InterpreterQuickPickList.browsePath.openButtonLabel,d=[{button:this.refreshButton,callback:e=>{this.refreshCallback(e,{isButton:!0,showBackButton:null==r?void 0:r.showBackButton})}}];(null==r?void 0:r.showBackButton)&&d.push({button:p.QuickInputButtons.Back,callback:()=>{}});const f=await e.showQuickPick({placeholder:l,items:a,sortByLabel:!s,keepScrollPosition:!0,activeItem:e=>this.getActiveItem(t.workspace,e),matchOnDetail:!0,matchOnDescription:!0,title:u,customButtonSetups:d,initialize:e=>{0===this.interpreterService.getInterpreters().length?this.refreshCallback(e,{showBackButton:null==r?void 0:r.showBackButton}):this.refreshCallback(e,{ifNotTriggerredAlready:!0,showBackButton:null==r?void 0:r.showBackButton})},onChangeItem:{event:this.interpreterService.onDidChangeInterpreters,callback:(e,i)=>{this.interpreterService.refreshPromise&&(i.busy=!0,this.interpreterService.refreshPromise.then((()=>{i.busy=!1,this.updateQuickPickItems(i,{},t.workspace,n,r)}))),this.updateQuickPickItems(i,e,t.workspace,n,r)}}});if(void 0===f)(0,S.sendTelemetryEvent)(w.EventName.SELECT_INTERPRETER_SELECTED,void 0,{action:"escape"});else{if(f.label===this.manualEntrySuggestion.label)return(0,S.sendTelemetryEvent)(w.EventName.SELECT_INTERPRETER_ENTER_OR_FIND),this._enterOrBrowseInterpreterPath.bind(this);if(f.label===this.createEnvironmentSuggestion.label){const e=await Promise.resolve(this.commandManager.executeCommand(h.Commands.Create_Environment,{showBackButton:!1,selectEnvironment:!0})).catch(y.noop);t.path=null==e?void 0:e.path}else f.label===this.noPythonInstalled.label?(this.commandManager.executeCommand(h.Commands.InstallPython).then(y.noop,y.noop),this.wasNoPythonInstalledItemClicked=!0):f.label===this.tipToReloadWindow.label?this.commandManager.executeCommand("workbench.action.reloadWindow").then(y.noop,y.noop):((0,S.sendTelemetryEvent)(w.EventName.SELECT_INTERPRETER_SELECTED,void 0,{action:"selected"}),t.path=f.path)}}_getItems(e,t,n){const r=[];(null==n?void 0:n.showCreateEnvironment)&&r.push(this.createEnvironmentSuggestion,{label:"",kind:p.QuickPickItemKind.Separator}),r.push(this.manualEntrySuggestion,{label:"",kind:p.QuickPickItemKind.Separator});const i=this.getDefaultInterpreterPathSuggestion(e);i&&r.push(i);const o=this.getSuggestions(e,t,n);return this.finalizeItems(o,e,n),r.push(...o),r}getSuggestions(e,t,n){var r;const i=this.workspaceService.getWorkspaceFolder(e),o=this.interpreterSelector.getSuggestions(e,!!this.interpreterService.refreshPromise).filter((e=>!t||t(e.interpreter)));if(this.interpreterService.refreshPromise)return o;const s=this.interpreterSelector.getSuggestions(e,!0).filter((e=>!t||t(e.interpreter)));let a;return(null==n?void 0:n.skipRecommended)||(a=this.interpreterSelector.getRecommendedSuggestion(s,null===(r=this.workspaceService.getWorkspaceFolder(e))||void 0===r?void 0:r.uri)),a&&o[0].interpreter.id===a.interpreter.id&&o.shift(),function(e,t,n){const r=[];t&&r.push({label:N.Recommended,kind:p.QuickPickItemKind.Separator},t);let i=N.Recommended;for(const t of e)i=M(r,t,n,i),r.push(t);return r}(o,a,null==i?void 0:i.uri.fsPath)}async getActiveItem(e,t){const n=await this.interpreterService.getActiveInterpreter(e),r=t.items,i=r.find((e=>D(e)&&e.interpreter.id===(null==n?void 0:n.id)));if(i)return i;const o=r.find((e=>D(e)));if(o)return o;const s=r.find((e=>k(e)&&e.label===this.noPythonInstalled.label));return null!=s?s:r[0]}getDefaultInterpreterPathSuggestion(e){const t=this.workspaceService.getConfiguration("python",e),n=new _.SystemVariables(e,void 0,this.workspaceService).resolveAny(t.get("defaultInterpreterPath"));if(n&&"python"!==n)return{label:`${h.Octicons.Gear} ${g.InterpreterQuickPickList.defaultInterpreterPath.label}`,description:this.pathUtils.getDisplayName(n,e?e.fsPath:void 0),path:n,alwaysShow:!0}}updateQuickPickItems(e,t,n,r,i){const o=e.activeItems.length>0?e.activeItems[0]:void 0;e.items=this.getUpdatedItems(e.items,t,n,r,i);const s=o?e.items.find((e=>D(e)&&D(o)?e.interpreter.id===o.interpreter.id:!(!k(e)||!k(o))&&e.label===o.label)):void 0;s&&(e.activeItems=[s])}getUpdatedItems(e,t,n,r,i){var o,s;const a=[...e.values()],c=e.find((e=>A(e))),l=null!==(o=t.old)&&void 0!==o?o:t.new;r&&t.new&&!r(t.new)&&(t.new=void 0);let u=-1;if(l&&(u=a.findIndex((e=>D(e)&&e.interpreter.id===l.id))),t.new){const e=this.interpreterSelector.suggestionToQuickPickItem(t.new,n,!c);if(-1===u){const t=a.findIndex((e=>k(e)&&e.label===this.noPythonInstalled.label));-1!==t&&a.splice(t,1);const r=a.findIndex((e=>k(e)&&e.label===this.tipToReloadWindow.label));-1!==r&&a.splice(r,1),c&&M(a,e,null===(s=this.workspaceService.getWorkspaceFolder(n))||void 0===s?void 0:s.uri.fsPath),a.push(e)}else a[u]=e}return-1!==u&&void 0===t.new&&a.splice(u,1),this.finalizeItems(a,n,i),a}finalizeItems(e,t,n){const r=this.interpreterSelector.getSuggestions(t,!0);this.interpreterService.refreshPromise||(r.length?((null==n?void 0:n.skipRecommended)||this.setRecommendedItem(r,e,t),e.forEach(((t,n)=>{D(t)&&(0,T.isProblematicCondaEnvironment)(t.interpreter)&&(e[n].label.includes(h.Octicons.Warning)||(e[n].label=`${h.Octicons.Warning} ${e[n].label}`,e[n].tooltip=g.InterpreterQuickPickList.condaEnvWithoutPythonTooltip))}))):(e.some((e=>k(e)&&e.label===this.noPythonInstalled.label))||e.push(this.noPythonInstalled),this.wasNoPythonInstalledItemClicked&&!e.some((e=>k(e)&&e.label===this.tipToReloadWindow.label))&&e.push(this.tipToReloadWindow)))}setRecommendedItem(e,t,n){var r,i;const o=this.interpreterSelector.getRecommendedSuggestion(e,null===(r=this.workspaceService.getWorkspaceFolder(n))||void 0===r?void 0:r.uri);if(!o)return;const s=t.find((e=>A(e)&&e.label===N.Recommended)),a=(0,l.cloneDeep)(o);a.description=s?a.description:`${null!==(i=a.description)&&void 0!==i?i:""} - ${g.Common.recommended}`;const c=t.findIndex((e=>D(e)&&e.interpreter.id===a.interpreter.id));-1!==c&&(t[c]=a)}refreshCallback(e,t){e.buttons=this.getButtons(t),this.interpreterService.triggerRefresh(void 0,t).finally((()=>{e.buttons=this.getButtons({isButton:!1,showBackButton:null==t?void 0:t.showBackButton})})).ignoreErrors(),this.interpreterService.refreshPromise&&(e.busy=!0,this.interpreterService.refreshPromise.then((()=>{e.busy=!1})))}getButtons(e){const t=[];return(null==e?void 0:e.showBackButton)&&t.push(p.QuickInputButtons.Back),(null==e?void 0:e.isButton)?t.push({iconPath:new p.ThemeIcon(h.ThemeIcons.SpinningLoader),tooltip:g.InterpreterQuickPickList.refreshingInterpreterList}):t.push(this.refreshButton),t}async _enterOrBrowseInterpreterPath(e,t){const n=[{label:g.InterpreterQuickPickList.browsePath.label,detail:g.InterpreterQuickPickList.browsePath.detail}],r=await e.showQuickPick({placeholder:g.InterpreterQuickPickList.enterPath.placeholder,items:n,acceptFilterBoxTextAsSelection:!0});if("string"==typeof r)(0,S.sendTelemetryEvent)(w.EventName.SELECT_INTERPRETER_ENTER_CHOICE,void 0,{choice:"enter"}),t.path=r,this.sendInterpreterEntryTelemetry(r,t.workspace);else if(r&&r.label===g.InterpreterQuickPickList.browsePath.label){(0,S.sendTelemetryEvent)(w.EventName.SELECT_INTERPRETER_ENTER_CHOICE,void 0,{choice:"browse"});const e={Executables:["exe"]},n=await this.applicationShell.showOpenDialog({filters:this.platformService.isWindows?e:void 0,openLabel:g.InterpreterQuickPickList.browsePath.openButtonLabel,canSelectMany:!1,title:g.InterpreterQuickPickList.browsePath.title});if(!(n&&n.length>0))return Promise.reject(b.InputFlowAction.resume);t.path=n[0].fsPath,this.sendInterpreterEntryTelemetry(t.path,t.workspace)}return Promise.resolve()}async setInterpreter(e){const t=await this.getConfigTargets();if(!t)return;const{configTarget:n}=t[0],r=t[0].folderUri,i={path:void 0,workspace:r},o=this.multiStepFactory.create();try{await o.run(((t,n)=>this._pickInterpreter(t,n,void 0,{showCreateEnvironment:!(null==e?void 0:e.hideCreateVenv),showBackButton:null==e?void 0:e.showBackButton})),i)}catch(e){if(e===b.InputFlowAction.back)return{action:"Back"};if(e===b.InputFlowAction.cancel)return{action:"Cancel"}}return void 0!==i.path?(await this.pythonPathUpdaterService.updatePythonPath(i.path,n,"ui",r),(0,O.useEnvExtension)()&&await(0,R.setInterpreterLegacy)(i.path,r),{path:i.path}):void 0}async getInterpreterViaQuickPick(e,t,n){const r={path:void 0,workspace:e},i=this.multiStepFactory.create();return await i.run(((e,r)=>this._pickInterpreter(e,r,t,n)),r),r.path}sendInterpreterEntryTelemetry(e,t){const n=this._getItems(t,void 0);let r=u.normalize((0,I.untildify)(e));u.isAbsolute(r)||(r=u.resolve((null==t?void 0:t.fsPath)||"",e));const i=n.map((e=>{const n=D(e)?e.interpreter.path:"";let r=u.normalize((0,I.untildify)(n));return u.isAbsolute(n)||(r=u.resolve((null==t?void 0:t.fsPath)||"",n)),r})).includes(r);(0,S.sendTelemetryEvent)(w.EventName.SELECT_INTERPRETER_ENTERED_EXISTS,void 0,{discovered:i})}};function M(e,t,n,r){if(!r){const t=e.length?e[e.length-1]:void 0;r=t&&D(t)?L(t,n):void 0}const i=L(t,n);if(!r||i!==r){const t={label:i,kind:p.QuickPickItemKind.Separator};e.push(t),r=i}return r}function L(e,t){if(t&&(0,f.isParentPath)(e.path,t))return N.Workspace;switch(e.interpreter.envType){case E.EnvironmentType.Global:case E.EnvironmentType.System:case E.EnvironmentType.Unknown:case E.EnvironmentType.MicrosoftStore:return N.Global;default:return N[e.interpreter.envType]}}t.SetInterpreterCommand=j,o([(0,S.captureTelemetry)(w.EventName.SELECT_INTERPRETER_ENTER_BUTTON)],j.prototype,"_enterOrBrowseInterpreterPath",null),o([(0,S.captureTelemetry)(w.EventName.SELECT_INTERPRETER)],j.prototype,"setInterpreter",null),t.SetInterpreterCommand=j=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IApplicationShell)),a(1,(0,c.inject)(m.IPathUtils)),a(2,(0,c.inject)(C.IPythonPathUpdaterServiceManager)),a(3,(0,c.inject)(m.IConfigurationService)),a(4,(0,c.inject)(d.ICommandManager)),a(5,(0,c.inject)(b.IMultiStepInputFactory)),a(6,(0,c.inject)(v.IPlatformService)),a(7,(0,c.inject)(C.IInterpreterSelector)),a(8,(0,c.inject)(d.IWorkspaceService)),a(9,(0,c.inject)(P.IInterpreterService))],j)},15972:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterSelector=void 0;const o=n(25891),s=n(25943),a=n(86156),c=n(6514),l=n(29413),u=n(34614);let p=class{constructor(e,t,n){this.interpreterManager=e,this.envTypeComparer=t,this.pathUtils=n,this.disposables=[]}dispose(){this.disposables.forEach((e=>e.dispose()))}getSuggestions(e,t=!1){const n=this.interpreterManager.getInterpreters(e);return n.sort(this.envTypeComparer.compare.bind(this.envTypeComparer)),n.map((n=>this.suggestionToQuickPickItem(n,e,t)))}async getAllSuggestions(e){const t=await this.interpreterManager.getAllInterpreters(e);return t.sort(this.envTypeComparer.compare.bind(this.envTypeComparer)),Promise.all(t.map((t=>this.suggestionToQuickPickItem(t,e))))}suggestionToQuickPickItem(e,t,n=!1){if(!n){const r=null==t?void 0:t.fsPath;r&&(0,s.isParentPath)(e.path,r)&&(n=!0)}const r=e.envPath&&"envFolderPath"===(0,c.getEnvPath)(e.path,e.envPath).pathType?e.envPath:e.path,i=this.pathUtils.getDisplayName(r,t?t.fsPath:void 0),o=e.cachedEntry?"(cached) ":"";return{label:(n?e.detailedDisplayName:e.displayName)||"Python",description:`${o}${i}`,path:r,interpreter:e}}getRecommendedSuggestion(e,t){const n=this.interpreterManager.getInterpreters(t),r=this.envTypeComparer.getRecommended(n,t);if(r)return e.find((e=>(0,s.arePathsSame)(e.interpreter.path,r.path)))}};t.InterpreterSelector=p,t.InterpreterSelector=p=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IInterpreterService)),i(1,(0,o.inject)(u.IInterpreterComparer)),i(2,(0,o.inject)(a.IPathUtils))],p)},37958:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonPathUpdaterService=void 0;const o=n(25891),s=n(54980),a=n(51080),c=n(79985),l=n(61905),u=n(51535),p=n(53322),d=n(29413),h=n(34614);let f=class{constructor(e,t,n){this.pythonPathSettingsUpdaterFactory=e,this.pyenvs=t,this.preferredEnvService=n}async updatePythonPath(e,t,n,r){const i=new a.StopWatch,o=this.getPythonUpdaterService(t,r);let c=!1;try{await o.updatePythonPath(e),"ui"===n&&this.preferredEnvService.trackUserSelectedEnvironment(e,r)}catch(e){c=!0;const t=e,n=t&&"string"==typeof t.message?t.message:"";s.window.showErrorMessage(s.l10n.t("Failed to set interpreter path. Error: {0}",n)),(0,l.traceError)(t)}this.sendTelemetry(i.elapsedTime,c,n,e,r).catch((e=>(0,l.traceError)("Python Extension: sendTelemetry",e)))}async sendTelemetry(e,t,n,r,i){var o;const s={failed:t,trigger:n};if(!t&&r){const e=new c.SystemVariables(void 0,null==i?void 0:i.fsPath),t=await this.pyenvs.getInterpreterInformation(e.resolveAny(r));t&&(s.pythonVersion=null===(o=t.version)||void 0===o?void 0:o.raw)}(0,u.sendTelemetryEvent)(p.EventName.PYTHON_INTERPRETER,e,s)}getPythonUpdaterService(e,t){switch(e){case s.ConfigurationTarget.Global:return this.pythonPathSettingsUpdaterFactory.getGlobalPythonPathConfigurationService();case s.ConfigurationTarget.Workspace:if(!t)throw new Error("Workspace Uri not defined");return this.pythonPathSettingsUpdaterFactory.getWorkspacePythonPathConfigurationService(t);default:if(!t)throw new Error("Workspace Uri not defined");return this.pythonPathSettingsUpdaterFactory.getWorkspaceFolderPythonPathConfigurationService(t)}}};t.PythonPathUpdaterService=f,t.PythonPathUpdaterService=f=r([(0,o.injectable)(),i(0,(0,o.inject)(h.IPythonPathUpdaterServiceFactory)),i(1,(0,o.inject)(d.IComponentAdapter)),i(2,(0,o.inject)(h.IRecommendedEnvironmentService))],f)},40770:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonPathUpdaterServiceFactory=void 0;const o=n(25891),s=n(86156),a=n(9100),c=n(82277),l=n(92905),u=n(60389);let p=class{constructor(e){this.interpreterPathService=e.get(s.IInterpreterPathService)}getGlobalPythonPathConfigurationService(){return new c.GlobalPythonPathUpdaterService(this.interpreterPathService)}getWorkspacePythonPathConfigurationService(e){return new u.WorkspacePythonPathUpdaterService(e,this.interpreterPathService)}getWorkspaceFolderPythonPathConfigurationService(e){return new l.WorkspaceFolderPythonPathUpdaterService(e,this.interpreterPathService)}};t.PythonPathUpdaterServiceFactory=p,t.PythonPathUpdaterServiceFactory=p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],p)},5330:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendedEnvironmentService=void 0;const o=n(25891),s=n(86156),a=n(54980),c=n(9923),l=n(61905),u=n(25943),p="userSelectedEnvPath";let d=class{constructor(e){this.extensionContext=e,this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!1}}async activate(e,t){this.extensionContext.subscriptions.push(a.commands.registerCommand("python.getRecommendedEnvironment",(async e=>this.getRecommededEnvironment(e))))}registerEnvApi(e){this.api=e}trackUserSelectedEnvironment(e,t){var n;if(null===(n=a.workspace.workspaceFolders)||void 0===n?void 0:n.length)try{(0,c.updateWorkspaceStateValue)(p,function(e,t){var n,r;if(!(null===(n=a.workspace.workspaceFolders)||void 0===n?void 0:n.length))return e;const i=((t?null===(r=a.workspace.getWorkspaceFolder(t))||void 0===r?void 0:r.uri:void 0)||a.workspace.workspaceFolders[0].uri).toString(),o=(0,c.getWorkspaceStateValue)(p);if(!o)return JSON.stringify(e?{[i]:e}:{});try{const t=JSON.parse(o);return e?t[i]=e:delete t[i],JSON.stringify(t)}catch(t){return(0,l.traceError)("Failed to parse existing workspace state value for preferred environment",t),JSON.stringify({[i]:e})}}(e,t))}catch(e){(0,l.traceError)("Failed to update workspace state for preferred environment",e)}else this.extensionContext.globalState.update(p,e)}async getRecommededEnvironment(e){if(!a.workspace.isTrusted||!this.api)return;const t=await this.getRecommededInternal(e);if(!t)return;const n=await this.api.resolveEnvironment(this.api.getActiveEnvironmentPath(e)),r=await this.api.resolveEnvironment(t.environmentPath);if(n&&r&&n.id!==r.id)return void(0,l.traceError)(`Active environment ${n.id} is different from recommended environment ${r.id} for resource ${null==e?void 0:e.toString()}`);if(r)return{environment:r,reason:t.reason};const i=await this.api.resolveEnvironment(this.api.getActiveEnvironmentPath());return n&&(null==i?void 0:i.path)!==(null==n?void 0:n.path)?{environment:n,reason:"workspaceUserSelected"}:void 0}async getRecommededInternal(e){var t,n,r;let i;try{i=(0,c.getWorkspaceStateValue)(p)}catch(e){(0,l.traceError)("Failed to get workspace state for preferred environment",e)}if((null===(t=a.workspace.workspaceFolders)||void 0===t?void 0:t.length)&&i){const t=((e?null===(n=a.workspace.getWorkspaceFolder(e))||void 0===n?void 0:n.uri:void 0)||a.workspace.workspaceFolders[0].uri).toString();try{const e=JSON.parse(i)[t];if(e)return{environmentPath:e,reason:"workspaceUserSelected"}}catch(e){(0,l.traceError)("Failed to parse existing workspace state value for preferred environment",e)}}if((null===(r=a.workspace.workspaceFolders)||void 0===r?void 0:r.length)&&this.api){const t=await async function(e,t){var n,r;const i=(t?null===(n=a.workspace.getWorkspaceFolder(t))||void 0===n?void 0:n.uri:void 0)||((null===(r=a.workspace.workspaceFolders)||void 0===r?void 0:r.length)?a.workspace.workspaceFolders[0].uri:void 0);if(!i)return;let o=e.known.find((e=>{var t;return!!(null===(t=e.environment)||void 0===t?void 0:t.folderUri)&&("VirtualEnvironment"===e.environment.type||"Conda"===e.environment.type)&&(0,u.isParentPath)(e.environment.folderUri.fsPath,i.fsPath)})),s=o?e.resolveEnvironment(o):void 0;return s||(o=e.known.find((e=>{var t,n;return(null===(t=e.environment)||void 0===t?void 0:t.folderUri)&&(0,u.isParentPath)(e.environment.folderUri.fsPath,i.fsPath)||(null===(n=e.environment)||void 0===n?void 0:n.workspaceFolder)&&e.environment.workspaceFolder.uri.fsPath===i.fsPath})),o?e.resolveEnvironment(o):void 0)}(this.api,e);if(t)return{environmentPath:t.path,reason:"workspaceUserSelected"}}const o=this.extensionContext.globalState.get(p);return o?{environmentPath:o,reason:"globalUserSelected"}:this.api&&a.workspace.isTrusted?{environmentPath:this.api.getActiveEnvironmentPath(e).path,reason:"defaultRecommended"}:void 0}};t.RecommendedEnvironmentService=d,t.RecommendedEnvironmentService=d=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IExtensionContext))],d)},82277:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalPythonPathUpdaterService=void 0;const r=n(54980);t.GlobalPythonPathUpdaterService=class{constructor(e){this.interpreterPathService=e}async updatePythonPath(e){const t=this.interpreterPathService.inspect(void 0);t&&t.globalValue===e||await this.interpreterPathService.update(void 0,r.ConfigurationTarget.Global,e)}}},92905:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFolderPythonPathUpdaterService=void 0;const r=n(54980);t.WorkspaceFolderPythonPathUpdaterService=class{constructor(e,t){this.workspaceFolder=e,this.interpreterPathService=t}async updatePythonPath(e){const t=this.interpreterPathService.inspect(this.workspaceFolder);t&&t.workspaceFolderValue===e||await this.interpreterPathService.update(this.workspaceFolder,r.ConfigurationTarget.WorkspaceFolder,e)}}},60389:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspacePythonPathUpdaterService=void 0;const r=n(54980);t.WorkspacePythonPathUpdaterService=class{constructor(e,t){this.workspace=e,this.interpreterPathService=t}async updatePythonPath(e){const t=this.interpreterPathService.inspect(this.workspace);t&&t.workspaceValue===e||await this.interpreterPathService.update(this.workspace,r.ConfigurationTarget.Workspace,e)}}},34614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IRecommendedEnvironmentService=t.IInterpreterQuickPick=t.IInterpreterComparer=t.IInterpreterSelector=t.IPythonPathUpdaterServiceManager=t.IPythonPathUpdaterServiceFactory=void 0,t.IPythonPathUpdaterServiceFactory=Symbol("IPythonPathUpdaterServiceFactory"),t.IPythonPathUpdaterServiceManager=Symbol("IPythonPathUpdaterServiceManager"),t.IInterpreterSelector=Symbol("IInterpreterSelector"),t.IInterpreterComparer=Symbol("IInterpreterComparer"),t.IInterpreterQuickPick=Symbol("IInterpreterQuickPick"),t.IRecommendedEnvironmentService=Symbol("IRecommendedEnvironmentService")},29413:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IActivatedEnvironmentLaunch=t.IInterpreterStatusbarVisibilityFilter=t.IInterpreterHelper=t.IInterpreterDisplay=t.IInterpreterService=t.ICondaService=t.IComponentAdapter=void 0,t.IComponentAdapter=Symbol("IComponentAdapter"),t.ICondaService=Symbol("ICondaService"),t.IInterpreterService=Symbol("IInterpreterService"),t.IInterpreterDisplay=Symbol("IInterpreterDisplay"),t.IInterpreterHelper=Symbol("IInterpreterHelper"),t.IInterpreterStatusbarVisibilityFilter=Symbol("IInterpreterStatusbarVisibilityFilter"),t.IActivatedEnvironmentLaunch=Symbol("IActivatedEnvironmentLaunch")},10223:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterDisplay=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(552);n(87295);const l=n(86156),u=n(14152),p=n(9100),d=n(61905),h=n(29413),f=n(36380);let v=class{constructor(e){this.serviceContainer=e,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0},this.useLanguageStatus=!1,this.visibilityFilters=[],this.helper=e.get(h.IInterpreterHelper),this.workspaceService=e.get(a.IWorkspaceService),this.pathUtils=e.get(l.IPathUtils),this.interpreterService=e.get(h.IInterpreterService),this.disposableRegistry=e.get(l.IDisposableRegistry),this.interpreterService.onDidChangeInterpreterInformation(this.onDidChangeInterpreterInformation,this,this.disposableRegistry)}async activate(){if((0,f.useEnvExtension)())return;const e=this.serviceContainer.get(a.IApplicationShell);if(this.useLanguageStatus)this.languageStatus=e.createLanguageStatusItem("python.selectedInterpreter",{language:c.PYTHON_LANGUAGE}),this.languageStatus.severity=s.LanguageStatusSeverity.Information,this.languageStatus.command={title:u.InterpreterQuickPickList.browsePath.openButtonLabel,command:c.Commands.Set_Interpreter},this.disposableRegistry.push(this.languageStatus);else{const[t,n]=[s.StatusBarAlignment.Right,100.09999];this.statusBar=e.createStatusBarItem(t,n,"python.selectedInterpreterDisplay"),this.statusBar.command=c.Commands.Set_Interpreter,this.disposableRegistry.push(this.statusBar),this.statusBar.name=u.Interpreters.selectedPythonInterpreter}}async refresh(e){if(e&&this.workspaceService.getWorkspaceFolder(e)&&(e=this.workspaceService.getWorkspaceFolder(e).uri),!e){const t=this.helper.getActiveWorkspaceUri(e);e=t?t.folderUri:void 0}await this.updateDisplay(e)}registerVisibilityFilter(e){const t=this.serviceContainer.get(l.IDisposableRegistry);this.visibilityFilters.push(e),e.changed&&e.changed(this.updateVisibility,this,t)}onDidChangeInterpreterInformation(e){this.currentlySelectedInterpreterPath===e.path&&this.updateDisplay(this.currentlySelectedWorkspaceFolder).ignoreErrors()}async updateDisplay(e){var t,n,r;if((0,f.useEnvExtension)())return null===(t=this.statusBar)||void 0===t||t.hide(),null===(n=this.languageStatus)||void 0===n||n.dispose(),void(this.languageStatus=void 0);const i=await this.interpreterService.getActiveInterpreter(e);if(!this.currentlySelectedInterpreterDisplay||this.currentlySelectedInterpreterDisplay!==(null==i?void 0:i.detailedDisplayName)||this.currentlySelectedInterpreterPath!==i.path){if(this.currentlySelectedWorkspaceFolder=e,this.statusBar)if(i){this.statusBar.color="",this.statusBar.tooltip=this.pathUtils.getDisplayName(i.path,null==e?void 0:e.fsPath),this.currentlySelectedInterpreterPath!==i.path&&((0,d.traceLog)(s.l10n.t("Python interpreter path: {0}",this.pathUtils.getDisplayName(i.path,null==e?void 0:e.fsPath))),this.currentlySelectedInterpreterPath=i.path);let t=i.detailedDisplayName;t=(null==t?void 0:t.startsWith("Python"))?null===(r=null==t?void 0:t.substring(6))||void 0===r?void 0:r.trim():t,this.statusBar.text=null!=t?t:"",this.statusBar.backgroundColor=void 0,this.currentlySelectedInterpreterDisplay=i.detailedDisplayName}else this.statusBar.tooltip="",this.statusBar.color="",this.statusBar.backgroundColor=new s.ThemeColor("statusBarItem.warningBackground"),this.statusBar.text=`$(alert) ${u.InterpreterQuickPickList.browsePath.openButtonLabel}`,this.currentlySelectedInterpreterDisplay=void 0;else if(this.languageStatus)if(i){this.languageStatus.detail=this.pathUtils.getDisplayName(i.path,null==e?void 0:e.fsPath),this.currentlySelectedInterpreterPath!==i.path&&((0,d.traceLog)(s.l10n.t("Python interpreter path: {0}",this.pathUtils.getDisplayName(i.path,null==e?void 0:e.fsPath))),this.currentlySelectedInterpreterPath=i.path);let t=i.detailedDisplayName;t=t.startsWith("Python")?t.substring(6).trim():t,this.languageStatus.text=t,this.currentlySelectedInterpreterDisplay=i.detailedDisplayName,this.languageStatus.severity=s.LanguageStatusSeverity.Information}else this.languageStatus.severity=s.LanguageStatusSeverity.Warning,this.languageStatus.text=`$(alert) ${u.InterpreterQuickPickList.browsePath.openButtonLabel}`,this.languageStatus.detail=void 0,this.currentlySelectedInterpreterDisplay=void 0;this.statusBarCanBeDisplayed=!0,this.updateVisibility()}}updateVisibility(){this.statusBar&&this.statusBarCanBeDisplayed&&(0===this.visibilityFilters.length||this.visibilityFilters.every((e=>!e.hidden))?this.statusBar.show():this.statusBar.hide())}};t.InterpreterDisplay=v,t.InterpreterDisplay=v=r([(0,o.injectable)(),i(0,(0,o.inject)(p.IServiceContainer))],v)},51188:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterLocatorProgressStatusBarHandler=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(552),l=n(86156),u=n(7855),p=n(14152),d=n(61905),h=n(18162),f=n(29413);let v=class{constructor(e,t,n){this.shell=e,this.disposables=t,this.pyenvs=n,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0},this.isFirstTimeLoadingInterpreters=!0}async activate(){this.pyenvs.onProgress((e=>{if(e.stage===h.ProgressReportStage.discoveryStarted){this.showProgress();const e=this.pyenvs.getRefreshPromise();e&&e.then((()=>this.hideProgress()))}else e.stage===h.ProgressReportStage.discoveryFinished&&this.hideProgress()}),this,this.disposables)}showProgress(){this.deferred||this.createProgress()}hideProgress(){this.deferred&&(this.deferred.resolve(),this.deferred=void 0)}createProgress(){const e={location:s.ProgressLocation.Window,title:`[${this.isFirstTimeLoadingInterpreters?p.Interpreters.discovering:p.Interpreters.refreshing}](command:${c.Commands.Set_Interpreter})`};this.isFirstTimeLoadingInterpreters=!1,this.shell.withProgress(e,(()=>(this.deferred=(0,u.createDeferred)(),this.deferred.promise)))}};t.InterpreterLocatorProgressStatusBarHandler=v,r([(0,d.traceDecoratorVerbose)("Display locator refreshing progress")],v.prototype,"showProgress",null),r([(0,d.traceDecoratorVerbose)("Hide locator refreshing progress")],v.prototype,"hideProgress",null),t.InterpreterLocatorProgressStatusBarHandler=v=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IApplicationShell)),i(1,(0,o.inject)(l.IDisposableRegistry)),i(2,(0,o.inject)(f.IComponentAdapter))],v)},13119:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterHelper=t.sortInterpreters=t.isInterpreterLocatedInWorkspace=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(25943),l=n(9100),u=n(71067),p=n(25297),d=n(29413);function h(e){if(0===e.length)return[];if(1===e.length)return[e[0]];const t=e.slice();return t.sort(((e,t)=>e.version&&t.version?(0,u.compareSemVerLikeVersions)(e.version,t.version):0)),t}t.isInterpreterLocatedInWorkspace=function(e,t){const n=c.FileSystemPaths.withDefaults(),r=n.normCase(e.path),i=n.normCase(t.fsPath);return r.startsWith(i)},t.sortInterpreters=h;let f=class{constructor(e,t){this.serviceContainer=e,this.pyenvs=t}getActiveWorkspaceUri(e){var t;const n=this.serviceContainer.get(a.IWorkspaceService);if(!(((null===(t=n.workspaceFolders)||void 0===t?void 0:t.length)||0)>0))return;if(Array.isArray(n.workspaceFolders)&&1===n.workspaceFolders.length)return{folderUri:n.workspaceFolders[0].uri,configTarget:s.ConfigurationTarget.Workspace};if(e){const t=n.getWorkspaceFolder(e);if(t)return{configTarget:s.ConfigurationTarget.WorkspaceFolder,folderUri:t.uri}}const r=this.serviceContainer.get(a.IDocumentManager);if(r.activeTextEditor){const e=n.getWorkspaceFolder(r.activeTextEditor.document.uri);if(e)return{configTarget:s.ConfigurationTarget.WorkspaceFolder,folderUri:e.uri}}}async getInterpreterInformation(e){return this.pyenvs.getInterpreterInformation(e)}async getInterpreters({resource:e,source:t}={}){return h(await this.pyenvs.getInterpreters(e,t))}async getInterpreterPath(e){const t=await this.getInterpreterInformation(e);return t?t.path:e}async isMacDefaultPythonPath(e){return this.pyenvs.isMacDefaultPythonPath(e)}getInterpreterTypeDisplayName(e){return(0,p.getEnvironmentTypeName)(e)}getBestInterpreter(e){if(!Array.isArray(e)||0===e.length)return;const t=h(e);return t[t.length-1]}};t.InterpreterHelper=f,t.InterpreterHelper=f=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IServiceContainer)),i(1,(0,o.inject)(d.IComponentAdapter))],f)},2386:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterPathCommand=void 0;const o=n(25891),s=n(54980),a=n(552),c=n(86156),l=n(93029),u=n(29413),p=n(36380);let d=class{constructor(e,t){this.interpreterService=e,this.disposables=t,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!1}}async activate(){this.disposables.push((0,l.registerCommand)(a.Commands.GetSelectedInterpreterPath,(e=>this._getSelectedInterpreterPath(e))))}async _getSelectedInterpreterPath(e){var t,n;let r,i;if("workspaceFolder"in e)r=e.workspaceFolder;else if(e[1]){const[,t]=e;r=t}else(0,p.useEnvExtension)()&&"type"in e&&"debugpy"===e.type?Array.isArray(s.workspace.workspaceFolders)&&s.workspace.workspaceFolders.length>0&&(r=s.workspace.workspaceFolders[0].uri.fsPath):r=void 0;try{i=r?s.Uri.file(r):void 0}catch(e){i=void 0}return(null!==(n=null===(t=await this.interpreterService.getActiveInterpreter(i))||void 0===t?void 0:t.path)&&void 0!==n?n:"python").toCommandArgumentForPythonExt()}};t.InterpreterPathCommand=d,t.InterpreterPathCommand=d=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IInterpreterService)),i(1,(0,o.inject)(c.IDisposableRegistry))],d)},48769:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterService=void 0;const c=n(25891),l=s(n(16928)),u=n(54980);n(87295);const p=n(54661),d=n(86156),h=n(9100),f=n(29413),v=n(61905),m=n(552),g=n(65532),y=n(35026),b=n(14152),_=n(51535),E=n(53322),S=n(68989),w=n(7855),P=n(36380),T=n(95241);let C=class{async hasInterpreters(e=async()=>!0){return this.pyenvs.hasInterpreters(e)}triggerRefresh(e,t){return this.pyenvs.triggerRefresh(e,t)}get refreshPromise(){return this.pyenvs.getRefreshPromise()}getRefreshPromise(e){return this.pyenvs.getRefreshPromise(e)}get onDidChangeInterpreter(){return this.didChangeInterpreterEmitter.event}get onDidChangeInterpreterInformation(){return this.didChangeInterpreterInformation.event}get onDidChangeInterpreterConfiguration(){return this.didChangeInterpreterConfigurationEmitter.event}constructor(e,t){this.serviceContainer=e,this.pyenvs=t,this._pythonPathSetting="",this.didChangeInterpreterConfigurationEmitter=new u.EventEmitter,this.didChangeInterpreterEmitter=new u.EventEmitter,this.didChangeInterpreterInformation=new u.EventEmitter,this.activeInterpreterPaths=new Map,this.configService=this.serviceContainer.get(d.IConfigurationService),this.interpreterPathService=this.serviceContainer.get(d.IInterpreterPathService),this.onDidChangeInterpreters=t.onChanged}async refresh(e){const t=this.serviceContainer.get(f.IInterpreterDisplay);await t.refresh(e);const n=this.serviceContainer.get(p.IWorkspaceService).getWorkspaceFolder(e),r=this.configService.getSettings(e).pythonPath,i=this.serviceContainer.get(p.IWorkspaceService).getWorkspaceFolderIdentifier(e);this.activeInterpreterPaths.set(i,{path:r,workspaceFolder:n}),this.ensureEnvironmentContainsPython(r,n).ignoreErrors()}initialize(){const e=this.serviceContainer.get(d.IDisposableRegistry),t=this.serviceContainer.get(p.IDocumentManager),n=this.serviceContainer.get(f.IInterpreterDisplay),r=new class{constructor(e,t,n){this.docManager=e,this.configService=t,this.disposablesReg=n,this.interpreterVisibilityEmitter=new u.EventEmitter,this.changed=this.interpreterVisibilityEmitter.event,this.disposablesReg.push(this.configService.onDidChange((async e=>{(null==e?void 0:e.affectsConfiguration("python.interpreter.infoVisibility"))&&this.interpreterVisibilityEmitter.fire()})))}get hidden(){var e;const t=this.configService.getSettings().interpreter.infoVisibility;if("never"===t)return!0;if("always"===t)return!1;const n=null===(e=this.docManager.activeTextEditor)||void 0===e?void 0:e.document,r=m.PVSC_EXTENSION_ID.split(".")[0];return!(null==n?void 0:n.fileName.endsWith("settings.json"))&&!(null==n?void 0:n.fileName.includes(r))&&(null==n?void 0:n.languageId)!==m.PYTHON_LANGUAGE}}(t,this.configService,e);n.registerVisibilityFilter(r),e.push(this.onDidChangeInterpreters((e=>{var t;const n=null!==(t=e.old)&&void 0!==t?t:e.new;if(n){this.didChangeInterpreterInformation.fire(n);for(const{path:t,workspaceFolder:r}of this.activeInterpreterPaths.values())t!==n.path||e.new||(this.didChangeInterpreterEmitter.fire(null==r?void 0:r.uri),(0,g.reportActiveInterpreterChanged)({path:t,resource:r}))}}))),e.push(t.onDidOpenTextDocument((()=>{r.interpreterVisibilityEmitter.fire()})),t.onDidChangeActiveTextEditor((e=>{r.interpreterVisibilityEmitter.fire(),e&&e.document&&this.refresh(e.document.uri)}))),e.push(this.interpreterPathService.onDidChange((e=>this._onConfigChanged(e.uri))))}getInterpreters(e){return this.pyenvs.getInterpreters(e)}async getAllInterpreters(e){return this.triggerRefresh(void 0,{ifNotTriggerredAlready:!0}).ignoreErrors(),await this.refreshPromise,this.getInterpreters(e)}dispose(){this.didChangeInterpreterEmitter.dispose(),this.didChangeInterpreterInformation.dispose()}async getActiveInterpreter(e){if((0,P.useEnvExtension)())return(0,T.getActiveInterpreterLegacy)(e);const t=this.serviceContainer.get(f.IActivatedEnvironmentLaunch);let n=await t.selectIfLaunchedViaActivatedEnv(!0);if(!n&&(n=this.configService.getSettings(e).pythonPath,l.basename(n)===n)){const t=this.serviceContainer.tryGet(y.IPythonExecutionFactory),r=t?await t.create({resource:e}):void 0,i=r?await r.getExecutablePath().catch((e=>{(0,v.traceError)(e)})):void 0;if(!i)return;n=i}return this.getInterpreterDetails(n)}async getInterpreterDetails(e){return this.pyenvs.getInterpreterDetails(e)}async _onConfigChanged(e){await(0,w.sleep)(1);const t=this.configService.getSettings(e);if(this.didChangeInterpreterConfigurationEmitter.fire(e),""===this._pythonPathSetting||this._pythonPathSetting!==t.pythonPath){this._pythonPathSetting=t.pythonPath,this.didChangeInterpreterEmitter.fire(e);const n=this.serviceContainer.get(p.IWorkspaceService).getWorkspaceFolder(e);(0,g.reportActiveInterpreterChanged)({path:t.pythonPath,resource:n});const r=this.serviceContainer.get(p.IWorkspaceService).getWorkspaceFolderIdentifier(e);this.activeInterpreterPaths.set(r,{path:t.pythonPath,workspaceFolder:n}),this.serviceContainer.get(f.IInterpreterDisplay).refresh().catch((e=>(0,v.traceError)("Python Extension: display.refresh",e))),await this.ensureEnvironmentContainsPython(this._pythonPathSetting,n)}}async ensureEnvironmentContainsPython(e,t){if((0,P.useEnvExtension)())return;const n=this.serviceContainer.get(d.IInstaller);if(!await n.isInstalled(d.Product.python)){(0,_.sendTelemetryEvent)(E.EventName.ENVIRONMENT_WITHOUT_PYTHON_SELECTED);const r=this.serviceContainer.get(p.IApplicationShell),i={location:u.ProgressLocation.Window,title:`[${b.Interpreters.installingPython}](command:${m.Commands.ViewOutput})`};(0,v.traceLog)("Conda envs without Python are known to not work well; fixing conda environment...");const o=n.install(d.Product.python,await this.getInterpreterDetails(e));r.withProgress(i,(()=>o)),o.then((async()=>{await this.getInterpreterDetails(e),this.didChangeInterpreterEmitter.fire(null==t?void 0:t.uri),(0,g.reportActiveInterpreterChanged)({path:e,resource:t})})).ignoreErrors()}}};t.InterpreterService=C,o([(0,S.cache)(-1,!0)],C.prototype,"ensureEnvironmentContainsPython",null),t.InterpreterService=C=o([(0,c.injectable)(),a(0,(0,c.inject)(h.IServiceContainer)),a(1,(0,c.inject)(f.IComponentAdapter))],C)},74702:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=t.registerInterpreterTypes=void 0;const r=n(11925),i=n(15656),o=n(67714),s=n(7318),a=n(97238),c=n(23167),l=n(68681),u=n(35880),p=n(61149),d=n(75763),h=n(97482),f=n(15972),v=n(5330),m=n(37958),g=n(40770),y=n(34614),b=n(29413),_=n(10223),E=n(51188),S=n(13119),w=n(2386),P=n(48769),T=n(65145),C=n(80757),x=n(6876);function I(e){e.addSingleton(r.IExtensionSingleActivationService,u.InstallPythonCommand),e.addSingleton(r.IExtensionSingleActivationService,p.InstallPythonViaTerminal),e.addSingleton(r.IExtensionSingleActivationService,h.SetInterpreterCommand),e.addSingleton(r.IExtensionSingleActivationService,d.ResetInterpreterCommand),e.addSingleton(y.IRecommendedEnvironmentService,v.RecommendedEnvironmentService),e.addBinding(y.IRecommendedEnvironmentService,r.IExtensionActivationService),e.addSingleton(y.IInterpreterQuickPick,h.SetInterpreterCommand),e.addSingleton(r.IExtensionActivationService,x.VirtualEnvironmentPrompt),e.addSingleton(b.IInterpreterService,P.InterpreterService),e.addSingleton(b.IInterpreterDisplay,_.InterpreterDisplay),e.addBinding(b.IInterpreterDisplay,r.IExtensionSingleActivationService),e.addSingleton(y.IPythonPathUpdaterServiceFactory,g.PythonPathUpdaterServiceFactory),e.addSingleton(y.IPythonPathUpdaterServiceManager,m.PythonPathUpdaterService),e.addSingleton(y.IInterpreterSelector,f.InterpreterSelector),e.addSingleton(b.IInterpreterHelper,S.InterpreterHelper),e.addSingleton(y.IInterpreterComparer,l.EnvironmentTypeComparer),e.addSingleton(r.IExtensionSingleActivationService,E.InterpreterLocatorProgressStatusBarHandler),e.addSingleton(c.IInterpreterAutoSelectionService,s.InterpreterAutoSelectionService),e.addSingleton(r.IExtensionActivationService,C.CondaInheritEnvPrompt),e.addSingleton(b.IActivatedEnvironmentLaunch,T.ActivatedEnvironmentLaunch)}t.registerInterpreterTypes=I,t.registerTypes=function(e){I(e),e.addSingleton(c.IInterpreterAutoSelectionProxyService,a.InterpreterAutoSelectionProxyService),e.addSingleton(i.EnvironmentActivationService,i.EnvironmentActivationService),e.addSingleton(o.IEnvironmentActivationService,i.EnvironmentActivationService),e.addSingleton(r.IExtensionSingleActivationService,w.InterpreterPathCommand)}},65145:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActivatedEnvironmentLaunch=void 0;const c=n(25891),l=n(54980),u=s(n(16928)),p=n(54661),d=n(35026),h=n(7855),f=n(68989),v=n(14152),m=n(61905),g=n(95885),y=n(51535),b=n(53322),_=n(34614),E=n(29413);let S=class{constructor(e,t,n,r,i,o=!1){this.workspaceService=e,this.appShell=t,this.pythonPathUpdaterService=n,this.interpreterService=r,this.processServiceFactory=i,this.wasSelected=o,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0}}async _promptIfApplicable(){const e=w();if(!e)return;const t=await this.interpreterService.getInterpreterDetails(e);if("base"!==(null==t?void 0:t.envName))return;const n=await g.Conda.getConda();if(!n)return void(0,m.traceWarn)("Conda not found even though activated environment vars are set");const r=await this.processServiceFactory.create();(await r.shellExec(`${n.shellCommand} config --get auto_activate_base`).catch((e=>((0,m.traceError)(e),{stdout:""})))).stdout.trim().toLowerCase().endsWith("false")&&await this.promptAndUpdate(e)}async promptAndUpdate(e){this.wasSelected=!0;const t=[v.Common.bannerLabelYes,v.Common.bannerLabelNo],n=await this.appShell.showInformationMessage(v.Interpreters.activatedCondaEnvLaunch,...t);(0,y.sendTelemetryEvent)(b.EventName.ACTIVATED_CONDA_ENV_LAUNCH,void 0,{selection:n?["Yes","No"][t.indexOf(n)]:void 0}),n&&n===t[0]&&await this.setInterpeterInStorage(e)}async selectIfLaunchedViaActivatedEnv(e=!1){return this.wasSelected?this.inMemorySelection:this._selectIfLaunchedViaActivatedEnv(e)}async _selectIfLaunchedViaActivatedEnv(e=!1){if("1"!==process.env.VSCODE_CLI)return void(0,m.traceLog)("Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'");(0,m.traceVerbose)("VS Code was not launched from the command line");const t=await this.getPrefixOfSelectedActivatedEnv();if(t)return this.wasSelected=!0,this.inMemorySelection=t,(0,m.traceLog)(`VS Code was launched from an activated environment: '${u.basename(t)}', selecting it as the interpreter for workspace.`),e?this.setInterpeterInStorage(t).ignoreErrors():(await this.setInterpeterInStorage(t),await(0,h.sleep)(1)),this.inMemorySelection=void 0,t;this._promptIfApplicable().ignoreErrors()}async setInterpeterInStorage(e){const{workspaceFolders:t}=this.workspaceService;t&&0!==t.length?await this.pythonPathUpdaterService.updatePythonPath(e,l.ConfigurationTarget.WorkspaceFolder,"load",t[0].uri):await this.pythonPathUpdaterService.updatePythonPath(e,l.ConfigurationTarget.Global,"load")}async getPrefixOfSelectedActivatedEnv(){const e=process.env.VIRTUAL_ENV;if(void 0!==e&&e.length>0)return e;const t=w();if(!t)return;const n=await this.interpreterService.getInterpreterDetails(t);return"base"!==(null==n?void 0:n.envName)||void 0!==process.env.CONDA_AUTO_ACTIVATE_BASE&&"false"===process.env.CONDA_AUTO_ACTIVATE_BASE.toLowerCase()?t:void 0}};function w(){const e=process.env.CONDA_PREFIX;if(e&&e.length>0){const t=process.env.CONDA_SHLVL;if(void 0!==t&&t.length>0&&t>"0")return e}}t.ActivatedEnvironmentLaunch=S,o([(0,f.cache)(-1,!0)],S.prototype,"_promptIfApplicable",null),o([(0,f.cache)(-1,!0)],S.prototype,"_selectIfLaunchedViaActivatedEnv",null),t.ActivatedEnvironmentLaunch=S=o([(0,c.injectable)(),a(0,(0,c.inject)(p.IWorkspaceService)),a(1,(0,c.inject)(p.IApplicationShell)),a(2,(0,c.inject)(_.IPythonPathUpdaterServiceManager)),a(3,(0,c.inject)(E.IInterpreterService)),a(4,(0,c.inject)(d.IProcessServiceFactory))],S)},80757:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaInheritEnvPrompt=t.condaInheritEnvPromptKey=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(22408),l=n(86156),u=n(14152),p=n(61905),d=n(25297),h=n(51535),f=n(53322),v=n(29413);t.condaInheritEnvPromptKey="CONDA_INHERIT_ENV_PROMPT_KEY";let m=class{constructor(e,t,n,r,i,o,s=!1){this.interpreterService=e,this.workspaceService=t,this.appShell=n,this.persistentStateFactory=r,this.platformService=i,this.appEnvironment=o,this.hasPromptBeenShownInCurrentSession=s,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0}}async activate(e){this.initializeInBackground(e).ignoreErrors()}async initializeInBackground(e){await this.shouldShowPrompt(e)&&await this.promptAndUpdate()}async promptAndUpdate(){const e=this.persistentStateFactory.createGlobalPersistentState(t.condaInheritEnvPromptKey,!0);if(!e.value)return;const n=[u.Common.allow,u.Common.close],r=await this.appShell.showInformationMessage(u.Interpreters.condaInheritEnvMessage,...n);(0,h.sendTelemetryEvent)(f.EventName.CONDA_INHERIT_ENV_PROMPT,void 0,{selection:r?["Allow","Close"][n.indexOf(r)]:void 0}),r&&(r===n[0]?await this.workspaceService.getConfiguration("terminal").update("integrated.inheritEnv",!1,s.ConfigurationTarget.Global):r===n[1]&&await e.updateValue(!1))}async shouldShowPrompt(e){if(this.hasPromptBeenShownInCurrentSession)return!1;if(this.appEnvironment.remoteName)return!1;if(this.platformService.isWindows)return!1;const t=await this.interpreterService.getActiveInterpreter(e);if(!t||t.envType!==d.EnvironmentType.Conda)return!1;const n=this.workspaceService.getConfiguration("terminal",e).inspect("integrated.inheritEnv");return n?void 0===n.globalValue&&void 0===n.workspaceValue&&void 0===n.workspaceFolderValue&&(this.hasPromptBeenShownInCurrentSession=!0,!0):((0,p.traceError)("WorkspaceConfiguration.inspect returns `undefined` for setting `terminal.integrated.inheritEnv`"),!1)}};t.CondaInheritEnvPrompt=m,r([(0,p.traceDecoratorError)("Failed to intialize conda inherit env prompt")],m.prototype,"initializeInBackground",null),r([(0,p.traceDecoratorError)("Failed to display conda inherit env prompt")],m.prototype,"promptAndUpdate",null),r([(0,p.traceDecoratorError)("Failed to check whether to display prompt for conda inherit env setting")],m.prototype,"shouldShowPrompt",null),t.CondaInheritEnvPrompt=m=r([(0,o.injectable)(),i(0,(0,o.inject)(v.IInterpreterService)),i(1,(0,o.inject)(a.IWorkspaceService)),i(2,(0,o.inject)(a.IApplicationShell)),i(3,(0,o.inject)(l.IPersistentStateFactory)),i(4,(0,o.inject)(c.IPlatformService)),i(5,(0,o.inject)(a.IApplicationEnvironment))],m)},6876:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualEnvironmentPrompt=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(86156),l=n(14152),u=n(61905),p=n(50499),d=n(51535),h=n(53322),f=n(34614),v=n(29413);let m=class{constructor(e,t,n,r,i,o,s){this.persistentStateFactory=e,this.helper=t,this.pythonPathUpdaterService=n,this.disposableRegistry=r,this.appShell=i,this.pyenvs=o,this.interpreterService=s,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0}}async activate(e){const t=this.pyenvs.onDidCreate(e,(()=>this.handleNewEnvironment(e)));this.disposableRegistry.push(t)}async handleNewEnvironment(e){if((0,p.isCreatingEnvironment)())return;const t=await this.pyenvs.getWorkspaceVirtualEnvInterpreters(e),n=Array.isArray(t)&&t.length>0?this.helper.getBestInterpreter(t):void 0;if(!n)return;const r=await this.interpreterService.getActiveInterpreter(e);(null==r?void 0:r.id)!==n.id?await this.notifyUser(n,e):(0,u.traceVerbose)("New environment has already been selected")}async notifyUser(e,t){const n=this.persistentStateFactory.createWorkspacePersistentState("MESSAGE_KEY_FOR_VIRTUAL_ENV",!0);if(!n.value)return;const r=[l.Common.bannerLabelYes,l.Common.bannerLabelNo,l.Common.doNotShowAgain],i=await this.appShell.showInformationMessage(l.Interpreters.environmentPromptMessage,...r);(0,d.sendTelemetryEvent)(h.EventName.PYTHON_INTERPRETER_ACTIVATE_ENVIRONMENT_PROMPT,void 0,{selection:i?["Yes","No","Ignore"][r.indexOf(i)]:void 0}),i&&(i===r[0]?await this.pythonPathUpdaterService.updatePythonPath(e.path,s.ConfigurationTarget.WorkspaceFolder,"ui",t):i===r[2]&&await n.updateValue(!1))}};t.VirtualEnvironmentPrompt=m,r([(0,u.traceDecoratorError)("Error in event handler for detection of new environment")],m.prototype,"handleNewEnvironment",null),t.VirtualEnvironmentPrompt=m=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IPersistentStateFactory)),i(1,(0,o.inject)(v.IInterpreterHelper)),i(2,(0,o.inject)(f.IPythonPathUpdaterServiceManager)),i(3,(0,o.inject)(c.IDisposableRegistry)),i(4,(0,o.inject)(a.IApplicationShell)),i(5,(0,o.inject)(v.IComponentAdapter)),i(6,(0,o.inject)(v.IInterpreterService))],m)},92938:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceContainer=void 0;const i=n(24434),o=n(25891),s=n(61905);try{(0,o.decorate)((0,o.injectable)(),i.EventEmitter)}catch(e){(0,s.traceWarn)("Failed to decorate EventEmitter for DI (possibly already decorated by another Extension)",e)}let a=class{constructor(e){this.container=e}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch(e){}}};t.ServiceContainer=a,t.ServiceContainer=a=r([(0,o.injectable)()],a)},38927:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceManager=void 0;const i=n(25891);let o=class{constructor(e){this.container=e}add(e,t,n,r){n?this.container.bind(e).to(t).whenTargetNamed(n):this.container.bind(e).to(t),r&&r.forEach((t=>{this.addBinding(e,t)}))}addFactory(e,t){this.container.bind(e).toFactory(t)}addBinding(e,t){this.container.bind(t).toService(e)}addSingleton(e,t,n,r){n?this.container.bind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.bind(e).to(t).inSingletonScope(),r&&r.forEach((t=>{this.addBinding(e,t)}))}addSingletonInstance(e,t,n){n?this.container.bind(e).toConstantValue(t).whenTargetNamed(n):this.container.bind(e).toConstantValue(t)}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch(e){}}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}rebind(e,t,n){n?this.container.rebind(e).to(t).whenTargetNamed(n):this.container.rebind(e).to(t)}rebindSingleton(e,t,n){n?this.container.rebind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.rebind(e).to(t).inSingletonScope()}rebindInstance(e,t,n){n?this.container.rebind(e).toConstantValue(t).whenTargetNamed(n):this.container.rebind(e).toConstantValue(t)}dispose(){this.container.unbindAll(),this.container.unload()}};t.ServiceManager=o,t.ServiceManager=o=r([(0,i.injectable)()],o)},9100:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IServiceContainer=t.IServiceManager=void 0,t.IServiceManager=Symbol("IServiceManager"),t.IServiceContainer=Symbol("IServiceContainer")},46003:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterExtensionDependencyManager=void 0;const o=n(25891),s=n(552),a=n(86156);let c=class{constructor(e){this.extensions=e}get isJupyterExtensionInstalled(){return void 0!==this.extensions.getExtension(s.JUPYTER_EXTENSION_ID)}};t.JupyterExtensionDependencyManager=c,t.JupyterExtensionDependencyManager=c=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IExtensions))],c)},93616:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterExtensionPythonEnvironments=t.JupyterExtensionIntegration=void 0;const o=n(25891),s=n(16928),a=n(54980),c=n(54661),l=n(552),u=n(86156),p=n(67714),d=n(34614),h=n(29413),f=n(19419),v=n(73354),m=n(51271);let g=class{constructor(e,t,n,r,i,o,s,a,c,l){this.extensions=e,this.interpreterSelector=t,this.envActivation=n,this.globalState=r,this.interpreterDisplay=i,this.workspaceService=o,this.condaService=s,this.contextManager=a,this.interpreterService=c,this.preferredEnvironmentService=l}registerEnvApi(e){this.environmentApi=e}registerApi(e){this.contextManager.setContext(f.ExtensionContextKey.IsJupyterInstalled,!0),this.workspaceService.isTrusted?e.registerPythonApi({getActivatedEnvironmentVariables:async(e,t,n)=>{const r=await this.interpreterService.getInterpreterDetails(t.path);return this.envActivation.getActivatedEnvironmentVariables(e,r,n)},getSuggestions:async e=>this.interpreterSelector.getAllSuggestions(e),getKnownSuggestions:e=>this.interpreterSelector.getSuggestions(e),getDebuggerPath:async()=>(0,s.dirname)(await(0,v.getDebugpyPath)()),getInterpreterPathSelectedForJupyterServer:()=>this.globalState.get("INTERPRETER_PATH_SELECTED_FOR_JUPYTER_SERVER"),registerInterpreterStatusFilter:this.interpreterDisplay.registerVisibilityFilter.bind(this.interpreterDisplay),getCondaFile:()=>this.condaService.getCondaFile(),getCondaVersion:()=>this.condaService.getCondaVersion(),registerJupyterPythonPathFunction:e=>this.registerJupyterPythonPathFunction(e),getRecommededEnvironment:async e=>{if(this.environmentApi)return this.preferredEnvironmentService.getRecommededEnvironment(e)}}):this.workspaceService.onDidGrantWorkspaceTrust((()=>this.registerApi(e)))}async integrateWithJupyterExtension(){const e=await this.getExtensionApi();e&&this.registerApi(e)}async getExtensionApi(){if(!this.pylanceExtension){const e=this.extensions.getExtension(l.PYLANCE_EXTENSION_ID);e&&!e.isActive&&await e.activate(),this.pylanceExtension=e}if(this.jupyterExtension)return this.jupyterExtension.exports;{const e=this.extensions.getExtension(l.JUPYTER_EXTENSION_ID);if(!e)return;if(await e.activate(),e.isActive)return this.jupyterExtension=e,this.jupyterExtension.exports}}getPylanceApi(){var e;const t=null===(e=this.pylanceExtension)||void 0===e?void 0:e.exports;return t&&t.notebook&&t.client&&t.client.isEnabled()?t:void 0}registerJupyterPythonPathFunction(e){const t=this.getPylanceApi();t&&t.notebook.registerJupyterPythonPathFunction(e)}};t.JupyterExtensionIntegration=g,t.JupyterExtensionIntegration=g=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IExtensions)),i(1,(0,o.inject)(d.IInterpreterSelector)),i(2,(0,o.inject)(p.IEnvironmentActivationService)),i(3,(0,o.inject)(u.IMemento)),i(3,(0,o.named)(u.GLOBAL_MEMENTO)),i(4,(0,o.inject)(h.IInterpreterDisplay)),i(5,(0,o.inject)(c.IWorkspaceService)),i(6,(0,o.inject)(h.ICondaService)),i(7,(0,o.inject)(c.IContextKeyManager)),i(8,(0,o.inject)(h.IInterpreterService)),i(9,(0,o.inject)(d.IRecommendedEnvironmentService))],g);let y=class extends m.DisposableBase{constructor(e){super(),this.extensions=e,this._onDidChangePythonEnvironment=this._register(new a.EventEmitter),this.onDidChangePythonEnvironment=this._onDidChangePythonEnvironment.event}getPythonEnvironment(e){if(!(t=e).fsPath.endsWith(".ipynb")&&!a.workspace.notebookDocuments.some((e=>e.uri.toString()===t.toString())))return;var t;const n=this.getJupyterApi();return(null==n?void 0:n.getPythonEnvironment)?n.getPythonEnvironment(e):void 0}getJupyterApi(){if(!this.jupyterExtension){const e=this.extensions.getExtension(l.JUPYTER_EXTENSION_ID);if(!e)return;if(!e.isActive)return void e.activate().then((()=>{this.hookupOnDidChangePythonEnvironment(e.exports)}));this.hookupOnDidChangePythonEnvironment(e.exports)}return this.jupyterExtension}hookupOnDidChangePythonEnvironment(e){this.jupyterExtension=e,e.onDidChangePythonEnvironment&&this._register(e.onDidChangePythonEnvironment(this._onDidChangePythonEnvironment.fire,this._onDidChangePythonEnvironment))}};t.JupyterExtensionPythonEnvironments=y,t.JupyterExtensionPythonEnvironments=y=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IExtensions))],y)},15555:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RequireJupyterPrompt=void 0;const o=n(25891),s=n(54661),a=n(14152),c=n(552),l=n(86156),u=n(51535),p=n(53322);let d=class{constructor(e,t,n){this.appShell=e,this.commandManager=t,this.disposables=n,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0}}async activate(){this.disposables.push(this.commandManager.registerCommand(c.Commands.InstallJupyter,(()=>this._showPrompt())))}async _showPrompt(){const e=[a.Common.bannerLabelYes,a.Common.bannerLabelNo],t=await this.appShell.showInformationMessage(a.Interpreters.requireJupyter,...e);(0,u.sendTelemetryEvent)(p.EventName.REQUIRE_JUPYTER_PROMPT,void 0,{selection:t?["Yes","No"][e.indexOf(t)]:void 0}),t&&t===e[0]&&await this.commandManager.executeCommand("workbench.extensions.installExtension",c.JUPYTER_EXTENSION_ID,void 0)}};t.RequireJupyterPrompt=d,t.RequireJupyterPrompt=d=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IApplicationShell)),i(1,(0,o.inject)(s.ICommandManager)),i(2,(0,o.inject)(l.IDisposableRegistry))],d)},85602:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguageConfiguration=void 0;const r=n(54980),i=n(5406);t.getLanguageConfiguration=function(){return{onEnterRules:[{beforeText:(0,i.verboseRegExp)("\n                    ^\n                    (?! \\s+ \\\\ )\n                    [^#\n]+\n                    \\\\\n                    $\n                "),action:{indentAction:r.IndentAction.Indent}},{beforeText:/^\s*#.*/,afterText:/.+$/,action:{indentAction:r.IndentAction.None,appendText:"# "}},{beforeText:(0,i.verboseRegExp)("\n                    ^\n                    \\s*\n                    (?:\n                        (?:\n                            (?:\n                                class |\n                                def |\n                                async \\s+ def |\n                                except |\n                                for |\n                                async \\s+ for |\n                                if |\n                                elif |\n                                while |\n                                with |\n                                async \\s+ with |\n                                match |\n                                case\n                            )\n                            \\b .*\n                        ) |\n                        else |\n                        try |\n                        finally\n                    )\n                    \\s*\n                    [:]\n                    \\s*\n                    (?: [#] .* )?\n                    $\n                "),action:{indentAction:r.IndentAction.Indent}},{beforeText:(0,i.verboseRegExp)("\n                    ^\n                    (?:\n                        (?:\n                            \\s*\n                            (?:\n                                pass\n                            )\n                        ) |\n                        (?:\n                            \\s+\n                            (?:\n                                raise |\n                                break |\n                                continue\n                            )\n                        )\n                    )\n                    \\s*\n                    (?: [#] .* )?\n                    $\n                "),action:{indentAction:r.IndentAction.Outdent}}]}}},51182:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JediLSExtensionManager=void 0;const r=n(82275),i=n(66486),o=n(1096),s=n(94796),a=n(61905);t.JediLSExtensionManager=class{constructor(e,t,n,a,c,l,u,p,d){this.analysisOptions=new r.JediLanguageServerAnalysisOptions(p,t,c,a),this.clientFactory=new i.JediLanguageClientFactory(u),this.serverProxy=new o.JediLanguageServerProxy(this.clientFactory),this.serverManager=new s.JediLanguageServerManager(e,this.analysisOptions,this.serverProxy,d)}dispose(){this.serverManager.disconnect(),this.serverManager.dispose(),this.serverProxy.dispose(),this.analysisOptions.dispose()}async startLanguageServer(e,t){await this.serverManager.start(e,t),this.serverManager.connect()}async stopLanguageServer(){this.serverManager.disconnect(),await this.serverProxy.stop()}canStartLanguageServer(e){return!!e||((0,a.traceError)("Unable to start Jedi language server as a valid interpreter is not selected"),!1)}languageServerNotAvailable(){return Promise.resolve()}}},15198:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoneLSExtensionManager=void 0,t.NoneLSExtensionManager=class{dispose(){}startLanguageServer(){return Promise.resolve()}stopLanguageServer(){return Promise.resolve()}canStartLanguageServer(){return!0}languageServerNotAvailable(){return Promise.resolve()}}},90722:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PylanceLSExtensionManager=void 0;const r=n(52111),i=n(44501),o=n(55856),s=n(60690),a=n(52462),c=n(552),l=n(14152),u=n(61905);t.PylanceLSExtensionManager=class{constructor(e,t,n,r,c,l,u,p,d,h,f,v){this.workspaceService=r,this.configurationService=c,this.commandManager=d,this.extensions=f,this.applicationShell=v,this.analysisOptions=new i.NodeLanguageServerAnalysisOptions(t,r),this.clientFactory=new o.NodeLanguageClientFactory(h,f),this.serverProxy=new s.NodeLanguageServerProxy(this.clientFactory,n,l,p,r,f),this.serverManager=new a.NodeLanguageServerManager(e,this.analysisOptions,this.serverProxy,d,f)}dispose(){this.serverManager.disconnect(),this.serverManager.dispose(),this.serverProxy.dispose(),this.analysisOptions.dispose()}async startLanguageServer(e,t){await this.serverManager.start(e,t),this.serverManager.connect()}async stopLanguageServer(){this.serverManager.disconnect(),await this.serverProxy.stop()}canStartLanguageServer(){return!!this.extensions.getExtension(c.PYLANCE_EXTENSION_ID)}async languageServerNotAvailable(){await(0,r.promptForPylanceInstall)(this.applicationShell,this.commandManager,this.workspaceService,this.configurationService),(0,u.traceLog)(l.Pylance.pylanceNotInstalledMessage)}}},14764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ILanguageServerWatcher=void 0,t.ILanguageServerWatcher=Symbol("ILanguageServerWatcher")},68597:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerWatcher=void 0;const c=s(n(16928)),l=n(25891),u=n(54980),p=n(52111),d=n(11925),h=n(54661),f=n(22408),v=n(86156),m=n(14152),g=n(53694),y=n(29413),b=n(9100),_=n(61905),E=n(51182),S=n(15198),w=n(90722),P=n(51535),T=n(53322);let C=class{constructor(e,t,n,r,i,o,s,a,c,l,u,p,d,h){this.serviceContainer=e,this.lsOutputChannel=t,this.configurationService=n,this.experimentService=r,this.interpreterHelper=i,this.interpreterPathService=o,this.interpreterService=s,this.environmentService=a,this.workspaceService=c,this.commandManager=l,this.fileSystem=u,this.extensions=p,this.applicationShell=d,this.disposables=h,this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!0},this.registered=!1,this.workspaceInterpreters=new Map,this.workspaceLanguageServers=new Map,this.languageServerType=this.configurationService.getSettings().languageServer}async activate(e,t){this.register(),await this.startLanguageServer(this.languageServerType,e,t)}async startLanguageServer(e,t,n){await this.startAndGetLanguageServer(e,t,n)}register(){this.registered||(this.registered=!0,this.disposables.push(this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this))),this.disposables.push(this.workspaceService.onDidChangeWorkspaceFolders(this.onDidChangeWorkspaceFolders.bind(this))),this.disposables.push(this.interpreterService.onDidChangeInterpreterInformation(this.onDidChangeInterpreterInformation,this)),this.workspaceService.isTrusted&&this.disposables.push(this.interpreterPathService.onDidChange(this.onDidChangeInterpreter.bind(this))),this.disposables.push(this.extensions.onDidChange((async()=>{await this.extensionsChangeHandler()}))),this.disposables.push(new p.LanguageServerChangeHandler(this.languageServerType,this.extensions,this.applicationShell,this.commandManager,this.workspaceService,this.configurationService)))}async startAndGetLanguageServer(e,t,n){var r,i,o;const s=this.getWorkspaceUri(t),a=this.workspaceInterpreters.get(s.fsPath),c=await(null===(r=this.interpreterService)||void 0===r?void 0:r.getActiveInterpreter(t));a&&c!==a&&await this.stopLanguageServer(s);let l=e;c&&(null!==(o=null===(i=c.version)||void 0===i?void 0:i.major)&&void 0!==o?o:0)<3&&(l===d.LanguageServerType.Jedi?l=d.LanguageServerType.None:this.getCurrentLanguageServerTypeIsDefault()&&(l=d.LanguageServerType.Node)),this.workspaceService.isTrusted||l===d.LanguageServerType.Node||l===d.LanguageServerType.None||((0,_.traceLog)(m.LanguageService.untrustedWorkspaceMessage),l=d.LanguageServerType.None);const u=this.getWorkspaceKey(t,l),p=this.workspaceLanguageServers.get(u);if((l===d.LanguageServerType.Node||l===d.LanguageServerType.None)&&p)return x(l,s),p;const h=this.createLanguageServer(l);return this.workspaceLanguageServers.set(u,h),h.canStartLanguageServer(c)?(n&&(0,P.sendTelemetryEvent)(T.EventName.LANGUAGE_SERVER_TRIGGER_TIME,n.elapsedTime,{triggerTime:n.elapsedTime}),await h.startLanguageServer(s,c),x(e,s),this.languageServerType=e,this.workspaceInterpreters.set(s.fsPath,c)):await h.languageServerNotAvailable(),h}async restartLanguageServers(){this.workspaceLanguageServers.forEach((async(e,t)=>{(0,P.sendTelemetryEvent)(T.EventName.LANGUAGE_SERVER_RESTART,void 0,{reason:"notebooksExperiment"});const n=u.Uri.parse(t);await this.stopLanguageServer(n),await this.startLanguageServer(this.languageServerType,n)}))}async get(e){const t=this.getWorkspaceKey(e,this.languageServerType);let n=this.workspaceLanguageServers.get(t);return n||(n=await this.startAndGetLanguageServer(this.languageServerType,e)),Promise.resolve(n)}async stopLanguageServer(e){const t=this.getWorkspaceKey(e,this.languageServerType),n=this.workspaceLanguageServers.get(t);n&&(await n.stopLanguageServer(),n.dispose(),this.workspaceLanguageServers.delete(t))}createLanguageServer(e){let t;switch(e){case d.LanguageServerType.Jedi:t=new E.JediLSExtensionManager(this.serviceContainer,this.lsOutputChannel,this.experimentService,this.workspaceService,this.configurationService,this.interpreterPathService,this.interpreterService,this.environmentService,this.commandManager);break;case d.LanguageServerType.Node:t=new w.PylanceLSExtensionManager(this.serviceContainer,this.lsOutputChannel,this.experimentService,this.workspaceService,this.configurationService,this.interpreterPathService,this.interpreterService,this.environmentService,this.commandManager,this.fileSystem,this.extensions,this.applicationShell);break;case d.LanguageServerType.None:default:t=new S.NoneLSExtensionManager}return this.disposables.push({dispose:async()=>{await t.stopLanguageServer(),t.dispose()}}),t}async refreshLanguageServer(e,t){const n=this.getWorkspaceUri(e),r=this.configurationService.getSettings(n).languageServer;(r!==this.languageServerType||t)&&(await this.stopLanguageServer(e),await this.startLanguageServer(r,n))}getCurrentLanguageServerTypeIsDefault(){return this.configurationService.getSettings().languageServerIsDefault}async onDidChangeConfiguration(e){var t,n;(null!==(n=null===(t=this.workspaceService.workspaceFolders)||void 0===t?void 0:t.map((e=>e.uri)))&&void 0!==n?n:[]).forEach((async t=>{e.affectsConfiguration("python.languageServer",t)?await this.refreshLanguageServer(t):e.affectsConfiguration("python.analysis.pylanceLspClientEnabled",t)&&await this.refreshLanguageServer(t,!0)}))}async onDidChangeInterpreter(e){return this.languageServerType===d.LanguageServerType.Node?Promise.resolve():this.activate(e.uri)}async onDidChangeInterpreterInformation(e){if(!e.envPath||""===e.envPath)return;const t=this.workspaceInterpreters.entries();let n=t.next(),r=n.done||!1;for(;!r;){const[i,o]=n.value,s=u.Uri.parse(i);e.envPath===(null==o?void 0:o.envPath)&&e.path!==(null==o?void 0:o.path)?(await this.activate(s),r=!0):(n=t.next(),r=n.done||!1)}}async extensionsChangeHandler(){this.configurationService.getSettings().languageServer!==this.languageServerType&&await this.refreshLanguageServer()}async onDidChangeWorkspaceFolders(e){if(e.removed.length&&this.languageServerType===d.LanguageServerType.Jedi)for(const t of e.removed)await this.stopLanguageServer(t.uri)}getWorkspaceUri(e){var t,n;let r;return r=e?null===(t=this.workspaceService.getWorkspaceFolder(e))||void 0===t?void 0:t.uri:null===(n=this.interpreterHelper.getActiveWorkspaceUri(e))||void 0===n?void 0:n.folderUri,null!=r?r:u.Uri.parse("default")}getWorkspaceKey(e,t){switch(t){case d.LanguageServerType.Node:return"Pylance";case d.LanguageServerType.None:return"None";default:return this.getWorkspaceUri(e).fsPath}}};function x(e,t){let n;const r=c.basename(t.fsPath);switch(e){case d.LanguageServerType.Jedi:n=u.l10n.t("Starting Jedi language server for {0}.",r);break;case d.LanguageServerType.Node:n=m.LanguageService.startingPylance;break;case d.LanguageServerType.None:n=m.LanguageService.startingNone;break;default:throw new Error(`Unknown language server type: ${e}`)}(0,_.traceLog)(n)}t.LanguageServerWatcher=C,t.LanguageServerWatcher=C=o([(0,l.injectable)(),a(0,(0,l.inject)(b.IServiceContainer)),a(1,(0,l.inject)(d.ILanguageServerOutputChannel)),a(2,(0,l.inject)(v.IConfigurationService)),a(3,(0,l.inject)(v.IExperimentService)),a(4,(0,l.inject)(y.IInterpreterHelper)),a(5,(0,l.inject)(v.IInterpreterPathService)),a(6,(0,l.inject)(y.IInterpreterService)),a(7,(0,l.inject)(g.IEnvironmentVariablesProvider)),a(8,(0,l.inject)(h.IWorkspaceService)),a(9,(0,l.inject)(h.ICommandManager)),a(10,(0,l.inject)(f.IFileSystem)),a(11,(0,l.inject)(v.IExtensions)),a(12,(0,l.inject)(h.IApplicationShell)),a(13,(0,l.inject)(v.IDisposableRegistry))],C)},53495:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FileLogger=void 0;const s=o(n(39023)),a=n(22985);function c(e,...t){return e?`[${e.toUpperCase()} ${(0,a.getTimeForLogging)()}]: ${s.format(...t)}\r\n`:`${s.format(...t)}\r\n`}t.FileLogger=class{constructor(e){this.stream=e}traceLog(...e){this.stream.write(c(void 0,...e))}traceError(...e){this.stream.write(c("error",...e))}traceWarn(...e){this.stream.write(c("warn",...e))}traceInfo(...e){this.stream.write(c("info",...e))}traceVerbose(...e){this.stream.write(c("debug",...e))}dispose(){try{this.stream.close()}catch(e){}}}},61905:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logTo=t.traceDecoratorWarn=t.traceDecoratorInfo=t.traceDecoratorError=t.traceDecoratorVerbose=t.traceVerbose=t.traceInfo=t.traceWarn=t.traceError=t.traceLog=t.initializeFileLogging=t.registerLogger=void 0;const r=n(21605),i=n(24364),o=n(51080),s=n(51535),a=n(53495),c=n(580),l=n(22985),u=c.TraceOptions.Arguments|c.TraceOptions.ReturnValue;let p=[];function d(e){return p.push(e),{dispose:()=>{p=p.filter((t=>t!==e))}}}function h(...e){p.forEach((t=>t.traceError(...e)))}function f(...e){p.forEach((t=>t.traceWarn(...e)))}function v(...e){p.forEach((t=>t.traceInfo(...e)))}function m(...e){p.forEach((t=>t.traceVerbose(...e)))}function g(e){return function(t,n,r){const s=r.value;return r.value=function(...n){const r={kind:"Class",name:t&&t.constructor?t.constructor.name:"",args:n},a=this;return function(e){const t=new o.StopWatch;try{const r=s.apply(a,n);return(0,i.isPromise)(r)?r.then((n=>(e({elapsed:t.elapsedTime,returnValue:n}),n))).catch((n=>{e({elapsed:t.elapsedTime,err:n})})):e({elapsed:t.elapsedTime,returnValue:r}),r}catch(n){throw e({elapsed:t.elapsedTime,err:n}),n}}((t=>e(r,t)))},r}}function y(e){return g(((t,n)=>function(e,t,n){const r=function(e,t,n){n=function(e){let{kind:t,name:n,args:r}=e;return t&&""!==t||(t="Function"),n&&""!==n||(n="<anon>"),r||(r=[]),{kind:t,name:n,args:r}}(n);const r=[e.message];return r.push(`${n.kind} name = ${n.name}`.trim(),`completed in ${t.elapsed}ms`,`has a ${t.returnValue?"truthy":"falsy"} return value`),(e.opts&c.TraceOptions.Arguments)===c.TraceOptions.Arguments&&r.push((0,l.argsToLogString)(n.args)),(e.opts&c.TraceOptions.ReturnValue)===c.TraceOptions.ReturnValue&&r.push((0,l.returnValueToLogString)(t.returnValue)),r.join(", ")}(e,t,n);void 0===t.err?(!e.level||e.level>c.LogLevel.Error)&&b(c.LogLevel.Info,[r]):(b(c.LogLevel.Error,[r,t.err]),(0,s.sendTelemetryEvent)("ERROR",void 0,void 0,t.err))}(e,n,t)))}function b(e,...t){switch(e){case c.LogLevel.Error:h(...t);break;case c.LogLevel.Warning:f(...t);break;case c.LogLevel.Info:v(...t);break;case c.LogLevel.Debug:m(...t)}}t.registerLogger=d,t.initializeFileLogging=function(e){if(process.env.VSC_PYTHON_LOG_FILE){const t=new a.FileLogger((0,r.createWriteStream)(process.env.VSC_PYTHON_LOG_FILE));e.push(t),e.push(d(t))}},t.traceLog=function(...e){p.forEach((t=>t.traceLog(...e)))},t.traceError=h,t.traceWarn=f,t.traceInfo=v,t.traceVerbose=m,t.traceDecoratorVerbose=function(e,t=u){return y({message:e,opts:t,level:c.LogLevel.Debug})},t.traceDecoratorError=function(e){return y({message:e,opts:u,level:c.LogLevel.Error})},t.traceDecoratorInfo=function(e){return y({message:e,opts:u,level:c.LogLevel.Info})},t.traceDecoratorWarn=function(e){return y({message:e,opts:u,level:c.LogLevel.Warning})},t.logTo=b},36901:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputChannelLogger=void 0;const s=o(n(39023));t.OutputChannelLogger=class{constructor(e){this.channel=e}traceLog(...e){this.channel.appendLine(s.format(...e))}traceError(...e){this.channel.error(s.format(...e))}traceWarn(...e){this.channel.warn(s.format(...e))}traceInfo(...e){this.channel.info(s.format(...e))}traceVerbose(...e){this.channel.debug(s.format(...e))}}},580:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.TraceOptions=t.LogLevel=void 0,function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"}(n||(t.LogLevel=n={})),function(e){e[e.None=0]="None",e[e.Arguments=1]="Arguments",e[e.ReturnValue=2]="ReturnValue"}(r||(t.TraceOptions=r={}))},22985:(e,t)=>{"use strict";function n(e,t){if(void 0===e)return"undefined";if(null===e)return"null";try{return e&&e.fsPath?`<Uri:${e.fsPath}>`:JSON.stringify(e)}catch(e){return`<${t} cannot be serialized for logging>`}}Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeForLogging=t.returnValueToLogString=t.argsToLogString=void 0,t.argsToLogString=function(e){if(!e)return"";try{return e.map(((e,t)=>`Arg ${t+1}: ${n(e,"argument")}`)).join(", ")}catch(e){return""}},t.returnValueToLogString=function(e){return`Return Value: ${n(e,"Return value")}`},t.getTimeForLogging=function(){const e=new Date;return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()} ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}.${e.getMilliseconds()}`}},94925:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildProposedApi=void 0;const r=n(69466);t.buildProposedApi=function(e,t){let n;try{n={...(0,r.buildDeprecatedProposedApi)(e,t)}}catch(e){n={}}return{...n}}},44694:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchJsonCodeActionProvider=void 0;const r=n(54980);t.LaunchJsonCodeActionProvider=class{provideCodeActions(e,t,n){return n.diagnostics.filter((e=>'Incorrect type. Expected "string".'===e.message)).map((t=>this.createFix(e,t)))}createFix(e,t){const n=`"${e.getText(t.range)}"`,i=new r.CodeAction(`Convert to ${n}`,r.CodeActionKind.QuickFix);return i.edit=new r.WorkspaceEdit,i.edit.replace(e.uri,t.range,n),i}}},83028:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeActionProviderService=void 0;const o=n(25891),s=n(86156),a=n(44694);let c=class{constructor(e){this.disposableRegistry=e,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!1}}async activate(){const e=n(54980);this.disposableRegistry.push(e.languages.registerCodeActionsProvider({scheme:"file",language:"jsonc",pattern:"**/launch.json"},new a.LaunchJsonCodeActionProvider,{providedCodeActionKinds:[e.CodeActionKind.QuickFix]}))}};t.CodeActionProviderService=c,t.CodeActionProviderService=c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDisposableRegistry))],c)},13460:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplProvider=void 0;const r=n(54661),i=n(552),o=n(98803),s=n(29413),a=n(52060);t.ReplProvider=class{constructor(e){this.serviceContainer=e,this.disposables=[],this.activeResourceService=this.serviceContainer.get(r.IActiveResourceService),this.registerCommand()}dispose(){this.disposables.forEach((e=>e.dispose()))}registerCommand(){const e=this.serviceContainer.get(r.ICommandManager).registerCommand(i.Commands.Start_REPL,this.commandHandler,this);this.disposables.push(e)}async commandHandler(){const e=this.activeResourceService.getActiveResource(),t=this.serviceContainer.get(s.IInterpreterService);if(!await t.getActiveInterpreter(e))return void this.serviceContainer.get(r.ICommandManager).executeCommand(i.Commands.TriggerEnvironmentSelection,e).then(o.noop,o.noop);const n=this.serviceContainer.get(a.ICodeExecutionService,"standard");await n.initializeRepl(e)}}},65422:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(11925),i=n(83028);t.registerTypes=function(e){e.addSingleton(r.IExtensionSingleActivationService,i.CodeActionProviderService)}},62365:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalProvider=void 0;const i=n(54661),o=n(552),s=n(8103),a=n(23935),c=n(86156),l=n(68989),u=n(51535),p=n(53322),d=n(36380);class h{constructor(e){this.serviceContainer=e,this.disposables=[],this.registerCommands(),this.activeResourceService=this.serviceContainer.get(i.IActiveResourceService)}async initialize(e){const t=this.serviceContainer.get(c.IConfigurationService),n=this.serviceContainer.get(c.IExperimentService),r=t.getSettings(this.activeResourceService.getActiveResource());if(e&&r.terminal.activateEnvInCurrentTerminal&&!(0,s.inTerminalEnvVarExperiment)(n)&&!(0,d.useEnvExtension)()){const t="hideFromUser"in e.creationOptions&&e.creationOptions.hideFromUser;if(!t){const t=this.serviceContainer.get(a.ITerminalActivator);await t.activateEnvironmentInTerminal(e,{preserveFocus:!0})}(0,u.sendTelemetryEvent)(p.EventName.ACTIVATE_ENV_IN_CURRENT_TERMINAL,void 0,{isTerminalVisible:!t})}}dispose(){this.disposables.forEach((e=>e.dispose()))}registerCommands(){const e=this.serviceContainer.get(i.ICommandManager).registerCommand(o.Commands.Create_Terminal,this.onCreateTerminal,this);this.disposables.push(e)}async onCreateTerminal(){const e=this.activeResourceService.getActiveResource();if((0,d.useEnvExtension)()){const t=this.serviceContainer.get(i.ICommandManager);await t.executeCommand("python-envs.createTerminal",e)}const t=this.serviceContainer.get(a.ITerminalServiceFactory);await t.createTerminalService(e,"Python").show(!1)}}t.TerminalProvider=h,r([(0,l.swallowExceptions)("Failed to initialize terminal provider")],h.prototype,"initialize",null),r([(0,u.captureTelemetry)(p.EventName.TERMINAL_CREATE,{triggeredBy:"commandpalette"})],h.prototype,"onCreateTerminal",null)},30228:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPythonEnvironments=void 0;class n{constructor(e){this.getLocator=e}async activate(){this.locator=await this.getLocator()}get onProgress(){return this.locator.onProgress}get refreshState(){return this.locator.refreshState}getRefreshPromise(e){return this.locator.getRefreshPromise(e)}get onChanged(){return this.locator.onChanged}getEnvs(e){return this.locator.getEnvs(e)}async resolveEnv(e){return this.locator.resolveEnv(e)}async triggerRefresh(e,t){return this.locator.triggerRefresh(e,t)}}t.createPythonEnvironments=async function(e){const t=new n(e);return await t.activate(),t}},6514:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.comparePythonVersionSpecificity=t.areSameEnv=t.getEnvID=t.getEnvPath=t.setEnvDisplayString=t.copyEnvInfo=t.areEnvsDeepEqual=t.buildEnvInfo=void 0;const s=n(2543),a=o(n(16928)),c=n(95774),l=n(48112),u=n(69396),p=n(11352),d=n(71067),h=n(15721);function f(e,t){void 0!==t.kind&&(e.kind=t.kind),void 0!==t.executable&&(e.executable.filename=t.executable),void 0!==t.location&&(e.location=t.location),void 0!==t.version&&(e.version=t.version),void 0!==t.searchLocation&&(e.searchLocation=t.searchLocation),void 0!==t.type&&(e.type=t.type)}function v(e,t=!1){const n=t||h.globallyInstalledEnvKinds.includes(e.kind),r=!h.virtualEnvKinds.includes(e.kind),i=["Python"];if(e.version&&!(0,d.isVersionEmpty)(e.version)&&i.push((0,d.getVersionDisplayString)(e.version)),r){const t=(0,c.getArchitectureDisplayName)(e.arch);""!==t&&i.push(t)}const o=[];if(e.name&&""!==e.name)o.push(`'${e.name}'`);else if(e.location&&""!==e.location&&e.kind===h.PythonEnvKind.Conda){const t=a.basename(e.location);o.push(`'${t}'`)}if(n){const t=(0,p.getKindDisplayName)(e.kind);""!==t&&o.push(t)}const s=0===o.length?"":`(${o.join(": ")})`;return`${i.join(" ")} ${s}`.trim()}function m(e){if("string"==typeof e){if(""===e)return;return{id:"",executable:{filename:e,sysPrefix:"",ctime:-1,mtime:-1}}}return"executablePath"in e?{id:"",executable:{filename:e.executablePath,sysPrefix:"",ctime:-1,mtime:-1},location:e.envPath,kind:e.kind,source:e.source}:e}function g(e,t){let n={path:e,pathType:"interpreterPath"};return t&&!(0,u.isParentPath)(e,t)&&(n={path:t,pathType:"envFolderPath"}),n}function y(e,t){return(0,u.normCasePath)(g(e,t).path)}function b(e){var t,n;let r=0;return e.major>0&&(r+=20),e.minor>=0&&(r+=10),e.micro>=0&&(r+=5),(null===(t=e.release)||void 0===t?void 0:t.level)&&(r+=3),((null===(n=e.release)||void 0===n?void 0:n.serial)||e.sysVersion)&&(r+=1),r}t.buildEnvInfo=function(e){var t,n,r,i,o,s,a,c,u;const p={name:null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"",location:"",kind:h.PythonEnvKind.Unknown,executable:{filename:"",sysPrefix:null!==(n=null==e?void 0:e.sysPrefix)&&void 0!==n?n:"",ctime:null!==(i=null===(r=null==e?void 0:e.fileInfo)||void 0===r?void 0:r.ctime)&&void 0!==i?i:-1,mtime:null!==(s=null===(o=null==e?void 0:e.fileInfo)||void 0===o?void 0:o.mtime)&&void 0!==s?s:-1},searchLocation:void 0,display:null==e?void 0:e.display,version:{major:-1,minor:-1,micro:-1,release:{level:h.PythonReleaseLevel.Final,serial:0}},arch:null!==(a=null==e?void 0:e.arch)&&void 0!==a?a:l.Architecture.Unknown,distro:{org:null!==(c=null==e?void 0:e.org)&&void 0!==c?c:""},source:null!==(u=null==e?void 0:e.source)&&void 0!==u?u:[],pythonRunCommand:null==e?void 0:e.pythonRunCommand,identifiedUsingNativeLocator:null==e?void 0:e.identifiedUsingNativeLocator};return void 0!==e&&f(p,e),p.id=y(p.executable.filename,p.location),p},t.areEnvsDeepEqual=function(e,t){var n,r,i,o,a,c,l,p;const d=(0,s.cloneDeep)(e),h=(0,s.cloneDeep)(t);delete d.searchLocation,delete h.searchLocation,d.source=d.source.sort(),h.source=h.source.sort();const f=null!==(r=null===(n=e.searchLocation)||void 0===n?void 0:n.fsPath)&&void 0!==r?r:"",v=null!==(o=null===(i=t.searchLocation)||void 0===i?void 0:i.fsPath)&&void 0!==o?o:"",m=null!==(c=null===(a=e.searchLocation)||void 0===a?void 0:a.scheme)&&void 0!==c?c:"",g=null!==(p=null===(l=t.searchLocation)||void 0===l?void 0:l.scheme)&&void 0!==p?p:"";return(0,s.isEqual)(d,h)&&(0,u.arePathsSame)(f,v)&&m===g},t.copyEnvInfo=function(e,t){const n=(0,s.cloneDeep)(e);return void 0!==t&&f(n,t),n},t.setEnvDisplayString=function(e){e.display=v(e),e.detailedDisplayName=v(e,!0)},t.getEnvPath=g,t.getEnvID=y,t.areSameEnv=function(e,t,n=!0){var r,i,o,s;const c=m(e),l=m(t);if(void 0===c||void 0===l)return;if((null===(r=c.executable)||void 0===r?void 0:r.filename)&&!(null===(i=l.executable)||void 0===i?void 0:i.filename)||!(null===(o=c.executable)||void 0===o?void 0:o.filename)&&(null===(s=l.executable)||void 0===s?void 0:s.filename))return!1;if(c.id&&c.id===l.id)return!0;const p=c.executable.filename,h=l.executable.filename;if(y(p,c.location)===y(h,l.location))return!0;if(n&&"python"!==p&&"python"!==h&&(0,u.arePathsSame)(a.dirname(p),a.dirname(h))){const n="string"==typeof e?void 0:c.version,r="string"==typeof t?void 0:l.version;if(n&&r&&((0,d.areIdenticalVersion)(n,r)||(0,d.areSimilarVersions)(n,r)))return!0}return!1},t.comparePythonVersionSpecificity=function(e,t){return Math.sign(b(e)-b(t))}},11352:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPrioritizedEnvKinds=t.getKindDisplayName=void 0;const r=n(15721);t.getKindDisplayName=function(e){for(const[t,n]of[[r.PythonEnvKind.System,"system"],[r.PythonEnvKind.MicrosoftStore,"Microsoft Store"],[r.PythonEnvKind.Pyenv,"pyenv"],[r.PythonEnvKind.Poetry,"Poetry"],[r.PythonEnvKind.Hatch,"Hatch"],[r.PythonEnvKind.Pixi,"Pixi"],[r.PythonEnvKind.Custom,"custom"],[r.PythonEnvKind.Venv,"venv"],[r.PythonEnvKind.VirtualEnv,"virtualenv"],[r.PythonEnvKind.VirtualEnvWrapper,"virtualenv"],[r.PythonEnvKind.Pipenv,"Pipenv"],[r.PythonEnvKind.Conda,"conda"],[r.PythonEnvKind.ActiveState,"ActiveState"]])if(e===t)return n;return""},t.getPrioritizedEnvKinds=function(){return[r.PythonEnvKind.Pyenv,r.PythonEnvKind.Pixi,r.PythonEnvKind.Conda,r.PythonEnvKind.MicrosoftStore,r.PythonEnvKind.Pipenv,r.PythonEnvKind.Poetry,r.PythonEnvKind.Hatch,r.PythonEnvKind.Venv,r.PythonEnvKind.VirtualEnvWrapper,r.PythonEnvKind.VirtualEnv,r.PythonEnvKind.ActiveState,r.PythonEnvKind.OtherVirtual,r.PythonEnvKind.OtherGlobal,r.PythonEnvKind.System,r.PythonEnvKind.Custom,r.PythonEnvKind.Unknown]}},24509:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvironmentInfoService=t.EnvironmentInfoServiceQueuePriority=void 0;const r=n(7855),i=n(79979),o=n(73827),s=n(20467),a=n(61905),c=n(95885),l=n(15721),u=n(69396),p=n(8370),d=n(48112),h=n(71067);var f;async function v(e,t=!0){const n=[e.executable.filename];return t?n.push("-I",p.OUTPUT_MARKER_SCRIPT):n.push(p.OUTPUT_MARKER_SCRIPT),await(0,o.getInterpreterInfo)((0,s.buildPythonExecInfo)(n,void 0,e.executable.filename))}async function m(e){const t=await c.Conda.getConda(),n=e.location.length?e.location:e.executable.filename,r=await(null==t?void 0:t.getCondaEnvironment(n));if(!r)return;const i=await(null==t?void 0:t.getRunPythonArgs(r,!0,!0));return i?await(0,o.getInterpreterInfo)((0,s.buildPythonExecInfo)(i,void 0,e.executable.filename),c.CONDA_ACTIVATION_TIMEOUT):void 0}!function(e){e[e.Default=0]="Default",e[e.High=1]="High"}(f||(t.EnvironmentInfoServiceQueuePriority=f={}));class g{constructor(){this.cache=new Map}dispose(){void 0!==this.workerPool&&(this.workerPool.stop(),this.workerPool=void 0),void 0!==this.condaRunWorkerPool&&(this.condaRunWorkerPool.stop(),this.condaRunWorkerPool=void 0)}async getEnvironmentInfo(e,t){const n=e.executable.filename,i=this.cache.get((0,u.normCasePath)(n));if(void 0!==i)return i.promise;const o=(0,r.createDeferred)();return this.cache.set((0,u.normCasePath)(n),o),this._getEnvironmentInfo(e,t).then((e=>{o.resolve(e)})).catch((e=>{o.reject(e)})),o.promise}async _getEnvironmentInfo(e,t,n=!0){if(e.kind===l.PythonEnvKind.Conda&&"python"===e.executable.filename)return{arch:d.Architecture.Unknown,executable:{filename:"python",ctime:-1,mtime:-1,sysPrefix:""},version:(0,h.getEmptyVersion)()};let o;void 0===this.workerPool&&(this.workerPool=(0,i.createRunningWorkerPool)(v));let s=await y(this.workerPool,e,t).catch((e=>{o=e}));if(void 0===s)if(e.kind===l.PythonEnvKind.Conda||await(0,c.isCondaEnvironment)(e.executable.filename))(0,a.traceVerbose)(`Validating ${e.executable.filename} normally failed with error, falling back to using conda run: (${o})`),void 0===this.condaRunWorkerPool&&(this.condaRunWorkerPool=(0,i.createRunningWorkerPool)(m)),s=await y(this.condaRunWorkerPool,e,t).catch((e=>{(0,a.traceError)(e)}));else if(o){if(o.message.includes("Unknown option: -I")||o.message.includes("ModuleNotFoundError: No module named 'encodings'"))return(0,a.traceWarn)(o),o.message.includes("Unknown option: -I")&&(0,a.traceError)("Support for Python 2.7 has been dropped by the Python extension so certain features may not work, upgrade to using Python 3."),v(e,!1).catch((e=>{(0,a.traceError)(e)}));(0,a.traceError)(o)}return void 0===s&&n?(0,r.sleep)(2e3).then((()=>this._getEnvironmentInfo(e,t,!1))):s}resetInfo(e){const t=e.fsPath;Array.from(this.cache.keys()).forEach((e=>{e.startsWith((0,u.normCasePath)(t))&&this.cache.delete(e)}))}}function y(e,t,n){return n===f.High?e.addToQueue(t,i.QueuePosition.Front):e.addToQueue(t,i.QueuePosition.Back)}let b;t.getEnvironmentInfoService=function(e){if(void 0===b){const t=new g;null==e||e.push({dispose:()=>{t.dispose(),b=void 0}}),b=t}return b}},39397:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parseVersionFromExecutable=void 0;const s=o(n(16928)),a=n(48112),c=n(71067),l=n(69396);t.parseVersionFromExecutable=function(e){const t=function(e){if(e=(0,l.normCasePath)(e),(0,a.getOSType)()===a.OSType.Windows){if("python.exe"===e)return(0,c.getEmptyVersion)()}else if("python"===e)return(0,c.parseVersion)("2.7");if(!e.startsWith("python"))throw Error(`not a Python executable (expected "python..", got "${e}")`);return(0,c.parseVersion)(e)}(s.basename(e));return 2===t.major&&-1===t.minor&&(t.minor=7),t}},15721:(e,t)=>{"use strict";var n,r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.UNKNOWN_PYTHON_VERSION=t.PythonReleaseLevel=t.PythonEnvSource=t.globallyInstalledEnvKinds=t.virtualEnvKinds=t.PythonEnvType=t.PythonEnvKind=void 0,function(e){e.Unknown="unknown",e.System="global-system",e.MicrosoftStore="global-microsoft-store",e.Pyenv="global-pyenv",e.Poetry="poetry",e.Hatch="hatch",e.Pixi="pixi",e.ActiveState="activestate",e.Custom="global-custom",e.OtherGlobal="global-other",e.Venv="virt-venv",e.VirtualEnv="virt-virtualenv",e.VirtualEnvWrapper="virt-virtualenvwrapper",e.Pipenv="virt-pipenv",e.Conda="virt-conda",e.OtherVirtual="virt-other"}(n||(t.PythonEnvKind=n={})),function(e){e.Conda="Conda",e.Virtual="Virtual"}(r||(t.PythonEnvType=r={})),t.virtualEnvKinds=[n.Poetry,n.Hatch,n.Pixi,n.Pipenv,n.Venv,n.VirtualEnvWrapper,n.Conda,n.VirtualEnv],t.globallyInstalledEnvKinds=[n.OtherGlobal,n.Unknown,n.MicrosoftStore,n.System,n.Custom],function(e){e.PathEnvVar="path env var",e.WindowsRegistry="windows registry"}(i||(t.PythonEnvSource=i={})),function(e){e.Alpha="alpha",e.Beta="beta",e.Candidate="candidate",e.Final="final"}(o||(t.PythonReleaseLevel=o={})),t.UNKNOWN_PYTHON_VERSION={major:-1,minor:-1,micro:-1,release:{level:o.Final,serial:-1},sysVersion:void 0},Object.freeze(t.UNKNOWN_PYTHON_VERSION)},73827:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterpreterInfo=void 0;const r=n(552),i=n(8370),o=n(48112),s=n(61905),a=n(69396),c=n(20467),l=n(71067);t.getInterpreterInfo=async function(e,t){const[n,u]=(0,i.interpreterInfo)(),p=(0,c.copyPythonExecInfo)(e,n),d=[p.command,...p.args].reduce(((e,t)=>e?`${e} ${t.toCommandArgumentForPythonExt()}`:`${t.toCommandArgumentForPythonExt()}`),"");let h=r.isCI?3e4:15e3;void 0!==process.env.VSC_PYTHON_INTERPRETER_INFO_TIMEOUT&&(h=parseInt(process.env.VSC_PYTHON_INTERPRETER_INFO_TIMEOUT,10),(0,s.traceInfo)(`Custom interpreter discovery timeout: ${h}`));const f=await(0,a.shellExecute)(d,{timeout:null!=t?t:h});let v;f.stderr&&(0,s.traceError)(`Stderr when executing script with >> ${d} << stderr: ${f.stderr}, still attempting to parse output`);try{v=u(f.stdout)}catch(e){return void(0,s.traceError)(`Failed to parse interpreter information for >> ${d} << with ${e}`)}return(0,s.traceVerbose)(`Found interpreter for >> ${d} <<: ${JSON.stringify(v)}`),function(e,t){let n=`${t.versionInfo.slice(0,3).join(".")}`;if(void 0!==t.versionInfo[3]&&["final","alpha","beta","candidate"].includes(t.versionInfo[3])&&(n=`${n}-${t.versionInfo[3]}`,void 0!==t.versionInfo[4])){let e=-1;try{e=parseInt(`${t.versionInfo[4]}`,10)}catch(t){e=-1}n=e>=0?`${n}${e}`:n}return{arch:t.is64Bit?o.Architecture.x64:o.Architecture.x86,executable:{filename:e,sysPrefix:t.sysPrefix,mtime:-1,ctime:-1},version:{...(0,l.parseVersion)(n),sysVersion:t.sysVersion}}}(e.pythonExecutable,v)}},71067:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.compareSemVerLikeVersions=t.toSemverLikeVersion=t.areSimilarVersions=t.areIdenticalVersion=t.getShortVersionString=t.getVersionDisplayString=t.isVersionEmpty=t.getEmptyVersion=t.parseBasicVersion=t.parseRelease=t.parseVersion=t.getPythonVersionFromPath=void 0;const s=n(2543),a=o(n(16928)),c=o(n(8727)),l=n(15721),u=n(61905);function p(e){const[t,n]=h(e);if(-1===t.micro)return t;const[r]=d(n);return t.release=r,t}function d(e){let t,n,r,i,o,s,a,c=e.match(/^(?:-?final|\.final(?:\.0)?)(.*)$/);if(c)[,t]=c,o="final",s="0";else for(const o of[/^(?:(a)|(b)|(rc))([1-9]\d*)(.*)$/,/^-(?:(?:(alpha)|(beta)|(candidate))([1-9]\d*))(.*)$/,/^\.(?:(?:(alpha)|(beta)|(candidate))\.([1-9]\d*))(.*)$/])if(c=e.match(o),c){[,n,r,i,s,t]=c;break}if(o)a=l.PythonReleaseLevel.Final;else if(i)a=l.PythonReleaseLevel.Candidate;else if(r)a=l.PythonReleaseLevel.Beta;else{if(!n)return[void 0,e];a=l.PythonReleaseLevel.Alpha}return[{level:a,serial:parseInt(s,10)},t]}function h(e){const t=c.parseBasicVersionInfo(`ignored-${e}`);if(!t){if(""===e)return[f(),""];throw Error(`invalid version ${e}`)}const{version:n,after:r}=t;if(n.release=void 0,-1===n.minor&&n.major>9){const e=10**(n.major.toString().length-1);n.minor=n.major%e,n.major=Math.floor(n.major/e)}return[n,r]}function f(){return(0,s.cloneDeep)(c.EMPTY_VERSION)}function v(e){return c.isVersionInfoEmpty(e)}function m(e){let t=c.getVersionString(e);if(void 0===e.release)return t;if(e.release.level===l.PythonReleaseLevel.Final)return t;if(e.release.level===l.PythonReleaseLevel.Candidate)t=`${t}rc${e.release.serial}`;else if(e.release.level===l.PythonReleaseLevel.Beta)t=`${t}b${e.release.serial}`;else{if(e.release.level!==l.PythonReleaseLevel.Alpha)throw Error(`unsupported release level ${e.release.level}`);t=`${t}a${e.release.serial}`}return t}function g(e,t){return void 0===e.release?void 0===t.release?[0,""]:[1,"level"]:void 0===t.release?[-1,"level"]:e.release.level<t.release.level?[1,"level"]:e.release.level>t.release.level?[-1,"level"]:e.release.level===l.PythonReleaseLevel.Final?[0,""]:e.release.serial<t.release.serial?[1,"serial"]:e.release.serial>t.release.serial?[-1,"serial"]:[0,""]}t.getPythonVersionFromPath=function(e){let t=l.UNKNOWN_PYTHON_VERSION;try{t=p(a.basename(e))}catch(t){(0,u.traceError)(`Failed to parse version from path: ${e}`,t)}return t},t.parseVersion=p,t.parseRelease=d,t.parseBasicVersion=h,t.getEmptyVersion=f,t.isVersionEmpty=v,t.getVersionDisplayString=function(e){return v(e)?"":-1!==e.micro?m(e):`${m(e)}.x`},t.getShortVersionString=m,t.areIdenticalVersion=function(e,t){return c.areIdenticalVersion(e,t,g)},t.areSimilarVersions=function(e,t){return!!c.areSimilarVersions(e,t,g)&&(2===e.major||e.minor>-1&&t.minor>-1)},t.toSemverLikeVersion=function(e){const t=c.getVersionString(e);let n=[];return e.release&&(n=e.release.serial<0?[`${e.release.level}`]:[`${e.release.level}`,`${e.release.serial}`]),{raw:t,major:e.major,minor:e.minor,patch:e.micro,build:[],prerelease:n}},t.compareSemVerLikeVersions=function(e,t){return e.major===t.major?e.minor===t.minor?e.patch===t.patch?0:e.patch>t.patch?1:-1:e.minor>t.minor?1:-1:e.major>t.major?1:-1}},18162:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Locator=t.NOOP_ITERATOR=t.isProgressEvent=t.ProgressReportStage=void 0;const r=n(7855),i=n(28472);var o;!function(e){e.idle="idle",e.discoveryStarted="discoveryStarted",e.allPathsDiscovered="allPathsDiscovered",e.discoveryFinished="discoveryFinished"}(o||(t.ProgressReportStage=o={})),t.isProgressEvent=function(e){return"stage"in e},t.NOOP_ITERATOR=(0,r.iterEmpty)();class s{constructor(e){this.emitter=e,this.onChanged=e.onChanged}}t.Locator=class extends s{constructor(){super(new i.PythonEnvsWatcher)}}},94725:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvs=t.getQueryFilter=void 0;const r=n(7855),i=n(98803),o=n(61905),s=n(18162);t.getQueryFilter=function(e){var t;const n=void 0!==e.kinds&&e.kinds.length>0?e.kinds:void 0,r=!(null===(t=e.searchLocations)||void 0===t?void 0:t.doNotIncludeNonRooted),o=function(e){if(void 0!==e.searchLocations)return 0===e.searchLocations.roots.length?[]:e.searchLocations.roots.map((e=>(0,i.getURIFilter)(e,{checkParent:!0})))}(e);return e=>!!function(e){return void 0===n||n.includes(e.kind)}(e)&&!!function(e){if(void 0===e.searchLocation)return r;const t=e.searchLocation;return void 0===o||o.some((e=>e(t)))}(e)},t.getEnvs=async function(e){const t=[],n=(0,r.createDeferred)();if(void 0===e.onUpdated)n.resolve();else{const r=e.onUpdated((e=>{if((0,s.isProgressEvent)(e)){if(e.stage!==s.ProgressReportStage.discoveryFinished)return;n.resolve(),r.dispose()}else if(void 0!==e.index){const{index:n,update:r}=e;if(void 0===t[n]){const e=JSON.stringify(r);(0,o.traceVerbose)(`Updates sent for an env which was classified as invalid earlier, currently not expected, ${e}`)}t[n]=r}}))}let i=0;for await(const n of e)void 0===t[i]&&(t[i]=n),i+=1;return await n.promise,t.filter((e=>void 0!==e)).map((e=>e))}},95465:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Locators=t.combineIterators=void 0;const r=n(7855),i=n(51271),o=n(18162),s=n(97087);function a(e){const t=(0,r.chain)(e),n=e.map((e=>e.onUpdated)).filter((e=>e));return n&&0!==n.length?(t.onUpdated=e=>{const t=new i.Disposables;let r=n.length;return n.forEach((n=>{const i=n((t=>{(0,o.isProgressEvent)(t)?t.stage===o.ProgressReportStage.discoveryFinished?(r-=1,0===r&&e({stage:o.ProgressReportStage.discoveryFinished})):e({stage:t.stage}):e(t)}));t.push(i)})),t},t):t}t.combineIterators=a;class c extends s.PythonEnvsWatchers{constructor(e){super(e),this.locators=e,this.providerId=e.map((e=>e.providerId)).join("+")}iterEnvs(e){return a(this.locators.map((t=>t.iterEnvs(e))))}}t.Locators=c},14601:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.clearCacheDirectory=t.getCacheDirectory=t.getNativePythonFinder=t.isNativeEnvInfo=void 0;const s=n(54980),a=o(n(35317)),c=o(n(16928)),l=o(n(77123)),u=n(2203),p=o(n(25943)),d=n(48112),h=n(84090),f=n(7855),v=n(51271),m=n(98803),g=n(8841),y=n(95885),b=n(45882),_=n(85784),E=n(99350),S=n(51080),w=n(65900),P=n(61905),T=(0,d.isWindows)()?c.join(h.EXTENSION_ROOT_DIR,"python-env-tools","bin","pet.exe"):c.join(h.EXTENSION_ROOT_DIR,"python-env-tools","bin","pet");t.isNativeEnvInfo=function(e){return!e.tool};class C extends v.DisposableBase{constructor(e){super(),this.cacheDirectory=e,this.outputChannel=this._register((0,_.createLogOutputChannel)("Python Locator",{log:!0})),this.initialRefreshMetrics={timeToSpawn:0,timeToConfigure:0,timeToRefresh:0},this.connection=this.start(),this.configure(),this.firstRefreshResults=this.refreshFirstTime()}async resolve(e){await this.configure();const t=await this.connection.sendRequest("resolve",{executable:e});return this.outputChannel.info(`Resolved Python Environment ${t.executable}`),t}async*refresh(e){if(this.firstRefreshResults){const e=this.firstRefreshResults();this.firstRefreshResults=void 0,yield*e}else{const t=this.doRefresh(e);let n=!1;t.completed.finally((()=>{n=!0}));const r=[];let i=(0,f.createDeferred)();const o=t.discovered((e=>{r.push(e),i.resolve()}));do{if(r.length||await Promise.race([t.completed,i.promise]),r.length){const e=[...r];r.length=0;for(const t of e)yield t}n||(i=(0,f.createDeferred)())}while(!n);o.dispose()}}refreshFirstTime(){const e=this.doRefresh(),t=(0,f.createDeferredFrom)(e.completed),n=[];let r=(0,f.createDeferred)();const i=e.discovered((e=>{n.push(e),r.resolve()}));return async function*(){do{if(n.length||await Promise.race([t.promise,r.promise]),n.length){const e=[...n];n.length=0;for(const t of e)yield t}t.completed||(r=(0,f.createDeferred)())}while(!t.completed);i.dispose()}.bind(this)}start(){this.outputChannel.info(`Starting Python Locator ${T} server`);const e=new u.PassThrough,t=new u.PassThrough,n=[];try{const r=new S.StopWatch,i=a.spawn(T,["server"],{env:process.env});this.initialRefreshMetrics.timeToSpawn=r.elapsedTime,i.stdout.pipe(e,{end:!1}),i.stderr.on("data",(e=>this.outputChannel.error(e.toString()))),t.pipe(i.stdin,{end:!1}),n.push({dispose:()=>{try{null===i.exitCode&&i.kill()}catch(e){this.outputChannel.error("Error disposing finder",e)}}})}catch(e){this.outputChannel.error(`Error starting Python Finder ${T} server`,e)}const r=new s.Disposable((()=>{e.end(),t.end()})),i=l.createMessageConnection(new l.StreamMessageReader(e),new l.StreamMessageWriter(t));return n.push(i,r,i.onError((e=>{r.dispose(),this.outputChannel.error("Connection Error:",e)})),i.onNotification("log",(e=>{switch(e.level){case"info":this.outputChannel.info(e.message);break;case"warning":this.outputChannel.warn(e.message);break;case"error":this.outputChannel.error(e.message);break;case"debug":this.outputChannel.debug(e.message);break;default:this.outputChannel.trace(e.message)}})),i.onNotification("telemetry",(e=>(0,E.sendNativeTelemetry)(e,this.initialRefreshMetrics))),i.onClose((()=>{n.forEach((e=>e.dispose()))}))),i.listen(),this._register(s.Disposable.from(...n)),i}doRefresh(e){const t=this._register(new v.DisposableStore),n=t.add(new s.EventEmitter),r=(0,f.createDeferred)(),i=[],o=new S.StopWatch,a=()=>{const e=i.length;Promise.all(i).then((()=>{e===i.length?r.resolve():setTimeout(a,0)})).catch(m.noop)},c=e=>{i.push(e),a()};t.add(this.connection.onNotification("environment",(e=>{if(this.outputChannel.info(`Discovered env: ${e.executable||e.prefix}`),!e.executable||e.version&&e.prefix)n.fire(e);else{const t=this.connection.sendRequest("resolve",{executable:e.executable}).then((e=>{this.outputChannel.info(`Resolved ${e.executable}`),n.fire(e)})).catch((t=>this.outputChannel.error(`Error in Resolving ${JSON.stringify(e)}`,t)));c(t)}}))),t.add(this.connection.onNotification("manager",(e=>{this.outputChannel.info(`Discovered manager: (${e.tool}) ${e.executable}`),n.fire(e)})));const l={};return e&&Array.isArray(e)&&e.length>0?l.searchPaths=e.map((e=>e.fsPath)):e&&"string"==typeof e&&(l.searchKind=e),c(this.configure().then((()=>this.connection.sendRequest("refresh",l).then((({duration:e})=>{this.outputChannel.info(`Refresh completed in ${e}ms`),this.initialRefreshMetrics.timeToRefresh=o.elapsedTime})).catch((e=>this.outputChannel.error("Refresh error",e)))))),r.promise.finally((()=>t.dispose())),{completed:r.promise,discovered:n.event}}async configure(){var e;const t={workspaceDirectories:(0,g.getWorkspaceFolderPaths)(),environmentDirectories:x(),condaExecutable:I(y.CONDAPATH_SETTING_KEY),poetryExecutable:I("poetryPath"),cacheDirectory:null===(e=this.cacheDirectory)||void 0===e?void 0:e.fsPath};if(JSON.stringify(t)!==JSON.stringify(this.lastConfiguration||{}))try{const e=new S.StopWatch;this.lastConfiguration=t,await this.connection.sendRequest("configure",t),this.initialRefreshMetrics.timeToConfigure=e.elapsedTime}catch(e){this.outputChannel.error("Refresh error",e)}}async getCondaInfo(){return this.connection.sendRequest("condaInfo")}}function x(){var e;const t=[],n=I(b.VENVPATH_SETTING_KEY);n&&t.push((0,w.untildify)(n));const r=null!==(e=I(b.VENVFOLDERS_SETTING_KEY))&&void 0!==e?e:[],i=(0,d.getUserHomeDir)();return i&&(r.map((e=>e.startsWith(i)?e:c.join(i,e))).forEach((e=>t.push(e))),r.forEach((e=>t.push((0,w.untildify)(e))))),Array.from(new Set(t))}function I(e,t){const n=(0,g.getConfiguration)("python",t).get(e);return"string"==typeof n?n?(0,w.untildify)(n):void 0:n}let O;function R(e){return s.Uri.joinPath(e.globalStorageUri,"pythonLocator")}t.getNativePythonFinder=function(e){if(!(0,g.isTrusted)())return{async*refresh(){(0,P.traceError)("Python discovery not supported in untrusted workspace"),yield*[]},resolve:async()=>((0,P.traceError)("Python discovery not supported in untrusted workspace"),{}),getCondaInfo:async()=>((0,P.traceError)("Python discovery not supported in untrusted workspace"),{}),dispose(){}};if(!O){const t=e?R(e):void 0;O=new C(t),e&&e.subscriptions.push(O)}return O},t.getCacheDirectory=R,t.clearCacheDirectory=async function(e){const t=R(e);await p.emptyDir(t.fsPath).catch(m.noop)}},99350:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendNativeTelemetry=void 0;const r=n(61905),i=n(51535),o=n(53322);let s=!1;t.sendNativeTelemetry=function(e,t){switch(e.event){case"MissingCondaEnvironments":(0,i.sendTelemetryEvent)(o.EventName.NATIVE_FINDER_MISSING_CONDA_ENVS,void 0,e.data.missingCondaEnvironments);break;case"MissingPoetryEnvironments":(0,i.sendTelemetryEvent)(o.EventName.NATIVE_FINDER_MISSING_POETRY_ENVS,void 0,e.data.missingPoetryEnvironments);break;case"RefreshPerformance":if(s)break;s=!0,(0,i.sendTelemetryEvent)(o.EventName.NATIVE_FINDER_PERF,{duration:e.data.refreshPerformance.total,totalDuration:e.data.refreshPerformance.total,breakdownGlobalVirtualEnvs:e.data.refreshPerformance.breakdown.GlobalVirtualEnvs,breakdownLocators:e.data.refreshPerformance.breakdown.Locators,breakdownPath:e.data.refreshPerformance.breakdown.Path,breakdownWorkspaces:e.data.refreshPerformance.breakdown.Workspaces,locatorConda:e.data.refreshPerformance.locators.Conda||0,locatorHomebrew:e.data.refreshPerformance.locators.Homebrew||0,locatorLinuxGlobalPython:e.data.refreshPerformance.locators.LinuxGlobalPython||0,locatorMacCmdLineTools:e.data.refreshPerformance.locators.MacCmdLineTools||0,locatorMacPythonOrg:e.data.refreshPerformance.locators.MacPythonOrg||0,locatorMacXCode:e.data.refreshPerformance.locators.MacXCode||0,locatorPipEnv:e.data.refreshPerformance.locators.PipEnv||0,locatorPixiEnv:e.data.refreshPerformance.locators.PixiEnv||0,locatorPoetry:e.data.refreshPerformance.locators.Poetry||0,locatorPyEnv:e.data.refreshPerformance.locators.PyEnv||0,locatorVenv:e.data.refreshPerformance.locators.Venv||0,locatorVirtualEnv:e.data.refreshPerformance.locators.VirtualEnv||0,locatorVirtualEnvWrapper:e.data.refreshPerformance.locators.VirtualEnvWrapper||0,locatorWindowsRegistry:e.data.refreshPerformance.locators.WindowsRegistry||0,locatorWindowsStore:e.data.refreshPerformance.locators.WindowsStore||0,timeToSpawn:t.timeToSpawn,timeToConfigure:t.timeToConfigure,timeToRefresh:t.timeToRefresh});break;default:(0,r.traceError)(`Unhandled Telemetry Event type ${JSON.stringify(e)}`)}}},23172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.categoryToKind=t.NativePythonEnvironmentKind=void 0;const r=n(15721),i=n(61905);var o;!function(e){e.Conda="Conda",e.Pixi="Pixi",e.Homebrew="Homebrew",e.Pyenv="Pyenv",e.GlobalPaths="GlobalPaths",e.PyenvVirtualEnv="PyenvVirtualEnv",e.Pipenv="Pipenv",e.Poetry="Poetry",e.MacPythonOrg="MacPythonOrg",e.MacCommandLineTools="MacCommandLineTools",e.LinuxGlobal="LinuxGlobal",e.MacXCode="MacXCode",e.Venv="Venv",e.VirtualEnv="VirtualEnv",e.VirtualEnvWrapper="VirtualEnvWrapper",e.WindowsStore="WindowsStore",e.WindowsRegistry="WindowsRegistry",e.VenvUv="Uv"}(o||(t.NativePythonEnvironmentKind=o={}));const s=new Map([[o.Conda,r.PythonEnvKind.Conda],[o.Pixi,r.PythonEnvKind.Pixi],[o.GlobalPaths,r.PythonEnvKind.OtherGlobal],[o.Pyenv,r.PythonEnvKind.Pyenv],[o.PyenvVirtualEnv,r.PythonEnvKind.Pyenv],[o.Pipenv,r.PythonEnvKind.Pipenv],[o.Poetry,r.PythonEnvKind.Poetry],[o.VirtualEnv,r.PythonEnvKind.VirtualEnv],[o.VirtualEnvWrapper,r.PythonEnvKind.VirtualEnvWrapper],[o.Venv,r.PythonEnvKind.Venv],[o.VenvUv,r.PythonEnvKind.Venv],[o.WindowsRegistry,r.PythonEnvKind.System],[o.WindowsStore,r.PythonEnvKind.MicrosoftStore],[o.Homebrew,r.PythonEnvKind.System],[o.LinuxGlobal,r.PythonEnvKind.System],[o.MacCommandLineTools,r.PythonEnvKind.System],[o.MacPythonOrg,r.PythonEnvKind.System],[o.MacXCode,r.PythonEnvKind.System]]);t.categoryToKind=function(e,t){if(!e)return r.PythonEnvKind.Unknown;return s.get(e)||(t?t.error(`Unknown Python Environment category '${e}' from Native Locator.`):(0,i.traceError)(`Unknown Python Environment category '${e}' from Native Locator.`),r.PythonEnvKind.Unknown)}},36500:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPythonWatcher=void 0;const r=n(54980),i=n(8841),o=n(48112),s=n(69396),a=n(29104),c=(0,o.isWindows)()?"**/python.exe":"**/python";class l{constructor(){this.disposables=[],this._onDidWorkspaceEnvChanged=new r.EventEmitter,this._onDidGlobalEnvChanged=new r.EventEmitter,this._disposeMap=new Map,this.onDidGlobalEnvChanged=this._onDidGlobalEnvChanged.event,this.onDidWorkspaceEnvChanged=this._onDidWorkspaceEnvChanged.event,this.disposables.push(this._onDidWorkspaceEnvChanged,this._onDidGlobalEnvChanged)}watchWorkspace(e){if(this._disposeMap.has(e.uri.fsPath)){const t=this._disposeMap.get(e.uri.fsPath);null==t||t.dispose()}const t=[],n=(0,i.createFileSystemWatcher)(new r.RelativePattern(e,c));t.push(n,n.onDidChange((t=>{this.fireWorkspaceEvent(a.FileChangeType.Changed,e,t)})),n.onDidCreate((t=>{this.fireWorkspaceEvent(a.FileChangeType.Created,e,t)})),n.onDidDelete((t=>{this.fireWorkspaceEvent(a.FileChangeType.Deleted,e,t)})));const o={dispose:()=>{t.forEach((e=>e.dispose())),this._disposeMap.delete(e.uri.fsPath)}};this._disposeMap.set(e.uri.fsPath,o)}unwatchWorkspace(e){const t=this._disposeMap.get(e.uri.fsPath);null==t||t.dispose()}fireWorkspaceEvent(e,t,n){const r=(0,i.getWorkspaceFolder)(n);r&&(0,s.arePathsSame)(r.uri.fsPath,t.uri.fsPath)&&this._onDidWorkspaceEnvChanged.fire({type:e,workspaceFolder:t,executable:n.fsPath})}watchPath(e,t){if(this._disposeMap.has(e.fsPath)){const t=this._disposeMap.get(e.fsPath);null==t||t.dispose()}const n=t?new r.RelativePattern(e,t):e.fsPath,o=[],s=(0,i.createFileSystemWatcher)(n);o.push(s,s.onDidChange((()=>{this._onDidGlobalEnvChanged.fire({type:a.FileChangeType.Changed,uri:e})})),s.onDidCreate((()=>{this._onDidGlobalEnvChanged.fire({type:a.FileChangeType.Created,uri:e})})),s.onDidDelete((()=>{this._onDidGlobalEnvChanged.fire({type:a.FileChangeType.Deleted,uri:e})})));const c={dispose:()=>{o.forEach((e=>e.dispose())),this._disposeMap.delete(e.fsPath)}};this._disposeMap.set(e.fsPath,c)}unwatchPath(e){const t=this._disposeMap.get(e.fsPath);null==t||t.dispose()}dispose(){this.disposables.forEach((e=>e.dispose())),this._disposeMap.forEach((e=>e.dispose()))}}t.createPythonWatcher=function(){return new l}},96211:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyResourceBasedLocator=void 0;const r=n(7855),i=n(51271),o=n(61905),s=n(69396),a=n(6514),c=n(18162);class l extends c.Locator{constructor(){super(...arguments),this.disposables=new i.Disposables}async activate(){await this.ensureResourcesReady();try{this.ensureWatchersReady()}catch(e){(0,o.traceWarn)(`Failed to ensure watchers are ready for locator ${this.constructor.name}`,e)}}async dispose(){await this.disposables.dispose()}async*iterEnvs(e){await this.activate();const t=this.doIterEnvs(e);if(null==e?void 0:e.envPath){let n=await t.next();for(;!n.done;){const r=n.value,{path:i}=(0,a.getEnvPath)(r.executablePath,r.envPath);if((0,s.arePathsSame)(i,e.envPath)){yield r;break}n=await t.next()}}else yield*t}async initResources(){}async initWatchers(){}async ensureResourcesReady(){void 0===this.resourcesReady?(this.resourcesReady=(0,r.createDeferred)(),await this.initResources().catch((e=>{var t;(0,o.traceError)(e),null===(t=this.resourcesReady)||void 0===t||t.reject(e)})),this.resourcesReady.resolve()):await this.resourcesReady.promise}async ensureWatchersReady(){void 0===this.watchersReady?(this.watchersReady=(0,r.createDeferred)(),(0,s.isVirtualWorkspace)()||await this.initWatchers().catch((e=>{var t;(0,o.traceError)(e),null===(t=this.watchersReady)||void 0===t||t.reject(e)})),this.watchersReady.resolve()):await this.watchersReady.promise}}t.LazyResourceBasedLocator=l},91428:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCollectionCache=t.PythonEnvInfoCache=void 0;const r=n(552),i=n(61905),o=n(69396),s=n(15721),a=n(6514),c=n(28472),l=n(95885);class u extends c.PythonEnvsWatcher{constructor(e){super(),this.persistentStorage=e,this.envs=[],this.validatedEnvs=new Set,this.flushedEnvs=new Set}async validateCache(e,t){(await Promise.all(this.envs.map((async n=>{const{path:r}=(0,a.getEnvPath)(n.executable.filename,n.location);if(await(0,o.pathExists)(r)){if(!e||!t)return!0;if(n.searchLocation)return!0;if(e.some((e=>n.id===e.id)))return!0;if(Array.from(this.validatedEnvs.keys()).some((e=>n.id===e)))return!0}return!1})))).map(((e,t)=>e?-1:t)).filter((e=>-1!==e)).reverse().forEach((e=>{const t=this.envs.splice(e,1)[0];(0,i.traceVerbose)(`Removing invalid env from cache ${t.id}`),this.fire({old:t,new:void 0})})),e&&e.forEach((e=>{const t=this.envs.find((t=>t.id===e.id));t&&!(0,a.areEnvsDeepEqual)(t,e)&&this.updateEnv(t,e,!0)}))}getAllEnvs(){return this.envs}addEnv(e,t){const n=this.envs.find((t=>(0,a.areSameEnv)(t,e)));n?t&&!this.validatedEnvs.has(e.id)&&this.updateEnv(n,e,!0):(this.envs.push(e),this.fire({new:e})),t&&((0,i.traceVerbose)(`Flushing env to cache ${e.id}`),this.validatedEnvs.add(e.id),this.flush(e).ignoreErrors())}updateEnv(e,t,n=!1){if(this.flushedEnvs.has(e.id)&&!n)return;const r=this.envs.findIndex((t=>(0,a.areSameEnv)(t,e)));-1!==r&&(void 0===t?this.envs.splice(r,1):this.envs[r]=t,this.fire({old:e,new:t}))}async getLatestInfo(e){var t;const n=null!==(t=this.envs.find((t=>(0,o.arePathsSame)(t.location,e))))&&void 0!==t?t:this.envs.find((t=>(0,a.areSameEnv)(t,e)));if((null==n?void 0:n.kind)===s.PythonEnvKind.Conda&&"envFolderPath"===(0,a.getEnvPath)(n.executable.filename,n.location).pathType)return await(0,o.pathExists)((0,l.getCondaInterpreterPath)(n.location))?void this.validatedEnvs.delete(n.id):(this.validatedEnvs.add(n.id),n);if(n){if(this.validatedEnvs.has(n.id))return(0,i.traceVerbose)(`Found cached env for ${e}`),n;if(await this.validateInfo(n))return(0,i.traceVerbose)(`Needed to validate ${e} with latest info`),this.validatedEnvs.add(n.id),n}(0,i.traceVerbose)(`No cached env found for ${e}`)}clearAndReloadFromStorage(){this.envs=this.persistentStorage.get(),this.markAllEnvsAsFlushed()}async flush(e){if(e){const t=this.persistentStorage.get(),n=t.findIndex((t=>t.id===e.id));return t[n]=e,this.flushedEnvs.add(e.id),void await this.persistentStorage.store(t)}(0,i.traceVerbose)("Environments added to cache",JSON.stringify(this.envs)),this.markAllEnvsAsFlushed(),await this.persistentStorage.store(this.envs)}markAllEnvsAsFlushed(){this.envs.forEach((e=>{this.flushedEnvs.add(e.id)}))}async validateInfo(e){if(!this.flushedEnvs.has(e.id))return!1;if(-1===e.version.micro||-1===e.version.major||-1===e.version.minor)return!1;const{ctime:t,mtime:n}=await(0,o.getFileInfo)(e.executable.filename);return-1!==t&&-1!==n&&t===e.executable.ctime&&n===e.executable.mtime||(e.executable.ctime=t,e.executable.mtime=n,!1)}}t.PythonEnvInfoCache=u,t.createCollectionCache=async function(e){const t=new u(e);return t.clearAndReloadFromStorage(),await async function(e){return(0,r.isTestExecution)()?e.validateCache():e.validateCache().ignoreErrors()}(t),t}},95117:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvsCollectionService=void 0;const r=n(54980);n(87295);const i=n(7855),o=n(51080),s=n(61905),a=n(51535),c=n(53322),l=n(69396),u=n(15721),p=n(6514),d=n(18162),h=n(94725),f=n(28472);class v extends f.PythonEnvsWatcher{get onProgress(){return this.progress.event}getRefreshPromise(e){var t,n;const r=null!==(t=null==e?void 0:e.stage)&&void 0!==t?t:d.ProgressReportStage.discoveryFinished;return null===(n=this.progressPromises.get(r))||void 0===n?void 0:n.promise}constructor(e,t,n){super(),this.cache=e,this.locator=t,this.usingNativeLocator=n,this.refreshesPerQuery=new Map,this.scheduledRefreshesPerQuery=new Map,this.progressPromises=new Map,this.hasRefreshFinishedForQuery=new Map,this.progress=new r.EventEmitter,this.refreshState=d.ProgressReportStage.discoveryFinished,this.locator.onChanged((e=>{const t=e.providerId?{providerId:e.providerId,envPath:e.envPath}:void 0;let n=this.scheduledRefreshesPerQuery.get(t);n||(n=this.scheduleNewRefresh(t)),n.then((()=>{this.fire(e)}))})),this.cache.onChanged((e=>{this.fire(e)})),this.onProgress((e=>{var t;this.refreshState=e.stage,null===(t=this.progressPromises.get(e.stage))||void 0===t||t.resolve(),this.progressPromises.delete(e.stage)}))}async resolveEnv(e){e=(0,l.normalizePath)(e);const t=await this.cache.getLatestInfo(e);if(t)return t;const n=await this.locator.resolveEnv(e).catch((t=>{(0,s.traceError)(`Failed to resolve ${e}`,t)}));return(0,s.traceVerbose)(`Resolved ${e} using downstream locator`),n&&this.cache.addEnv(n,!0),n}getEnvs(e){const t=this.cache.getAllEnvs();return e?t.filter((0,h.getQueryFilter)(e)):t}triggerRefresh(e,t){let n=this.getRefreshPromiseForQuery(e);if(!n){if((null==t?void 0:t.ifNotTriggerredAlready)&&this.hasRefreshFinished(e))return Promise.resolve();const r=new o.StopWatch;(0,s.traceInfo)("Starting Environment refresh"),n=this.startRefresh(e).then((()=>{this.sendTelemetry(e,r),(0,s.traceInfo)(`Environment refresh took ${r.elapsedTime} milliseconds`)}))}return n}startRefresh(e){return this.createProgressStates(e),this.addEnvsToCacheForQuery(e).then((async()=>{this.resolveProgressStates(e)})).catch((t=>{this.rejectProgressStates(e,t)}))}async addEnvsToCacheForQuery(e){const t=this.locator.iterEnvs(e),n=[],r={done:!1,pending:0},a=(0,i.createDeferred)(),c=new o.StopWatch;if(void 0!==t.onUpdated){const i=t.onUpdated((async t=>{if((0,d.isProgressEvent)(t))switch(t.stage){case d.ProgressReportStage.discoveryFinished:r.done=!0,i.dispose(),(0,s.traceInfo)(`Environments refresh finished (event): ${c.elapsedTime} milliseconds`);break;case d.ProgressReportStage.allPathsDiscovered:e||((0,s.traceInfo)(`Environments refresh paths discovered (event): ${c.elapsedTime} milliseconds`),this.progress.fire(t));break;default:this.progress.fire(t)}else void 0!==t.index&&(r.pending+=1,this.cache.updateEnv(n[t.index],t.update),t.update&&(n[t.index]=t.update),r.pending-=1);r.done&&0===r.pending&&a.resolve()}))}else this.progress.fire({stage:d.ProgressReportStage.discoveryStarted}),a.resolve();for await(const e of t)n.push(e),this.cache.addEnv(e);(0,s.traceInfo)(`Environments refresh paths discovered: ${c.elapsedTime} milliseconds`),await a.promise,await this.cache.validateCache(n,void 0===e),this.cache.flush().ignoreErrors()}getRefreshPromiseForQuery(e){var t,n,r;return null!==(n=null===(t=this.refreshesPerQuery.get(e))||void 0===t?void 0:t.promise)&&void 0!==n?n:null===(r=this.refreshesPerQuery.get(void 0))||void 0===r?void 0:r.promise}hasRefreshFinished(e){var t;return null!==(t=this.hasRefreshFinishedForQuery.get(e))&&void 0!==t?t:this.hasRefreshFinishedForQuery.get(void 0)}async scheduleNewRefresh(e){const t=this.getRefreshPromiseForQuery(e);let n;return t?(n=t.then((()=>{this.scheduledRefreshesPerQuery.delete(e),this.startRefresh(e)})),this.scheduledRefreshesPerQuery.set(e,n)):n=this.startRefresh(e),n}createProgressStates(e){this.refreshesPerQuery.set(e,(0,i.createDeferred)()),Object.values(d.ProgressReportStage).forEach((e=>{this.progressPromises.set(e,(0,i.createDeferred)())})),d.ProgressReportStage.allPathsDiscovered&&e&&this.progressPromises.delete(d.ProgressReportStage.allPathsDiscovered)}rejectProgressStates(e,t){var n;null===(n=this.refreshesPerQuery.get(e))||void 0===n||n.reject(t),this.refreshesPerQuery.delete(e),Object.values(d.ProgressReportStage).forEach((e=>{var n;null===(n=this.progressPromises.get(e))||void 0===n||n.reject(t),this.progressPromises.delete(e)}))}resolveProgressStates(e){var t;null===(t=this.refreshesPerQuery.get(e))||void 0===t||t.resolve(),this.refreshesPerQuery.delete(e),Array.from(this.refreshesPerQuery.values()).every((e=>e.completed))&&this.progress.fire({stage:d.ProgressReportStage.discoveryFinished})}sendTelemetry(e,t){if(!e&&!this.hasRefreshFinished(e)){const e=this.cache.getAllEnvs(),n=e.filter((e=>"envFolderPath"===(0,p.getEnvPath)(e.executable.filename,e.location).pathType)).length,r=e.filter((e=>e.kind===u.PythonEnvKind.ActiveState)).length,i=e.filter((e=>e.kind===u.PythonEnvKind.Conda)).length,o=e.filter((e=>e.kind===u.PythonEnvKind.Custom)).length,s=e.filter((e=>e.kind===u.PythonEnvKind.Hatch)).length,l=e.filter((e=>e.kind===u.PythonEnvKind.MicrosoftStore)).length,d=e.filter((e=>e.kind===u.PythonEnvKind.OtherGlobal)).length,h=e.filter((e=>e.kind===u.PythonEnvKind.OtherVirtual)).length,f=e.filter((e=>e.kind===u.PythonEnvKind.Pipenv)).length,v=e.filter((e=>e.kind===u.PythonEnvKind.Poetry)).length,m=e.filter((e=>e.kind===u.PythonEnvKind.Pyenv)).length,g=e.filter((e=>e.kind===u.PythonEnvKind.System)).length,y=e.filter((e=>e.kind===u.PythonEnvKind.Unknown)).length,b=e.filter((e=>e.kind===u.PythonEnvKind.Venv)).length,_=e.filter((e=>e.kind===u.PythonEnvKind.VirtualEnv)).length,E=e.filter((e=>e.kind===u.PythonEnvKind.VirtualEnvWrapper)).length;(0,a.sendTelemetryEvent)(c.EventName.PYTHON_INTERPRETER_DISCOVERY,t.elapsedTime,{interpreters:this.cache.getAllEnvs().length,usingNativeLocator:this.usingNativeLocator,environmentsWithoutPython:n,activeStateEnvs:r,condaEnvs:i,customEnvs:o,hatchEnvs:s,microsoftStoreEnvs:l,otherGlobalEnvs:d,otherVirtualEnvs:h,pipEnvEnvs:f,poetryEnvs:v,pyenvEnvs:m,systemEnvs:g,unknownEnvs:y,venvEnvs:b,virtualEnvEnvs:_,virtualEnvWrapperEnvs:E})}this.hasRefreshFinishedForQuery.set(e,!0)}}t.EnvsCollectionService=v},4898:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvsReducer=void 0;const r=n(2543),i=n(54980),o=n(61905),s=n(69396),a=n(6514),c=n(11352),l=n(18162);async function u(e,t,n,i,o){n.pending+=1;const a=o[e],l=function(e,t){var n,i;const[o]=function(...e){const t=(0,c.getPrioritizedEnvKinds)();return e.sort(((e,n)=>t.indexOf(e.kind)-t.indexOf(n.kind)))}(e,t),a=(0,r.cloneDeep)(o);return a.source=(0,r.uniq)((null!==(n=e.source)&&void 0!==n?n:[]).concat(null!==(i=t.source)&&void 0!==i?i:[])),a.searchLocation=function(e,t){var n;if(e.searchLocation&&t.searchLocation){if((0,s.isParentPath)(e.searchLocation.fsPath,t.searchLocation.fsPath))return e.searchLocation;if((0,s.isParentPath)(t.searchLocation.fsPath,e.searchLocation.fsPath))return t.searchLocation}return null!==(n=e.searchLocation)&&void 0!==n?n:t.searchLocation}(e,t),a}(a,t);(0,r.isEqual)(a,l)||(o[e]=l,i.fire({index:e,old:a,update:l})),n.pending-=1,p(n,i)}function p(e,t){e.done&&0===e.pending&&(t.fire({stage:l.ProgressReportStage.discoveryFinished}),t.dispose(),(0,o.traceVerbose)("Finished with environment reducer"))}t.PythonEnvsReducer=class{get onChanged(){return this.parentLocator.onChanged}constructor(e){this.parentLocator=e}iterEnvs(e){const t=new i.EventEmitter,n=async function*(e,t){const n={done:!1,pending:0},r=[];if(void 0!==e.onUpdated){const i=e.onUpdated((e=>{if((0,l.isProgressEvent)(e))e.stage===l.ProgressReportStage.discoveryFinished?(n.done=!0,i.dispose()):t.fire(e);else{if(void 0===e.update)throw new Error("Unsupported behavior: `undefined` environment updates are not supported from downstream locators in reducer");if(void 0!==e.index&&void 0!==r[e.index]){const n=r[e.index];r[e.index]=e.update,t.fire({index:e.index,old:n,update:e.update})}else(0,o.traceVerbose)(`Expected already iterated env, got ${e.old} (#${e.index})`)}n.pending-=1,p(n,t)}))}else t.fire({stage:l.ProgressReportStage.discoveryStarted});let i=await e.next();for(;!i.done;){const o=i.value,s=r.findIndex((e=>(0,a.areSameEnv)(e,o)));-1!==s?u(s,o,n,t,r).ignoreErrors():(yield o,r.push(o)),i=await e.next()}void 0===e.onUpdated&&(n.done=!0,p(n,t))}(this.parentLocator.iterEnvs(e),t);return n.onUpdated=t.event,n}}},78582:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvsResolver=void 0;const r=n(2543),i=n(54980),o=n(24230),s=n(15721),a=n(6514),c=n(18162),l=n(30977),u=n(61905),p=n(96966),d=n(71067);async function h(e,t){const{path:n}=(0,a.getEnvPath)(e.executablePath,e.envPath);if(e.identifiedUsingNativeLocator)return void t.set(n,e.kind);let r=t.get(n);if(!r){if(!(0,o.isIdentifierRegistered)(e.kind))return;r=await(0,o.identifyEnvironment)(n),t.set(n,r)}e.kind=r}function f(e,t){e.done&&0===e.pending&&(t.fire({stage:c.ProgressReportStage.discoveryFinished}),t.dispose(),(0,u.traceVerbose)("Finished with environment resolver"))}function v(e,t,n=!1){const i=(0,r.cloneDeep)(t);return i.executable.sysPrefix=e.executable.sysPrefix,"envFolderPath"!==(0,a.getEnvPath)(i.executable.filename,i.location).pathType||t.kind===s.PythonEnvKind.MicrosoftStore||n?i.version=e.version:i.version=(0,d.getEmptyVersion)(),i.arch=e.arch,(0,a.setEnvDisplayString)(i),i}t.PythonEnvsResolver=class{get onChanged(){return this.parentLocator.onChanged}constructor(e,t){this.parentLocator=e,this.environmentInfoService=t,this.parentLocator.onChanged((e=>{e.type&&void 0!==e.searchLocation&&this.environmentInfoService.resetInfo(e.searchLocation)}))}async resolveEnv(e){const[t,n]=await async function(e){var t;let n,r;return await(0,p.isPythonExecutable)(e).catch((t=>((0,u.traceWarn)("Failed to check if",e,"is an executable",t),!0)))?(n=e,r=(0,p.getEnvironmentDirFromPath)(n)):(r=e,n=null!==(t=await(0,p.getInterpreterPathFromDir)(r))&&void 0!==t?t:""),[n,r]}(e);e=t.length?t:n;const r=await(0,o.identifyEnvironment)(e),i=await(0,l.resolveBasicEnv)({kind:r,executablePath:t,envPath:n}),s=await this.environmentInfoService.getEnvironmentInfo(i);if((0,u.traceVerbose)(`Environment resolver resolved ${e} for ${JSON.stringify(i)} to ${JSON.stringify(s)}`),s)return v(s,i)}iterEnvs(e){const t=new i.EventEmitter,n=this.parentLocator.iterEnvs(e),r=this.iterEnvsIterator(n,t);return r.onUpdated=t.event,r}async*iterEnvsIterator(e,t){const n=new Map,r={done:!1,pending:0},i=[];if(void 0!==e.onUpdated){const o=e.onUpdated((async e=>{if(r.pending+=1,(0,c.isProgressEvent)(e))e.stage===c.ProgressReportStage.discoveryFinished?(t.fire({stage:c.ProgressReportStage.allPathsDiscovered}),r.done=!0,o.dispose()):t.fire(e);else{if(void 0===e.update)throw new Error("Unsupported behavior: `undefined` environment updates are not supported from downstream locators in resolver");if(void 0!==e.index&&void 0!==i[e.index]){const o=i[e.index];await h(e.update,n),i[e.index]=await(0,l.resolveBasicEnv)(e.update),t.fire({old:o,index:e.index,update:i[e.index]}),this.resolveInBackground(e.index,r,t,i).ignoreErrors()}else(0,u.traceVerbose)(`Expected already iterated env, got ${e.old} (#${e.index})`)}r.pending-=1,f(r,t)}))}else t.fire({stage:c.ProgressReportStage.discoveryStarted});let o=await e.next();for(;!o.done;){await h(o.value,n);const s=await(0,l.resolveBasicEnv)(o.value);i.push(s),yield s,this.resolveInBackground(i.indexOf(s),r,t,i).ignoreErrors(),o=await e.next()}void 0===e.onUpdated&&(r.done=!0,f(r,t))}async resolveInBackground(e,t,n,r){t.pending+=1;const i=await this.environmentInfoService.getEnvironmentInfo(r[e]),o=r[e];if(i){const t=v(i,r[e],o.identifiedUsingNativeLocator);r[e]=t,n.fire({old:o,index:e,update:t})}else n.fire({old:o,index:e,update:void 0});t.pending-=1,f(t,n)}}},30977:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveBasicEnv=void 0;const s=o(n(16928)),a=n(54980),c=n(2543),l=n(15721),u=n(6514),p=n(96966),d=n(69396),h=n(95885),f=n(60852),v=n(48112),m=n(71067),g=n(56300),y=n(39397),b=n(61905),_=n(45163),E=n(8841),S=n(74857);async function w(e){const{executablePath:t}=e;let n;try{n=e.identifiedUsingNativeLocator?e.version:(0,y.parseVersionFromExecutable)(t)}catch(e){n=l.UNKNOWN_PYTHON_VERSION}return(0,u.buildEnvInfo)({kind:e.kind,name:e.name,display:e.displayName,sysPrefix:e.envPath,location:e.envPath,searchLocation:e.searchLocation,version:n,executable:t,identifiedUsingNativeLocator:e.identifiedUsingNativeLocator})}async function P(e){var t;const{executablePath:n,kind:r}=e,i=(0,u.buildEnvInfo)({kind:r,version:e.identifiedUsingNativeLocator?e.version:await(0,p.getPythonVersionFromPath)(n),executable:n,sysPrefix:e.envPath,location:e.envPath,display:e.displayName,searchLocation:e.searchLocation,identifiedUsingNativeLocator:e.identifiedUsingNativeLocator,name:e.name,type:l.PythonEnvType.Virtual}),o=null!==(t=e.envPath)&&void 0!==t?t:(0,p.getEnvironmentDirFromPath)(n);return i.location=o,i.name=s.basename(o),i}async function T(e){var t,n,r,i;if(e.identifiedUsingNativeLocator){const r=e.executablePath,i=null!==(t=e.envPath)&&void 0!==t?t:(0,p.getEnvironmentDirFromPath)(r),o=null!==(n=e.version)&&void 0!==n?n:r?await(0,p.getPythonVersionFromPath)(r):void 0,a=(0,u.buildEnvInfo)({executable:r,kind:l.PythonEnvKind.Conda,org:h.AnacondaCompanyName,location:i,sysPrefix:i,display:e.displayName,identifiedUsingNativeLocator:e.identifiedUsingNativeLocator,searchLocation:e.searchLocation,source:[],version:o,type:l.PythonEnvType.Conda,name:e.name});if(e.envPath&&r&&s.basename(r)===r){const t=(0,h.getCondaInterpreterPath)(e.envPath);a.id=(0,u.getEnvID)(t,e.envPath)}return a}const{executablePath:o}=e,a=await h.Conda.getConda();if(void 0===a){(0,b.traceWarn)(`${o} identified as Conda environment even though Conda is not found`),e.kind=l.PythonEnvKind.Unknown;const t=await P(e);return t.type=l.PythonEnvType.Conda,t.name="",t}const c=null!==(r=e.envPath)&&void 0!==r?r:(0,p.getEnvironmentDirFromPath)(e.executablePath);let d;d=e.executablePath.length>0?e.executablePath:await a.getInterpreterPathForEnvironment({prefix:c});const f=d?await(0,h.getPythonVersionFromConda)(d):void 0,v=(0,u.buildEnvInfo)({executable:d,kind:l.PythonEnvKind.Conda,org:h.AnacondaCompanyName,location:c,source:[],version:f,type:l.PythonEnvType.Conda,name:null!==(i=e.name)&&void 0!==i?i:await(null==a?void 0:a.getName(c))});if(e.envPath&&s.basename(d)===d){const t=(0,h.getCondaInterpreterPath)(e.envPath);v.id=(0,u.getEnvID)(t,e.envPath)}return v}async function C(e){var t,n;const{executablePath:r}=e,i=null!==(t=e.envPath)&&void 0!==t?t:(0,p.getEnvironmentDirFromPath)(r),o=s.basename(i),a=(0,f.parsePyenvVersion)(o),c=(0,u.buildEnvInfo)({kind:e.identifiedUsingNativeLocator&&e.kind?e.kind:l.PythonEnvKind.Pyenv,executable:r,source:[],location:i,searchLocation:e.searchLocation,sysPrefix:e.envPath,display:e.displayName,name:e.name,identifiedUsingNativeLocator:e.identifiedUsingNativeLocator,version:null!==(n=e.version)&&void 0!==n?n:await(0,p.getPythonVersionFromPath)(r,null==a?void 0:a.pythonVer),org:a&&a.distro?a.distro:""});return e.identifiedUsingNativeLocator||(await async function(e){if(!await(0,h.isCondaEnvironment)(e))return!1;const t=(0,p.getEnvironmentDirFromPath)(e),n=(0,f.getPyenvVersionsDir)();return(0,d.arePathsSame)(s.dirname(t),n)}(r)?c.name="base":c.name=o),c}async function x(e){const t=(0,u.buildEnvInfo)({kind:e.kind,executable:e.executablePath,display:e.displayName,version:e.version,identifiedUsingNativeLocator:e.identifiedUsingNativeLocator,location:e.envPath,name:e.name,searchLocation:e.searchLocation,sysPrefix:e.envPath}),n=await S.ActiveState.getState().then((e=>null==e?void 0:e.getProjects()));if(n)for(const r of n)for(const n of r.executables)if((0,d.arePathsSame)(n,s.dirname(e.executablePath)))return t.name=`${r.organization}/${r.name}`,t;return t}async function I(e){var t;const{executablePath:n}=e;return(0,u.buildEnvInfo)({kind:l.PythonEnvKind.MicrosoftStore,executable:n,version:null!==(t=e.version)&&void 0!==t?t:(0,m.getPythonVersionFromPath)(n),org:"Microsoft",display:e.displayName,location:e.envPath,sysPrefix:e.envPath,searchLocation:e.searchLocation,name:e.name,identifiedUsingNativeLocator:e.identifiedUsingNativeLocator,arch:v.Architecture.x64,source:[l.PythonEnvSource.PathEnvVar]})}t.resolveBasicEnv=async function(e){var t;const{kind:n,source:r,searchLocation:i}=e,o=function(){const e=new Map;return Object.values(l.PythonEnvKind).forEach((t=>{e.set(t,w)})),l.virtualEnvKinds.forEach((t=>{e.set(t,P)})),e.set(l.PythonEnvKind.Conda,T),e.set(l.PythonEnvKind.MicrosoftStore,I),e.set(l.PythonEnvKind.Pyenv,C),e.set(l.PythonEnvKind.ActiveState,x),e}().get(n),s=await o(e);if(s.searchLocation=function(e,t){if(t)return t;return(0,E.getWorkspaceFolderPaths)().some((t=>(0,d.isParentPath)(e.executable.filename,t)||(0,d.isParentPath)(e.location,t)))?a.Uri.file(e.location):void 0}(s,i),s.source=(0,c.uniq)(s.source.concat(null!=r?r:[])),!e.identifiedUsingNativeLocator&&(0,v.getOSType)()===v.OSType.Windows&&(null===(t=s.source)||void 0===t?void 0:t.includes(l.PythonEnvSource.WindowsRegistry))&&await async function(e){var t,n,r;let i=(0,g.getRegistryInterpretersSync)();i||((0,b.traceError)("Expected registry interpreter cache to be initialized already"),i=await(0,g.getRegistryInterpreters)());const o=i.find((t=>(0,d.arePathsSame)(t.interpreterPath,e.executable.filename)));if(o){const i=null!==(n=null!==(t=o.versionStr)&&void 0!==t?t:o.sysVersionStr)&&void 0!==n?n:o.interpreterPath;let s;try{s=(0,m.parseVersion)(i)}catch(e){s=l.UNKNOWN_PYTHON_VERSION}e.kind=e.kind===l.PythonEnvKind.Unknown?l.PythonEnvKind.OtherGlobal:e.kind,e.version=(0,u.comparePythonVersionSpecificity)(s,e.version)>0?s:e.version,e.distro.defaultDisplayName=o.companyDisplayName,e.arch="32bit"===o.bitnessStr?v.Architecture.x86:v.Architecture.x64,e.distro.org=null!==(r=o.distroOrgName)&&void 0!==r?r:e.distro.org,e.source=(0,c.uniq)(e.source.concat(l.PythonEnvSource.WindowsRegistry))}else(0,b.traceWarn)("Expected registry to find the interpreter as source was set")}(s),(0,u.setEnvDisplayString)(s),e.arch&&!s.arch&&(s.arch=e.arch),e.ctime&&e.mtime)s.executable.ctime=e.ctime,s.executable.mtime=e.mtime;else{const{ctime:e,mtime:t}=await(0,d.getFileInfo)(s.executable.filename);s.executable.ctime=e,s.executable.mtime=t}if(!e.identifiedUsingNativeLocator){const e=await async function(e){return e.type?e.type:await(0,_.isVirtualEnvironment)(e.executable.filename)?l.PythonEnvType.Virtual:await(0,h.isCondaEnvironment)(e.executable.filename)?l.PythonEnvType.Conda:void 0}(s);e&&(s.type=e)}return s}},14688:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveStateLocator=void 0;const r=n(74857),i=n(15721),o=n(61905),s=n(96211),a=n(96966),c=n(51080);class l extends s.LazyResourceBasedLocator{constructor(){super(...arguments),this.providerId="activestate"}async*doIterEnvs(){const e=new c.StopWatch,t=await r.ActiveState.getState();if(void 0===t)return void(0,o.traceVerbose)("Couldn't locate the state binary.");(0,o.traceInfo)("Searching for active state environments");const n=await t.getProjects();if(void 0!==n){for(const e of n)if(e.executables)for(const t of e.executables)try{(0,o.traceVerbose)(`Looking for Python in: ${e.name}`);for await(const e of(0,a.findInterpretersInDir)(t))(0,o.traceVerbose)(`Found Python executable: ${e.filename}`),yield{kind:i.PythonEnvKind.ActiveState,executablePath:e.filename}}catch(t){(0,o.traceError)(`Failed to process State Tool project: ${JSON.stringify(e)}`,t)}(0,o.traceInfo)(`Finished searching for active state environments: ${e.elapsedTime} milliseconds`)}else(0,o.traceVerbose)("Couldn't fetch State Tool projects.")}}t.ActiveStateLocator=l},63484:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CondaEnvironmentLocator=void 0,n(87295);const r=n(15721),i=n(95885),o=n(61905),s=n(46691),a=n(51080);class c extends s.FSWatchingLocator{constructor(){super((()=>(0,i.getCondaEnvironmentsTxt)()),(async()=>r.PythonEnvKind.Conda),{isFile:!0}),this.providerId="conda-envs"}async*doIterEnvs(e){const t=new a.StopWatch;(0,o.traceInfo)("Searching for conda environments");const n=await i.Conda.getConda();if(void 0===n)return void(0,o.traceVerbose)("Couldn't locate the conda binary.");(0,o.traceVerbose)(`Searching for conda environments using ${n.command}`);const s=await n.getEnvList();for(const e of s)try{(0,o.traceVerbose)(`Looking into conda env for executable: ${JSON.stringify(e)}`);const t=await n.getInterpreterPathForEnvironment(e);(0,o.traceVerbose)(`Found conda executable: ${t}`),yield{kind:r.PythonEnvKind.Conda,executablePath:t,envPath:e.prefix}}catch(t){(0,o.traceError)(`Failed to process conda env: ${JSON.stringify(e)}`,t)}(0,o.traceInfo)(`Finished searching for conda environments: ${t.elapsedTime} milliseconds`)}}t.CondaEnvironmentLocator=c},45882:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomVirtualEnvironmentLocator=t.VENVFOLDERS_SETTING_KEY=t.VENVPATH_SETTING_KEY=void 0;const s=n(2543),a=o(n(16928)),c=n(7855),l=n(48112),u=n(15721),p=n(46691),d=n(96966),h=n(69396),f=n(35864),v=n(45163);n(87295);const m=n(83597),g=n(61905),y=n(51080),b=n(65900);async function _(){var e;const n=[],r=(0,h.getPythonSetting)(t.VENVPATH_SETTING_KEY);r&&n.push((0,b.untildify)(r));const i=null!==(e=(0,h.getPythonSetting)(t.VENVFOLDERS_SETTING_KEY))&&void 0!==e?e:[],o=(0,l.getUserHomeDir)();return o&&await(0,h.pathExists)(o)&&(i.map((e=>e.startsWith(o)?e:a.join(o,e))).forEach((e=>n.push(e))),i.forEach((e=>n.push((0,b.untildify)(e))))),(0,m.asyncFilter)((0,s.uniq)(n),h.pathExists)}async function E(e){return await(0,f.isPipenvEnvironment)(e)?u.PythonEnvKind.Pipenv:await(0,v.isVirtualenvwrapperEnvironment)(e)?u.PythonEnvKind.VirtualEnvWrapper:await(0,v.isVenvEnvironment)(e)?u.PythonEnvKind.Venv:await(0,v.isVirtualenvEnvironment)(e)?u.PythonEnvKind.VirtualEnv:u.PythonEnvKind.Unknown}t.VENVPATH_SETTING_KEY="venvPath",t.VENVFOLDERS_SETTING_KEY="venvFolders";class S extends p.FSWatchingLocator{constructor(){super(_,E,{delayOnCreated:1e3}),this.providerId="custom-virtual-envs"}async initResources(){this.disposables.push((0,h.onDidChangePythonSetting)(t.VENVPATH_SETTING_KEY,(()=>this.fire()))),this.disposables.push((0,h.onDidChangePythonSetting)(t.VENVFOLDERS_SETTING_KEY,(()=>this.fire())))}doIterEnvs(){return async function*(){const e=new y.StopWatch;(0,g.traceInfo)("Searching for custom virtual environments");const t=(await _()).map((e=>async function*(){(0,g.traceVerbose)(`Searching for custom virtual envs in: ${e}`);const t=(0,d.findInterpretersInDir)(e,2);for await(const e of t){const{filename:t}=e;if(await(0,d.looksLikeBasicVirtualPython)(e))try{const e=await E(t);yield{kind:e,executablePath:t},(0,g.traceVerbose)(`Custom Virtual Environment: [added] ${t}`)}catch(e){(0,g.traceError)(`Failed to process environment: ${t}`,e)}else(0,g.traceVerbose)(`Custom Virtual Environment: [skipped] ${t}`)}}()));yield*(0,c.iterable)((0,c.chain)(t)),(0,g.traceInfo)(`Finished searching for custom virtual envs: ${e.elapsedTime} milliseconds`)}()}}t.CustomVirtualEnvironmentLocator=S},60161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomWorkspaceLocator=t.DEFAULT_INTERPRETER_PATH_SETTING_KEY=void 0;const r=n(15721),i=n(46691),o=n(69396);n(87295);const s=n(61905),a=n(552);t.DEFAULT_INTERPRETER_PATH_SETTING_KEY="defaultInterpreterPath";class c extends i.FSWatchingLocator{constructor(e){super((()=>[]),(async()=>r.PythonEnvKind.Unknown)),this.root=e,this.providerId="custom-workspace-locator"}async initResources(){this.disposables.push((0,o.onDidChangePythonSetting)(t.DEFAULT_INTERPRETER_PATH_SETTING_KEY,(()=>this.fire()),this.root))}doIterEnvs(){return async function*(e){(0,s.traceVerbose)("Searching for custom workspace envs");const n=(0,o.getPythonSetting)(t.DEFAULT_INTERPRETER_PATH_SETTING_KEY,e);n&&n!==a.DEFAULT_INTERPRETER_SETTING&&(yield{kind:r.PythonEnvKind.Unknown,executablePath:n},(0,s.traceVerbose)("Finished searching for custom workspace envs"))}(this.root)}}t.CustomWorkspaceLocator=c},788:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirFilesLocator=void 0;const r=n(96966),i=n(28472);class o{constructor(e,t,n){this.kind=e,this.getExecutables=t,this.source=n,this.watcher=new i.PythonEnvsWatcher,this.onChanged=this.watcher.onChanged}iterEnvs(e){const t=this.getExecutables();return async function*(e,n){for await(const r of t)yield{executablePath:r,kind:e,source:n}}(this.kind,this.source)}}async function*s(e){for await(const t of(0,r.iterPythonExecutablesInDir)(e))yield t.filename}t.DirFilesLocator=class extends o{constructor(e,t,n=s,r){super(t,(()=>n(e)),r),this.providerId=`dir-files-${e}`}}},46691:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FSWatchingLocator=t.FSWatcherKind=void 0;const s=o(n(79896)),a=o(n(16928)),c=n(54980),l=n(29104),u=n(7855),p=n(61905),d=n(96966),h=n(40337),f=n(96211);var v;!function(e){e[e.Global=0]="Global",e[e.Workspace=1]="Workspace"}(v||(t.FSWatcherKind=v={}));class m extends f.LazyResourceBasedLocator{constructor(e,t,n={},r=v.Global){super(),this.getRoots=e,this.getKind=t,this.creationOptions=n,this.watcherKind=r,this.activate().ignoreErrors()}async initWatchers(){if(this.watcherKind===v.Global&&!g(this.creationOptions))return;let e=await this.getRoots();"string"==typeof e&&(e=[e]);const t=e.map((async e=>{if(g(this.creationOptions))return e;const t=await function(e){let t;try{t=s.readdirSync(e)}catch(e){const t=e;return(0,p.traceVerbose)("Reading directory failed",t),"ENOENT"===t.code?"directory does not exist":void 0}if(t.length>200)return"too many files"}(e);if(!t)return e;(0,p.traceWarn)(`Dir "${e}" is not watchable (${t})`)}));(await Promise.all(t)).filter((e=>!!e)).forEach((e=>this.startWatchers(e)))}fire(e={}){this.emitter.fire({...e,providerId:this.providerId})}startWatchers(e){const t=this.creationOptions;if(g(t))return(0,p.traceVerbose)("Start watching file for changes",e),void this.disposables.push((0,l.watchLocationForPattern)(a.dirname(e),a.basename(e),(()=>{(0,p.traceVerbose)("Detected change in file: ",e,"initiating a refresh"),this.emitter.fire({providerId:this.providerId})})));const n=async(e,n)=>{var r;e===l.FileChangeType.Created&&void 0!==t.delayOnCreated&&await(0,u.sleep)(t.delayOnCreated);const i=await this.getKind(n).catch((()=>{})),o=c.Uri.file(null!==(r=t.searchLocation)&&void 0!==r?r:a.dirname((0,d.getEnvironmentDirFromPath)(n)));(0,p.traceVerbose)("Fired event ",JSON.stringify({type:e,kind:i,searchLocation:o}),"from locator"),this.emitter.fire({type:e,kind:i,searchLocation:o,providerId:this.providerId,envPath:n})},r=(0,h.resolvePythonExeGlobs)(t.baseGlob,t.envStructure);(0,p.traceVerbose)("Start watching root",e,"for globs",JSON.stringify(r));const i=r.map((t=>(0,h.watchLocationForPythonBinaries)(e,n,t)));this.disposables.push(...i)}}function g(e){return"isFile"in e&&e.isFile}t.FSWatchingLocator=m},94733:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalVirtualEnvironmentLocator=void 0;const s=n(2543),a=o(n(16928)),c=n(54980),l=n(7855),u=n(48112),p=n(15721),d=n(46691),h=n(96966),f=n(69396),v=n(35864),m=n(45163);n(87295);const g=n(83597),y=n(61905),b=n(51080),_=n(65900);async function E(){const e=[];let t=(0,u.getEnvironmentVariable)("WORKON_HOME");t&&(t=(0,_.untildify)(t),await(0,f.pathExists)(t)&&e.push(t));const n=(0,u.getUserHomeDir)();if(n&&await(0,f.pathExists)(n)){const t=["envs","Envs",".direnv",".venvs",".virtualenvs",a.join(".local","share","virtualenvs")];(await(0,g.asyncFilter)(t.map((e=>a.join(n,e))),f.pathExists)).forEach((t=>e.push(t)))}return[u.OSType.Windows,u.OSType.OSX].includes((0,u.getOSType)())?(0,s.uniqBy)(e,s.toLower):(0,s.uniq)(e)}async function S(e){if(e.kind===p.PythonEnvKind.Pipenv){const t=await(0,v.getProjectDir)(a.dirname(a.dirname(e.executablePath)));if(t)return c.Uri.file(t)}}async function w(e){return await(0,v.isPipenvEnvironment)(e)?p.PythonEnvKind.Pipenv:await(0,m.isVirtualenvwrapperEnvironment)(e)?p.PythonEnvKind.VirtualEnvWrapper:await(0,m.isVenvEnvironment)(e)?p.PythonEnvKind.Venv:await(0,m.isVirtualenvEnvironment)(e)?p.PythonEnvKind.VirtualEnv:p.PythonEnvKind.Unknown}class P extends d.FSWatchingLocator{constructor(e){super(E,w,{delayOnCreated:1e3}),this.searchDepth=e,this.providerId="global-virtual-env"}doIterEnvs(){var e;const t=null!==(e=this.searchDepth)&&void 0!==e?e:2;return async function*(){const e=new b.StopWatch;(0,y.traceInfo)("Searching for global virtual environments");const n=(await E()).map((e=>async function*(){(0,y.traceVerbose)(`Searching for global virtual envs in: ${e}`);const n=(0,h.findInterpretersInDir)(e,t);for await(const e of n){const{filename:t}=e;if(await(0,h.looksLikeBasicVirtualPython)(e)){const e=await w(t),n=await S({kind:e,executablePath:t});try{yield{kind:e,executablePath:t,searchLocation:n},(0,y.traceVerbose)(`Global Virtual Environment: [added] ${t}`)}catch(e){(0,y.traceError)(`Failed to process environment: ${t}`,e)}}else(0,y.traceVerbose)(`Global Virtual Environment: [skipped] ${t}`)}}()));yield*(0,l.iterable)((0,l.chain)(n)),(0,y.traceInfo)(`Finished searching for global virtual envs: ${e.elapsedTime} milliseconds`)}()}}t.GlobalVirtualEnvironmentLocator=P},85243:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HatchLocator=void 0;const r=n(15721),i=n(96211),o=n(80256),s=n(83597),a=n(69396),c=n(61905),l=n(7855),u=n(96966);class p extends i.LazyResourceBasedLocator{constructor(e){super(),this.root=e,this.providerId="hatch"}doIterEnvs(){return async function*(e){const t=(await async function(e){var t;const n=await o.Hatch.getHatch(e),r=null!==(t=await(null==n?void 0:n.getEnvList()))&&void 0!==t?t:[];return(0,s.asyncFilter)(r,a.pathExists)}(e)).map((e=>async function*(){(0,c.traceVerbose)(`Searching for Hatch virtual envs in: ${e}`);const t=await(0,u.getInterpreterPathFromDir)(e);if(void 0!==t)try{yield{executablePath:t,kind:r.PythonEnvKind.Hatch},(0,c.traceVerbose)(`Hatch Virtual Environment: [added] ${t}`)}catch(e){(0,c.traceError)(`Failed to process environment: ${t}`,e)}}()));yield*(0,l.iterable)((0,l.chain)(t)),(0,c.traceVerbose)("Finished searching for Hatch envs")}(this.root)}}t.HatchLocator=p},83406:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MicrosoftStoreLocator=t.getMicrosoftStorePythonExes=void 0;const s=o(n(94027)),a=o(n(16928)),c=o(n(25943)),l=n(15721),u=n(46691),p=n(40337),d=n(66830),h=n(61905),f=n(51080),v="python3.{[0-9],[0-9][0-9]}.exe";function m(e){return s.default(a.basename(e),v,{nocase:!0})}async function g(){if(await(0,d.isStorePythonInstalled)()){const e=(0,d.getMicrosoftStoreAppsRoot)();return(await c.readdir(e)).map((t=>a.join(e,t))).filter(m)}return[]}t.getMicrosoftStorePythonExes=g;class y extends u.FSWatchingLocator{constructor(){super(d.getMicrosoftStoreAppsRoot,(async()=>this.kind),{baseGlob:v,searchLocation:(0,d.getMicrosoftStoreAppsRoot)(),envStructure:p.PythonEnvStructure.Flat}),this.providerId="microsoft-store",this.kind=l.PythonEnvKind.MicrosoftStore}doIterEnvs(){return async function*(e){const t=new f.StopWatch;(0,h.traceInfo)("Searching for windows store envs");const n=await g();yield*n.map((async t=>({kind:e,executablePath:t}))),(0,h.traceInfo)(`Finished searching for windows store envs: ${t.elapsedTime} milliseconds`)}(this.kind)}}t.MicrosoftStoreLocator=y},13545:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PixiLocator=void 0;const s=o(n(16928)),a=n(83597),c=n(7855),l=n(61905),u=n(95885),p=n(69396),d=n(15721),h=n(46691),f=n(8164);class v extends h.FSWatchingLocator{constructor(e){super((async()=>function(e){return[s.join(s.join(e,".pixi"),"envs")]}(this.root)),(async()=>d.PythonEnvKind.Pixi),{delayOnCreated:1e3},h.FSWatcherKind.Workspace),this.root=e,this.providerId="pixi"}doIterEnvs(){return async function*(e){const t=(await async function(e){var t;const n=await(0,f.getPixi)(),r=null!==(t=await(null==n?void 0:n.getEnvList(e)))&&void 0!==t?t:[];return(0,a.asyncFilter)(r,p.pathExists)}(e)).map((e=>async function*(){(0,l.traceVerbose)(`Searching for Pixi virtual envs in: ${e}`);const t=await(0,u.getCondaInterpreterPath)(e);if(void 0!==t)try{yield{executablePath:t,kind:d.PythonEnvKind.Pixi,envPath:e},(0,l.traceVerbose)(`Pixi Virtual Environment: [added] ${t}`)}catch(e){(0,l.traceError)(`Failed to process environment: ${t}`,e)}}()));yield*(0,c.iterable)((0,c.chain)(t)),(0,l.traceVerbose)("Finished searching for Pixi envs")}(this.root)}}t.PixiLocator=v},33342:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PoetryLocator=void 0;const s=o(n(16928)),a=n(54980),c=n(7855),l=n(15721),u=n(96966),p=n(69396),d=n(60649);n(87295);const h=n(83597),f=n(61905),v=n(96211);class m extends v.LazyResourceBasedLocator{constructor(e){super(),this.root=e,this.providerId="poetry"}doIterEnvs(){return async function*(e){const t=(await async function(e){const t=[s.join(e,d.localPoetryEnvDirName)],n=await d.Poetry.getPoetry(e),r=await(null==n?void 0:n.getEnvList());return r&&t.push(...r),(0,h.asyncFilter)(t,p.pathExists)}(e)).map((t=>async function*(){(0,f.traceVerbose)(`Searching for poetry virtual envs in: ${t}`);const n=await(0,u.getInterpreterPathFromDir)(t);if(void 0!==n){const t=await async function(e){return await(0,d.isPoetryEnvironment)(e)?l.PythonEnvKind.Poetry:l.PythonEnvKind.Unknown}(n);try{yield{executablePath:n,kind:t,searchLocation:a.Uri.file(e)},(0,f.traceVerbose)(`Poetry Virtual Environment: [added] ${n}`)}catch(e){(0,f.traceError)(`Failed to process environment: ${n}`,e)}}}()));yield*(0,c.iterable)((0,c.chain)(t)),(0,f.traceVerbose)("Finished searching for poetry envs")}(this.root)}}t.PoetryLocator=m},17663:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PosixKnownPathsLocator=void 0;const s=o(n(70857)),a=n(99589),c=n(15721),l=n(18162),u=n(93830),p=n(60852),d=n(48112),h=n(80292),f=n(61905),v=n(51080);class m extends l.Locator{constructor(){super(...arguments),this.providerId="posixKnownPaths",this.kind=c.PythonEnvKind.OtherGlobal}iterEnvs(){let e=!1;return(0,d.getOSType)()===d.OSType.OSX&&(0,a.gte)(s.release(),"21.0.0")&&(e=!0),async function*(t){const n=new v.StopWatch;(0,f.traceInfo)("Searching for interpreters in posix paths locator");try{const n=(await(0,u.commonPosixBinPaths)()).filter((e=>!(0,p.isPyenvShimDir)(e)));let r=await(0,u.getPythonBinFromPosixPaths)(n);(0,f.traceVerbose)(`Found ${r.length} python binaries in posix paths`),e&&(r=r.filter((e=>!(0,h.isMacDefaultPythonPath)(e))));for(const e of r)try{yield{executablePath:e,kind:t,source:[c.PythonEnvSource.PathEnvVar]}}catch(t){(0,f.traceError)(`Failed to process environment: ${e}`,t)}}catch(e){(0,f.traceError)("Failed to process posix paths",e)}(0,f.traceInfo)(`Finished searching for interpreters in posix paths locator: ${n.elapsedTime} milliseconds`)}(this.kind)}}t.PosixKnownPathsLocator=m},27919:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PyenvLocator=void 0;const r=n(15721),i=n(46691),o=n(96966),s=n(69396),a=n(60852),c=n(61905),l=n(51080);class u extends i.FSWatchingLocator{constructor(){super(a.getPyenvVersionsDir,(async()=>r.PythonEnvKind.Pyenv)),this.providerId="pyenv"}doIterEnvs(){return async function*(){const e=new l.StopWatch;(0,c.traceInfo)("Searching for pyenv environments");try{const e=(0,a.getPyenvVersionsDir)(),t=(0,s.getSubDirs)(e,{resolveSymlinks:!0});for await(const e of t){const t=await(0,o.getInterpreterPathFromDir)(e);if(t)try{yield{kind:r.PythonEnvKind.Pyenv,executablePath:t}}catch(e){(0,c.traceError)(`Failed to process environment: ${t}`,e)}}}catch(e){(0,c.traceInfo)("pyenv is not installed")}(0,c.traceInfo)(`Finished searching for pyenv environments: ${e.elapsedTime} milliseconds`)}()}}t.PyenvLocator=u},2097:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsPathEnvVarLocator=void 0;const s=o(n(16928)),a=n(62982),c=n(51271),l=n(60852),u=n(66830),p=n(15721),d=n(95465),h=n(94725),f=n(788),v=n(61905),m=n(69396),g=n(94496),y=n(96966),b=n(51080);async function*_(e){for await(const t of(0,y.iterPythonExecutablesInDir)(e))await(0,y.looksLikeBasicGlobalPython)(t)&&(yield t.filename)}async function*E(e){const t=s.join(e,"python.exe");await(0,m.pathExists)(t)&&(yield t)}t.WindowsPathEnvVarLocator=class{constructor(){this.providerId="windows-path-env-var-locator",this.disposables=new c.Disposables;const e=(0,m.inExperiment)(g.DiscoveryUsingWorkers.experiment),t=(0,a.getSearchPathEntries)().filter((e=>!(0,u.isMicrosoftStoreDir)(e)&&!(0,l.isPyenvShimDir)(e))).map((t=>function(e,t,n,r){const i=r?E:_,o=new f.DirFilesLocator(e,t,i,n);return{providerId:o.providerId,iterEnvs:async function*(e){yield*await(0,h.getEnvs)(o.iterEnvs(e)).then((e=>e))},dispose:async()=>{},onChanged:o.onChanged}}(t,p.PythonEnvKind.System,[p.PythonEnvSource.PathEnvVar],e)));this.disposables.push(...t),this.locators=new d.Locators(t),this.onChanged=this.locators.onChanged}async dispose(){this.locators.dispose(),await this.disposables.dispose()}iterEnvs(e){return async function*(e){const t=new b.StopWatch;(0,v.traceInfo)("Searching windows known paths locator");for await(const t of e)yield t;(0,v.traceInfo)(`Finished searching windows known paths locator: ${t.elapsedTime} milliseconds`)}(this.locators.iterEnvs(e))}}},41979:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsRegistryLocator=t.WINDOWS_REG_PROVIDER_ID=void 0;const r=n(15721),i=n(18162),o=n(56300),s=n(61905),a=n(66830),c=n(94496),l=n(69396),u=n(51080);t.WINDOWS_REG_PROVIDER_ID="windows-registry";class p extends i.Locator{constructor(){super(...arguments),this.providerId=t.WINDOWS_REG_PROVIDER_ID}iterEnvs(e,n=(0,l.inExperiment)(c.DiscoveryUsingWorkers.experiment)){return n?(null==e?void 0:e.providerId)===this.providerId?d():async function*(e){(async function(e){const n=new u.StopWatch;(0,s.traceInfo)("Searching for windows registry interpreters"),e.fire({providerId:t.WINDOWS_REG_PROVIDER_ID}),(0,s.traceInfo)(`Finished searching for windows registry interpreters: ${n.elapsedTime} milliseconds`)})(e).ignoreErrors()}(this.emitter):d()}}async function*d(){const e=new u.StopWatch;(0,s.traceInfo)("Searching for windows registry interpreters");const t=await(0,o.getRegistryInterpreters)();for(const e of t)try{if((0,a.isMicrosoftStoreDir)(e.interpreterPath))continue;const t={kind:r.PythonEnvKind.OtherGlobal,executablePath:e.interpreterPath,source:[r.PythonEnvSource.WindowsRegistry]};yield t}catch(t){(0,s.traceError)(`Failed to process environment: ${e}`,t)}(0,s.traceInfo)(`Finished searching for windows registry interpreters: ${e.elapsedTime} milliseconds`)}t.WindowsRegistryLocator=p},32080:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceVirtualEnvironmentLocator=void 0;const s=o(n(16928)),a=n(7855),c=n(96966),l=n(69396),u=n(35864),p=n(45163),d=n(15721),h=n(46691);n(87295);const f=n(83597),v=n(61905);function m(e){return(0,f.asyncFilter)([e,s.join(e,".direnv")],l.pathExists)}async function g(e){return await(0,u.isPipenvEnvironment)(e)?d.PythonEnvKind.Pipenv:await(0,p.isVenvEnvironment)(e)?d.PythonEnvKind.Venv:await(0,p.isVirtualenvEnvironment)(e)?d.PythonEnvKind.VirtualEnv:d.PythonEnvKind.Unknown}class y extends h.FSWatchingLocator{constructor(e){super((()=>m(this.root)),g,{delayOnCreated:1e3},h.FSWatcherKind.Workspace),this.root=e,this.providerId="workspaceVirtualEnvLocator"}doIterEnvs(){return async function*(e){const t=(await m(e)).map((e=>async function*(){(0,v.traceVerbose)(`Searching for workspace virtual envs in: ${e}`);const t=(0,c.findInterpretersInDir)(e,2);for await(const e of t){const{filename:t}=e;if(await(0,c.looksLikeBasicVirtualPython)(e)){const e=await g(t);yield{kind:e,executablePath:t},(0,v.traceVerbose)(`Workspace Virtual Environment: [added] ${t}`)}else(0,v.traceVerbose)(`Workspace Virtual Environment: [skipped] ${t}`)}}()));yield*(0,a.iterable)((0,a.chain)(t)),(0,v.traceVerbose)("Finished searching for workspace virtual envs")}(this.root)}}t.WorkspaceVirtualEnvironmentLocator=y},74236:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceLocators=t.ExtensionLocators=void 0;const r=n(7855),i=n(98803),o=n(51271),s=n(95465),a=n(96211);class c extends s.Locators{constructor(e,t){super([...e,t]),this.nonWorkspace=e,this.workspace=t}iterEnvs(e){var t;const n=[this.workspace.iterEnvs(e)];if(!(null===(t=null==e?void 0:e.searchLocations)||void 0===t?void 0:t.doNotIncludeNonRooted)){const t=(null==e?void 0:e.providerId)?this.nonWorkspace.filter((t=>e.providerId===t.providerId)):this.nonWorkspace;n.push(...t.map((t=>t.iterEnvs(e))))}return(0,s.combineIterators)(n)}}t.ExtensionLocators=c;class l extends a.LazyResourceBasedLocator{constructor(e,t){super(),this.watchRoots=e,this.factories=t,this.providerId="workspace-locators",this.locators={},this.roots={},this.activate().ignoreErrors()}async dispose(){await super.dispose(),Object.keys(this.roots).map((e=>this.roots[e])).forEach((e=>this.removeRoot(e)))}doIterEnvs(e){const t=Object.keys(this.locators).map((t=>{if(void 0!==(null==e?void 0:e.searchLocations)){const n=this.roots[t],o=(0,i.getURIFilter)(n,{checkParent:!0,checkChild:!0});if(!e.searchLocations.roots.some(o))return(0,r.iterEmpty)();if(e.providerId&&e.providerId!==this.providerId)return(0,r.iterEmpty)()}const[n]=this.locators[t];return n.iterEnvs(e)}));return(0,s.combineIterators)(t)}async initResources(){const e=this.watchRoots({initRoot:e=>this.addRoot(e),addRoot:e=>{this.removeRoot(e),this.addRoot(e),this.emitter.fire({searchLocation:e})},removeRoot:e=>{this.removeRoot(e),this.emitter.fire({searchLocation:e})}});this.disposables.push(e)}addRoot(e){const t=[],n=new o.Disposables;this.factories.forEach((r=>{r(e).forEach((e=>{t.push(e),void 0!==e.dispose&&n.push(e)}))}));const r=new s.Locators(t),i=e.toString();this.locators[i]=[r,n],this.roots[i]=e,n.push(r.onChanged((t=>{void 0===t.searchLocation&&(t.searchLocation=e),this.emitter.fire(t)})))}removeRoot(e){const t=e.toString(),n=this.locators[t];if(void 0===n)return;const[,r]=n;delete this.locators[t],delete this.roots[t],r.dispose()}}t.WorkspaceLocators=l},28472:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvsWatcher=void 0;const r=n(54980);t.PythonEnvsWatcher=class{constructor(){this.didChange=new r.EventEmitter,this.onChanged=this.didChange.event}fire(e){this.didChange.fire(e)}}},97087:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvsWatchers=void 0;const r=n(51271),i=n(28472);t.PythonEnvsWatchers=class{constructor(e){this.watcher=new i.PythonEnvsWatcher,this.disposables=new r.Disposables,this.onChanged=this.watcher.onChanged,e.forEach((e=>{const t=e.onChanged((e=>this.watcher.fire(e)));this.disposables.push(t)}))}async dispose(){await this.disposables.dispose()}}},96966:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvironmentDirFromPath=t.getInterpreterPathFromDir=t.looksLikeBasicVirtualPython=t.looksLikeBasicGlobalPython=t.getPythonVersionFromPath=t.iterPythonExecutablesInDir=t.findInterpretersInDir=t.isPythonExecutable=void 0;const s=o(n(79896)),a=o(n(16928)),c=n(77476),l=n(48112),u=n(61905),p=n(15721),d=n(6514),h=n(71067),f=n(95885),v=n(45163),m=n(69396),g=o(n(93830)),y=o(n(56300)),b=(0,l.getOSType)()===l.OSType.Windows?y.matchPythonBinFilename:g.matchPythonBinFilename;async function*_(e,t,n,r=!0){const i=(0,l.getOSType)()===l.OSType.Windows?y.matchPythonBinFilename:g.matchPythonBinFilename,o={ignoreErrors:r,filterSubDir:n,filterFile:i,maxDepth:t||0};for await(const t of E(e,1,o)){const{filename:e,filetype:n}=t;n!==c.FileType.File&&n!==c.FileType.SymbolicLink||w(e,i,r)&&(yield t)}}async function*E(e,t,n){const r=await S(e,n);for(const e of r){yield e;const{filename:r,filetype:i}=e;i===c.FileType.Directory&&(n.maxDepth<0||t<=n.maxDepth)&&w(r,n.filterSubDir,n.ignoreErrors)&&(yield*E(r,t+1,n))}}async function S(e,t={ignoreErrors:!0}){const n=t.ignoreErrors||!1;if(t.filterFilename&&(0,l.getOSType)()===l.OSType.Windows){let r;try{r=await s.promises.readdir(e)}catch(t){if("ENOENT"===t.code)return[];if(n)return(0,u.traceError)(`readdir() failed for "${e}" (${t})`),[];throw t}const i=r.map((t=>a.join(e,t))).filter((e=>w(e,t.filterFilename,n)));return Promise.all(i.map((async e=>({filename:e,filetype:await(0,c.getFileType)(e,t)||c.FileType.Unknown}))))}let r;try{r=await s.promises.readdir(e,{withFileTypes:!0})}catch(t){if("ENOENT"===t.code)return[];if(n)return(0,u.traceError)(`readdir() failed for "${e}" (${t})`),[];throw t}const i=r.map((t=>({filename:a.join(e,t.name),filetype:(0,c.convertFileType)(t)})));return t.filterFilename?i.filter((e=>w(e.filename,t.filterFilename,n))):i}function w(e,t,n=!0){if(void 0===t)return!0;try{return t(e)}catch(t){if(n)return(0,u.traceError)(`filter failed for "${e}" (${t})`),!1;throw t}}async function P(e,t){return!(!(t.matchFilename||b)("string"==typeof e?e:e.filename)||t.filterFile&&!await t.filterFile(e))}t.isPythonExecutable=async function(e){return!(!b(e)||(0,l.getOSType)()!==l.OSType.Windows)||!!await(0,m.isFile)(e)},t.findInterpretersInDir=_,t.iterPythonExecutablesInDir=async function*(e,t={ignoreErrors:!0}){const n={...t,filterFile:b},r=await S(e,n);for(const e of r){const{filetype:t}=e;t!==c.FileType.File&&t!==c.FileType.SymbolicLink||(yield e)}},t.getPythonVersionFromPath=async function(e,t){let n;try{n=t?(0,h.parseVersion)(t):p.UNKNOWN_PYTHON_VERSION}catch(e){n=p.UNKNOWN_PYTHON_VERSION}const r=e?await async function(e){const t=a.dirname(e);let n=p.UNKNOWN_PYTHON_VERSION;for await(const e of _(t)){const{filename:t}=e;try{const e=(0,h.parseVersion)(a.basename(t));(0,d.comparePythonVersionSpecificity)(e,n)>0&&(n=e)}catch(e){}}return n}(e):p.UNKNOWN_PYTHON_VERSION;(0,u.traceVerbose)("Best effort version B for",e,JSON.stringify(r));const i=e?await(0,v.getPythonVersionFromPyvenvCfg)(e):p.UNKNOWN_PYTHON_VERSION;(0,u.traceVerbose)("Best effort version C for",e,JSON.stringify(i));const o=e?await(0,f.getPythonVersionFromConda)(e):p.UNKNOWN_PYTHON_VERSION;(0,u.traceVerbose)("Best effort version D for",e,JSON.stringify(o));let s=p.UNKNOWN_PYTHON_VERSION;for(const e of[n,r,i,o])s=(0,d.comparePythonVersionSpecificity)(s,e)>0?s:e;return s};const T=(0,c.getFileFilter)({ignoreFileType:c.FileType.SymbolicLink});async function C(e){return P(e,{matchFilename:(0,l.getOSType)()===l.OSType.Windows?y.matchBasicPythonBinFilename:g.matchBasicPythonBinFilename,filterFile:T})}async function x(e){return P(e,{matchFilename:(0,l.getOSType)()===l.OSType.Windows?y.matchBasicPythonBinFilename:g.matchBasicPythonBinFilename,filterFile:void 0})}t.looksLikeBasicGlobalPython=C,t.looksLikeBasicVirtualPython=x,t.getInterpreterPathFromDir=async function(e,t={}){const n=t.global?C:x,r=_(e,2,(function(e){const t=a.basename(e).toLowerCase();return["bin","scripts"].includes(t)}),t.ignoreErrors);for await(const e of r)if(await n(e))return e.filename},t.getEnvironmentDirFromPath=function(e){const t=a.basename(a.dirname(e));return["bin","scripts"].map((e=>(0,m.normCasePath)(e))).includes((0,m.normCasePath)(t))?a.dirname(a.dirname(e)):a.dirname(e)}},24230:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identifyEnvironment=t.isIdentifierRegistered=void 0;const r=n(61905),i=n(15721),o=n(11352),s=n(95885),a=n(94593),c=n(35864),l=n(60649),u=n(60852),p=n(45163),d=n(66830),h=n(74857),f=n(8164),v=()=>Promise.resolve(!1);function m(){const e=new Map;return Object.values(i.PythonEnvKind).forEach((t=>{e.set(t,v)})),e.set(i.PythonEnvKind.Conda,s.isCondaEnvironment),e.set(i.PythonEnvKind.MicrosoftStore,d.isMicrosoftStoreEnvironment),e.set(i.PythonEnvKind.Pipenv,c.isPipenvEnvironment),e.set(i.PythonEnvKind.Pyenv,u.isPyenvEnvironment),e.set(i.PythonEnvKind.Poetry,l.isPoetryEnvironment),e.set(i.PythonEnvKind.Pixi,f.isPixiEnvironment),e.set(i.PythonEnvKind.Venv,p.isVenvEnvironment),e.set(i.PythonEnvKind.VirtualEnvWrapper,p.isVirtualenvwrapperEnvironment),e.set(i.PythonEnvKind.VirtualEnv,p.isVirtualenvEnvironment),e.set(i.PythonEnvKind.ActiveState,h.isActiveStateEnvironment),e.set(i.PythonEnvKind.Unknown,(()=>Promise.resolve(!0))),e.set(i.PythonEnvKind.OtherGlobal,a.isGloballyInstalledEnv),e}t.isIdentifierRegistered=function(e){return m().get(e)!==v},t.identifyEnvironment=async function(e){const t=m(),n=(0,o.getPrioritizedEnvKinds)();for(const i of n){const n=t.get(i);if(n&&await n(e).catch((t=>((0,r.traceWarn)(`Identifier for ${i} failed to identify ${e}`,t),!1))))return i}return i.PythonEnvKind.Unknown}},74857:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isActiveStateEnvironmentForWorkspace=t.ActiveState=t.isActiveStateEnvironment=t.ACTIVESTATETOOLPATH_SETTING_KEY=void 0;const a=s(n(16928)),c=n(16928),l=n(69396),u=n(68989),p=n(61905),d=n(48112);t.ACTIVESTATETOOLPATH_SETTING_KEY="activeStateToolPath",t.isActiveStateEnvironment=async function(e){const t=a.dirname(e),n=a.dirname(t);return(0,l.pathExists)(a.join(n,"_runtime_store"))};class h{static async getState(){return void 0===h.statePromise&&(h.statePromise=h.locate()),h.statePromise}constructor(){(0,l.onDidChangePythonSetting)(t.ACTIVESTATETOOLPATH_SETTING_KEY,(()=>{h.statePromise=void 0}))}static getStateToolDir(){const e=(0,d.getUserHomeDir)();if(e)return(0,d.getOSType)()===d.OSType.Windows?a.join(e,"AppData","Local","ActiveState","StateTool"):a.join(e,".local","ActiveState","StateTool")}static async locate(){var e;const n=this.getStateToolDir(),r=null!==(e=(0,l.getPythonSetting)(t.ACTIVESTATETOOLPATH_SETTING_KEY))&&void 0!==e?e:h.defaultStateCommand;if(n&&(await(0,l.pathExists)(n)||r!==this.defaultStateCommand))return new h}async getProjects(){return this.getProjectsCached()}async getProjectsCached(){var e;try{const n=null!==(e=(0,l.getPythonSetting)(t.ACTIVESTATETOOLPATH_SETTING_KEY))&&void 0!==e?e:h.defaultStateCommand,r=await(0,l.shellExecute)(`${n} projects -o editor`,{timeout:5e3});if(!r)return;let i=r.stdout.trimEnd();"\0"===i[i.length-1]&&(i=i.substring(0,i.length-1)),(0,p.traceVerbose)(`${n} projects -o editor: ${i}`);const o=JSON.parse(i);return h.setCachedProjectInfo(o),o}catch(e){return void(0,p.traceError)(e)}}static getCachedProjectInfo(){return this.cachedProjectInfo}static setCachedProjectInfo(e){this.cachedProjectInfo=e}}t.ActiveState=h,h.defaultStateCommand="state",h.cachedProjectInfo=[],o([(0,u.cache)(3e4,!0,1e4)],h.prototype,"getProjectsCached",null),t.isActiveStateEnvironmentForWorkspace=function(e,t){const n=(0,c.dirname)(e);for(const e of h.getCachedProjectInfo())if(e.executables)for(const[r,i]of e.executables.entries())if((0,l.arePathsSame)(i,n)&&(0,l.arePathsSame)(t,e.local_checkouts[r]))return!0;return!1}},95885:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getCondaPathSetting=t.getCondaEnvDirs=t.setCondaBinary=t.Conda=t.CONDA_ACTIVATION_TIMEOUT=t.CONDA_RUN_VERSION=t.getCondaInterpreterPath=t.getPythonVersionFromConda=t.getCondaEnvironmentsTxt=t.isCondaEnvironment=t.getCondaMetaPaths=t.parseCondaInfo=t.CONDAPATH_SETTING_KEY=t.AnacondaCompanyName=void 0;const a=s(n(16928)),c=n(99589),l=s(n(25943)),u=n(48112),p=n(69396),d=n(15721),h=n(71067),f=n(56300),v=n(25297),m=n(68989),g=n(552),y=n(61905),b=n(8370),_=n(74399),E=n(7855),S=n(8841);function w(e){const t="conda-meta";return[a.join(a.dirname(e),t),a.join(a.dirname(a.dirname(e)),t),a.join(e,t)]}function P(e){const t=(0,u.getOSType)()===u.OSType.Windows?"python.exe":a.join("bin","python");return a.join(e,t)}t.AnacondaCompanyName="Anaconda, Inc.",t.CONDAPATH_SETTING_KEY="condaPath",t.parseCondaInfo=async function(e,n,r,i){const o=Array.isArray(e.envs)?e.envs:[];e.default_prefix&&e.default_prefix.length>0&&o.push(e.default_prefix);const s=o.map((async e=>{const o=n(e);if(!await r(o))return;const s=await i(o);return s?{...s,path:o,companyDisplayName:t.AnacondaCompanyName,envType:v.EnvironmentType.Conda,envPath:e}:void 0}));return Promise.all(s).then((e=>e.filter((e=>null!=e)))).then((e=>e.map((e=>e))))},t.getCondaMetaPaths=w,t.isCondaEnvironment=async function(e){const t=w(e);for(const e of t)if(await(0,p.pathExists)(e))return!0;return!1},t.getCondaEnvironmentsTxt=async function(){const e=(0,u.getUserHomeDir)();return e?[a.join(e,".conda","environments.txt")]:[]},t.getPythonVersionFromConda=async function(e){const t=w(e).map((e=>a.join(e,"history"))),n=/\:python-(([\d\.a-z]?)+)/;for(const e of t)if(await(0,p.pathExists)(e))try{const t=(0,_.splitLines)(await(0,p.readFile)(e)).map((e=>{const t=n.exec(e);return t?t[1]:""})).filter((e=>e.length>0));if(t.length>0){const e=t.length-1;return(0,h.parseVersion)(t[e].trim())}}catch(e){return d.UNKNOWN_PYTHON_VERSION}return d.UNKNOWN_PYTHON_VERSION},t.getCondaInterpreterPath=P,t.CONDA_RUN_VERSION="4.9.0",t.CONDA_ACTIVATION_TIMEOUT=45e3;class T{constructor(e,n,r,i){this.command=e,this.shellPath=r,this.useWorkerThreads=i,this.condaInfoCached=new Map,void 0===this.useWorkerThreads&&(this.useWorkerThreads=!1),this.shellCommand=null!=n?n:e,(0,p.onDidChangePythonSetting)(t.CONDAPATH_SETTING_KEY,(()=>{T.condaPromise=new Map}))}static async getConda(e){return(void 0===T.condaPromise.get(e)||(0,g.isTestExecution)())&&T.condaPromise.set(e,T.locate(e)),T.condaPromise.get(e)}static setConda(e){T.condaPromise.set(void 0,Promise.resolve(new T(e)))}static async locate(e){(0,y.traceVerbose)("Searching for conda.");const n=(0,u.getUserHomeDir)();let r="conda";try{r=(0,p.getPythonSetting)(t.CONDAPATH_SETTING_KEY)}catch(e){(0,y.traceError)(`Failed to get conda path setting, ${e}`)}const i=(0,u.getOSType)()===u.OSType.Windows?"Scripts\\conda.exe":"bin/conda";async function o(e){const t=a.dirname(e),n=a.join(t,"..","condabin","conda.bat");if(await(0,p.pathExists)(n))return n}for await(const t of async function*(){r&&"conda"!==r&&(yield r),yield"conda",(0,u.getOSType)()===u.OSType.Windows&&(yield*async function*(){const e=(await(0,f.getRegistryInterpreters)()).filter((e=>e.interpreterPath&&"ContinuumAnalytics"===e.distroOrgName)).map((e=>a.join(a.win32.dirname(e.interpreterPath),i)));yield*e}()),yield*async function*(){const e=[];if((0,u.getOSType)()===u.OSType.Windows){const t=(0,u.getEnvironmentVariable)("PROGRAMDATA")||"C:\\ProgramData";if(e.push(t),n){const t=(0,u.getEnvironmentVariable)("LOCALAPPDATA")||a.join(n,"AppData","Local");e.push(n,a.join(t,"Continuum"))}}else e.push("/usr/share","/usr/local/share","/opt","/opt/homebrew/bin"),n&&e.push(n,a.join(n,"opt"));for(const t of e){let e;try{e=await l.readdir(t)}catch(t){e=void 0}void 0!==e&&(yield*e.filter((e=>e.toLowerCase().includes("conda"))).map((e=>a.join(t,e,i))))}}(),yield*async function*(){if(!n)return;let e;try{e=await l.readFile(a.join(n,".conda","environments.txt"),"utf8")}catch(t){e=""}yield*e.split(/\r?\n/g).map((e=>e.trim())).filter((e=>""!==e&&!e.startsWith("#"))).map((e=>a.join(e,i)))}()}()){(0,y.traceVerbose)(`Probing conda binary: ${t}`);let n=new T(t,void 0,e);try{if(await n.getInfo(),(0,u.getOSType)()===u.OSType.Windows&&((0,g.isTestExecution)()||t!==r)){const r=await o(t);try{if(r){const i=new T(r,void 0,e);await i.getInfo(),n=new T(t,r,e)}}catch(e){(0,y.traceVerbose)("Failed to spawn conda bat file",r,e)}}return(0,y.traceVerbose)(`Found conda via filesystem probing: ${t}`),n}catch(e){(0,y.traceVerbose)("Failed to spawn conda binary",t,e)}}(0,y.traceVerbose)("Couldn't locate the conda binary.")}async getInfo(e){let t=this.condaInfoCached.get(this.shellPath);return e&&t||(t=this.getInfoImpl(this.command,this.shellPath),this.condaInfoCached.set(this.shellPath,t)),t}async getInfoImpl(e,t){const n={timeout:45e3};t&&(n.shell=t);const r=(0,p.exec)(e,["info","--json"],n,this.useWorkerThreads);if(await Promise.race([r.then((()=>!0)),(0,E.sleep)(48e3).then((()=>!1))])){const t=await r;return(0,y.traceVerbose)(`${e} info --json: ${t.stdout}`),JSON.parse(t.stdout)}throw new Error(`Launching '${e} info --json' timed out`)}async getEnvList(){const e=await this.getInfo(),{envs:t}=e;return void 0===t?[]:Promise.all(t.map((async t=>({prefix:t,name:await this.getName(t,e)}))))}async getEnvDirs(){var e;return null!==(e=(await this.getInfo()).envs_dirs)&&void 0!==e?e:[]}async getName(e,t){if((t=null!=t?t:await this.getInfo(!0)).root_prefix&&(0,p.arePathsSame)(e,t.root_prefix))return"base";const n=a.dirname(e);if(void 0!==t.envs_dirs)for(const r of t.envs_dirs)if((0,p.arePathsSame)(n,r))return a.basename(e)}async getCondaEnvironment(e){const t=await this.getEnvList();return t.find((t=>(0,p.arePathsSame)(e,t.prefix)))||t.find((t=>(0,p.isParentPath)(e,t.prefix)))}async getInterpreterPathForEnvironment(e){const t=P(e.prefix);return await(0,p.pathExists)(t)?((0,y.traceVerbose)("Found executable within conda env",JSON.stringify(e)),t):((0,y.traceVerbose)("Executable does not exist within conda env, assume the executable to be `python`",JSON.stringify(e)),"python")}async getRunPythonArgs(e,n,r=!1){const i=await this.getCondaVersion();if(i&&(0,c.lt)(i,t.CONDA_RUN_VERSION))return void(0,y.traceError)("`conda run` is not supported for conda version",i.raw);const o=[];o.push("-p",e.prefix);const s=[n?this.shellCommand:this.command,"run",...o,"--no-capture-output","python"];return r&&s.push("-I"),[...s,b.OUTPUT_MARKER_SCRIPT]}async getListPythonPackagesArgs(e,t){const n=["-p",e.prefix];return[t?this.shellCommand:this.command,"list",...n]}async getCondaVersion(){const e=await this.getInfo(!0).catch((()=>{}));let t;if(e&&e.conda_version)t=e.conda_version;else{const e=await(0,p.exec)(this.command,["--version"],{timeout:45e3}).then((e=>e.stdout.trim())).catch((()=>{}));t=e&&e.startsWith("conda ")?e.substring(6).trim():e}if(!t)return;const n=t.match(/(?<major>\d+)\.(?<minor>\d+)\.(?<micro>\d+)(?:.*)?/);if(n&&n.groups){const e=n.groups.major.concat(".",n.groups.minor,".",n.groups.micro),t=new c.SemVer(e);if(t)return t}return(0,y.traceError)(`Unable to parse version of Conda, ${t}`),new c.SemVer("0.0.1")}async isCondaRunSupported(){const e=await this.getCondaVersion();return!e||!(0,c.lt)(e,t.CONDA_RUN_VERSION)}}t.Conda=T,T.condaPromise=new Map,o([(0,m.cache)(3e4,!0,1e4)],T.prototype,"getInfoImpl",null),o([(0,m.cache)(3e4,!0,1e4)],T.prototype,"getEnvList",null),o([(0,m.cache)(3e4,!0,1e4)],T.prototype,"getEnvDirs",null),o([(0,m.cache)(-1,!0)],T.prototype,"getCondaVersion",null),t.setCondaBinary=function(e){T.setConda(e)},t.getCondaEnvDirs=async function(){const e=await T.getConda();return null==e?void 0:e.getEnvDirs()},t.getCondaPathSetting=function(){return(0,S.getConfiguration)("python").get(t.CONDAPATH_SETTING_KEY,"")}},58038:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaService=void 0;const c=n(25891),l=s(n(16928)),u=n(22408),p=n(61905),d=n(68989),h=n(61905),f=n(95885);let v=class{constructor(e,t){this.platform=e,this.fileSystem=t}async getActivationScriptFromInterpreter(e,t){(0,p.traceVerbose)(`Getting activation script for interpreter ${e}, env ${t}`);const n=await this.getCondaFileFromInterpreter(e,t);(0,p.traceVerbose)(`Found conda path: ${n}`);const r=(n?l.join(l.dirname(n),"activate"):"activate").fileToCommandArgumentForPythonExt();if((0,p.traceVerbose)(`Using activate path: ${r}`),this.platform.isLinux||this.platform.isMac){const e=await this.getCondaInfo();if(null==e?void 0:e.root_prefix){const t=l.join(e.root_prefix,this.platform.virtualEnvBinName,"activate").fileToCommandArgumentForPythonExt();if(r===t||!await this.fileSystem.fileExists(r))return(0,p.traceVerbose)(`Using global activate path: ${t}`),{path:t,type:"global"}}}return{path:r,type:"local"}}async getCondaFile(e){return f.Conda.getConda().then((t=>{const n=e?null==t?void 0:t.shellCommand:null==t?void 0:t.command;return null!=n?n:"conda"}))}async getInterpreterPathForEnvironment(e){const t=await f.Conda.getConda();return null==t?void 0:t.getInterpreterPathForEnvironment({name:e.name,prefix:e.path})}async isCondaAvailable(){return"boolean"==typeof this.isAvailable?this.isAvailable:this.getCondaVersion().then((e=>this.isAvailable=void 0!==e)).catch((()=>this.isAvailable=!1))}async getCondaVersion(){return f.Conda.getConda().then((e=>null==e?void 0:e.getCondaVersion()))}async getCondaFileFromInterpreter(e,t){const n=this.platform.isWindows?"conda.exe":"conda",r=this.platform.isWindows?"Scripts":"bin",i=e?l.dirname(e):"",o=t?i.indexOf(l.join("envs",t)):-1;if(o>0){const e=i.slice(0,o);let t=l.join(e,n);if(await this.fileSystem.fileExists(t))return t;if(t=l.join(e,r,n),await this.fileSystem.fileExists(t))return t}let s=l.join(i,n);return await this.fileSystem.fileExists(s)?s:(s=l.join(i,r,n),await this.fileSystem.fileExists(s)?s:this.getCondaFile())}async getCondaInfo(){const e=await f.Conda.getConda();return null==e?void 0:e.getInfo()}};t.CondaService=v,o([(0,h.traceDecoratorVerbose)("Get Conda File from interpreter"),(0,d.cache)(12e4)],v.prototype,"getCondaFileFromInterpreter",null),o([(0,d.cache)(6e4)],v.prototype,"getCondaInfo",null),t.CondaService=v=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IPlatformService)),a(1,(0,c.inject)(u.IFileSystem))],v)},94593:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGloballyInstalledEnv=void 0;const r=n(62982),i=n(48112),o=n(69396),s=n(93830),a=n(60852);t.isGloballyInstalledEnv=async function(e){return async function(e){let t=[];t=(0,i.getOSType)()===i.OSType.Windows?(0,r.getSearchPathEntries)():await(0,s.commonPosixBinPaths)(),t=t.filter((e=>!(0,a.isPyenvShimDir)(e)));for(const n of t)if((0,o.isParentPath)(e,n))return!0;return!1}(e)}},80256:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Hatch=void 0;const i=n(552),o=n(69396),s=n(61905),a=n(68989),c=n(48112);class l{constructor(e,t){this.command=e,this.cwd=t,this.fixCwd()}static async getHatch(e){return(void 0===l.hatchPromise.get(e)||(0,i.isTestExecution)())&&l.hatchPromise.set(e,l.locate(e)),l.hatchPromise.get(e)}static async locate(e){const t="hatch";(0,s.traceVerbose)(`Probing Hatch binary ${t}`);const n=new l(t,e);if(void 0!==await n.getEnvList())return(0,s.traceVerbose)(`Found hatch binary ${t}`),n;(0,s.traceVerbose)(`Failed to find Hatch binary ${t}`),(0,s.traceVerbose)("No Hatch binary found")}async getEnvList(){return this.getEnvListCached(this.cwd)}async getEnvListCached(e){const t=await(0,o.exec)(this.command,["env","show","--json"],{cwd:this.cwd,throwOnStdErr:!0}).catch(s.traceVerbose);if(t)return(await Promise.all(Object.keys(JSON.parse(t.stdout)).map((async e=>{const t=await(0,o.exec)(this.command,["env","find",e],{cwd:this.cwd,throwOnStdErr:!0}).catch(s.traceVerbose);if(!t)return;const n=t.stdout.trim();return await(0,o.pathExists)(n)?n:void 0})))).flatMap((e=>e?[e]:[]))}fixCwd(){if((0,c.getOSType)()===c.OSType.Windows&&/^[a-z]:/.test(this.cwd)){const e=this.cwd.split(":");e[0]=e[0].toUpperCase(),this.cwd=e.join(":")}}}t.Hatch=l,l.hatchPromise=new Map,r([(0,a.cache)(3e4,!0,1e4)],l.prototype,"getEnvListCached",null)},80292:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMacDefaultPythonPath=void 0;const r=n(48112);t.isMacDefaultPythonPath=function(e){return(0,r.getOSType)()===r.OSType.OSX&&(["/usr/bin/python"].includes(e)||e.startsWith("/usr/bin/python2"))}},66830:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isMicrosoftStoreEnvironment=t.isStorePythonInstalled=t.isMicrosoftStoreDir=t.getMicrosoftStoreAppsRoot=void 0;const s=o(n(16928)),a=n(48112),c=n(61905),l=n(69396);function u(){const e=(0,a.getEnvironmentVariable)("LOCALAPPDATA")||"";return s.join(e,"Microsoft","WindowsApps")}function p(e){const t=s.join((0,a.getEnvironmentVariable)("ProgramFiles")||"Program Files","WindowsApps").normalize().toUpperCase();return s.normalize(e).toUpperCase().includes(t)}async function d(e){let t=await Promise.all([(0,l.pathExists)(s.join(u(),"idle.exe")),(0,l.pathExists)(s.join(u(),"pip.exe"))]);return!!t.includes(!0)||!!e&&(t=await Promise.all([(0,l.pathExists)(s.join(s.dirname(e),"idle.exe")),(0,l.pathExists)(s.join(s.dirname(e),"pip.exe"))]),t.includes(!0))}t.getMicrosoftStoreAppsRoot=u,t.isMicrosoftStoreDir=function(e){const t=s.normalize(u()).toUpperCase();return s.normalize(e).toUpperCase().includes(t)||p(e)},t.isStorePythonInstalled=d,t.isMicrosoftStoreEnvironment=async function(e){if(await d(e)){const t=s.normalize(e).toUpperCase(),n=s.normalize(u()).toUpperCase();if(t.includes(n))return!0;if(p(t))return(0,c.traceWarn)("isMicrosoftStoreEnvironment called with Program Files store path."),!0}return!1}},35864:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isPipenvEnvironmentRelatedToFolder=t.isPipenvEnvironment=t.getProjectDir=t._getAssociatedPipfile=void 0;const s=o(n(16928)),a=n(48112),c=n(61905),l=n(69396);async function u(e,t){const n=(0,a.getEnvironmentVariable)("PIPENV_PIPFILE")||"Pipfile";let r=t.lookIntoParentDirectories?function(){const e=(0,a.getEnvironmentVariable)("PIPENV_MAX_DEPTH");if(void 0===e)return 3;const t=parseInt(e,10);return isNaN(t)?((0,c.traceError)(`PIPENV_MAX_DEPTH is incorrectly set. Converting value '${e}' to number results in NaN`),1):t}():1;for(;r>0&&!(0,l.arePathsSame)(e,s.dirname(e));){const t=s.join(e,n);if(await(0,l.pathExists)(t))return t;e=s.dirname(e),r-=1}}async function p(e){const t=s.join(e,".project");if(!await(0,l.pathExists)(t))return;const n=(await(0,l.readFile)(t)).trim();if(await(0,l.pathExists)(n))return n;(0,c.traceVerbose)(`The .project file inside environment folder: ${e} doesn't contain a valid path to the project`)}async function d(e){const t=s.dirname(s.dirname(e)),n=await p(t);if(void 0!==n)return s.basename((0,l.normCasePath)(t)).startsWith(`${s.basename((0,l.normCasePath)(n))}-`)?u(n,{lookIntoParentDirectories:!1}):void 0}t._getAssociatedPipfile=u,t.getProjectDir=p,t.isPipenvEnvironment=async function(e){return!!await async function(e){const t=s.dirname(s.dirname(e));if(".venv"===s.basename(t))return u(s.dirname(t),{lookIntoParentDirectories:!1})}(e)||!!await d(e)},t.isPipenvEnvironmentRelatedToFolder=async function(e,t){const n=await d(e);if(!n)return!1;const r=void 0===(0,a.getEnvironmentVariable)("PIPENV_NO_INHERIT"),i=await u(t,{lookIntoParentDirectories:r});return!!i&&(0,l.arePathsSame)(n,i)}},8164:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPixiActivationCommands=t.getRunPixiPythonCommand=t.registerPixiFeatures=t.isNonDefaultPixiEnvironmentName=t.getPixiEnvironmentFromInterpreter=t.getPixi=t.Pixi=t.getPrefixFromInterpreterPath=t.isPixiEnvironment=t.PIXITOOLPATH_SETTING_KEY=void 0;const c=s(n(16928)),l=n(21605),u=a(n(46911)),p=n(48112),d=n(69396),h=n(68989),f=n(61905),v=n(8370),m=n(8841),g=n(552);function y(e){const t=c.dirname(e);return t.endsWith("bin")||t.endsWith("Scripts")?c.dirname(t):t}t.PIXITOOLPATH_SETTING_KEY="pixiToolPath",t.isPixiEnvironment=async function(e){const t=y(e);return(0,d.pathExists)(c.join(t,"conda-meta/pixi"))||(0,d.pathExists)(c.join(t,"conda-meta/pixi_env_prefix"))},t.getPrefixFromInterpreterPath=y;class b{constructor(e){this.command=e}async getEnvList(e){const t=await this.getPixiInfo(e);return null==t?void 0:t.environments_info.map((e=>e.prefix))}async getPixiInfo(e){try{const t=await(0,d.exec)(this.command,["info","--json"],{cwd:e,throwOnStdErr:!1});if(!t||!t.stdout)return;return JSON.parse(t.stdout)}catch(t){return void(0,f.traceWarn)(`Failed to get pixi info for ${e}`,t)}}getRunPythonArgs(e,t,n=!1){let r=[this.command,"run","--manifest-path",e];return P(t)&&(r=r.concat(["--environment",t])),r.push("python"),n&&r.push("-I"),[...r,v.OUTPUT_MARKER_SCRIPT]}async getPixiEnvironmentMetadata(e){const t=c.join(e,"conda-meta/pixi");try{return await(0,l.readJSON)(t)}catch(t){(0,f.traceVerbose)(`Failed to get pixi environment metadata for ${e}`,t)}}}async function _(){let e=(0,d.getPythonSetting)(t.PIXITOOLPATH_SETTING_KEY);if(!e||"pixi"===e||!await(0,d.pathExists)(e)){e=void 0;const t=await async function(){try{return await(0,u.default)("pixi",{all:!0})}catch(e){}return[]}();for(const n of t)if(await(0,d.pathExists)(n)){e=n;break}}if(!e){const t=(0,p.getUserHomeDir)();if(t){const n=c.join(t,".pixi","bin",(0,p.isWindows)()?"pixi.exe":"pixi");await(0,d.pathExists)(n)&&(e=n)}}return e?new b(e):void 0}let E;function S(){return(void 0===E||(0,g.isTestExecution)())&&(E=_()),E}async function w(e){if(!e)return;const t=y(e),n=await S();if(!n)return void(0,f.traceVerbose)(`could not find a pixi interpreter for the interpreter at ${e}`);const r=await n.getPixiEnvironmentMetadata(t);if(void 0!==r)return{interpreterPath:e,pixi:n,pixiVersion:r.pixi_version,manifestPath:r.manifest_path,envName:r.environment_name};let i,o,s,a,l;try{return i=c.basename(t),o=c.dirname(t),s=c.dirname(o),a=c.dirname(s),function(e){const t=(0,m.getWorkspaceFolderPaths)().map((e=>c.normalize(e))),n=c.normalize(e);return t.some((e=>e===n))}(a)?(l=await n.getPixiInfo(a),l&&l.project_info?{interpreterPath:e,pixi:n,pixiVersion:l.version,manifestPath:l.project_info.manifest_path,envName:i}:void(0,f.traceWarn)(`failed to determine pixi project information for the interpreter at ${e}`)):void(0,f.traceVerbose)(`could not determine the pixi project directory for the interpreter at ${e}`)}catch(e){(0,f.traceWarn)("Error processing paths or getting Pixi Info:",e)}}function P(e){return"default"!==e}t.Pixi=b,o([(0,h.cache)(1e3,!0,1e3)],b.prototype,"getPixiInfo",null),o([(0,h.cache)(5e3,!0,1e4)],b.prototype,"getPixiEnvironmentMetadata",null),t.getPixi=S,t.getPixiEnvironmentFromInterpreter=w,t.isNonDefaultPixiEnvironmentName=P,t.registerPixiFeatures=function(e){e.push((0,d.onDidChangePythonSetting)(t.PIXITOOLPATH_SETTING_KEY,(()=>{E=_()})))},t.getRunPixiPythonCommand=async function(e){const t=await w(e);if(!t)return;const n=[t.pixi.command.toCommandArgumentForPythonExt(),"run","--manifest-path",t.manifestPath.toCommandArgumentForPythonExt()];return P(t.envName)&&(n.push("--environment"),n.push(t.envName.toCommandArgumentForPythonExt())),n.push("python"),n},t.getPixiActivationCommands=async function(e,t){const n=await w(e);if(!n)return;const r=[n.pixi.command.toCommandArgumentForPythonExt(),"shell","--manifest-path",n.manifestPath.toCommandArgumentForPythonExt()];return P(n.envName)&&(r.push("--environment"),r.push(n.envName.toCommandArgumentForPythonExt())),[r.join(" ")]}},60649:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isPoetryEnvironmentRelatedToFolder=t.Poetry=t.isPoetryEnvironment=t.localPoetryEnvDirName=void 0;const a=s(n(16928)),c=n(48112),l=n(69396),u=n(96966),p=n(45163),d=n(51080),h=n(68989),f=n(552),v=n(61905),m=n(74399),g=/^(.+)-(.+)-py(\d).(\d){1,2}$/;t.localPoetryEnvDirName=".venv",t.isPoetryEnvironment=async function(e){return!!await async function(e){const t=(0,u.getEnvironmentDirFromPath)(e);return!!g.test(a.basename(t))&&(0,p.isVirtualenvEnvironment)(e)}(e)||!!await async function(e){const n=(0,u.getEnvironmentDirFromPath)(e);if(a.basename(n)!==t.localPoetryEnvDirName)return!1;const r=a.dirname(n);return!!await b(r)}(e)};class y{constructor(e,t){this.command=e,this.cwd=t,this.fixCwd()}static async getPoetry(e){if(await b(e))return(void 0===y.poetryPromise.get(e)||(0,f.isTestExecution)())&&y.poetryPromise.set(e,y.locate(e)),y.poetryPromise.get(e)}static async locate(e){(0,v.traceVerbose)(`Getting poetry for cwd ${e}`);for(const t of function*(){try{const e=(0,l.getPythonSetting)("poetryPath");e&&"poetry"!==e&&(yield e)}catch(e){(0,v.traceError)("Failed to get poetry setting",e)}yield"poetry";const e=(0,c.getUserHomeDir)();if(e){const t=a.join(e,".poetry","bin","poetry");(0,l.pathExistsSync)(t)&&(yield t)}}()){(0,v.traceVerbose)(`Probing poetry binary for ${e}: ${t}`);const n=new y(t,e);if(void 0!==await n.getEnvList())return(0,v.traceVerbose)(`Found poetry via filesystem probing for ${e}: ${t}`),n;(0,v.traceVerbose)(`Failed to find poetry for ${e}: ${t}`)}(0,v.traceVerbose)(`No poetry binary found for ${e}`)}async getEnvList(){return this.getEnvListCached(this.cwd)}async getEnvListCached(e){const t=await this.safeShellExecute(`${this.command} env list --full-path`);if(!t)return;return(await Promise.all((0,m.splitLines)(t.stdout).map((async e=>{e.endsWith("(Activated)")&&(e=e.slice(0,-11));const t=e.trim();return await(0,l.pathExists)(t)?t:void 0})))).filter((e=>void 0!==e)).map((e=>e))}async getActiveEnvPath(){return this.getActiveEnvPathCached(this.cwd)}async getActiveEnvPathCached(e){const t=await this.safeShellExecute(`${this.command} env info -p`,!0);if(t)return t.stdout.trim()}async getVirtualenvsPathSetting(){const e=await this.safeShellExecute(`${this.command} config virtualenvs.path`);if(e)return e.stdout.trim()}fixCwd(){if((0,c.getOSType)()===c.OSType.Windows&&/^[a-z]:/.test(this.cwd)){const e=this.cwd.split(":");e[0]=e[0].toUpperCase(),this.cwd=e.join(":")}}async safeShellExecute(e,t=!1){const n=new d.StopWatch,r=await(0,l.shellExecute)(e,{cwd:this.cwd,throwOnStdErr:!0,timeout:5e4}).catch((e=>{t?(0,v.traceVerbose)(e):(0,v.traceError)(e)}));return(0,v.traceVerbose)(`Time taken to run ${e} in ms`,n.elapsedTime),r}}async function b(e){const t=a.join(e,"pyproject.toml");return!!(0,l.pathExistsSync)(t)&&!!(await(0,l.readFile)(t)).includes("[tool.poetry]")}t.Poetry=y,y.poetryPromise=new Map,o([(0,h.cache)(3e4,!0,1e4)],y.prototype,"getEnvListCached",null),o([(0,h.cache)(2e4,!0,1e4)],y.prototype,"getActiveEnvPathCached",null),t.isPoetryEnvironmentRelatedToFolder=async function(e,t,n){const r=n?new y(n,t):await y.getPoetry(t),i=await(null==r?void 0:r.getActiveEnvPath());return!!i&&(0,l.isParentPath)(e,i)}},60852:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parsePyenvVersion=t.isPyenvEnvironment=t.isPyenvShimDir=t.getPyenvVersionsDir=t.getActivePyenvForDirectory=t.setPyEnvBinary=t.getPyenvDir=void 0;const s=o(n(16928)),a=n(48112),c=n(69396),l=n(61905);function u(){var e;let t=null!==(e=(0,a.getEnvironmentVariable)("PYENV_ROOT"))&&void 0!==e?e:(0,a.getEnvironmentVariable)("PYENV");if(!t){const e=(0,a.getUserHomeDir)()||"";t=(0,a.getOSType)()===a.OSType.Windows?s.join(e,".pyenv","pyenv-win"):s.join(e,".pyenv")}return t}let p;t.getPyenvDir=u,t.setPyEnvBinary=function(e){p=e},t.getActivePyenvForDirectory=async function(e){const t=await async function(){if(p&&await(0,c.pathExists)(p))return p;const e=u(),t=s.join(e,"bin","pyenv");return await(0,c.pathExists)(t)?t:"pyenv"}();try{return(await(0,c.shellExecute)(`${t} which python`,{cwd:e})).stdout.trim()}catch(e){return void(0,l.traceVerbose)(e)}},t.getPyenvVersionsDir=function(){return s.join(u(),"versions")},t.isPyenvShimDir=function(e){const t=s.join(u(),"shims");return(0,c.arePathsSame)(t,e)||(0,c.arePathsSame)(`${t}${s.sep}`,e)},t.isPyenvEnvironment=async function(e){const t=e,n=u();return!!await(0,c.pathExists)(n)&&(0,c.isParentPath)(t,n)},t.parsePyenvVersion=function(e){const t=function(){function e(e){return{pythonVer:e,distro:void 0,distroVer:void 0}}function t(e){const t=e.split("-");return 3===t.length?{pythonVer:void 0,distroVer:`${t[1]}-${t[2]}`,distro:t[0]}:2===t.length?{pythonVer:void 0,distroVer:t[1],distro:t[0]}:{pythonVer:void 0,distroVer:void 0,distro:e}}const n=new Map;return n.set("activepython",t),n.set("anaconda",t),n.set("graalpython",t),n.set("ironpython",t),n.set("jython",t),n.set("micropython",t),n.set("miniconda",t),n.set("miniforge",t),n.set("pypy",(function(e){const t=e.split("-"),n=t[0].search(/[0-9\.]+/)>0?t[0].substr(4):void 0;return 2===t.length?{pythonVer:n,distroVer:t[1],distro:"pypy"}:3===t.length&&(t[2].startsWith("src")||t[2].startsWith("beta")||t[2].startsWith("alpha")||t[2].startsWith("win64"))?{pythonVer:n,distroVer:`${t[1].startsWith("v")?t[1].substr(1):t[1]}-${t[2]}`,distro:"pypy"}:3===t.length&&"stm"===t[1]?{pythonVer:n,distroVer:t[2],distro:`${t[0]}-${t[1]}`}:4===t.length&&"c"===t[1]?{pythonVer:n,distroVer:t[3],distro:`pypy-${t[1]}-${t[2]}`}:4===t.length&&t[3].startsWith("src")?{pythonVer:n,distroVer:`${t[1]}-${t[2]}-${t[3]}`,distro:"pypy"}:{pythonVer:n,distroVer:void 0,distro:"pypy"}})),n.set("pyston",t),n.set("stackless",t),n.set("3",e),n.set("2",e),n}(),n=Array.from(t.keys()).filter((t=>e.startsWith(t))).map((e=>t.get(e))).filter((e=>void 0!==e));if(n.length>0&&n[0])return n[0](e)}},45163:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getPythonVersionFromPyvenvCfg=t.isVirtualenvwrapperEnvironment=t.isVirtualenvEnvironment=t.isVenvEnvironment=t.isVirtualEnvironment=void 0;const s=o(n(16928)),a=o(n(25943));n(87295);const c=n(74399),l=n(48112),u=n(15721),p=n(6514),d=n(71067),h=n(69396);function f(e){const t="pyvenv.cfg";return[s.join(s.dirname(s.dirname(e)),t),s.join(s.dirname(e),t)]}async function v(e){const t=f(e);for(const e of t)if(await(0,h.pathExists)(e))return!0;return!1}async function m(e){const t=s.dirname(e),n=await a.readdir(t),r=/^activate(\.([A-z]|\d)+)?$/i;return void 0!==n.find((e=>r.test(e)))}function g(e){let t,n;try{[t,n]=(0,d.parseBasicVersion)(e)}catch(e){return u.UNKNOWN_PYTHON_VERSION}return-1!==t.micro&&n.startsWith(".")&&([t.release]=(0,d.parseRelease)(n)),t}t.isVirtualEnvironment=async function(e){return v(e)},t.isVenvEnvironment=v,t.isVirtualenvEnvironment=m,t.isVirtualenvwrapperEnvironment=async function(e){const t=await function(){const e=(0,l.getEnvironmentVariable)("WORKON_HOME");return e?Promise.resolve(e):async function(){const e=(0,l.getUserHomeDir)()||"";if((0,l.getOSType)()===l.OSType.Windows){const t=s.join(e,"Envs");if(await(0,h.pathExists)(t))return t}return s.join(e,".virtualenvs")}()}();return await(0,h.pathExists)(t)&&(0,h.isParentPath)(e,t)&&m(e)},t.getPythonVersionFromPyvenvCfg=async function(e){const t=f(e);let n=u.UNKNOWN_PYTHON_VERSION;for(const e of t)if(await(0,h.pathExists)(e))try{const t=(0,c.splitLines)(await(0,h.readFile)(e)).map((e=>{const t=e.split("=");if(2===t.length){const e=t[0].toLowerCase().trim(),n=t[1].trim();if("version"===e)try{return(0,d.parseVersion)(n)}catch(e){return}else if("version_info"===e)try{return g(n)}catch(e){return}}})).filter((e=>void 0!==e)).map((e=>e));if(t.length>0)for(const e of t)(0,p.comparePythonVersionSpecificity)(e,n)>0&&(n=e)}catch(e){return u.UNKNOWN_PYTHON_VERSION}return n}},69396:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.onDidChangePythonSetting=t.getPythonSetting=t.getSubDirs=t.isFile=t.getFileInfo=t.resolveSymbolicLink=t.arePathsSame=t.normCasePath=t.resolvePath=t.normalizePath=t.isDirectory=t.isParentPath=t.readFileSync=t.readFile=t.pathExistsSync=t.pathExists=t.isVirtualWorkspace=t.inExperiment=t.exec=t.shellExecute=t.initializeExternalDependencies=void 0;const s=o(n(16928)),a=o(n(54980)),c=o(n(25943)),l=n(54661),u=n(35026),p=n(86156),d=n(7855),h=n(48112),f=n(61905);let v;function m(e){return(0,h.getOSType)()===h.OSType.Windows?s.normalize(e).toUpperCase():s.normalize(e)}async function g(e,t,n){if((t=null!=t?t:await c.lstat(e)).isSymbolicLink()){if(n&&n>5)return(0,f.traceError)(`Detected a potential symbolic link loop at ${e}, terminating resolution.`),e;const t=await c.readlink(e);return g(s.isAbsolute(t)?t:s.resolve(s.dirname(e),t),void 0,n=n?n+1:1)}return e}t.initializeExternalDependencies=function(e){v=e},t.shellExecute=async function(e,t={}){const n=await v.get(u.IProcessServiceFactory).create();return t={...t,useWorker:!1},n.shellExec(e,t)},t.exec=async function(e,t,n={},r=!1){const i=await v.get(u.IProcessServiceFactory).create();return n={...n,useWorker:r},i.exec(e,t,n)},t.inExperiment=function(e){return v.get(p.IExperimentService).inExperimentSync(e)},t.isVirtualWorkspace=function(){return v.get(l.IWorkspaceService).isVirtualWorkspace},t.pathExists=function(e){return c.pathExists(e)},t.pathExistsSync=function(e){return c.pathExistsSync(e)},t.readFile=function(e){return c.readFile(e,"utf-8")},t.readFileSync=function(e){return c.readFileSync(e,"utf-8")},t.isParentPath=function(e,t){return t.endsWith(s.sep)||(t+=s.sep),e.endsWith(s.sep)||(e+=s.sep),m(e).startsWith(m(t))},t.isDirectory=async function(e){return(await c.lstat(e)).isDirectory()},t.normalizePath=function(e){return s.normalize(e)},t.resolvePath=function(e){return s.resolve(e)},t.normCasePath=m,t.arePathsSame=function(e,t){return m(e)===m(t)},t.resolveSymbolicLink=g,t.getFileInfo=async function(e){try{const t=await c.lstat(e);return{ctime:t.ctime.valueOf(),mtime:t.mtime.valueOf()}}catch(t){return(0,f.traceVerbose)(`Failed to get file info for ${e}`,t),{ctime:-1,mtime:-1}}},t.isFile=async function(e){const t=await c.lstat(e);if(t.isSymbolicLink()){const n=await g(e,t);return(await c.lstat(n)).isFile()}return t.isFile()},t.getSubDirs=async function*(e,t){const n=(await c.readdir(e,{withFileTypes:!0})).map((n=>async function*(){const r=s.join(e,n.name);if(n.isDirectory())yield r;else if((null==t?void 0:t.resolveSymlinks)&&n.isSymbolicLink()){const e=await g(r);(await c.lstat(e)).isDirectory()&&(yield e)}}()));yield*(0,d.iterable)((0,d.chain)(n))},t.getPythonSetting=function(e,t){const n=t?a.Uri.file(t):void 0;return v.get(p.IConfigurationService).getSettings(n)[e]},t.onDidChangePythonSetting=function(e,t,n){return a.workspace.onDidChangeConfiguration((r=>{const i=n?a.Uri.file(n):void 0;r.affectsConfiguration(`python.${e}`,i)&&t()}))}},93830:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getPythonBinFromPosixPaths=t.commonPosixBinPaths=t.matchPythonBinFilename=t.matchBasicPythonBinFilename=void 0;const s=o(n(79896)),a=o(n(16928)),c=n(2543),l=o(n(25943)),u=n(62982),p=n(69396),d=n(61905);function h(e){return/^python(\d+(\.\d+)?)?$/.test(a.basename(e))}async function f(e){return(await s.promises.readdir(e,{withFileTypes:!0})).filter((e=>!e.isDirectory())).map((t=>a.join(e,t.name))).filter(h)}t.matchBasicPythonBinFilename=function(e){return"python"===a.basename(e)},t.matchPythonBinFilename=h,t.commonPosixBinPaths=async function(){const e=(0,u.getSearchPathEntries)(),t=Array.from(new Set(["/bin","/etc","/lib","/lib/x86_64-linux-gnu","/lib64","/sbin","/snap/bin","/usr/bin","/usr/games","/usr/include","/usr/lib","/usr/lib/x86_64-linux-gnu","/usr/lib64","/usr/libexec","/usr/local","/usr/local/bin","/usr/local/etc","/usr/local/games","/usr/local/lib","/usr/local/sbin","/usr/sbin","/usr/share","~/.local/bin"].concat(e))),n=await Promise.all(t.map((e=>l.pathExists(e))));return t.filter(((e,t)=>n[t]))},t.getPythonBinFromPosixPaths=async function(e){var t;const n=new Map;for(const r of e){const e=await f(r).catch((e=>((0,d.traceWarn)("Looking for python binaries within",r,"failed with",e),[])));for(const r of e)try{(0,d.traceVerbose)(`Attempting to resolve symbolic link: ${r}`);const e=await(0,p.resolveSymbolicLink)(r);n.has(e)?null===(t=n.get(e))||void 0===t||t.push(r):n.set(e,[r]),(0,d.traceInfo)(`Found: ${r} --\x3e ${e}`)}catch(e){(0,d.traceError)("Failed to resolve symbolic link: ",e)}}const r=Array.from(n.keys()).map((e=>{var t;return function(e){let t=e[0].length,n=e[0];for(const r of e)r.length<=t&&(t=r.length,n=r);return n}([e,...null!==(t=n.get(e))&&void 0!==t?t:[]])}));return(0,c.uniq)(r)}},40337:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePythonExeGlobs=t.PythonEnvStructure=t.watchLocationForPythonBinaries=void 0;const s=o(n(94027)),a=o(n(16928)),c=n(29104),l=n(48112),u=n(61905),[p,d]=(0,l.getOSType)()===l.OSType.Windows?["python.exe","Scripts"]:["python","bin"];var h;t.watchLocationForPythonBinaries=function(e,t,n=p){const r=a.posix.normalize(n),[i]=r.split("/").slice(-1);return(0,c.watchLocationForPattern)(e,r,(function(e,n){(0,u.traceVerbose)("Received event",e,JSON.stringify(n),"for baseglob",i),s.default(a.basename(n),i,{nocase:(0,l.getOSType)()===l.OSType.Windows})&&t(e,n)}))},function(e){e.Standard="standard",e.Flat="flat"}(h||(t.PythonEnvStructure=h={})),t.resolvePythonExeGlobs=function(e=p,t=h.Standard){if(a.posix.normalize(e).includes("/"))throw Error(`invalid basename glob "${e}"`);const n=[];return t===h.Standard?n.push(e,`*/${e}`,`*/${d}/${e}`):t===h.Flat&&n.push(e),n}},53174:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.readRegistryKeys=t.readRegistryValues=t.REG_SZ=t.HKLM=t.HKCU=void 0;const s=n(62802);Object.defineProperty(t,"HKCU",{enumerable:!0,get:function(){return s.HKCU}}),Object.defineProperty(t,"HKLM",{enumerable:!0,get:function(){return s.HKLM}}),Object.defineProperty(t,"REG_SZ",{enumerable:!0,get:function(){return s.REG_SZ}});const a=o(n(16928)),c=n(7855),l=n(3989);t.readRegistryValues=async function(e,t){if(!t){const t=new(n(62802))(e),r=(0,c.createDeferred)();return t.values(((e,t)=>{e&&r.reject(e),r.resolve(t)})),r.promise}return(0,l.executeWorkerFile)(a.join(__dirname,"registryValues.worker.js"),e)},t.readRegistryKeys=async function(e,t){if(!t){const t=new(n(62802))(e),r=(0,c.createDeferred)();return t.keys(((e,t)=>{e&&r.reject(e),r.resolve(t)})),r.promise}return(0,l.executeWorkerFile)(a.join(__dirname,"registryKeys.worker.js"),e)}},56300:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getRegistryInterpreters=t.getRegistryInterpretersSync=t.getInterpreterDataFromRegistry=t.matchPythonBinFilename=t.matchBasicPythonBinFilename=void 0;const s=n(2543),a=o(n(16928)),c=n(552),l=n(61905),u=n(53174);async function p(e,t,n,r){const i=await(0,u.readRegistryKeys)({arch:e,hive:t,key:n},r),o=n.substr(n.lastIndexOf("\\")+1),s=await Promise.all(i.map((e=>async function({arch:e,hive:t,key:n},r,i){const o={interpreterPath:"",distroOrgName:r},s=await(0,u.readRegistryValues)({arch:e,hive:t,key:n},i);for(const e of s)switch(e.name){case"SysArchitecture":o.bitnessStr=e.value;break;case"SysVersion":o.sysVersionStr=e.value;break;case"Version":o.versionStr=e.value;break;case"DisplayName":o.companyDisplayName=e.value}const a=(await(0,u.readRegistryKeys)({arch:e,hive:t,key:n},i)).map((e=>e.key)).find((e=>e.endsWith("InstallPath")));if(a){const n=(await(0,u.readRegistryValues)({arch:e,hive:t,key:a},i)).find((e=>"ExecutablePath"===e.name));n&&(o.interpreterPath=n.value,n.type!==u.REG_SZ&&(0,l.traceVerbose)(`Registry interpreter path type [${n.type}]: ${n.value}`))}if(o.interpreterPath.length>0)return o}(e,o,r))));return s.filter((e=>void 0!==e))||[]}let d,h;t.matchBasicPythonBinFilename=function(e){return"python.exe"===a.basename(e).toLowerCase()},t.matchPythonBinFilename=function(e){return/^python(\d+(.\d+)?)?\.exe$/.test(a.basename(e))},t.getInterpreterDataFromRegistry=p,t.getRegistryInterpretersSync=function(){return(0,c.isTestExecution)()?void 0:d},t.getRegistryInterpreters=async function(){return(0,c.isTestExecution)()||void 0===h?(h=async function(e=!1){let t=[];for(const n of["x64","x86"])for(const r of[u.HKLM,u.HKCU]){const i="\\SOFTWARE\\Python";let o=[];try{o=(await(0,u.readRegistryKeys)({arch:n,hive:r,key:i},e)).map((e=>e.key))}catch(e){(0,l.traceError)(`Failed to access Registry: ${n}\\${r}\\${i}`,e)}for(const i of o)t=t.concat(await p(n,r,i,e))}return d=(0,s.uniqBy)(t,(e=>e.interpreterPath)),d}(),h):h}},76650:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hasPrefixCondaEnv=t.getPrefixCondaEnvPath=t.getVenvExecutable=t.hasVenv=t.getVenvPath=t.showErrorMessageWithLogs=void 0;const s=o(n(16928)),a=o(n(25943)),c=n(552),l=n(14152),u=n(93029),p=n(85784),d=n(48112);function h(e){return s.join(e.uri.fsPath,".venv")}function f(e){return s.join(e.uri.fsPath,".conda")}t.showErrorMessageWithLogs=async function(e){const t=await(0,p.showErrorMessage)(e,l.Common.openOutputPanel,l.Common.selectPythonInterpreter);t===l.Common.openOutputPanel?await(0,u.executeCommand)(c.Commands.ViewOutput):t===l.Common.selectPythonInterpreter&&await(0,u.executeCommand)(c.Commands.Set_Interpreter)},t.getVenvPath=h,t.hasVenv=async function(e){return a.pathExists(s.join(h(e),"pyvenv.cfg"))},t.getVenvExecutable=function(e){return(0,d.isWindows)()?s.join(h(e),"Scripts","python.exe"):s.join(h(e),"bin","python")},t.getPrefixCondaEnvPath=f,t.hasPrefixCondaEnv=async function(e){return a.pathExists(f(e))}},53038:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isCreateEnvWorkspaceCheckNotRun=t.disableCreateEnvironmentTrigger=t.shouldPromptToCreateEnv=t.isGlobalPythonSelected=t.hasKnownFiles=t.hasRequirementFiles=t.fileContainsInlineDependencies=t.CREATE_ENV_TRIGGER_SETTING=t.CREATE_ENV_TRIGGER_SETTING_PART=void 0;const s=o(n(16928)),a=n(54980),c=o(n(25943)),l=n(31026),u=n(34467),p=n(552),d=n(61905),h=n(8841),f=n(9923);t.CREATE_ENV_TRIGGER_SETTING_PART="createEnvironment.trigger",t.CREATE_ENV_TRIGGER_SETTING=`python.${t.CREATE_ENV_TRIGGER_SETTING_PART}`,t.fileContainsInlineDependencies=async function(e){return!1},t.hasRequirementFiles=async function(e){var t;const n=await(0,l.getPipRequirementsFiles)(e),r=(null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0)>0;return r&&(0,d.traceVerbose)(`Found requirement files: ${e.uri.fsPath}`),r},t.hasKnownFiles=async function(e){const t=["poetry.lock","conda.yaml","environment.yaml","conda.yml","environment.yml","Pipfile","Pipfile.lock"].map((t=>s.join(e.uri.fsPath,t))),n=(await Promise.all(t.map((e=>c.pathExists(e))))).some((e=>e));return n&&(0,d.traceVerbose)(`Found known files: ${e.uri.fsPath}`),n},t.isGlobalPythonSelected=async function(e){const t=(0,u.getExtension)(p.PVSC_EXTENSION_ID);if(!t)return!1;const n=t.exports,r=n.environments.getActiveEnvironmentPath(e.uri),i=await n.environments.resolveEnvironment(r),o=void 0===(null==i?void 0:i.environment);return o&&(0,d.traceVerbose)(`Selected python for [${e.uri.fsPath}] is [global] type: ${r.path}`),o},t.shouldPromptToCreateEnv=function(){const e=(0,h.getConfiguration)("python");return e?"off"!==e.get(t.CREATE_ENV_TRIGGER_SETTING_PART,"off"):"off"!==(0,f.getWorkspaceStateValue)(t.CREATE_ENV_TRIGGER_SETTING,"off")},t.disableCreateEnvironmentTrigger=function(){const e=(0,h.getConfiguration)("python");e&&e.update("createEnvironment.trigger","off",a.ConfigurationTarget.Global)};let v=!1;t.isCreateEnvWorkspaceCheckNotRun=function(){return!v&&(v=!0,!0)}},83306:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInstalledPackagesDiagnostics=t.INSTALL_CHECKER_SOURCE=void 0;const r=n(54980),i=n(8370),o=n(43761),s=n(61905),a=n(8841);function c(e){const t=(0,a.getConfiguration)("python",e.uri).get("missingPackage.severity","Hint");return"Error"===t?r.DiagnosticSeverity.Error:"Warning"===t?r.DiagnosticSeverity.Warning:"Information"===t?r.DiagnosticSeverity.Information:r.DiagnosticSeverity.Hint}t.INSTALL_CHECKER_SOURCE="Python-InstalledPackagesChecker",t.getInstalledPackagesDiagnostics=async function(e,n){const a=await e.getActiveInterpreter(n.uri);if(!a)return[];const l=(0,i.installedCheckScript)();try{(0,s.traceInfo)("Running installed packages checker: ",a,l,n.uri.fsPath);const e={...process.env,VSCODE_MISSING_PGK_SEVERITY:`${c(n)}`},i=await(0,o.plainExec)(a.path,[l,n.uri.fsPath],{env:e});return(0,s.traceVerbose)("Installed packages check result:\n",i.stdout),i.stderr&&(0,s.traceError)("Installed packages check error:\n",i.stderr),function(e){let n=[];try{n=JSON.parse(e).map((e=>{const n=new r.Diagnostic(new r.Range(e.line,e.character,e.endLine,e.endCharacter),r.l10n.t("Package `{0}` is not installed in the selected environment.",e.package),e.severity);return n.code={value:e.code,target:r.Uri.parse(`https://pypi.org/p/${e.package}`)},n.source=t.INSTALL_CHECKER_SOURCE,n}))}catch(e){n=[]}return n}(i.stdout)}catch(e){(0,s.traceError)("Error while getting installed packages check result:\n",e)}return[]}},41043:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.pickWorkspaceFolder=void 0;const s=o(n(16928)),a=o(n(25943)),c=n(85784),l=n(8841),u=n(14152),p=n(93029);function d(e){return Promise.race([a.pathExists(s.join(e.uri.fsPath,".venv")),a.pathExists(s.join(e.uri.fsPath,".conda"))])}t.pickWorkspaceFolder=async function(e,t){const n=(0,l.getWorkspaceFolders)();if(!n||0===n.length){if(t===c.MultiStepAction.Back)throw c.MultiStepAction.Back;return void(await(0,c.showErrorMessage)(u.CreateEnv.noWorkspace,u.Common.openFolder)===u.Common.openFolder&&await(0,p.executeCommand)("vscode.openFolder"))}if(null==e?void 0:e.preSelectedWorkspace){if(t===c.MultiStepAction.Back)throw c.MultiStepAction.Back;return e.preSelectedWorkspace}if(1===n.length){if(t===c.MultiStepAction.Back)throw c.MultiStepAction.Back;return n[0]}const r=await(0,c.showQuickPickWithBack)(await async function(e){const t=[];for(const n of e)t.push({label:n.name,detail:n.uri.fsPath,description:await d(n)?u.CreateEnv.hasVirtualEnv:void 0});return t}(n),{placeHolder:u.CreateEnv.pickWorkspacePlaceholder,ignoreFocusOut:!0,canPickMany:null==e?void 0:e.allowMultiSelect,matchOnDescription:!0,matchOnDetail:!0},null==e?void 0:e.token);if(r){if(Array.isArray(r)){const e=r.map((e=>e.detail)).filter((e=>void 0!==e));return n.filter((t=>e.includes(t.uri.fsPath)))}return n.filter((e=>e.uri.fsPath===r.detail))[0]}}},50499:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.createVirtualEnvironment=t.buildEnvironmentCreationApi=t.registerCreateEnvironmentFeatures=t.isCreatingEnvironment=t.onCreateEnvironmentExited=t.onCreateEnvironmentStarted=t.registerCreateEnvironmentProvider=void 0;const i=n(54980),o=n(552),s=n(93029),a=n(34469),c=n(31911),l=n(18983),u=n(85784),p=n(14152),d=n(51535),h=n(53322),f=n(36380),v=new class{constructor(){this._createEnvProviders=[],this._createEnvProviders=[]}add(e){if(this._createEnvProviders.filter((t=>t.id===e.id)).length>0)throw new Error(`Create Environment provider with id ${e.id} already registered`);this._createEnvProviders.push(e)}remove(e){this._createEnvProviders=this._createEnvProviders.filter((t=>t!==e))}getAll(){return this._createEnvProviders}};function m(e){return v.add(e),new i.Disposable((()=>{v.remove(e)}))}t.registerCreateEnvironmentProvider=m,r=(0,a.getCreationEvents)(),t.onCreateEnvironmentStarted=r.onCreateEnvironmentStarted,t.onCreateEnvironmentExited=r.onCreateEnvironmentExited,t.isCreatingEnvironment=r.isCreatingEnvironment,t.registerCreateEnvironmentFeatures=function(e,n,r,g){e.push((0,s.registerCommand)(o.Commands.Create_Environment,(async e=>{if(!(0,f.useEnvExtension)()){const t=v.getAll();return(0,a.handleCreateEnvironmentCommand)(t,e)}try{(0,d.sendTelemetryEvent)(h.EventName.ENVIRONMENT_CREATING,void 0,{environmentType:void 0,pythonVersion:void 0});const t=await(0,s.executeCommand)("python-envs.createAny",e);if(t){const e=t.envId.managerId;return"ms-python.python:venv"===e&&(0,d.sendTelemetryEvent)(h.EventName.ENVIRONMENT_CREATED,void 0,{environmentType:"venv",reason:"created"}),"ms-python.python:conda"===e&&(0,d.sendTelemetryEvent)(h.EventName.ENVIRONMENT_CREATED,void 0,{environmentType:"conda",reason:"created"}),{path:t.environmentPath.path}}}catch(e){if(e===i.QuickInputButtons.Back)return{workspaceFolder:void 0,action:"Back"};throw e}})),(0,s.registerCommand)(o.Commands.Create_Environment_Button,(async()=>{(0,d.sendTelemetryEvent)(h.EventName.ENVIRONMENT_BUTTON,void 0,void 0),await(0,s.executeCommand)(o.Commands.Create_Environment)})),m(new l.VenvCreationProvider(n)),m((0,c.condaCreationProvider)()),(0,t.onCreateEnvironmentExited)((async e=>{var t,n;e.path&&(null===(t=e.options)||void 0===t?void 0:t.selectEnvironment)&&(await r.updatePythonPath(e.path,i.ConfigurationTarget.WorkspaceFolder,"ui",null===(n=e.workspaceFolder)||void 0===n?void 0:n.uri),(0,u.showInformationMessage)(`${p.CreateEnv.informEnvCreation} ${g.getDisplayName(e.path)}`))})))},t.buildEnvironmentCreationApi=function(){return{onWillCreateEnvironment:t.onCreateEnvironmentStarted,onDidCreateEnvironment:t.onCreateEnvironmentExited,createEnvironment:async e=>{const t=v.getAll();try{return await(0,a.handleCreateEnvironmentCommand)(t,e)}catch(e){return{path:void 0,workspaceFolder:void 0,action:void 0,error:e}}},registerCreateEnvironmentProvider:e=>m(e)}},t.createVirtualEnvironment=async function(e){const t=v.getAll().find((e=>e.id===l.VenvCreationProviderId));if(t)return(0,a.handleCreateEnvironmentCommand)([t],{...e,providerId:t.id})}},26624:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerCreateEnvironmentButtonFeatures=void 0;const r=n(93029),i=n(8841);async function o(){const e="show"===(0,i.getConfiguration)("python").get("createEnvironment.contentButton","show");await(0,r.executeCommand)("setContext","showCreateEnvButton",e)}t.registerCreateEnvironmentButtonFeatures=function(e){e.push((0,i.onDidChangeConfiguration)((async()=>{await o()}))),o()}},34469:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleCreateEnvironmentCommand=t.getCreationEvents=void 0;const r=n(54980),i=n(14152),o=n(85784),s=n(61905),a=new r.EventEmitter,c=new r.EventEmitter;let l=0;function u(){return l>0}t.getCreationEvents=function(){return{onCreateEnvironmentStarted:a.event,onCreateEnvironmentExited:c.event,isCreatingEnvironment:u}},t.handleCreateEnvironmentCommand=async function(e,t){const n=function(e){return{installPackages:!0,ignoreSourceControl:!0,showBackButton:!1,selectEnvironment:!0,...e}}(t);let u;const p=new o.MultiStepNode(void 0,(async t=>{if(e.length>0){try{u=await async function(e,t){const n=e.map((e=>({label:e.name,description:e.description,id:e.id})));if(null==t?void 0:t.providerId){const n=e.find((e=>e.id===t.providerId));if(n)return n}let r;if(r=(null==t?void 0:t.showBackButton)?await(0,o.showQuickPickWithBack)(n,{placeHolder:i.CreateEnv.providersQuickPickPlaceholder,matchOnDescription:!0,ignoreFocusOut:!0}):await(0,o.showQuickPick)(n,{placeHolder:i.CreateEnv.providersQuickPickPlaceholder,matchOnDescription:!0,ignoreFocusOut:!0}),r){const t=Array.isArray(r)?r[0]:r;if(t){const n=e.filter((e=>e.id===t.id));if(n.length>0)return n[0]}}}(e,n)}catch(e){if(e===o.MultiStepAction.Back||e===o.MultiStepAction.Cancel)return e;throw e}if(!u)return o.MultiStepAction.Cancel}else if((0,s.traceError)("No Environment Creation providers were registered."),t===o.MultiStepAction.Back)return o.MultiStepAction.Back;return o.MultiStepAction.Continue}),void 0);let d;const h=new o.MultiStepNode(p,(async e=>{if(e===o.MultiStepAction.Back)return o.MultiStepAction.Back;if(u)try{d=await async function(e,t){let n,i;try{!function(e){a.fire({options:e}),l+=1}(t),n=await e.createEnvironment(t)}catch(e){if(e===r.QuickInputButtons.Back&&((0,s.traceVerbose)("Create Env: User clicked back button during environment creation"),!t.showBackButton))return;throw i=e,i}finally{!function(e,t,n){l-=1,e?c.fire({options:t,...e}):n&&c.fire({options:t,error:n})}(n,t,i)}return n}(u,n)}catch(e){if(e===o.MultiStepAction.Back||e===o.MultiStepAction.Cancel)return e;throw e}return o.MultiStepAction.Continue}),void 0);p.next=h;const f=await o.MultiStepNode.run(p);if((null==t?void 0:t.showBackButton)&&(f!==o.MultiStepAction.Back&&f!==o.MultiStepAction.Cancel||(d={action:f,workspaceFolder:void 0,path:void 0,error:void 0})),d)return Object.freeze(d)}},58137:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerCreateEnvironmentTriggers=t.triggerCreateEnvironmentCheckNonBlocking=t.triggerCreateEnvironmentCheck=t.CreateEnvironmentCheckKind=void 0;const r=n(53038),i=n(8841),o=n(61905),s=n(76650),a=n(85784),c=n(14152),l=n(93029),u=n(552),p=n(51535),d=n(53322);var h;function f(e,t={}){return(0,r.isCreateEnvWorkspaceCheckNotRun)()||(null==t?void 0:t.force)?async function(e){const t=(0,i.getWorkspaceFolder)(e);if(!t)return void(0,o.traceInfo)(`CreateEnv Trigger - Workspace not found for ${e.fsPath}`);if((await Promise.all([(0,s.hasVenv)(t),(0,s.hasPrefixCondaEnv)(t),(async e=>!await(0,r.hasRequirementFiles)(e))(t),(0,r.hasKnownFiles)(t),(async e=>!await(0,r.isGlobalPythonSelected)(e))(t)])).some((e=>e)))return(0,p.sendTelemetryEvent)(d.EventName.ENVIRONMENT_CHECK_RESULT,void 0,{result:"criteria-not-met"}),void(0,o.traceInfo)(`CreateEnv Trigger - Skipping for ${e.fsPath}`);(0,p.sendTelemetryEvent)(d.EventName.ENVIRONMENT_CHECK_RESULT,void 0,{result:"criteria-met"});const n=await(0,a.showInformationMessage)(c.CreateEnv.Trigger.workspaceTriggerMessage,c.CreateEnv.Trigger.createEnvironment,c.Common.doNotShowAgain);if(n===c.CreateEnv.Trigger.createEnvironment)try{await(0,l.executeCommand)(u.Commands.Create_Environment)}catch(e){(0,o.traceError)("CreateEnv Trigger - Error while creating environment: ",e)}else n===c.Common.doNotShowAgain&&(0,r.disableCreateEnvironmentTrigger)()}(e):((0,p.sendTelemetryEvent)(d.EventName.ENVIRONMENT_CHECK_RESULT,void 0,{result:"already-ran"}),(0,o.traceVerbose)("CreateEnv Trigger - skipping this because it was already run"),Promise.resolve())}async function v(e,t,n){if(!t)return(0,p.sendTelemetryEvent)(d.EventName.ENVIRONMENT_CHECK_RESULT,void 0,{result:"no-uri"}),void(0,o.traceVerbose)("CreateEnv Trigger - Skipping No URI provided");(0,r.shouldPromptToCreateEnv)()?e===h.File?await async function(e,t){await(0,r.fileContainsInlineDependencies)(e)&&await f(e,t),await f(e,t)}(t,n):await f(t,n):((0,p.sendTelemetryEvent)(d.EventName.ENVIRONMENT_CHECK_RESULT,void 0,{result:"turned-off"}),(0,o.traceVerbose)("CreateEnv Trigger - turned off in settings"))}function m(e,t,n){setTimeout((()=>v(e,t,n).ignoreErrors()),0)}!function(e){e.File="file",e.Workspace="workspace"}(h||(t.CreateEnvironmentCheckKind=h={})),t.triggerCreateEnvironmentCheck=v,t.triggerCreateEnvironmentCheckNonBlocking=m,t.registerCreateEnvironmentTriggers=function(e){e.push((0,l.registerCommand)(u.Commands.Create_Environment_Check,(e=>{(0,p.sendTelemetryEvent)(d.EventName.ENVIRONMENT_CHECK_TRIGGER,void 0,{trigger:"as-command"}),m(h.File,e,{force:!0})})))}},59027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTriggerForPipInTerminal=void 0;const r=n(53038),i=n(8841),o=n(14152),s=n(61905),a=n(93029),c=n(552),l=n(85784),u=n(51535),p=n(53322);t.registerTriggerForPipInTerminal=function(e){if(!(0,r.shouldPromptToCreateEnv)())return;const t=(0,i.getWorkspaceFolders)();if(!t||0===t.length)return;const n=new Map;t.forEach((e=>{n.set(e.uri.fsPath,!1)})),e.push((0,l.onDidStartTerminalShellExecution)((async e=>{const t=(0,i.getWorkspaceFolder)(e.shellIntegration.cwd);if(t&&!n.get(t.uri.fsPath)&&await(0,r.isGlobalPythonSelected)(t)&&e.execution.commandLine.isTrusted&&function(e){const t=e.toLowerCase();return t.startsWith("pip install")||t.startsWith("pip3 install")||t.startsWith("python -m pip install")||t.startsWith("python3 -m pip install")}(e.execution.commandLine.value)){n.set(t.uri.fsPath,!0),(0,u.sendTelemetryEvent)(p.EventName.ENVIRONMENT_TERMINAL_GLOBAL_PIP);const i=await(0,l.showWarningMessage)(o.CreateEnv.Trigger.globalPipInstallTriggerMessage,o.CreateEnv.Trigger.createEnvironment,o.Common.doNotShowAgain);if(i===o.CreateEnv.Trigger.createEnvironment)try{const n=await(0,a.executeCommand)(c.Commands.Create_Environment,{workspaceFolder:t,providerId:`${c.PVSC_EXTENSION_ID}:venv`});n.path&&((0,s.traceInfo)("CreateEnv Trigger - Environment created: ",n.path),(0,s.traceInfo)(`CreateEnv Trigger - Running: ${n.path} -m ${e.execution.commandLine.value.trim()}`),e.shellIntegration.executeCommand(`${n.path} -m ${e.execution.commandLine.value}`.trim()))}catch(e){(0,s.traceError)("CreateEnv Trigger - Error while creating environment: ",e)}else i===o.Common.doNotShowAgain&&(0,r.disableCreateEnvironmentTrigger)()}})))}},17992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerInstalledPackagesDiagnosticsProvider=t.DEPS_NOT_INSTALLED_KEY=void 0;const r=n(93029),i=n(37938),o=n(85784),s=n(8841),a=n(61905),c=n(83306);async function l(e){var n;const i=null===(n=(0,o.getActiveTextEditor)())||void 0===n?void 0:n.document;if(i&&("pip-requirements"===i.languageId||i.fileName.endsWith("pyproject.toml"))){const n=e.get(i.uri);if(n&&n.length>0)return(0,a.traceVerbose)(`Setting context for python dependencies not installed: ${i.uri.fsPath}`),void await(0,r.executeCommand)("setContext",t.DEPS_NOT_INSTALLED_KEY,!0)}await(0,r.executeCommand)("setContext",t.DEPS_NOT_INSTALLED_KEY,!1)}t.DEPS_NOT_INSTALLED_KEY="pythonDepsNotInstalled",t.registerInstalledPackagesDiagnosticsProvider=function(e,t){const n=(0,i.createDiagnosticCollection)(c.INSTALL_CHECKER_SOURCE),r=(e,t)=>{t.length>0?n.set(e,t):n.has(e)&&n.delete(e)};e.push(n),e.push((0,s.onDidOpenTextDocument)((async e=>{if("pip-requirements"===e.languageId||e.fileName.endsWith("pyproject.toml")){const n=await(0,c.getInstalledPackagesDiagnostics)(t,e);r(e.uri,n)}})),(0,s.onDidSaveTextDocument)((async e=>{if("pip-requirements"===e.languageId||e.fileName.endsWith("pyproject.toml")){const n=await(0,c.getInstalledPackagesDiagnostics)(t,e);r(e.uri,n)}})),(0,s.onDidCloseTextDocument)((e=>{r(e.uri,[])})),(0,i.onDidChangeDiagnostics)((async()=>{await l(n)})),(0,o.onDidChangeActiveTextEditor)((async()=>{await l(n)})),t.onDidChangeInterpreter((()=>{(0,s.getOpenTextDocuments)().forEach((async e=>{if("pip-requirements"===e.languageId||e.fileName.endsWith("pyproject.toml")){const n=await(0,c.getInstalledPackagesDiagnostics)(t,e);r(e.uri,n)}}))}))),(0,s.getOpenTextDocuments)().forEach((async e=>{if("pip-requirements"===e.languageId||e.fileName.endsWith("pyproject.toml")){const n=await(0,c.getInstalledPackagesDiagnostics)(t,e);r(e.uri,n)}}))}},31911:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.condaCreationProvider=void 0;const s=n(54980),a=o(n(16928)),c=n(552),l=n(61905),u=n(41043),p=n(43761),d=n(7855),h=n(48112),f=n(8370),v=n(14152),m=n(70098),g=n(76650),y=n(85784),b=n(53322),_=n(51535),E=n(10056),S=n(74399),w=n(34522),P=n(98803);function T(e){return(0,h.getOSType)()===h.OSType.Windows?a.join(e,"python.exe"):a.join(e,"bin","python")}async function C(e){const t=await(0,m.getCondaBaseEnv)();if(!t)return;let n;const r=new y.MultiStepNode(void 0,(async e=>{try{n=await(0,u.pickWorkspaceFolder)(void 0,e)}catch(e){if(e===y.MultiStepAction.Back||e===y.MultiStepAction.Cancel)return e;throw e}return void 0===n?((0,l.traceError)("Workspace was not selected or found for creating conda environment."),y.MultiStepAction.Cancel):((0,l.traceInfo)(`Selected workspace ${n.uri.fsPath} for creating conda environment.`),y.MultiStepAction.Continue)}),void 0);let i;const o=new y.MultiStepNode(r,(async e=>{if(n&&e===y.MultiStepAction.Continue)try{return i=await(0,m.pickExistingCondaAction)(n),y.MultiStepAction.Continue}catch(e){if(e===y.MultiStepAction.Back||e===y.MultiStepAction.Cancel)return e;throw e}else if(e===y.MultiStepAction.Back)return y.MultiStepAction.Back;return y.MultiStepAction.Continue}),void 0);let a;r.next=o;const h=new y.MultiStepNode(r,(async e=>{if(i===m.ExistingCondaAction.Recreate||i===m.ExistingCondaAction.Create){try{a=await(0,m.pickPythonVersion)()}catch(e){if(e===y.MultiStepAction.Back||e===y.MultiStepAction.Cancel)return e;throw e}if(void 0===a)return(0,l.traceError)("Python version was not selected for creating conda environment."),y.MultiStepAction.Cancel;(0,l.traceInfo)(`Selected Python version ${a} for creating conda environment.`)}else if(i===m.ExistingCondaAction.UseExisting&&e===y.MultiStepAction.Back)return y.MultiStepAction.Back;return y.MultiStepAction.Continue}),void 0);o.next=h;const C=await y.MultiStepNode.run(r);if(C===y.MultiStepAction.Back||C===y.MultiStepAction.Cancel)throw C;if(n)if(i===m.ExistingCondaAction.Recreate){if((0,_.sendTelemetryEvent)(b.EventName.ENVIRONMENT_DELETE,void 0,{environmentType:"conda",status:"triggered"}),!await(0,m.deleteEnvironment)(n,T(t)))throw(0,_.sendTelemetryEvent)(b.EventName.ENVIRONMENT_DELETE,void 0,{environmentType:"conda",status:"failed"}),y.MultiStepAction.Cancel;(0,_.sendTelemetryEvent)(b.EventName.ENVIRONMENT_DELETE,void 0,{environmentType:"conda",status:"deleted"})}else if(i===m.ExistingCondaAction.UseExisting)return(0,_.sendTelemetryEvent)(b.EventName.ENVIRONMENT_REUSE,void 0,{environmentType:"conda"}),{path:(0,g.getPrefixCondaEnvPath)(n),workspaceFolder:n};const x=async(r,i)=>{let o;r.report({message:v.CreateEnv.statusStarting});try{if((0,_.sendTelemetryEvent)(b.EventName.ENVIRONMENT_CREATING,void 0,{environmentType:"conda",pythonVersion:a}),n){if(o=await async function(e,t,n,r,i){r.report({message:v.CreateEnv.Conda.creating});const o=(0,d.createDeferred)(),s=(0,m.getPathEnvVariableForConda)(t);(0,l.traceLog)("Running Conda Env creation script: ",[t,...n]);const{proc:a,out:c,dispose:u}=(0,p.execObservable)(t,n,{mergeStdOutErr:!0,token:i,cwd:e.uri.fsPath,env:{PATH:s}}),h=new E.CondaProgressAndTelemetry(r);let f;return c.subscribe((e=>{const t=(0,S.splitLines)(e.out).join("\r\n");(0,l.traceLog)(t.trimEnd()),(t.includes(E.CONDA_ENV_CREATED_MARKER)||t.includes(E.CONDA_ENV_EXISTING_MARKER))&&(f=function(e){try{const t=e.split(/\r?\n/g).map((e=>e.trim())).filter((e=>e.startsWith(E.CONDA_ENV_CREATED_MARKER)||e.startsWith(E.CONDA_ENV_EXISTING_MARKER)))[0];return t.includes(E.CONDA_ENV_CREATED_MARKER)?t.substring(E.CONDA_ENV_CREATED_MARKER.length):t.substring(E.CONDA_ENV_EXISTING_MARKER.length)}catch(e){return void(0,l.traceError)("Parsing out environment path failed.")}}(t)),h.process(t)}),(async e=>{(0,l.traceError)("Error while running conda env creation script: ",e),o.reject(e)}),(()=>{u(),0!==(null==a?void 0:a.exitCode)?((0,l.traceError)("Error while running venv creation script: ",h.getLastError()),o.reject(h.getLastError()||`Conda env creation failed with exitCode: ${null==a?void 0:a.exitCode}`)):o.resolve(f)})),o.promise}(n,T(t),function(e,t){let n=!0,r=!0;t&&(n=void 0===(null==t?void 0:t.ignoreSourceControl)||t.ignoreSourceControl,r=void 0===(null==t?void 0:t.installPackages)||t.installPackages);const i=[(0,f.createCondaScript)()];return n&&i.push("--git-ignore"),r&&i.push("--install"),e&&(i.push("--python"),i.push(e)),i}(a,e),r,i),o)return{path:o,workspaceFolder:n};throw new Error("Failed to create conda environment. See Output > Python for more info.")}throw new Error("A workspace is needed to create conda environment")}catch(e){return(0,l.traceError)(e),(0,g.showErrorMessageWithLogs)(v.CreateEnv.Conda.errorCreatingEnvironment),{error:e}}};if(!(0,w.shouldDisplayEnvCreationProgress)()){const e=new s.CancellationTokenSource;try{return await x({report:P.noop},e.token)}finally{e.dispose()}}return(0,y.withProgress)({location:s.ProgressLocation.Notification,title:`${v.CreateEnv.statusTitle} ([${v.Common.showLogs}](command:${c.Commands.ViewOutput}))`,cancellable:!0},(async(e,t)=>x(e,t)))}t.condaCreationProvider=function(){return{createEnvironment:C,name:"Conda",description:v.CreateEnv.Conda.providerDescription,id:`${c.PVSC_EXTENSION_ID}:conda`,tools:["Conda"]}}},13995:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCondaEnvironment=void 0;const r=n(43761),i=n(14152),o=n(61905),s=n(76650);t.deleteCondaEnvironment=async function(e,t,n){const a=(0,s.getPrefixCondaEnvPath)(e),c=t,l=["-m","conda","env","remove","--prefix",a,"--yes"];try{(0,o.traceInfo)(`Deleting conda environment: ${a}`),(0,o.traceInfo)(`Running command: ${c} ${l.join(" ")}`);const t=await(0,r.plainExec)(c,l,{mergeStdOutErr:!0},{...process.env,PATH:n});if((0,o.traceInfo)(t.stdout),await(0,s.hasPrefixCondaEnv)(e))return(0,o.traceError)(`Conda environment ${a} could not be deleted.`),(0,o.traceError)(`Please delete the environment manually: ${a}`),(0,s.showErrorMessageWithLogs)(i.CreateEnv.Conda.errorDeletingEnvironment),!1}catch(e){return(0,s.showErrorMessageWithLogs)(i.CreateEnv.Conda.errorDeletingEnvironment),(0,o.traceError)(`Deleting conda environment ${a} Failed with error: `,e),!1}return!0}},10056:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CondaProgressAndTelemetry=t.CREATE_FAILED_INSTALL_YML=t.CREATE_CONDA_INSTALLED_YML=t.CREATE_CONDA_FAILED_MARKER=t.CONDA_INSTALLING_YML=t.CONDA_ENV_EXISTING_MARKER=t.CONDA_ENV_CREATED_MARKER=void 0;const r=n(14152),i=n(51535),o=n(53322);t.CONDA_ENV_CREATED_MARKER="CREATED_CONDA_ENV:",t.CONDA_ENV_EXISTING_MARKER="EXISTING_CONDA_ENV:",t.CONDA_INSTALLING_YML="CONDA_INSTALLING_YML:",t.CREATE_CONDA_FAILED_MARKER="CREATE_CONDA.ENV_FAILED_CREATION",t.CREATE_CONDA_INSTALLED_YML="CREATE_CONDA.INSTALLED_YML",t.CREATE_FAILED_INSTALL_YML="CREATE_CONDA.FAILED_INSTALL_YML",t.CondaProgressAndTelemetry=class{constructor(e){this.progress=e,this.condaCreatedReported=!1,this.condaFailedReported=!1,this.condaInstallingPackagesReported=!1,this.condaInstallingPackagesFailedReported=!1,this.condaInstalledPackagesReported=!1,this.lastError=void 0}process(e){!this.condaCreatedReported&&e.includes(t.CONDA_ENV_CREATED_MARKER)?(this.condaCreatedReported=!0,this.progress.report({message:r.CreateEnv.Conda.created}),(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_CREATED,void 0,{environmentType:"conda",reason:"created"})):!this.condaCreatedReported&&e.includes(t.CONDA_ENV_EXISTING_MARKER)?(this.condaCreatedReported=!0,this.progress.report({message:r.CreateEnv.Conda.created}),(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_CREATED,void 0,{environmentType:"conda",reason:"existing"})):!this.condaFailedReported&&e.includes(t.CREATE_CONDA_FAILED_MARKER)?(this.condaFailedReported=!0,(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_FAILED,void 0,{environmentType:"conda",reason:"other"}),this.lastError=t.CREATE_CONDA_FAILED_MARKER):!this.condaInstallingPackagesReported&&e.includes(t.CONDA_INSTALLING_YML)?(this.condaInstallingPackagesReported=!0,this.progress.report({message:r.CreateEnv.Conda.installingPackages}),(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES,void 0,{environmentType:"conda",using:"environment.yml"})):!this.condaInstallingPackagesFailedReported&&e.includes(t.CREATE_FAILED_INSTALL_YML)?(this.condaInstallingPackagesFailedReported=!0,(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES_FAILED,void 0,{environmentType:"conda",using:"environment.yml"}),this.lastError=t.CREATE_FAILED_INSTALL_YML):!this.condaInstalledPackagesReported&&e.includes(t.CREATE_CONDA_INSTALLED_YML)&&(this.condaInstalledPackagesReported=!0,(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLED_PACKAGES,void 0,{environmentType:"conda",using:"environment.yml"}))}getLastError(){return this.lastError}}},70098:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.pickExistingCondaAction=t.ExistingCondaAction=t.deleteEnvironment=t.getPathEnvVariableForConda=t.pickPythonVersion=t.getCondaBaseEnv=void 0;const s=o(n(16928)),a=n(54980),c=n(552),l=n(14152),u=n(93029),p=n(85784),d=n(61905),h=n(95885),f=n(76650),v=n(48112),m=n(13995);function g(e){const t=(0,v.getEnvironmentVariable)("PATH")||(0,v.getEnvironmentVariable)("Path")||"";if((0,v.getOSType)()===v.OSType.Windows){const n=s.dirname(e);return`${[s.join(n,"Library","bin"),s.join(n,"Library","mingw-w64","bin"),s.join(n,"Library","usr","bin"),s.join(n,"bin"),s.join(n,"Scripts")].join(s.delimiter)}${s.delimiter}${t}`}return t}var y;t.getCondaBaseEnv=async function(){const e=await h.Conda.getConda();if(!e)return void(await(0,p.showErrorMessage)(l.CreateEnv.Conda.condaMissing,l.Common.learnMore)===l.Common.learnMore&&await(0,u.executeCommand)("vscode.open",a.Uri.parse("https://docs.anaconda.com/anaconda/install/")));const t=(await e.getEnvList()).filter((e=>"base"===e.name));if(1===t.length)return t[0].prefix;t.length>1&&(0,d.traceLog)("Multiple conda base envs detected: ",t.map((e=>e.prefix)))},t.pickPythonVersion=async function(e){const t=["3.11","3.12","3.10","3.9","3.8"].map((e=>({label:"3.11"===e?`${c.Octicons.Star} Python`:"Python",description:e}))),n=await(0,p.showQuickPickWithBack)(t,{placeHolder:l.CreateEnv.Conda.selectPythonQuickPickPlaceholder,matchOnDescription:!0,ignoreFocusOut:!0},e);if(n)return n.description},t.getPathEnvVariableForConda=g,t.deleteEnvironment=async function(e,t){const n=(0,f.getPrefixCondaEnvPath)(e);return(0,p.withProgress)({location:a.ProgressLocation.Notification,title:`${l.CreateEnv.Conda.deletingEnvironmentProgress} ([${l.Common.showLogs}](command:${c.Commands.ViewOutput})): ${n}`,cancellable:!1},(async()=>(0,m.deleteCondaEnvironment)(e,t,g(t))))},function(e){e[e.Recreate=0]="Recreate",e[e.UseExisting=1]="UseExisting",e[e.Create=2]="Create"}(y||(t.ExistingCondaAction=y={})),t.pickExistingCondaAction=async function(e){if(e){if(!await(0,f.hasPrefixCondaEnv)(e))return y.Create;{const e=[{label:l.CreateEnv.Conda.recreate,description:l.CreateEnv.Conda.recreateDescription},{label:l.CreateEnv.Conda.useExisting,description:l.CreateEnv.Conda.useExistingDescription}],t=await(0,p.showQuickPickWithBack)(e,{placeHolder:l.CreateEnv.Conda.existingCondaQuickPickPlaceholder,ignoreFocusOut:!0},void 0);if((null==t?void 0:t.label)===l.CreateEnv.Conda.recreate)return y.Recreate;if((null==t?void 0:t.label)===l.CreateEnv.Conda.useExisting)return y.UseExisting}}throw p.MultiStepAction.Cancel}},34522:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldDisplayEnvCreationProgress=t.hideEnvCreation=void 0;const r=n(54980),i=[];t.hideEnvCreation=function(){const e=new r.Disposable((()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)}));return i.push(e),e},t.shouldDisplayEnvCreationProgress=function(){return 0===i.length}},18983:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.VenvCreationProvider=t.VenvCreationProviderId=void 0;const s=o(n(70857)),a=n(54980),c=n(552),l=n(8370),u=n(43761),p=n(7855),d=n(14152),h=n(61905),f=n(41043),v=n(25297),m=n(85784),g=n(51535),y=n(53322),b=n(5544),_=n(76650),E=n(31026),S=n(70670),w=n(34522),P=n(98803);t.VenvCreationProviderId=`${c.PVSC_EXTENSION_ID}:venv`,t.VenvCreationProvider=class{constructor(e){this.interpreterQuickPick=e,this.name="Venv",this.description=d.CreateEnv.Venv.providerDescription,this.id=t.VenvCreationProviderId,this.tools=["Venv"]}async createEnvironment(e){let t=null==e?void 0:e.workspaceFolder;const n=!!((null==e?void 0:e.workspaceFolder)&&e.interpreter&&e.providerId),r=new m.MultiStepNode(void 0,(async r=>{try{t=t&&n?t:await(0,f.pickWorkspaceFolder)({preSelectedWorkspace:null==e?void 0:e.workspaceFolder},r)}catch(e){if(e===m.MultiStepAction.Back||e===m.MultiStepAction.Cancel)return e;throw e}return void 0===t?((0,h.traceError)("Workspace was not selected or found for creating virtual environment."),m.MultiStepAction.Cancel):((0,h.traceInfo)(`Selected workspace ${t.uri.fsPath} for creating virtual environment.`),m.MultiStepAction.Continue)}),void 0);let i;n&&(i=E.ExistingVenvAction.Create);const o=new m.MultiStepNode(r,(async e=>{if(t&&e===m.MultiStepAction.Continue)try{return i=await(0,E.pickExistingVenvAction)(t),m.MultiStepAction.Continue}catch(e){if(e===m.MultiStepAction.Back||e===m.MultiStepAction.Cancel)return e;throw e}else if(e===m.MultiStepAction.Back)return m.MultiStepAction.Back;return m.MultiStepAction.Continue}),void 0);r.next=o;let T=null==e?void 0:e.interpreter;const C=new m.MultiStepNode(o,(async e=>{if(t)if(i===E.ExistingVenvAction.Recreate||i===E.ExistingVenvAction.Create)try{T=T&&n?T:await this.interpreterQuickPick.getInterpreterViaQuickPick(t.uri,(e=>[v.EnvironmentType.System,v.EnvironmentType.MicrosoftStore,v.EnvironmentType.Global,v.EnvironmentType.Pyenv].includes(e.envType)&&void 0===e.type),{skipRecommended:!0,showBackButton:!0,placeholder:d.CreateEnv.Venv.selectPythonPlaceHolder,title:null})}catch(e){if(e===S.InputFlowAction.back)return m.MultiStepAction.Back;T=void 0}else if(i===E.ExistingVenvAction.UseExisting){if(e===m.MultiStepAction.Back)return m.MultiStepAction.Back;T=(0,_.getVenvExecutable)(t)}return T?((0,h.traceInfo)(`Selected interpreter ${T} for creating virtual environment.`),m.MultiStepAction.Continue):((0,h.traceError)("Virtual env creation requires an interpreter."),m.MultiStepAction.Cancel)}),void 0);o.next=C;let x,I=!0,O=!0;e&&(I=void 0===(null==e?void 0:e.ignoreSourceControl)||e.ignoreSourceControl,O=void 0===(null==e?void 0:e.installPackages)||e.installPackages);const R=new m.MultiStepNode(C,(async e=>{if(t&&O)if(i!==E.ExistingVenvAction.UseExisting){try{x=await(0,E.pickPackagesToInstall)(t)}catch(e){if(e===m.MultiStepAction.Back||e===m.MultiStepAction.Cancel)return e;throw e}if(!x)return(0,h.traceVerbose)("Virtual env creation exited during dependencies selection."),m.MultiStepAction.Cancel}else if(e===m.MultiStepAction.Back)return m.MultiStepAction.Back;return m.MultiStepAction.Continue}),void 0);C.next=R;const D=await m.MultiStepNode.run(r);if(D===m.MultiStepAction.Back||D===m.MultiStepAction.Cancel)throw D;if(t)if(i===E.ExistingVenvAction.Recreate){if((0,g.sendTelemetryEvent)(y.EventName.ENVIRONMENT_DELETE,void 0,{environmentType:"venv",status:"triggered"}),!await(0,E.deleteEnvironment)(t,T))throw(0,g.sendTelemetryEvent)(y.EventName.ENVIRONMENT_DELETE,void 0,{environmentType:"venv",status:"failed"}),m.MultiStepAction.Cancel;(0,g.sendTelemetryEvent)(y.EventName.ENVIRONMENT_DELETE,void 0,{environmentType:"venv",status:"deleted"})}else if(i===E.ExistingVenvAction.UseExisting)return(0,g.sendTelemetryEvent)(y.EventName.ENVIRONMENT_REUSE,void 0,{environmentType:"venv"}),{path:(0,_.getVenvExecutable)(t),workspaceFolder:t};const k=function(e,t){var n;const r=[(0,l.createVenvScript)()];let i;if(t&&r.push("--git-ignore"),e){if(e.some((e=>"toml"===e.installType))){const t=null===(n=e.find((e=>"toml"===e.installType)))||void 0===n?void 0:n.source;r.push("--toml",(null==t?void 0:t.fileToCommandArgumentForPythonExt())||"pyproject.toml")}e.filter((e=>"toml"===e.installType)).map((e=>e.installItem)).forEach((e=>{e&&r.push("--extras",e)}));const t=e.filter((e=>"requirements"===e.installType)).map((e=>e.installItem));t.length<10?t.forEach((e=>{e&&r.push("--requirements",e)})):(r.push("--stdin"),i=JSON.stringify({requirements:t}))}return{argv:r,stdin:i}}(x,I),A=async(e,n)=>{let r;e.report({message:d.CreateEnv.statusStarting});try{if(T&&t){if(r=await async function(e,t,n,r,i){r.report({message:d.CreateEnv.Venv.creating}),(0,g.sendTelemetryEvent)(y.EventName.ENVIRONMENT_CREATING,void 0,{environmentType:"venv",pythonVersion:void 0});const o=(0,p.createDeferred)();(0,h.traceLog)("Running Env creation script: ",[t,...n.argv]),n.stdin&&(0,h.traceLog)("Requirements passed in via stdin: ",n.stdin);const{proc:a,out:c,dispose:l}=(0,u.execObservable)(t,n.argv,{mergeStdOutErr:!0,token:i,cwd:e.uri.fsPath,stdinStr:n.stdin}),f=new b.VenvProgressAndTelemetry(r);let v;return c.subscribe((e=>{const t=e.out.split(/\r?\n/g).join(s.EOL);(0,h.traceLog)(t.trimEnd()),(t.includes(b.VENV_CREATED_MARKER)||t.includes(b.VENV_EXISTING_MARKER))&&(v=function(e){try{const t=e.split(/\r?\n/g).map((e=>e.trim())).filter((e=>e.startsWith(b.VENV_CREATED_MARKER)||e.startsWith(b.VENV_EXISTING_MARKER)))[0];return t.includes(b.VENV_CREATED_MARKER)?t.substring(b.VENV_CREATED_MARKER.length):t.substring(b.VENV_EXISTING_MARKER.length)}catch(e){return void(0,h.traceError)("Parsing out environment path failed.")}}(t)),f.process(t)}),(e=>{(0,h.traceError)("Error while running venv creation script: ",e),o.reject(e)}),(()=>{l(),0!==(null==a?void 0:a.exitCode)?((0,h.traceError)("Error while running venv creation script: ",f.getLastError()),o.reject(f.getLastError()||`Failed to create virtual environment with exitCode: ${null==a?void 0:a.exitCode}`)):o.resolve(v)})),o.promise}(t,T,k,e,n),r)return{path:r,workspaceFolder:t};throw new Error("Failed to create virtual environment. See Output > Python for more info.")}throw new Error("Failed to create virtual environment. Either interpreter or workspace is undefined.")}catch(e){return(0,h.traceError)(e),(0,_.showErrorMessageWithLogs)(d.CreateEnv.Venv.errorCreatingEnvironment),{error:e}}};if(!(0,w.shouldDisplayEnvCreationProgress)()){const e=new a.CancellationTokenSource;try{return await A({report:P.noop},e.token)}finally{e.dispose()}}return(0,m.withProgress)({location:a.ProgressLocation.Notification,title:`${d.CreateEnv.statusTitle} ([${d.Common.showLogs}](command:${c.Commands.ViewOutput}))`,cancellable:!0},(async(e,t)=>A(e,t)))}}},84491:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteEnvironmentWindows=t.deleteEnvironmentNonWindows=void 0;const s=o(n(16928)),a=o(n(25943)),c=n(61905),l=n(76650),u=n(14152),p=n(7855),d=n(1521);async function h(e){try{return!await a.pathExists(e)||(await a.rmdir(e,{recursive:!0,maxRetries:10,retryDelay:200}),!0)}catch(t){return(0,c.traceError)(`Failed to delete directory [${e}]:`,t),!1}}t.deleteEnvironmentNonWindows=async function(e){const t=(0,l.getVenvPath)(e);return await h(t)?((0,c.traceInfo)(`Deleted venv dir: ${t}`),!0):((0,l.showErrorMessageWithLogs)(u.CreateEnv.Venv.errorDeletingEnvironment),!1)},t.deleteEnvironmentWindows=async function(e,t){const n=(0,l.getVenvPath)(e),r=s.join(n,"Scripts","python.exe");if(await async function(e){try{return!await a.pathExists(e)||(await a.unlink(e),!0)}catch(t){return(0,c.traceError)(`Failed to delete file [${e}]:`,t),!1}}(r))return(0,c.traceInfo)(`Deleted python executable: ${r}`),await h(n)?((0,c.traceInfo)(`Deleted ".venv" dir: ${n}`),!0):((0,c.traceError)(`Failed to delete ".venv" dir: ${n}`),(0,c.traceError)("This happens if the virtual environment is still in use, or some binary in the venv is still running."),(0,c.traceError)(`Please delete the ".venv" manually: [${n}]`),(0,l.showErrorMessageWithLogs)(u.CreateEnv.Venv.errorDeletingEnvironment),!1);if((0,c.traceError)(`Failed to delete python executable: ${r}`),(0,c.traceError)("This happens if the virtual environment is still in use."),t){(0,c.traceError)('We will attempt to switch python temporarily to delete the ".venv"'),await(0,d.switchSelectedPython)(t,e.uri,'temporarily to delete the ".venv"'),(0,c.traceInfo)(`Attempting to delete ".venv" again: ${n}`);const r=500;for(let e=0;e<5;e+=1){if((0,c.traceInfo)(`Waiting for ${r}ms to let processes exit, before a delete attempt.`),await(0,p.sleep)(r),await h(n))return(0,c.traceInfo)(`Deleted ".venv" dir: ${n}`),!0;(0,c.traceError)(`Failed to delete ".venv" dir [${n}] (attempt ${e+1}/5).`)}}else(0,c.traceError)(`Please delete the ".venv" dir manually: [${n}]`);return(0,l.showErrorMessageWithLogs)(u.CreateEnv.Venv.errorDeletingEnvironment),!1}},5544:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VenvProgressAndTelemetry=t.VENV_EXISTING_MARKER=t.VENV_CREATED_MARKER=void 0;const r=n(14152),i=n(51535),o=n(53322);t.VENV_CREATED_MARKER="CREATED_VENV:",t.VENV_EXISTING_MARKER="EXISTING_VENV:";const s="CREATE_VENV.PIP_NOT_FOUND",a="CREATE_VENV.VENV_NOT_FOUND",c="CREATE_VENV.PIP_FAILED_INSTALL_REQUIREMENTS",l="CREATE_VENV.PIP_FAILED_INSTALL_PYPROJECT",u="CREATE_VENV.VENV_FAILED_CREATION",p="CREATE_VENV.UPGRADE_PIP_FAILED",d="CREATE_VENV.MICROVENV_FAILED_CREATION",h="CREATE_MICROVENV.MICROVENV_FAILED_CREATION",f="CREATE_VENV.INSTALL_PIP_FAILED",v="CREATE_VENV.DOWNLOAD_PIP_FAILED";t.VenvProgressAndTelemetry=class{constructor(e){this.progress=e,this.processed=new Set,this.reportActions=new Map([[t.VENV_CREATED_MARKER,e=>{e.report({message:r.CreateEnv.Venv.created}),(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_CREATED,void 0,{environmentType:"venv",reason:"created"})}],[t.VENV_EXISTING_MARKER,e=>{e.report({message:r.CreateEnv.Venv.existing}),(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_CREATED,void 0,{environmentType:"venv",reason:"existing"})}],["VENV_INSTALLING_REQUIREMENTS:",e=>{e.report({message:r.CreateEnv.Venv.installingPackages}),(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES,void 0,{environmentType:"venv",using:"requirements.txt"})}],["VENV_INSTALLING_PYPROJECT:",e=>{e.report({message:r.CreateEnv.Venv.installingPackages}),(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES,void 0,{environmentType:"venv",using:"pyproject.toml"})}],[s,e=>((0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_FAILED,void 0,{environmentType:"venv",reason:"noPip"}),s)],["CREATE_VENV.DISTUTILS_NOT_INSTALLED",e=>((0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_FAILED,void 0,{environmentType:"venv",reason:"noDistUtils"}),a)],[a,e=>((0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_FAILED,void 0,{environmentType:"venv",reason:"noVenv"}),a)],[c,e=>((0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES_FAILED,void 0,{environmentType:"venv",using:"requirements.txt"}),c)],[l,e=>((0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES_FAILED,void 0,{environmentType:"venv",using:"pyproject.toml"}),l)],[u,e=>((0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_FAILED,void 0,{environmentType:"venv",reason:"other"}),u)],["CREATE_VENV.VENV_ALREADY_EXISTS",e=>{(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_CREATED,void 0,{environmentType:"venv",reason:"existing"})}],["CREATE_VENV.PIP_INSTALLED_REQUIREMENTS",e=>{(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLED_PACKAGES,void 0,{environmentType:"venv",using:"requirements.txt"})}],["CREATE_VENV.PIP_INSTALLED_PYPROJECT",e=>{(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLED_PACKAGES,void 0,{environmentType:"venv",using:"pyproject.toml"})}],["CREATE_VENV.UPGRADED_PIP",e=>{(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLED_PACKAGES,void 0,{environmentType:"venv",using:"pipUpgrade"})}],[p,e=>((0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES_FAILED,void 0,{environmentType:"venv",using:"pipUpgrade"}),p)],["CREATE_VENV.DOWNLOADING_PIP",e=>{e.report({message:r.CreateEnv.Venv.downloadingPip}),(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES,void 0,{environmentType:"venv",using:"pipDownload"})}],[v,e=>((0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES_FAILED,void 0,{environmentType:"venv",using:"pipDownload"}),v)],["CREATE_VENV.INSTALLING_PIP",e=>{e.report({message:r.CreateEnv.Venv.installingPip}),(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES,void 0,{environmentType:"venv",using:"pipInstall"})}],[f,e=>((0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES_FAILED,void 0,{environmentType:"venv",using:"pipInstall"}),f)],["CREATE_MICROVENV.CREATING_MICROVENV",e=>{e.report({message:r.CreateEnv.Venv.creatingMicrovenv}),(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_CREATING,void 0,{environmentType:"microvenv",pythonVersion:void 0})}],[d,e=>((0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_FAILED,void 0,{environmentType:"microvenv",reason:"other"}),d)],[h,e=>((0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_FAILED,void 0,{environmentType:"microvenv",reason:"other"}),h)],["CREATE_MICROVENV.CREATED_MICROVENV",e=>{(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_CREATED,void 0,{environmentType:"microvenv",reason:"created"})}],["CREATE_VENV.UPGRADING_PIP",e=>{e.report({message:r.CreateEnv.Venv.upgradingPip}),(0,i.sendTelemetryEvent)(o.EventName.ENVIRONMENT_INSTALLING_PACKAGES,void 0,{environmentType:"venv",using:"pipUpgrade"})}]]),this.lastError=void 0}getLastError(){return this.lastError}process(e){const t=Array.from(this.reportActions.keys());for(const n of t)if(e.includes(n)&&!this.processed.has(n)){const e=this.reportActions.get(n);if(e){const t=e(this.progress);t&&(this.lastError=t)}this.processed.add(n)}}}},1521:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.switchSelectedPython=void 0;const s=o(n(16928)),a=n(7855),c=n(34467),l=n(46225),u=n(61905);t.switchSelectedPython=async function(e,t,n){var r;let i;try{const o=(0,a.createDeferred)(),p=null===(r=(0,c.getExtension)(l.PVSC_EXTENSION_ID))||void 0===r?void 0:r.exports;i=p.environments.onDidChangeActiveEnvironmentPath((async t=>{s.normalize(t.path)===s.normalize(e)&&((0,u.traceInfo)(`Switched to interpreter ${n}: ${e}`),o.resolve())})),p.environments.updateActiveEnvironmentPath(e,t),(0,u.traceInfo)(`Switching interpreter ${n}: ${e}`),await o.promise}finally{null==i||i.dispose()}}},31026:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.pickExistingVenvAction=t.ExistingVenvAction=t.deleteEnvironment=t.pickPackagesToInstall=t.isPipInstallableToml=t.getPipRequirementsFiles=t.OPEN_REQUIREMENTS_BUTTON=void 0;const s=o(n(10009)),a=n(2543),c=o(n(16928)),l=n(54980),u=o(n(25943)),p=n(14152),d=n(85784),h=n(8841),f=n(61905),v=n(552),m=n(48112),g=n(76650),y=n(84491);t.OPEN_REQUIREMENTS_BUTTON={iconPath:new l.ThemeIcon("go-to-file"),tooltip:p.CreateEnv.Venv.openRequirementsFile};const b="**/{.venv*,.git,.nox,.tox,.conda,site-packages,__pypackages__}/**";async function _(e,t){return(0,a.flatten)(await Promise.all([(0,h.findFiles)(new l.RelativePattern(e,"**/*requirement*.txt"),b,void 0,t),(0,h.findFiles)(new l.RelativePattern(e,"**/requirements/*.txt"),b,void 0,t)])).map((e=>e.fsPath))}function E(e){try{return s.parse(e)}catch(e){(0,f.traceError)("Failed to parse `pyproject.toml`:",e)}return{}}function S(e){return void 0!==e["build-system"]}function w(e){return void 0!==e.project}var P;t.getPipRequirementsFiles=_,t.isPipInstallableToml=function(e){const t=E(e);return S(t)&&w(t)},t.pickPackagesToInstall=async function(e,n){const r=c.join(e.uri.fsPath,"pyproject.toml"),i=[],o=new d.MultiStepNode(void 0,(async e=>{(0,f.traceVerbose)(`Looking for toml pyproject.toml with optional dependencies at: ${r}`);let t=[],o=!1,s=!1;if(await u.pathExists(r)){const e=E(await u.readFile(r,"utf-8"));t=function(e){const t=[];if(e.project&&e.project["optional-dependencies"]){const n=e.project["optional-dependencies"];for(const e of Object.keys(n))t.push(e)}return t}(e),o=S(e),s=w(e),s||(0,f.traceVerbose)("Create env: Found toml without project. So we will not use editable install."),o||(0,f.traceVerbose)("Create env: Found toml without build system. So we will not use editable install."),0===t.length&&(0,f.traceVerbose)("Create env: Found toml without optional dependencies.")}else if(e===d.MultiStepAction.Back)return d.MultiStepAction.Back;if(o&&s)if(t.length>0){(0,f.traceVerbose)("Create Env: Found toml with optional dependencies.");try{const e=await async function(e,t){const n=e.map((e=>({label:e}))),r=await(0,d.showQuickPickWithBack)(n,{placeHolder:p.CreateEnv.Venv.tomlExtrasQuickPickTitle,canPickMany:!0,ignoreFocusOut:!0},t);if(r&&(0,a.isArray)(r))return r.map((e=>e.label))}(t,n);if(!e)return d.MultiStepAction.Cancel;e.length>0&&e.forEach((e=>{i.push({installType:"toml",installItem:e,source:r})})),i.push({installType:"toml",source:r})}catch(e){if(e===d.MultiStepAction.Back||e===d.MultiStepAction.Cancel)return e;throw e}}else{if(e===d.MultiStepAction.Back)return d.MultiStepAction.Back;i.push({installType:"toml",source:r})}else if(e===d.MultiStepAction.Back)return d.MultiStepAction.Back;return d.MultiStepAction.Continue}),void 0),s=new d.MultiStepNode(o,(async r=>{(0,f.traceVerbose)("Looking for pip requirements.");const o=await _(e,n);if(o&&o.length>0){(0,f.traceVerbose)("Found pip requirements.");try{const r=await async function(e,n,r){const i=e.map((e=>c.relative(n,e))).sort(((e,t)=>{const n=e.split(/[\\\/]/).length,r=t.split(/[\\\/]/).length;return n===r?e.length===t.length?e.localeCompare(t):e.length-t.length:n-r})).map((e=>({label:e,buttons:[t.OPEN_REQUIREMENTS_BUTTON]}))),o=await(0,d.showQuickPickWithBack)(i,{placeHolder:p.CreateEnv.Venv.requirementsQuickPickTitle,ignoreFocusOut:!0,canPickMany:!0},r,(async e=>{e.item.label&&await(0,d.showTextDocument)(l.Uri.file(c.join(n,e.item.label)))}));if(o&&(0,a.isArray)(o))return o.map((e=>e.label))}(o,e.uri.fsPath,n),s=null==r?void 0:r.map((t=>c.join(e.uri.fsPath,t)));if(!s)return d.MultiStepAction.Cancel;s.forEach((e=>{i.push({installType:"requirements",installItem:e})}))}catch(e){if(e===d.MultiStepAction.Back||e===d.MultiStepAction.Cancel)return e;throw e}}else if(r===d.MultiStepAction.Back)return d.MultiStepAction.Back;return d.MultiStepAction.Continue}),void 0);o.next=s;const h=await d.MultiStepNode.run(o);if(h===d.MultiStepAction.Back||h===d.MultiStepAction.Cancel)throw h;return i},t.deleteEnvironment=async function(e,t){const n=(0,g.getVenvPath)(e);return(0,d.withProgress)({location:l.ProgressLocation.Notification,title:`${p.CreateEnv.Venv.deletingEnvironmentProgress} ([${p.Common.showLogs}](command:${v.Commands.ViewOutput})): ${n}`,cancellable:!1},(async()=>(0,m.isWindows)()?(0,y.deleteEnvironmentWindows)(e,t):(0,y.deleteEnvironmentNonWindows)(e)))},function(e){e[e.Recreate=0]="Recreate",e[e.UseExisting=1]="UseExisting",e[e.Create=2]="Create"}(P||(t.ExistingVenvAction=P={})),t.pickExistingVenvAction=async function(e){if(e){if(!await(0,g.hasVenv)(e))return P.Create;{const e=[{label:p.CreateEnv.Venv.useExisting,description:p.CreateEnv.Venv.useExistingDescription},{label:p.CreateEnv.Venv.recreate,description:p.CreateEnv.Venv.recreateDescription}],t=await(0,d.showQuickPickWithBack)(e,{placeHolder:p.CreateEnv.Venv.existingVenvQuickPickPlaceholder,ignoreFocusOut:!0},void 0);if((null==t?void 0:t.label)===p.CreateEnv.Venv.recreate)return P.Recreate;if((null==t?void 0:t.label)===p.CreateEnv.Venv.useExisting)return P.UseExisting}}throw d.MultiStepAction.Cancel}},86853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerPyProjectTomlFeatures=void 0;const r=n(93029),i=n(8841),o=n(31026);async function s(e){(0,o.isPipInstallableToml)(e.getText())?await(0,r.executeCommand)("setContext","pipInstallableToml",!0):await(0,r.executeCommand)("setContext","pipInstallableToml",!1)}t.registerPyProjectTomlFeatures=function(e){e.push((0,i.onDidOpenTextDocument)((async e=>{e.fileName.endsWith("pyproject.toml")&&await s(e)})),(0,i.onDidSaveTextDocument)((async e=>{e.fileName.endsWith("pyproject.toml")&&await s(e)}))),(0,i.getOpenTextDocuments)().filter((e=>e.fileName.endsWith("pyproject.toml")&&(0,o.isPipInstallableToml)(e.getText()))).length>0?(0,r.executeCommand)("setContext","pipInstallableToml",!0):(0,r.executeCommand)("setContext","pipInstallableToml",!1)}},30966:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerAllCreateEnvironmentFeatures=void 0;const r=n(50499),i=n(26624),o=n(59027),s=n(17992),a=n(86853);t.registerAllCreateEnvironmentFeatures=function(e,t,n,c,l){(0,r.registerCreateEnvironmentFeatures)(e,t,n,l),(0,i.registerCreateEnvironmentButtonFeatures)(e),(0,a.registerPyProjectTomlFeatures)(e),(0,s.registerInstalledPackagesDiagnosticsProvider)(e,c),(0,o.registerTriggerForPipInTerminal)(e)}},20467:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyPythonExecInfo=t.buildPythonExecInfo=void 0,t.buildPythonExecInfo=function(e,t,n){if(Array.isArray(e)){const r=e.slice(1);return t&&r.push(...t),{args:r,command:e[0],python:[...e],pythonExecutable:null!=n?n:e[e.length-1]}}return{command:e,args:t||[],python:[e],pythonExecutable:e}},t.copyPythonExecInfo=function(e,t){const n={command:e.command,args:[...e.args],python:[...e.python],pythonExecutable:e.pythonExecutable};return t&&n.args.push(...t),void 0===n.pythonExecutable&&(n.pythonExecutable=n.python[n.python.length-1]),n}},51172:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=t.initialize=t.shouldUseNativeLocator=void 0;const s=o(n(54980)),a=n(54980),c=n(2543),l=n(9923),u=n(48112),p=n(4898),d=n(78582),h=n(2097),f=n(32080),v=n(69396),m=n(74236),g=n(45882),y=n(63484),b=n(94733),_=n(17663),E=n(27919),S=n(41979),w=n(83406),P=n(24509),T=n(37012),C=n(33342),x=n(85243),I=n(30228),O=n(91428),R=n(95117),D=n(61905),k=n(14688),A=n(60161),N=n(13545),j=n(8841),M=n(14601),L=n(53933),F=n(36380),V=n(58136),U="PYTHON_ENV_INFO_CACHEv2";function W(){return"native"===(0,j.getConfiguration)("python").get("locator","js")}function H(e){const{initRoot:t,addRoot:n,removeRoot:r}=e,i=s.workspace.workspaceFolders;return i&&i.map((e=>e.uri)).forEach(t),s.workspace.onDidChangeWorkspaceFolders((e=>{for(const t of e.removed)r(t.uri);for(const t of e.added)n(t.uri)}))}t.shouldUseNativeLocator=W,t.initialize=async function(e){if((0,v.initializeExternalDependencies)(e.legacyIOC.serviceContainer),(0,F.useEnvExtension)()){const t=await(0,V.createEnvExtApi)(e.disposables);return(0,T.registerNewDiscoveryForIOC)(e.legacyIOC.serviceManager,t),t}if(W()){const t=(0,M.getNativePythonFinder)(e.context),n=(0,L.createNativeEnvironmentsApi)(t);return e.disposables.push(n),(0,T.registerNewDiscoveryForIOC)(e.legacyIOC.serviceManager,n),n}const t=await(0,I.createPythonEnvironments)((()=>async function(e){const t=new m.ExtensionLocators(function(e){const t=[];t.push(new E.PyenvLocator,new y.CondaEnvironmentLocator,new k.ActiveStateLocator,new b.GlobalVirtualEnvironmentLocator,new g.CustomVirtualEnvironmentLocator),(0,u.getOSType)()===u.OSType.Windows?t.push(new S.WindowsRegistryLocator,new w.MicrosoftStoreLocator,new h.WindowsPathEnvVarLocator):t.push(new _.PosixKnownPathsLocator);const n=t.filter((e=>void 0!==e.dispose));return e.disposables.push(...n),t}(e),function(e){const t=new m.WorkspaceLocators(H,[e=>[new f.WorkspaceVirtualEnvironmentLocator(e.fsPath),new C.PoetryLocator(e.fsPath),new x.HatchLocator(e.fsPath),new N.PixiLocator(e.fsPath),new A.CustomWorkspaceLocator(e.fsPath)]]);return e.disposables.push(t),t}(e)),n=(0,P.getEnvironmentInfoService)(e.disposables),r=new p.PythonEnvsReducer(t),i=new d.PythonEnvsResolver(r,n),o=new R.EnvsCollectionService(await async function(e){const t=(0,l.getGlobalStorage)(e.context,U,[]);return await(0,O.createCollectionCache)({get:()=>function(e){return e.get().map((e=>(e.searchLocation&&("string"==typeof e.searchLocation?e.searchLocation=a.Uri.parse(e.searchLocation):"scheme"in e.searchLocation&&"path"in e.searchLocation?e.searchLocation=a.Uri.parse(`${e.searchLocation.scheme}://${e.searchLocation.path}`):(0,D.traceError)("Unexpected search location",JSON.stringify(e.searchLocation))),e)))}(t),store:async e=>function(e,t){return e.set((0,c.cloneDeep)(t).map((e=>(e.searchLocation&&(e.searchLocation=e.searchLocation.toString()),e)))),Promise.resolve()}(t,e)})}(e),i,W());return o}(e)));return(0,T.registerNewDiscoveryForIOC)(e.legacyIOC.serviceManager,t),t},t.activate=async function(e,t){const n=s.workspace.workspaceFolders;return(0,l.getGlobalStorage)(t.context,U,[]).get().length>0?null==n||n.forEach((async n=>{const r=(0,l.getGlobalStorage)(t.context,`PYTHON_WAS_DISCOVERY_TRIGGERED_${(0,v.normCasePath)(n.uri.fsPath)}`,!1);r.get()||(e.triggerRefresh({searchLocations:{roots:[n.uri],doNotIncludeNonRooted:!0}}).ignoreErrors(),await r.set(!0))})):(e.triggerRefresh().ignoreErrors(),null==n||n.forEach((async e=>{const n=(0,l.getGlobalStorage)(t.context,`PYTHON_WAS_DISCOVERY_TRIGGERED_${(0,v.normCasePath)(e.uri.fsPath)}`,!1);await n.set(!0)}))),{fullyReady:Promise.resolve()}}},86157:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExecutablePath=void 0;const r=n(13931),i=n(61905),o=n(20467);t.getExecutablePath=async function(e,t){try{const[n,i]=(0,r.getExecutable)(),s=(0,o.copyPythonExecInfo)(e,n),a=[s.command,...s.args].reduce(((e,t)=>e?`${e} ${t.toCommandArgumentForPythonExt()}`:`${t.toCommandArgumentForPythonExt()}`),""),c=i((await t(a,{timeout:15e3})).stdout.trim());if(""===c)throw new Error(`${a} resulted in empty stdout`);return c}catch(e){return void(0,i.traceError)(e)}}},25297:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvironmentTypeName=t.ModuleInstallerType=t.virtualEnvTypes=t.workspaceVirtualEnvTypes=t.EnvironmentType=void 0,function(e){e.Unknown="Unknown",e.Conda="Conda",e.VirtualEnv="VirtualEnv",e.Pipenv="PipEnv",e.Pyenv="Pyenv",e.Venv="Venv",e.MicrosoftStore="MicrosoftStore",e.Poetry="Poetry",e.Hatch="Hatch",e.Pixi="Pixi",e.VirtualEnvWrapper="VirtualEnvWrapper",e.ActiveState="ActiveState",e.Global="Global",e.System="System"}(n||(t.EnvironmentType=n={})),t.workspaceVirtualEnvTypes=[n.Poetry,n.Pipenv,n.Pixi],t.virtualEnvTypes=[...t.workspaceVirtualEnvTypes,n.Hatch,n.Venv,n.VirtualEnvWrapper,n.Conda,n.VirtualEnv],function(e){e.Unknown="Unknown",e.Conda="Conda",e.Pip="Pip",e.Poetry="Poetry",e.Pipenv="Pipenv",e.Pixi="Pixi"}(r||(t.ModuleInstallerType=r={})),t.getEnvironmentTypeName=function(e){switch(e){case n.Conda:return"conda";case n.Pipenv:return"Pipenv";case n.Pyenv:return"pyenv";case n.Venv:return"venv";case n.VirtualEnv:return"virtualenv";case n.MicrosoftStore:return"Microsoft Store";case n.Poetry:return"Poetry";case n.Hatch:return"Hatch";case n.Pixi:return"pixi";case n.VirtualEnvWrapper:return"virtualenvwrapper";case n.ActiveState:return"ActiveState";default:return""}}},43803:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterpreterInfo=void 0;const r=n(99589),i=n(8370),o=n(74399),s=n(48112),a=n(20467);t.getInterpreterInfo=async function(e,t,n){const[c,l]=(0,i.interpreterInfo)(),u=(0,a.copyPythonExecInfo)(e,c),p=[u.command,...u.args],d=p.reduce(((e,t)=>e?`${e} "${t}"`:`"${(0,o.replaceAll)(t,"\\","\\\\")}"`),""),h=await t(d,{timeout:15e3});h.stderr&&n&&n.error(`Failed to parse interpreter information for ${p} stderr: ${h.stderr}`);const f=l(h.stdout);if(n&&n.verbose(`Found interpreter for ${p}`),f)return function(e,t){let n=`${t.versionInfo.slice(0,3).join(".")}`;if(void 0!==t.versionInfo[3]&&["alpha","beta","candidate"].includes(t.versionInfo[3])&&(n=`${n}-${t.versionInfo[3]}`,void 0!==t.versionInfo[4])){let e=-1;try{e=parseInt(`${t.versionInfo[4]}`,10)}catch(t){e=-1}n=e>=0?`${n}${e}`:n}return{architecture:t.is64Bit?s.Architecture.x64:s.Architecture.x86,path:e,version:new r.SemVer(n),sysVersion:t.sysVersion,sysPrefix:t.sysPrefix}}(e.pythonExecutable,f)}},53763:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStableVersion=void 0,t.isStableVersion=function(e){return 0===e.prerelease.length&&(0===e.build.length||1===e.build.length&&"final"===e.build[0])}},37012:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.registerNewDiscoveryForIOC=t.convertEnvInfoToPythonEnvironment=void 0;const a=n(25891),c=n(2543),l=s(n(54980)),u=n(29104),p=n(29413),d=n(15721),h=n(80292),f=n(69396),v=n(25297),m=n(71067),g=n(7855),y=n(83597),b=n(95885),_=n(66830),E=n(58038),S=n(61905),w=new Map(Object.entries({[d.PythonEnvKind.OtherGlobal]:v.EnvironmentType.Global,[d.PythonEnvKind.System]:v.EnvironmentType.System,[d.PythonEnvKind.MicrosoftStore]:v.EnvironmentType.MicrosoftStore,[d.PythonEnvKind.Pyenv]:v.EnvironmentType.Pyenv,[d.PythonEnvKind.Conda]:v.EnvironmentType.Conda,[d.PythonEnvKind.VirtualEnv]:v.EnvironmentType.VirtualEnv,[d.PythonEnvKind.Pipenv]:v.EnvironmentType.Pipenv,[d.PythonEnvKind.Poetry]:v.EnvironmentType.Poetry,[d.PythonEnvKind.Hatch]:v.EnvironmentType.Hatch,[d.PythonEnvKind.Pixi]:v.EnvironmentType.Pixi,[d.PythonEnvKind.Venv]:v.EnvironmentType.Venv,[d.PythonEnvKind.VirtualEnvWrapper]:v.EnvironmentType.VirtualEnvWrapper,[d.PythonEnvKind.ActiveState]:v.EnvironmentType.ActiveState}));function P(e){const{name:t,location:n,executable:r,arch:i,kind:o,version:s,distro:a,id:c}=e,{filename:l,sysPrefix:u}=r,p={id:c,sysPrefix:u,envType:v.EnvironmentType.Unknown,envName:t,envPath:n,path:l,architecture:i},d=w.get(o);if(void 0!==d&&(p.envType=d),void 0!==s){const{release:e,sysVersion:t}=s;p.sysVersion=void 0===e?"":t;const n=(0,m.toSemverLikeVersion)(s);p.version=n}return void 0!==a&&""!==a.org&&(p.companyDisplayName=a.org),p.displayName=e.display,p.detailedDisplayName=e.detailedDisplayName,p.type=e.type,p}t.convertEnvInfoToPythonEnvironment=function(e){return P(e)};let T=class{constructor(e){this.api=e,this.changed=new l.EventEmitter,this.api.onChanged((e=>{this.changed.fire({type:e.type,new:e.new?P(e.new):void 0,old:e.old?P(e.old):void 0,resource:e.searchLocation})}))}triggerRefresh(e,t){return this.api.triggerRefresh(e,t)}getRefreshPromise(e){return this.api.getRefreshPromise(e)}get onProgress(){return this.api.onProgress}get onChanged(){return this.changed.event}onDidCreate(e,t){const n=e?l.workspace.getWorkspaceFolder(e):void 0;return this.api.onChanged((e=>{n&&e.searchLocation&&((0,S.traceVerbose)(`Received event ${JSON.stringify(e)} file change event`),e.type===u.FileChangeType.Created&&(0,f.isParentPath)(e.searchLocation.fsPath,n.uri.fsPath)&&t())}))}async getInterpreterInformation(e){const t=await this.api.resolveEnv(e);return t?P(t):void 0}async isMacDefaultPythonPath(e){return(0,h.isMacDefaultPythonPath)(e)}async getInterpreterDetails(e){try{const t=await this.api.resolveEnv(e);if(!t)return;return P(t)}catch(t){return void(0,S.traceError)(`Failed to resolve interpreter: ${e}`,t)}}async isCondaEnvironment(e){return(0,b.isCondaEnvironment)(e)}async getCondaEnvironment(e){if(!await(0,b.isCondaEnvironment)(e))return;const t=await this.api.resolveEnv(e);return t?{name:t.name,path:t.location}:void 0}async isMicrosoftStoreInterpreter(e){return(0,_.isMicrosoftStoreEnvironment)(e)}async hasInterpreters(e=async()=>!0){const t=(0,g.createDeferred)();return this.api.onChanged((async n=>{n.new&&await e(P(n.new))&&t.resolve()})),(await(0,y.asyncFilter)(this.api.getEnvs(),(t=>e(P(t))))).length>0||(await Promise.race([t.promise,this.api.getRefreshPromise()]),(await(0,y.asyncFilter)(this.api.getEnvs(),(t=>e(P(t))))).length>0)}getInterpreters(e,t){const n={};let r,i=[];void 0!==e&&(r=l.workspace.getWorkspaceFolder(e),r&&(i=[r.uri])),!r&&l.workspace.workspaceFolders&&l.workspace.workspaceFolders.length>0&&(!e||"untitled"===e.scheme)&&(i=l.workspace.workspaceFolders.map((e=>e.uri))),n.searchLocations={roots:i};let o=this.api.getEnvs(n);return t&&(o=o.filter((e=>(0,c.intersection)(t,e.source).length>0))),o.map(P)}async getWorkspaceVirtualEnvInterpreters(e,t){const n=l.workspace.getWorkspaceFolder(e);if(!n)return[];const r={searchLocations:{roots:[n.uri],doNotIncludeNonRooted:!0}};return(null==t?void 0:t.ignoreCache)&&await this.api.triggerRefresh(r),await this.api.getRefreshPromise(),this.api.getEnvs(r).map(P)}};T=o([(0,a.injectable)()],T),t.registerNewDiscoveryForIOC=function(e,t){e.addSingleton(p.ICondaService,E.CondaService),e.addSingletonInstance(p.IComponentAdapter,new T(t))}},53933:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createNativeEnvironmentsApi=void 0;const a=s(n(16928)),c=n(54980),l=n(15721),u=n(18162),p=n(14601),d=n(7855),h=n(48112),f=n(71067),v=n(68989),m=n(61905),g=n(51080),y=n(29104),b=n(23172),_=n(95885),E=n(60852),S=n(36500),w=n(8841);function P(e,t){var n;return e.kind===b.NativePythonEnvironmentKind.Conda?null!==(n=e.prefix)&&void 0!==n?n:a.dirname(t):e.executable?e.executable:e.prefix?e.prefix:t}function T(e){return void 0!==e.prefix||void 0!==e.executable||((0,m.traceError)(`Invalid environment [native]: ${JSON.stringify(e)}`),!1)}function C(e){switch(e){case l.PythonEnvKind.Poetry:case l.PythonEnvKind.Pyenv:case l.PythonEnvKind.VirtualEnv:case l.PythonEnvKind.Venv:case l.PythonEnvKind.VirtualEnvWrapper:case l.PythonEnvKind.OtherVirtual:case l.PythonEnvKind.Pipenv:case l.PythonEnvKind.ActiveState:case l.PythonEnvKind.Hatch:case l.PythonEnvKind.Pixi:return l.PythonEnvType.Virtual;case l.PythonEnvKind.Conda:return l.PythonEnvType.Conda;case l.PythonEnvKind.System:case l.PythonEnvKind.Unknown:case l.PythonEnvKind.OtherGlobal:case l.PythonEnvKind.Custom:case l.PythonEnvKind.MicrosoftStore:default:return}}function x(e,t){return t.some((t=>!!e&&a.normalize(e).startsWith(a.normalize(t))))}function I(e,t){var n,r,i,o;if(!T(e))return;const s=(0,b.categoryToKind)(e.kind),c=function(e){switch(e){case"x86":return h.Architecture.x86;case"x64":return h.Architecture.x64;default:return h.Architecture.Unknown}}(e.arch),u=(0,f.parseVersion)(null!==(n=e.version)&&void 0!==n?n:""),p=function(e,t,n){var r;if(e.name)return e.name;const i=C(t);if(e.prefix&&i===l.PythonEnvType.Virtual)return a.basename(e.prefix);if(e.prefix&&i===l.PythonEnvType.Conda){if("base"===e.name)return"base";const t=(null!==(r=(0,w.getWorkspaceFolders)())&&void 0!==r?r:[]).map((e=>e.uri.fsPath));if(x(e.prefix,t))return(0,m.traceInfo)(`Conda env is --prefix environment: ${e.prefix}`),"";if(n.length>0&&x(e.prefix,n))return(0,m.traceInfo)(`Conda env is --named environment: ${e.prefix}`),a.basename(e.prefix)}return""}(e,s,t),d=e.version?function(e,t,n,r){const i=function(e){return`${e.major}.${e.minor}.${e.micro}`.trim()}(e),o=function(e){switch(e){case l.PythonEnvKind.Poetry:return"poetry";case l.PythonEnvKind.Pyenv:return"pyenv";case l.PythonEnvKind.VirtualEnv:case l.PythonEnvKind.Venv:case l.PythonEnvKind.VirtualEnvWrapper:case l.PythonEnvKind.OtherVirtual:return"venv";case l.PythonEnvKind.Pipenv:return"pipenv";case l.PythonEnvKind.Conda:return"conda";case l.PythonEnvKind.ActiveState:return"active-state";case l.PythonEnvKind.MicrosoftStore:return"Microsoft Store";case l.PythonEnvKind.Hatch:return"hatch";case l.PythonEnvKind.Pixi:return"pixi";case l.PythonEnvKind.System:case l.PythonEnvKind.Unknown:case l.PythonEnvKind.OtherGlobal:case l.PythonEnvKind.Custom:default:return}}(t);return n===h.Architecture.x86?o?r?`Python ${i} 32-bit (${r})`:`Python ${i} 32-bit (${o})`:r?`Python ${i} 32-bit (${r})`:`Python ${i} 32-bit`:o?r?`Python ${i} (${r})`:`Python ${i} (${o})`:r?`Python ${i} (${r})`:`Python ${i}`}(u,s,c,p):null!==(r=e.displayName)&&void 0!==r?r:"Python",v=null!==(i=e.executable)&&void 0!==i?i:(g=e.prefix)?"win32"===process.platform?a.join(g,"python.exe"):a.join(g,"python"):"win32"===process.platform?"python.exe":"python";var g;return{name:p,location:P(e,v),kind:s,id:v,executable:{filename:v,sysPrefix:null!==(o=e.prefix)&&void 0!==o?o:"",ctime:-1,mtime:-1},version:{sysVersion:e.version,major:u.major,minor:u.minor,micro:u.micro},arch:c,distro:{org:""},source:[],detailedDisplayName:d,display:d,type:C(s)}}class O{constructor(e){this.finder=e,this._envs=[],this._disposables=[],this._condaEnvDirs=[],this._onProgress=new c.EventEmitter,this._onChanged=new c.EventEmitter,this.onProgress=this._onProgress.event,this.onChanged=this._onChanged.event,this.refreshState=u.ProgressReportStage.idle,this._disposables.push(this._onProgress,this._onChanged),this.initializeWatcher()}dispose(){this._disposables.forEach((e=>e.dispose()))}getRefreshPromise(e){var t;return null===(t=this._refreshPromise)||void 0===t?void 0:t.promise}triggerRefresh(e,t){var n,r,i;const o=new g.StopWatch;return(0,m.traceLog)("Native locator: Refresh started"),this.refreshState===u.ProgressReportStage.discoveryStarted&&(null===(n=this._refreshPromise)||void 0===n?void 0:n.promise)?null===(r=this._refreshPromise)||void 0===r?void 0:r.promise:(this.refreshState=u.ProgressReportStage.discoveryStarted,this._onProgress.fire({stage:this.refreshState}),this._refreshPromise=(0,d.createDeferred)(),setImmediate((async()=>{var e,t;try{const t=this._envs.map((e=>e.executable.filename)),n=[];for await(const e of this.finder.refresh()){const t=this.processNative(e);t&&n.push(t)}t.filter((e=>!n.includes(e))).forEach((e=>this.removeEnv(e))),null===(e=this._refreshPromise)||void 0===e||e.resolve()}catch(e){null===(t=this._refreshPromise)||void 0===t||t.reject(e)}finally{(0,m.traceLog)(`Native locator: Refresh finished in ${o.elapsedTime} ms`),this.refreshState=u.ProgressReportStage.discoveryFinished,this._refreshPromise=void 0,this._onProgress.fire({stage:this.refreshState})}})),null===(i=this._refreshPromise)||void 0===i?void 0:i.promise)}processNative(e){if((0,p.isNativeEnvInfo)(e))return this.processEnv(e);this.processEnvManager(e)}processEnv(e){var t,n;if(T(e))try{const r=e.version?(0,f.parseVersion)(e.version):void 0;if((0,b.categoryToKind)(e.kind)===l.PythonEnvKind.Conda&&!e.executable)return null===(t=this.addEnv(e))||void 0===t?void 0:t.executable.filename;if(e.executable&&(!r||r.major<0||r.minor<0||r.micro<0))return this.finder.resolve(e.executable).then((e=>{e&&this.addEnv(e)})).ignoreErrors(),e.executable;if(e.executable&&r&&r.major>=0&&r.minor>=0&&r.micro>=0)return null===(n=this.addEnv(e))||void 0===n?void 0:n.executable.filename;(0,m.traceError)(`Failed to process environment: ${JSON.stringify(e)}`)}catch(e){(0,m.traceError)(`Failed to process environment: ${e}`)}}processEnvManager(e){switch(e.tool.toLowerCase()){case"conda":{(0,m.traceLog)(`Conda environment manager found at: ${e.executable}`);const t=(0,_.getCondaPathSetting)();this.condaPathAlreadySet?(0,m.traceInfo)(`Conda set to: ${this.condaPathAlreadySet}`):""===t||void 0===t?function(e){const t=(0,h.getPathEnvVariable)().map((e=>a.normalize(e).toLowerCase())),n=a.normalize(e).toLowerCase();return t.some((e=>n.includes(e)))}(e.executable)?((0,_.setCondaBinary)(e.executable),this.condaPathAlreadySet=e.executable,(0,m.traceInfo)(`Using conda: ${e.executable}`)):((0,m.traceInfo)(`Conda not found on PATH, skipping: ${e.executable}`),(0,m.traceInfo)("You can set the path to conda using the setting: `python.condaPath` if you want to use a different conda binary")):((0,m.traceInfo)(`Using conda from setting: ${t}`),this.condaPathAlreadySet=t)}break;case"pyenv":(0,m.traceLog)(`Pyenv environment manager found at: ${e.executable}`),(0,E.setPyEnvBinary)(e.executable);break;case"poetry":(0,m.traceLog)(`Poetry environment manager found at: ${e.executable}`);break;default:(0,m.traceWarn)(`Unknown environment manager: ${e.tool}`)}}getEnvs(e){return this._envs}addEnv(e,t){const n=I(e,this._condaEnvDirs);if(n){const e=this._envs.find((e=>e.executable.filename===n.executable.filename));e?(this._envs=this._envs.filter((e=>e.executable.filename!==n.executable.filename)),this._envs.push(n),function(e,t){return e.name!==t.name||e.executable.filename!==t.executable.filename||e.version.major!==t.version.major||e.version.minor!==t.version.minor||e.version.micro!==t.version.micro||e.location!==t.location||e.kind!==t.kind||e.arch!==t.arch}(e,n)&&this._onChanged.fire({type:y.FileChangeType.Changed,old:e,new:n,searchLocation:t})):(this._envs.push(n),this._onChanged.fire({type:y.FileChangeType.Created,new:n,searchLocation:t}))}return n}removeEnv(e){if("string"==typeof e){const t=this._envs.find((t=>t.executable.filename===e));return this._envs=this._envs.filter((t=>t.executable.filename!==e)),void this._onChanged.fire({type:y.FileChangeType.Deleted,old:t})}this._envs=this._envs.filter((t=>t.executable.filename!==e.executable.filename)),this._onChanged.fire({type:y.FileChangeType.Deleted,old:e})}async resolveEnv(e){var t;if(void 0!==e)try{const n=await this.finder.resolve(e);return n?(n.kind===b.NativePythonEnvironmentKind.Conda&&0===this._condaEnvDirs.length&&(this._condaEnvDirs=null!==(t=await(0,_.getCondaEnvDirs)())&&void 0!==t?t:[]),this.addEnv(n)):void 0}catch(e){return}}initializeWatcher(){var e;const t=(0,S.createPythonWatcher)();this._disposables.push(t.onDidGlobalEnvChanged((e=>this.pathEventHandler(e))),t.onDidWorkspaceEnvChanged((async e=>{await this.workspaceEventHandler(e)})),(0,w.onDidChangeWorkspaceFolders)((e=>{e.removed.forEach((e=>t.unwatchWorkspace(e))),e.added.forEach((e=>t.watchWorkspace(e)))})),t),null===(e=(0,w.getWorkspaceFolders)())||void 0===e||e.forEach((e=>t.watchWorkspace(e)));const n=(0,h.getUserHomeDir)();n&&t.watchPath(c.Uri.file(a.join(n,".conda","environments.txt")))}async pathEventHandler(e){if((e.type===y.FileChangeType.Created||e.type===y.FileChangeType.Changed)&&e.uri.fsPath.endsWith("environment.txt")){const e=this._envs.filter((e=>e.kind===l.PythonEnvKind.Conda)).map((e=>e.executable.filename));for await(const e of this.finder.refresh(b.NativePythonEnvironmentKind.Conda))this.processNative(e);const t=this._envs.filter((e=>e.kind===l.PythonEnvKind.Conda)).map((e=>e.executable.filename));e.filter((e=>!t.includes(e))).forEach((e=>this.removeEnv(e)))}}async workspaceEventHandler(e){if(e.type===y.FileChangeType.Created||e.type===y.FileChangeType.Changed){const t=await this.finder.resolve(e.executable);t&&this.addEnv(t,e.workspaceFolder.uri)}else this.removeEnv(e.executable)}}o([(0,v.cache)(3e4,!0)],O.prototype,"resolveEnv",null),t.createNativeEnvironmentsApi=function(e){const t=new O(e);return t.triggerRefresh().ignoreErrors(),t}},91059:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNativeRepl=t.NativeRepl=t.NATIVE_REPL_URI_MEMENTO=void 0;const r=n(54980),i=n(552),o=n(85784),s=n(8841),a=n(74264),c=n(85471),l=n(42836),u=n(53322),p=n(51535),d=n(15739),h=n(45573),f=n(56251),v=n(9923);let m;t.NATIVE_REPL_URI_MEMENTO="nativeReplUri";class g{constructor(){this.disposables=[],this.newReplSession=!0,this.watchNotebookClosed()}static async create(e){const t=new g;return t.interpreter=e,await t.setReplDirectory(),t.pythonServer=(0,a.createPythonServer)([e.path],t.cwd),t.setReplController(),t}dispose(){this.disposables.forEach((e=>e.dispose()))}watchNotebookClosed(){this.disposables.push((0,s.onDidCloseNotebookDocument)((async e=>{this.notebookDocument&&e.uri.toString()===this.notebookDocument.uri.toString()&&(this.notebookDocument=void 0,this.newReplSession=!0,await(0,v.updateWorkspaceStateValue)(t.NATIVE_REPL_URI_MEMENTO,void 0),this.pythonServer.dispose(),this.pythonServer=(0,a.createPythonServer)([this.interpreter.path],this.cwd),this.disposables.push(this.pythonServer),this.replController&&this.replController.dispose(),m=void 0)})))}async setReplDirectory(){const e=(0,s.getWorkspaceFolders)();if(e){const t=e.map((e=>({label:e.name,description:e.uri.fsPath})));if(0===t.length)this.cwd=process.cwd();else if(1===t.length)this.cwd=t[0].description;else{const e=await(0,o.showQuickPick)(t,{placeHolder:"Select current working directory for new REPL",matchOnDescription:!0,ignoreFocusOut:!0});this.cwd=null==e?void 0:e.description}}}setReplController(){return this.replController||(this.replController=(0,l.createReplController)(this.interpreter.path,this.disposables,this.cwd),this.replController.variableProvider=new d.VariablesProvider(new h.VariableRequester(this.pythonServer),(()=>this.notebookDocument),this.pythonServer.onCodeExecuted)),this.replController}async checkUserInputCompleteCode(e){let t,n=!1;if(e){const{document:n}=e;t=n.getText()}return t&&(n=await this.pythonServer.checkValidCommand(t)),n}async sendToNativeRepl(e,n=!0){var o;let s;if(!this.notebookDocument){const e=(0,v.getWorkspaceStateValue)(t.NATIVE_REPL_URI_MEMENTO);s=e?r.Uri.parse(e):void 0,s&&"Python REPL"===(0,f.getTabNameForUri)(s)||(await(0,v.updateWorkspaceStateValue)(t.NATIVE_REPL_URI_MEMENTO,void 0),s=void 0)}const a=await(0,c.openInteractiveREPL)(null!==(o=this.notebookDocument)&&void 0!==o?o:s,n);a&&(this.notebookDocument=a.notebookEditor.notebook,await(0,v.updateWorkspaceStateValue)(t.NATIVE_REPL_URI_MEMENTO,this.notebookDocument.uri.toString()),a.documentCreated&&await(0,c.selectNotebookKernel)(a.notebookEditor,this.replController.id,i.PVSC_EXTENSION_ID),e&&await(0,c.executeNotebookCell)(a.notebookEditor,e))}}t.NativeRepl=g,t.getNativeRepl=async function(e,t){return m||(m=await g.create(e),t.push(m)),m&&m.newReplSession&&((0,p.sendTelemetryEvent)(u.EventName.REPL,void 0,{replType:"Native"}),m.newReplSession=!1),m}},74264:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createPythonServer=void 0;const a=s(n(16928)),c=s(n(35317)),l=s(n(77123)),u=n(54980),p=n(84090),d=n(61905),h=n(51535),f=n(53322),v=a.join(p.EXTENSION_ROOT_DIR,"python_files","python_server.py");let m;class g{constructor(e,t){this.connection=e,this.pythonServer=t,this.disposables=[],this._onCodeExecuted=new u.EventEmitter,this.onCodeExecuted=this._onCodeExecuted.event,this.initialize(),this.input()}initialize(){this.disposables.push(this.connection.onNotification("log",(e=>{(0,d.traceLog)("Log:",e)}))),this.connection.listen()}input(){this.connection.onRequest("input",(async e=>{let t="Enter your input here: ";return e&&e.prompt&&(t=e.prompt),{userInput:await u.window.showInputBox({title:"Input Request",prompt:t,ignoreFocusOut:!0})}}))}async execute(e){const t=await this.executeCode(e);return(null==t?void 0:t.status)&&this._onCodeExecuted.fire(),t}executeSilently(e){return this.executeCode(e)}async executeCode(e){try{return await this.connection.sendRequest("execute",e)}catch(e){const t=e;(0,d.traceError)("Error getting response from REPL server:",t)}}interrupt(){this.pythonServer.kill("SIGINT")&&(0,d.traceLog)("Python REPL server interrupted")}async checkValidCommand(e){return"True"===(await this.connection.sendRequest("check_valid_command",e)).output?new Promise((e=>e(!0))):new Promise((e=>e(!1)))}dispose(){this.connection.sendNotification("exit"),this.disposables.forEach((e=>e.dispose())),this.connection.dispose(),m=void 0}}o([(0,h.captureTelemetry)(f.EventName.EXECUTION_CODE,{scope:"selection"},!1)],g.prototype,"execute",null),t.createPythonServer=function(e,t){if(m)return m;const n=c.spawn(e[0],[...e.slice(1),v],{cwd:t});n.stderr.on("data",(e=>{(0,d.traceError)(e.toString())})),n.on("exit",(e=>{(0,d.traceError)(`Python server exited with code ${e}`)})),n.on("error",(e=>{(0,d.traceError)(e)}));const r=l.createMessageConnection(new l.StreamMessageReader(n.stdout),new l.StreamMessageWriter(n.stdin));return m=new g(r,n),m}},85471:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeNotebookCell=t.selectNotebookKernel=t.openInteractiveREPL=void 0;const r=n(54980),i=n(56251),o=n(85784),s=n(8841),a=n(93029);t.openInteractiveREPL=async function(e,t=!0){let n=r.ViewColumn.Beside,a=!1;if(e instanceof r.Uri)e=await(0,s.openNotebookDocument)(e);else if(e){const t=(0,i.getExistingReplViewColumn)(e);n=null!=t?t:n,a=!0}else e||(e=await(0,s.openNotebookDocument)("jupyter-notebook"));const c=await(0,o.showNotebookDocument)(e,{viewColumn:n,asRepl:"Python REPL",preserveFocus:t});if(c&&c.notebook&&c.notebook.uri&&"Python REPL"===(0,i.getTabNameForUri)(c.notebook.uri))return{notebookEditor:c,documentCreated:!a}},t.selectNotebookKernel=async function(e,t,n){await(0,a.executeCommand)("notebook.selectKernel",{notebookEditor:e,id:t,extension:n})},t.executeNotebookCell=async function(e,t){var n;const{notebook:i,replOptions:o}=e,c=null!==(n=null==o?void 0:o.appendIndex)&&void 0!==n?n:i.cellCount;await async function(e,t,n){const i=new r.NotebookCellData(r.NotebookCellKind.Code,n,"python"),o=r.NotebookEdit.insertCells(t,[i]),a=new r.WorkspaceEdit;a.set(e.uri,[o]),await(0,s.applyEdit)(a)}(i,c,t),(0,a.executeCommand)("notebook.cell.execute",{ranges:[{start:c,end:c+1}],document:i.uri})}},57062:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerReplExecuteOnEnter=t.registerReplCommands=t.registerStartNativeReplCommand=void 0;const r=n(54980),i=n(552),o=n(98803),s=n(91059),a=n(56251),c=n(93029),l=n(51535),u=n(53322),p=n(6356);async function d(e,t,n,c){const l=await n.getActiveInterpreter(e);if(!l)return void r.commands.executeCommand(i.Commands.TriggerEnvironmentSelection,e).then(o.noop,o.noop);const u=await(0,s.getNativeRepl)(l,c),p=await(null==u?void 0:u.checkUserInputCompleteCode(r.window.activeTextEditor)),d=r.window.activeTextEditor;d&&(p&&!(0,a.isMultiLineText)(d)?await r.commands.executeCommand(t):((0,a.insertNewLineToREPLInput)(d),d&&""===d.document.lineAt(d.selection.active.line).text&&await r.commands.executeCommand(t)))}t.registerStartNativeReplCommand=async function(e,t){e.push((0,c.registerCommand)(i.Commands.Start_Native_REPL,(async n=>{(0,l.sendTelemetryEvent)(u.EventName.REPL,void 0,{replType:"Native"});const r=await(0,a.getActiveInterpreter)(n,t);if(r){const t=await(0,s.getNativeRepl)(r,e);await t.sendToNativeRepl(void 0,!1)}})))},t.registerReplCommands=async function(e,t,n,o){e.push(o.registerCommand(i.Commands.Exec_In_REPL,(async i=>{if(!(0,a.getSendToNativeREPLSetting)())return void await(0,a.executeInTerminal)();const o=await(0,a.getActiveInterpreter)(i,t);if(o){const t=await(0,s.getNativeRepl)(o,e),i=r.window.activeTextEditor;if(i){const e=await(0,a.getSelectedTextToExecute)(i);if(e){let r="";i&&i.document&&(r=i.document.getText());const o=await n.normalizeLines(e,p.ReplType.native,r);await t.sendToNativeRepl(o)}}}})))},t.registerReplExecuteOnEnter=async function(e,t,n){e.push(n.registerCommand(i.Commands.Exec_In_REPL_Enter,(async n=>{await d(n,"repl.execute",t,e)}))),e.push(n.registerCommand(i.Commands.Exec_In_IW_Enter,(async n=>{await d(n,"interactive.execute",t,e)})))}},42836:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createReplController=void 0;const s=o(n(54980)),a=n(74264);t.createReplController=function(e,t,n){const r=(0,a.createPythonServer)([e],n);t.push(r);const i=s.notebooks.createNotebookController("pythonREPL","jupyter-notebook","Python REPL");return i.supportedLanguages=["python"],i.description="Python REPL",i.interruptHandler=async()=>{r.interrupt()},i.executeHandler=async e=>{for(const t of e){const e=i.createNotebookCellExecution(t);e.start(Date.now());const n=await r.execute(t.document.getText());(null==n?void 0:n.output)&&e.replaceOutput([new s.NotebookCellOutput([s.NotebookCellOutputItem.text(n.output,"text/plain")])]),e.end(null==n?void 0:n.status)}},t.push(i),i}},56251:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPythonMinorVersion=t.getTabNameForUri=t.getExistingReplViewColumn=t.getActiveInterpreter=t.isMultiLineText=t.insertNewLineToREPLInput=t.getSendToNativeREPLSetting=t.getSelectedTextToExecute=t.executeInTerminal=void 0;const r=n(54980),i=n(552),o=n(98803),s=n(85784),a=n(8841),c=n(39031);async function l(e,t){const n=await t.getActiveInterpreter(e);if(n)return n;r.commands.executeCommand(i.Commands.TriggerEnvironmentSelection,e).then(o.noop,o.noop)}t.executeInTerminal=async function(){await r.commands.executeCommand(i.Commands.Exec_Selection_In_Terminal)},t.getSelectedTextToExecute=async function(e){const{selection:t}=e;let n;return n=t.isEmpty?e.document.lineAt(t.start.line).text:t.isSingleLine?(0,c.getSingleLineSelectionText)(e):(0,c.getMultiLineSelectionText)(e),n},t.getSendToNativeREPLSetting=function(){const e=(0,s.getActiveResource)();return(0,a.getConfiguration)("python",e).get("REPL.sendToNativeREPL",!1)},t.insertNewLineToREPLInput=function(e){if(e){const t=e.selection.active,n=t.with(t.line,e.document.lineAt(t.line).text.length);e.selection=new r.Selection(n,n),e.edit((e=>{e.insert(n,"\n")}))}},t.isMultiLineText=function(e){var t,n;return(null!==(n=null===(t=null==e?void 0:e.document)||void 0===t?void 0:t.lineCount)&&void 0!==n?n:0)>1},t.getActiveInterpreter=l,t.getExistingReplViewColumn=function(e){const t=e.uri.toString(),n=r.window.tabGroups;for(const e of n.all)for(const n of e.tabs)if("Python REPL"===n.label){const e=n.input.uri.toString();if(n.input&&e===t)return n.group.viewColumn}},t.getTabNameForUri=function(e){const t=r.window.tabGroups.all;for(const n of t)for(const t of n.tabs)if(t.input instanceof r.TabInputNotebook&&t.input.uri.toString()===e.toString())return t.label},t.getPythonMinorVersion=async function(e,t){var n;if(e){const r=await l(e,t);return null===(n=null==r?void 0:r.version)||void 0===n?void 0:n.minor}}},6356:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ReplType=void 0,function(e){e.terminal="terminal",e.native="native"}(n||(t.ReplType=n={}))},45573:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VariableRequester=void 0;const a=s(n(16928)),c=o(n(25943)),l=n(84090),u=a.default.join(l.EXTENSION_ROOT_DIR,"python_files","get_variable_info.py");class p{constructor(e){this.pythonServer=e}async getAllVariableDescriptions(e,t,n){const r=(await async function(){if(p.scriptContents)return p.scriptContents;const e=await c.readFile(u,"utf-8");return p.scriptContents=e,p.scriptContents}()).split(/(?:\r\n|\n)/);if(e){const n=`import json;return json.dumps(getAllChildrenDescriptions('${e.root}', ${JSON.stringify(e.propertyChain)}, ${t}))`;r.push(n)}else r.push("import json;return json.dumps(getVariableDescriptions())");if(n.isCancellationRequested)return[];const i=function(e){return`def __VSCODE_run_script():\n${e.map((e=>`    ${e}`)).join("\n")}\nprint(__VSCODE_run_script())\ndel __VSCODE_run_script`}(r),o=await this.pythonServer.executeSilently(i);return(null==o?void 0:o.output)&&!n.isCancellationRequested?JSON.parse(o.output):[]}}t.VariableRequester=p},44630:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableResultCache=void 0,t.VariableResultCache=class{constructor(){this.cache=new Map,this.executionCount=0}getResults(e,t){return this.executionCount!==e&&(this.cache.clear(),this.executionCount=e),this.cache.get(t)}setResults(e,t,n){if(this.executionCount<e)this.cache.clear(),this.executionCount=e;else if(this.executionCount>e)return;this.cache.set(t,n)}}},15739:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariablesProvider=void 0;const r=n(54980),i=n(44630),o=n(8841);function s(e,t){let n=e;for(const e of t)n+="string"==typeof e?`.${e}`:`[${e}]`;return n}function a(e){return(0,o.getConfiguration)("python",e).get("REPL.provideVariables")}t.VariablesProvider=class{constructor(e,t,n){this.variableRequester=e,this.getNotebookDocument=t,this.variableResultCache=new i.VariableResultCache,this._onDidChangeVariables=new r.EventEmitter,this.onDidChangeVariables=this._onDidChangeVariables.event,this.executionCount=0,n((()=>this.onDidExecuteCode()))}onDidExecuteCode(){const e=this.getNotebookDocument();e&&(this.executionCount+=1,a(e.uri)&&this._onDidChangeVariables.fire(e))}async*provideVariables(e,t,n,r,i){const o=this.getNotebookDocument();if(!a(e.uri)||i.isCancellationRequested||!o||o!==e)return;const{executionCount:s}=this,c=function(e,t,n){let r="";const i=t;return i&&(r=`${i.name}.${i.propertyChain.join(".")}[[${n}`),`${e}:${r}`}(e.uri.toString(),t,r);let l=this.variableResultCache.getResults(s,c);if(t){const o=t;if(!l&&o.getChildren){const e=await o.getChildren(r,i);if(i.isCancellationRequested)return;l=e.map((e=>this.createVariableResult(e))),this.variableResultCache.setResults(s,c,l)}else if(!l)return;for(const e of l)yield e;if(2===n&&o.count&&l.length>0&&o.count>r+l.length)for await(const o of this.provideVariables(e,t,n,r+l.length,i))yield o}else{if(!l){const e=await this.variableRequester.getAllVariableDescriptions(void 0,r,i);if(i.isCancellationRequested)return;l=e.map((e=>this.createVariableResult(e))),this.variableResultCache.setResults(s,c,l)}for(const e of l)yield e}}createVariableResult(e){var t;const n=null!==(t=e.count)&&void 0!==t?t:0,r=!!e.hasNamedChildren,i={getChildren:(e,t)=>this.getChildren(i,e,t),expression:s(e.root,e.propertyChain),...e};return{variable:i,hasNamedChildren:r,indexedChildrenCount:n}}async getChildren(e,t,n){const r=e;return this.variableRequester.getAllVariableDescriptions(r,t,n)}}},95411:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hasUserDefinedPythonPath=t.sendErrorTelemetry=t.sendStartupTelemetry=void 0;const s=o(n(54980)),a=n(54661),c=n(552),l=n(23935),u=n(86156),p=n(23167),d=n(29413),h=n(61905),f=n(25297),v=n(51535),m=n(53322),g=n(36380);function y(e,t){let n=t.get(u.IInterpreterPathService).inspect(e);return!!(n.workspaceFolderValue&&"python"!==n.workspaceFolderValue||n.workspaceValue&&"python"!==n.workspaceValue||n.globalValue&&"python"!==n.globalValue)}async function b(e,t){var n,r;const i=s.env.appName,o=e.get(a.IWorkspaceService),c=(null===(n=o.workspaceFolders)||void 0===n?void 0:n.length)||0,u=e.get(l.ITerminalHelper).identifyTerminalShell();if(!o.isTrusted)return{workspaceFolderCount:c,terminal:u,isFirstSession:t};const v=e.get(d.IInterpreterService),m=(null===(r=o.workspaceFolders)||void 0===r?void 0:r.length)?o.workspaceFolders[0].uri:void 0,b=await v.hasInterpreters((async e=>{var t;return 3===(null===(t=e.version)||void 0===t?void 0:t.major)}));let _;await v.refreshPromise,_=(0,g.useEnvExtension)()?await v.getActiveInterpreter(m).catch((()=>{})):await v.getActiveInterpreter().catch((()=>{}));const E=_&&_.version?_.version.raw:void 0,S=_?_.envType:void 0;let w;if(S===f.EnvironmentType.Unknown&&(0,h.traceError)("Active interpreter type is detected as Unknown",JSON.stringify(_)),S===f.EnvironmentType.Conda){const t=e.get(d.ICondaService);w=await t.getCondaVersion().then((e=>e?e.raw:"")).catch((()=>""))}const P=y(m,e),T=!!_&&function(e,t){const n=t.get(p.IInterpreterAutoSelectionService).getAutoSelectedInterpreter(void 0);return!!n&&e===n.path}(_.path,e);return{condaVersion:w,terminal:u,pythonVersion:E,interpreterType:S,workspaceFolderCount:c,hasPythonThree:b,usingUserDefinedInterpreter:P,usingGlobalInterpreter:T,appName:i,isFirstSession:t}}t.sendStartupTelemetry=async function(e,t,n,r,i){if(!(0,c.isTestExecution)())try{await e,t.totalNonBlockingActivateTime=n.elapsedTime-t.startActivateTime;const o=await b(r,i);(0,v.sendTelemetryEvent)(m.EventName.EDITOR_LOAD,t,o)}catch(e){(0,h.traceError)("sendStartupTelemetry() failed.",e)}},t.sendErrorTelemetry=async function(e,t,n){try{let r={};if(n)try{r=await b(n)}catch(e){(0,h.traceError)("getActivationTelemetryProps() failed.",e)}(0,v.sendTelemetryEvent)(m.EventName.EDITOR_LOAD,t,r,e)}catch(e){(0,h.traceError)("sendErrorTelemetry() failed.",e)}},t.hasUserDefinedPythonPath=y},53322:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformErrors=t.EventName=void 0,function(e){e.FORMAT_ON_TYPE="FORMAT.FORMAT_ON_TYPE",e.EDITOR_LOAD="EDITOR.LOAD",e.REPL="REPL",e.INVOKE_TOOL="INVOKE_TOOL",e.CREATE_NEW_FILE_COMMAND="CREATE_NEW_FILE_COMMAND",e.SELECT_INTERPRETER="SELECT_INTERPRETER",e.SELECT_INTERPRETER_ENTER_BUTTON="SELECT_INTERPRETER_ENTER_BUTTON",e.SELECT_INTERPRETER_ENTER_CHOICE="SELECT_INTERPRETER_ENTER_CHOICE",e.SELECT_INTERPRETER_SELECTED="SELECT_INTERPRETER_SELECTED",e.SELECT_INTERPRETER_ENTER_OR_FIND="SELECT_INTERPRETER_ENTER_OR_FIND",e.SELECT_INTERPRETER_ENTERED_EXISTS="SELECT_INTERPRETER_ENTERED_EXISTS",e.PYTHON_INTERPRETER="PYTHON_INTERPRETER",e.PYTHON_INSTALL_PACKAGE="PYTHON_INSTALL_PACKAGE",e.ENVIRONMENT_WITHOUT_PYTHON_SELECTED="ENVIRONMENT_WITHOUT_PYTHON_SELECTED",e.PYTHON_ENVIRONMENTS_API="PYTHON_ENVIRONMENTS_API",e.PYTHON_INTERPRETER_DISCOVERY="PYTHON_INTERPRETER_DISCOVERY",e.NATIVE_FINDER_MISSING_CONDA_ENVS="NATIVE_FINDER_MISSING_CONDA_ENVS",e.NATIVE_FINDER_MISSING_POETRY_ENVS="NATIVE_FINDER_MISSING_POETRY_ENVS",e.NATIVE_FINDER_PERF="NATIVE_FINDER_PERF",e.PYTHON_INTERPRETER_DISCOVERY_INVALID_NATIVE="PYTHON_INTERPRETER_DISCOVERY_INVALID_NATIVE",e.PYTHON_INTERPRETER_AUTO_SELECTION="PYTHON_INTERPRETER_AUTO_SELECTION",e.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES="PYTHON_INTERPRETER.ACTIVATION_ENVIRONMENT_VARIABLES",e.PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE="PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE",e.PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL="PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL",e.TERMINAL_SHELL_IDENTIFICATION="TERMINAL_SHELL_IDENTIFICATION",e.PYTHON_INTERPRETER_ACTIVATE_ENVIRONMENT_PROMPT="PYTHON_INTERPRETER_ACTIVATE_ENVIRONMENT_PROMPT",e.PYTHON_NOT_INSTALLED_PROMPT="PYTHON_NOT_INSTALLED_PROMPT",e.CONDA_INHERIT_ENV_PROMPT="CONDA_INHERIT_ENV_PROMPT",e.REQUIRE_JUPYTER_PROMPT="REQUIRE_JUPYTER_PROMPT",e.ACTIVATED_CONDA_ENV_LAUNCH="ACTIVATED_CONDA_ENV_LAUNCH",e.ENVFILE_VARIABLE_SUBSTITUTION="ENVFILE_VARIABLE_SUBSTITUTION",e.ENVFILE_WORKSPACE="ENVFILE_WORKSPACE",e.EXECUTION_CODE="EXECUTION_CODE",e.EXECUTION_DJANGO="EXECUTION_DJANGO",e.UNITTEST_CONFIGURING="UNITTEST.CONFIGURING",e.UNITTEST_CONFIGURE="UNITTEST.CONFIGURE",e.UNITTEST_DISCOVERY_TRIGGER="UNITTEST.DISCOVERY.TRIGGER",e.UNITTEST_DISCOVERING="UNITTEST.DISCOVERING",e.UNITTEST_DISCOVERING_STOP="UNITTEST.DISCOVERY.STOP",e.UNITTEST_DISCOVERY_DONE="UNITTEST.DISCOVERY.DONE",e.UNITTEST_RUN_STOP="UNITTEST.RUN.STOP",e.UNITTEST_RUN="UNITTEST.RUN",e.UNITTEST_RUN_ALL_FAILED="UNITTEST.RUN_ALL_FAILED",e.UNITTEST_DISABLED="UNITTEST.DISABLED",e.PYTHON_EXPERIMENTS_INIT_PERFORMANCE="PYTHON_EXPERIMENTS_INIT_PERFORMANCE",e.PYTHON_EXPERIMENTS_LSP_NOTEBOOKS="PYTHON_EXPERIMENTS_LSP_NOTEBOOKS",e.PYTHON_EXPERIMENTS_OPT_IN_OPT_OUT_SETTINGS="PYTHON_EXPERIMENTS_OPT_IN_OPT_OUT_SETTINGS",e.EXTENSION_SURVEY_PROMPT="EXTENSION_SURVEY_PROMPT",e.LANGUAGE_SERVER_ENABLED="LANGUAGE_SERVER.ENABLED",e.LANGUAGE_SERVER_TRIGGER_TIME="LANGUAGE_SERVER_TRIGGER_TIME",e.LANGUAGE_SERVER_STARTUP="LANGUAGE_SERVER.STARTUP",e.LANGUAGE_SERVER_READY="LANGUAGE_SERVER.READY",e.LANGUAGE_SERVER_TELEMETRY="LANGUAGE_SERVER.EVENT",e.LANGUAGE_SERVER_REQUEST="LANGUAGE_SERVER.REQUEST",e.LANGUAGE_SERVER_RESTART="LANGUAGE_SERVER.RESTART",e.TERMINAL_CREATE="TERMINAL.CREATE",e.ACTIVATE_ENV_IN_CURRENT_TERMINAL="ACTIVATE_ENV_IN_CURRENT_TERMINAL",e.ACTIVATE_ENV_TO_GET_ENV_VARS_FAILED="ACTIVATE_ENV_TO_GET_ENV_VARS_FAILED",e.DIAGNOSTICS_ACTION="DIAGNOSTICS.ACTION",e.DIAGNOSTICS_MESSAGE="DIAGNOSTICS.MESSAGE",e.USE_REPORT_ISSUE_COMMAND="USE_REPORT_ISSUE_COMMAND",e.HASHED_PACKAGE_NAME="HASHED_PACKAGE_NAME",e.JEDI_LANGUAGE_SERVER_ENABLED="JEDI_LANGUAGE_SERVER.ENABLED",e.JEDI_LANGUAGE_SERVER_STARTUP="JEDI_LANGUAGE_SERVER.STARTUP",e.JEDI_LANGUAGE_SERVER_READY="JEDI_LANGUAGE_SERVER.READY",e.JEDI_LANGUAGE_SERVER_REQUEST="JEDI_LANGUAGE_SERVER.REQUEST",e.TENSORBOARD_INSTALL_PROMPT_SHOWN="TENSORBOARD.INSTALL_PROMPT_SHOWN",e.TENSORBOARD_INSTALL_PROMPT_SELECTION="TENSORBOARD.INSTALL_PROMPT_SELECTION",e.TENSORBOARD_DETECTED_IN_INTEGRATED_TERMINAL="TENSORBOARD_DETECTED_IN_INTEGRATED_TERMINAL",e.TENSORBOARD_PACKAGE_INSTALL_RESULT="TENSORBOARD.PACKAGE_INSTALL_RESULT",e.TENSORBOARD_TORCH_PROFILER_IMPORT="TENSORBOARD.TORCH_PROFILER_IMPORT",e.ENVIRONMENT_CREATING="ENVIRONMENT.CREATING",e.ENVIRONMENT_CREATED="ENVIRONMENT.CREATED",e.ENVIRONMENT_FAILED="ENVIRONMENT.FAILED",e.ENVIRONMENT_INSTALLING_PACKAGES="ENVIRONMENT.INSTALLING_PACKAGES",e.ENVIRONMENT_INSTALLED_PACKAGES="ENVIRONMENT.INSTALLED_PACKAGES",e.ENVIRONMENT_INSTALLING_PACKAGES_FAILED="ENVIRONMENT.INSTALLING_PACKAGES_FAILED",e.ENVIRONMENT_BUTTON="ENVIRONMENT.BUTTON",e.ENVIRONMENT_DELETE="ENVIRONMENT.DELETE",e.ENVIRONMENT_REUSE="ENVIRONMENT.REUSE",e.ENVIRONMENT_CHECK_TRIGGER="ENVIRONMENT.CHECK.TRIGGER",e.ENVIRONMENT_CHECK_RESULT="ENVIRONMENT.CHECK.RESULT",e.ENVIRONMENT_TERMINAL_GLOBAL_PIP="ENVIRONMENT.TERMINAL.GLOBAL_PIP"}(n||(t.EventName=n={})),function(e){e.FailedToParseVersion="FailedToParseVersion",e.FailedToDetermineOS="FailedToDetermineOS"}(r||(t.PlatformErrors=r={}))},63999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvFileTelemetryTests=t.sendActivationTelemetry=t.sendFileCreationTelemetry=t.sendSettingTelemetry=void 0;const r=n(79985),i=n(51535),o=n(53322);let s,a=!1;function c(e=!1){(0,i.sendTelemetryEvent)(o.EventName.ENVFILE_WORKSPACE,void 0,{hasCustomEnvPath:e}),a=!0}function l(){return!a}function u(e){var t;if(!s){const n=e.getConfiguration("python");s=(null===(t=n.inspect("envFile"))||void 0===t?void 0:t.defaultValue)||""}return s}t.sendSettingTelemetry=function(e,t){l()&&t!==u(e)&&c(!0)},t.sendFileCreationTelemetry=function(){l()&&c()},t.sendActivationTelemetry=async function(e,t,n){if(l()){const i=new r.SystemVariables(n,void 0,t).resolveAny(u(t));await e.fileExists(i)&&c()}},t.EnvFileTelemetryTests={setState:({telemetrySent:e,defaultSetting:t})=>{void 0!==e&&(a=e),void 0!==u&&(s=t)},resetState:()=>{s=void 0,a=!1}}},85120:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.setExtensionInstallTelemetryProperties=void 0;const s=o(n(16928)),a=n(51535),c=n(84090);t.setExtensionInstallTelemetryProperties=async function(e){const t=s.join(s.dirname(c.EXTENSION_ROOT_DIR),"PythonCodingPack");await e.fileExists(t)?(0,a.setSharedProperty)("installSource","pythonCodingPack"):(0,a.setSharedProperty)("installSource","marketPlace")}},95440:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getDocumentLines=t.ImportTracker=void 0;const l=n(25891),u=a(n(16928)),p=n(53557),d=n(76982),h=n(51535),f=n(54661),v=n(552);n(87295);const m=n(86156),g=n(98803),y=n(4238),b=n(53322),_=/^\s*(from (?<fromImport>\w+)(?:\.\w+)* import \w+(?:, \w+)*(?: as \w+)?|import (?<importImport>\w+(?:, \w+)*)(?: as \w+)?)$/,E=(0,v.isTestExecution)();let S=r=class{constructor(e,t){this.documentManager=e,this.disposables=t,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0},this.pendingChecks=new Map,this.documentManager.onDidOpenTextDocument((e=>this.onOpenedOrSavedDocument(e)),this,this.disposables),this.documentManager.onDidSaveTextDocument((e=>this.onOpenedOrSavedDocument(e)),this,this.disposables)}dispose(){this.pendingChecks.clear()}async activate(){this.documentManager.textDocuments.forEach((e=>this.onOpenedOrSavedDocument(e)))}static hasModuleImport(e){return this.sentMatches.has(e)}onOpenedOrSavedDocument(e){".py"===u.extname(e.fileName).toLowerCase()&&this.scheduleDocument(e)}scheduleDocument(e){this.scheduleCheck(e.fileName,this.checkDocument.bind(this,e))}scheduleCheck(e,t){const n=this.pendingChecks.get(e);n&&((0,p.clearTimeout)(n),this.pendingChecks.delete(e)),E?t():this.pendingChecks.set(e,(0,p.setTimeout)(t,5e3))}checkDocument(e){this.pendingChecks.delete(e.fileName);const t=w(e);this.lookForImports(t)}sendTelemetry(e){if(r.sentMatches.has(e))return;r.sentMatches.add(e);const t=(0,d.createHash)("sha256").update(e).digest("hex");(0,h.sendTelemetryEvent)(b.EventName.HASHED_PACKAGE_NAME,void 0,{hashedName:t})}lookForImports(e){try{for(const t of e){const e=t?_.exec(t):null;null!==e&&void 0!==e.groups&&(void 0!==e.groups.fromImport?this.sendTelemetry(e.groups.fromImport):void 0!==e.groups.importImport&&e.groups.importImport.split(",").map((e=>e.trim())).forEach((e=>this.sendTelemetry(e)))),t&&y.TorchProfilerImportRegEx.test(t)&&(0,h.sendTelemetryEvent)(b.EventName.TENSORBOARD_TORCH_PROFILER_IMPORT)}}catch(e){(0,g.noop)()}}};function w(e){return Array(Math.min(e.lineCount,1e3)).fill("").map(((t,n)=>{const r=e.lineAt(n);if(r&&!r.isEmptyOrWhitespace)return r.text})).filter((e=>e))}t.ImportTracker=S,S.sentMatches=new Set,t.ImportTracker=S=r=s([(0,l.injectable)(),c(0,(0,l.inject)(f.IDocumentManager)),c(1,(0,l.inject)(m.IDisposableRegistry))],S),t.getDocumentLines=w},51535:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendTelemetryWhenDone=t.captureTelemetry=t.sendTelemetryEvent=t.clearTelemetryReporter=t.getTelemetryReporter=t._resetSharedProperties=t.setSharedProperty=t.isTelemetryDisabled=void 0;const r=n(552),i=n(7855),o=n(51080);let s;function a(){if(!s){const e=n(54980).extensions.getExtension(r.PVSC_EXTENSION_ID);s=e.packageJSON}return!s.enableTelemetry}n(53322),t.isTelemetryDisabled=a;const c={};let l;function u(){if(!(0,r.isTestExecution)()&&l)return l;const e=n(81170).default;return l=new e(r.AppinsightsKey,[{lookup:/(errorName|errorMessage|errorStack)/g}]),l}function p(e,t,i,o){var s;if((0,r.isTestExecution)()||!function(){try{const e=n(54980),t=n(81170);return void 0!==e&&void 0!==t}catch(e){return!1}}()||a())return;const l=u(),p="number"==typeof t?{duration:t}:t||void 0,d={},h=e;if(i){const t=i;Object.getOwnPropertyNames(t).forEach((n=>{if(void 0!==t[n]&&null!==t[n])try{switch(typeof t[n]){case"string":d[n]=t[n];break;case"object":d[n]="object";break;default:d[n]=t[n].toString()}}catch(t){console.error(`Failed to serialize ${n} for ${String(e)}`,t)}}))}if(Object.assign(d,c),o){const e={errorName:o.name,errorStack:null!==(s=o.stack)&&void 0!==s?s:""};Object.assign(d,e),l.sendTelemetryErrorEvent(h,d,p)}else l.sendTelemetryEvent(h,d,p);process.env&&process.env.VSC_PYTHON_LOG_TELEMETRY&&console.info(`Telemetry Event : ${h} Measures: ${JSON.stringify(p)} Props: ${JSON.stringify(d)} `)}t.setSharedProperty=function(e,t){const n=e;(0,r.isUnitTestExecution)()&&n.startsWith("ds_")||(void 0===t?delete c[n]:c[n]=t)},t._resetSharedProperties=function(){for(const e of Object.keys(c))delete c[e]},t.getTelemetryReporter=u,t.clearTelemetryReporter=function(){l=void 0},t.sendTelemetryEvent=p,t.captureTelemetry=function(e,t,n=!0,r,s,a){return function(c,l,u){const d=u.value;return u.value=function(...c){if(!n&&!s&&!a)return p(e,void 0,t),d.apply(this,c);const l=e=>s?{...t,...s(this,e)}:t,u=n?new o.StopWatch:void 0,h=e=>{const t=u?{duration:u.elapsedTime}:void 0;return a?{...t,...a(this,e)}:t},f=d.apply(this,c);return f&&(0,i.isPromise)(f)?f.then((t=>(p(e,h(t),l(t)),t))).catch((t=>{const n={...l(),failed:!0};p(r||e,h(),n,t)})):p(e,h(f),l(f)),f},u}},t.sendTelemetryWhenDone=function(e,t,n,r){if(n=n||new o.StopWatch,"function"!=typeof t.then)throw new Error("Method is neither a Promise nor a Theneable");t.then((t=>(p(e,n.elapsedTime,r),t)),(t=>(p(e,n.elapsedTime,r,t),Promise.reject(t))))}},81274:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IImportTracker=void 0,t.IImportTracker=Symbol("IImportTracker")},38306:(e,t)=>{"use strict";var n,r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.TensorBoardEntrypoint=t.TensorBoardSessionStartResult=t.TensorBoardEntrypointTrigger=t.TensorBoardPromptSelection=void 0,function(e){e.Yes="yes",e.No="no",e.DoNotAskAgain="doNotAskAgain",e.None="none"}(n||(t.TensorBoardPromptSelection=n={})),function(e){e.tfeventfiles="tfeventfiles",e.fileimport="fileimport",e.nbextension="nbextension",e.palette="palette"}(r||(t.TensorBoardEntrypointTrigger=r={})),function(e){e.cancel="canceled",e.success="success",e.error="error"}(i||(t.TensorBoardSessionStartResult=i={})),function(e){e.prompt="prompt",e.codelens="codelens",e.palette="palette"}(o||(t.TensorBoardEntrypoint=o={}))},4238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TorchProfilerImportRegEx=void 0,t.TorchProfilerImportRegEx=/^\s*(?:import (?:(\w+, )*torch\.profiler(, \w+)*))|(?:from torch import (?:(\w+, )*profiler(, \w+)*))/},50315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(17470),i=n(55238);t.registerTypes=function(e){e.addSingleton(r.TensorBoardPrompt,r.TensorBoardPrompt),e.addSingleton(i.TensorboardDependencyChecker,i.TensorboardDependencyChecker)}},17470:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TensorBoardPrompt=void 0;const o=n(25891),s=n(86156);var a;!function(e){e.ShowNativeTensorBoardPrompt="showNativeTensorBoardPrompt"}(a||(a={}));let c=class{constructor(e){this.persistentStateFactory=e,this.state=this.persistentStateFactory.createWorkspacePersistentState(a.ShowNativeTensorBoardPrompt,!0)}isPromptEnabled(){return this.state.value}};t.TensorBoardPrompt=c,t.TensorBoardPrompt=c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IPersistentStateFactory))],c)},31250:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TensorBoardSession=void 0;const r=n(54980),i=n(7854),o=n(86156),s=n(14152),a=n(51535),c=n(53322),l=n(95440),u=n(38306),p=n(18399),d=n(61905),h=">= 2.4.1",f=">= 0.2.0";t.TensorBoardSession=class{constructor(e,t,n,r){this.installer=e,this.interpreterService=t,this.commandManager=n,this.applicationShell=r}async promptToInstall(e,t){(0,a.sendTelemetryEvent)(c.EventName.TENSORBOARD_INSTALL_PROMPT_SHOWN);const n=s.Common.bannerLabelYes,r=s.Common.bannerLabelNo,i=e===o.ProductInstallStatus.NeedsUpgrade;let l;l=e===o.ProductInstallStatus.Installed&&t!==o.ProductInstallStatus.Installed?s.TensorBoard.installProfilerPluginPrompt:t!==o.ProductInstallStatus.Installed?s.TensorBoard.installTensorBoardAndProfilerPluginPrompt:i?s.TensorBoard.upgradePrompt:s.TensorBoard.installPrompt;const p=await this.applicationShell.showErrorMessage(l,n,r);let d=u.TensorBoardPromptSelection.None;return p===n?d=u.TensorBoardPromptSelection.Yes:p===r&&(d=u.TensorBoardPromptSelection.No),(0,a.sendTelemetryEvent)(c.EventName.TENSORBOARD_INSTALL_PROMPT_SELECTION,void 0,{selection:d,operationType:i?"upgrade":"install"}),p}async ensurePrerequisitesAreInstalled(e){(0,d.traceVerbose)("Ensuring TensorBoard package is installed into active interpreter");const t=await this.interpreterService.getActiveInterpreter(e)||await this.commandManager.executeCommand("python.setInterpreter");if(!t)return!1;let[n,u]=await Promise.all([this.installer.isProductVersionCompatible(o.Product.tensorboard,h,t),this.installer.isProductVersionCompatible(o.Product.torchProfilerImportName,f,t)]);const v=l.ImportTracker.hasModuleImport("torch"),m=n!==o.ProductInstallStatus.Installed,g=u!==o.ProductInstallStatus.Installed;if(v&&!m&&!g||!v&&n===o.ProductInstallStatus.Installed)return!0;const y=await this.promptToInstall(n,v?u:o.ProductInstallStatus.Installed);if(y!==s.Common.bannerLabelYes&&!m)return!0;if(y!==s.Common.bannerLabelYes)return!1;const b=(new r.CancellationTokenSource).token,_=(0,i.createPromiseFromCancellation)({cancelAction:"resolve",defaultValue:o.InstallerResponse.Ignore,token:b}),E=[];return m&&E.push(this.installer.install(o.Product.tensorboard,t,b,n===o.ProductInstallStatus.NeedsUpgrade?p.ModuleInstallFlags.upgrade:void 0)),v&&g&&E.push(this.installer.install(o.Product.torchProfilerInstallName,t,b,u===o.ProductInstallStatus.NeedsUpgrade?p.ModuleInstallFlags.upgrade:void 0)),await Promise.race([...E,_]),[n,u]=await Promise.all([this.installer.isProductVersionCompatible(o.Product.tensorboard,h,t),this.installer.isProductVersionCompatible(o.Product.torchProfilerImportName,f,t)]),(0,a.sendTelemetryEvent)(c.EventName.TENSORBOARD_PACKAGE_INSTALL_RESULT,void 0,{wasTensorBoardAttempted:m,wasProfilerPluginAttempted:g,wasTensorBoardInstalled:n===o.ProductInstallStatus.Installed,wasProfilerPluginInstalled:u===o.ProductInstallStatus.Installed}),v&&u!==o.ProductInstallStatus.Installed&&(0,d.traceError)("Failed to install torch-tb-plugin. Profiler plugin will not appear in TensorBoard session."),n===o.ProductInstallStatus.Installed}}},55238:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TensorboardDependencyChecker=void 0;const o=n(25891),s=n(54661),a=n(86156),c=n(29413),l=n(31250);let u=class{constructor(e,t,n,r){this.installer=e,this.interpreterService=t,this.applicationShell=n,this.commandManager=r}async ensureDependenciesAreInstalled(e){const t=new l.TensorBoardSession(this.installer,this.interpreterService,this.commandManager,this.applicationShell);return await t.ensurePrerequisitesAreInstalled(e)}};t.TensorboardDependencyChecker=u,t.TensorboardDependencyChecker=u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IInstaller)),i(1,(0,o.inject)(c.IInterpreterService)),i(2,(0,o.inject)(s.IApplicationShell)),i(3,(0,o.inject)(s.ICommandManager))],u)},5448:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TensorboardExtensionIntegration=void 0;const o=n(25891),s=n(54661),a=n(552),c=n(86156),l=n(67714),u=n(17470),p=n(55238);let d=class{constructor(e,t,n,r,i){this.extensions=e,this.envActivation=t,this.workspaceService=n,this.dependencyChcker=r,this.tensorBoardPrompt=i}registerApi(e){this.workspaceService.isTrusted?e.registerPythonApi({getActivatedEnvironmentVariables:async e=>this.envActivation.getActivatedEnvironmentVariables(e,void 0,!0),ensureDependenciesAreInstalled:async e=>this.dependencyChcker.ensureDependenciesAreInstalled(e),isPromptEnabled:()=>this.tensorBoardPrompt.isPromptEnabled()}):this.workspaceService.onDidGrantWorkspaceTrust((()=>this.registerApi(e)))}async integrateWithTensorboardExtension(){const e=await this.getExtensionApi();e&&this.registerApi(e)}async getExtensionApi(){if(this.tensorboardExtension)return this.tensorboardExtension.exports;{const e=this.extensions.getExtension(a.TENSORBOARD_EXTENSION_ID);if(!e)return;if(await e.activate(),e.isActive)return this.tensorboardExtension=e,this.tensorboardExtension.exports}}};t.TensorboardExtensionIntegration=d,t.TensorboardExtensionIntegration=d=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IExtensions)),i(1,(0,o.inject)(l.IEnvironmentActivationService)),i(2,(0,o.inject)(s.IWorkspaceService)),i(3,(0,o.inject)(p.TensorboardDependencyChecker)),i(4,(0,o.inject)(u.TensorBoardPrompt))],d)},43333:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalAutoActivation=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(23935),l=n(86156);let u=class{constructor(e,t,n,r){this.terminalManager=e,this.activator=n,this.activeResourceService=r,this.terminalsNotToAutoActivate=new WeakSet,t.push(this)}dispose(){this.handler&&(this.handler.dispose(),this.handler=void 0)}register(){this.handler||(this.handler=this.terminalManager.onDidOpenTerminal(this.activateTerminal,this))}disableAutoActivation(e){this.terminalsNotToAutoActivate.add(e)}async activateTerminal(e){if(this.terminalsNotToAutoActivate.has(e))return;if("hideFromUser"in e.creationOptions&&e.creationOptions.hideFromUser)return;const t="cwd"in e.creationOptions?e.creationOptions.cwd:this.activeResourceService.getActiveResource(),n="string"==typeof t?s.Uri.file(t):t;await this.activator.activateEnvironmentInTerminal(e,{resource:n})}};t.TerminalAutoActivation=u,t.TerminalAutoActivation=u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ITerminalManager)),i(1,(0,o.inject)(l.IDisposableRegistry)),i(2,(0,o.inject)(c.ITerminalActivator)),i(3,(0,o.inject)(a.IActiveResourceService))],u)},96943:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeExecutionManager=void 0;const c=n(25891),l=n(54980),u=s(n(16928)),p=n(54661),d=n(552);n(87295);const h=n(86156),f=n(98803),v=n(29413),m=n(9100),g=n(61905),y=n(51535),b=n(53322),_=n(52060),E=n(58137),S=n(6356),w=n(36380);let P=class{constructor(e,t,n,r,i){this.commandManager=e,this.documentManager=t,this.disposableRegistry=n,this.configSettings=r,this.serviceContainer=i,this.eventEmitter=new l.EventEmitter}registerCommands(){[d.Commands.Exec_In_Terminal,d.Commands.Exec_In_Terminal_Icon,d.Commands.Exec_In_Separate_Terminal].forEach((e=>{this.disposableRegistry.push(this.commandManager.registerCommand(e,(async t=>{(0,g.traceVerbose)("Attempting to run Python file",null==t?void 0:t.fsPath);const n=e===d.Commands.Exec_In_Terminal?"command":"icon",r=e===d.Commands.Exec_In_Separate_Terminal;if((0,w.useEnvExtension)()){try{await this.executeUsingExtension(t,e===d.Commands.Exec_In_Separate_Terminal)}catch(e){(0,g.traceError)("Failed to execute file in terminal",e)}return(0,y.sendTelemetryEvent)(b.EventName.ENVIRONMENT_CHECK_TRIGGER,void 0,{trigger:"run-in-terminal"}),void(0,y.sendTelemetryEvent)(b.EventName.EXECUTION_CODE,void 0,{scope:"file",trigger:n,newTerminalPerFile:r})}const i=this.serviceContainer.get(v.IInterpreterService);await i.getActiveInterpreter(t)?((0,y.sendTelemetryEvent)(b.EventName.ENVIRONMENT_CHECK_TRIGGER,void 0,{trigger:"run-in-terminal"}),(0,E.triggerCreateEnvironmentCheckNonBlocking)(E.CreateEnvironmentCheckKind.File,t),await this.executeFileInTerminal(t,n,{newTerminalPerFile:r}).then((()=>{this.shouldTerminalFocusOnStart(t)&&this.commandManager.executeCommand("workbench.action.terminal.focus")})).catch((e=>(0,g.traceError)("Failed to execute file in terminal",e)))):this.commandManager.executeCommand(d.Commands.TriggerEnvironmentSelection,t).then(f.noop,f.noop)})))})),this.disposableRegistry.push(this.commandManager.registerCommand(d.Commands.Exec_Selection_In_Terminal,(async e=>{const t=this.serviceContainer.get(v.IInterpreterService);await t.getActiveInterpreter(e)?((0,y.sendTelemetryEvent)(b.EventName.ENVIRONMENT_CHECK_TRIGGER,void 0,{trigger:"run-selection"}),(0,E.triggerCreateEnvironmentCheckNonBlocking)(E.CreateEnvironmentCheckKind.File,e),await this.executeSelectionInTerminal().then((()=>{this.shouldTerminalFocusOnStart(e)&&this.commandManager.executeCommand("workbench.action.terminal.focus")}))):this.commandManager.executeCommand(d.Commands.TriggerEnvironmentSelection,e).then(f.noop,f.noop)}))),this.disposableRegistry.push(this.commandManager.registerCommand(d.Commands.Exec_Selection_In_Django_Shell,(async e=>{const t=this.serviceContainer.get(v.IInterpreterService);await t.getActiveInterpreter(e)?((0,y.sendTelemetryEvent)(b.EventName.ENVIRONMENT_CHECK_TRIGGER,void 0,{trigger:"run-selection"}),(0,E.triggerCreateEnvironmentCheckNonBlocking)(E.CreateEnvironmentCheckKind.File,e),await this.executeSelectionInDjangoShell().then((()=>{this.shouldTerminalFocusOnStart(e)&&this.commandManager.executeCommand("workbench.action.terminal.focus")}))):this.commandManager.executeCommand(d.Commands.TriggerEnvironmentSelection,e).then(f.noop,f.noop)})))}async executeUsingExtension(e,t){const n=this.serviceContainer.get(_.ICodeExecutionHelper);let r=(e=e instanceof l.Uri?e:void 0)||await n.getFileToExecute();if(!r)return;const i=this.configSettings.getSettings(e);let o=i.terminal.executeInFileDir?u.dirname(r.fsPath):void 0;const s=[...i.terminal.launchArgs,r.fsPath.fileToCommandArgumentForPythonExt()],a=await n.saveFileIfDirty(r);a&&(r=a);const c=this.shouldTerminalFocusOnStart(r);let p;p=t?await(0,w.runInDedicatedTerminal)(r,s,o,c):await(0,w.runInTerminal)(r,s,o,c),p&&p.show()}async executeFileInTerminal(e,t,n){(0,y.sendTelemetryEvent)(b.EventName.EXECUTION_CODE,void 0,{scope:"file",trigger:t,newTerminalPerFile:null==n?void 0:n.newTerminalPerFile});const r=this.serviceContainer.get(_.ICodeExecutionHelper);let i=(e=e instanceof l.Uri?e:void 0)||await r.getFileToExecute();if(!i)return;const o=await r.saveFileIfDirty(i);o&&(i=o);const s=this.serviceContainer.get(_.ICodeExecutionService,"standard");await s.executeFile(i,n)}async executeSelectionInTerminal(){const e=this.serviceContainer.get(_.ICodeExecutionService,"standard");await this.executeSelection(e)}async executeSelectionInDjangoShell(){const e=this.serviceContainer.get(_.ICodeExecutionService,"djangoShell");await this.executeSelection(e)}async executeSelection(e){const t=this.documentManager.activeTextEditor;if(!t)return;const n=this.serviceContainer.get(_.ICodeExecutionHelper),r=await n.getSelectedTextToExecute(t);let i="";t&&t.document&&(i=t.document.getText());const o=await n.normalizeLines(r,S.ReplType.terminal,i);if(o&&0!==o.trim().length){try{this.eventEmitter.fire(o)}catch(e){(0,f.noop)()}await e.execute(o,t.document.uri)}}shouldTerminalFocusOnStart(e){var t;return null===(t=this.configSettings.getSettings(e))||void 0===t?void 0:t.terminal.focusAfterLaunch}};t.CodeExecutionManager=P,o([(0,y.captureTelemetry)(b.EventName.EXECUTION_CODE,{scope:"selection"},!1)],P.prototype,"executeSelectionInTerminal",null),o([(0,y.captureTelemetry)(b.EventName.EXECUTION_DJANGO,{scope:"selection"},!1)],P.prototype,"executeSelectionInDjangoShell",null),t.CodeExecutionManager=P=o([(0,c.injectable)(),a(0,(0,c.inject)(p.ICommandManager)),a(1,(0,c.inject)(p.IDocumentManager)),a(2,(0,c.inject)(h.IDisposableRegistry)),a(3,(0,c.inject)(h.IConfigurationService)),a(4,(0,c.inject)(m.IServiceContainer))],P)},36549:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DjangoContextInitializer=void 0;const a=n(25891),c=s(n(16928)),l=n(99663),u=n(61905);let p=class{constructor(e,t,n,r){this.documentManager=e,this.workpaceService=t,this.fileSystem=n,this.monitoringActiveTextEditor=!1,this.workspaceContextKeyValues=new Map,this.lastCheckedWorkspace="",this.disposables=[],this.isDjangoProject=new l.ContextKey("python.isDjangoProject",r),this.ensureContextStateIsSet().catch((e=>(0,u.traceError)("Python Extension: ensureState",e))),this.disposables.push(this.workpaceService.onDidChangeWorkspaceFolders((()=>this.updateContextKeyBasedOnActiveWorkspace())))}dispose(){this.disposables.forEach((e=>e.dispose()))}updateContextKeyBasedOnActiveWorkspace(){this.monitoringActiveTextEditor||(this.monitoringActiveTextEditor=!0,this.disposables.push(this.documentManager.onDidChangeActiveTextEditor((()=>this.ensureContextStateIsSet()))))}getActiveWorkspace(){if(!Array.isArray(this.workpaceService.workspaceFolders)||0===this.workpaceService.workspaceFolders.length)return;if(1===this.workpaceService.workspaceFolders.length)return this.workpaceService.workspaceFolders[0].uri.fsPath;const e=this.documentManager.activeTextEditor;if(!e)return;const t=this.workpaceService.getWorkspaceFolder(e.document.uri);return t?t.uri.fsPath:void 0}async ensureContextStateIsSet(){const e=this.getActiveWorkspace();if(!e)return this.isDjangoProject.set(!1);if(this.lastCheckedWorkspace!==e)if(this.workspaceContextKeyValues.has(e))await this.isDjangoProject.set(this.workspaceContextKeyValues.get(e));else{const t=await this.fileSystem.fileExists(c.join(e,"manage.py"));await this.isDjangoProject.set(t),this.workspaceContextKeyValues.set(e,t),this.lastCheckedWorkspace=e}}};t.DjangoContextInitializer=p,t.DjangoContextInitializer=p=o([(0,a.injectable)()],p)},83887:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DjangoShellCodeExecutionProvider=void 0;const c=n(25891),l=s(n(16928)),u=n(54661);n(87295);const p=n(22408),d=n(23935),h=n(86156),f=n(29413),v=n(20467),m=n(36549),g=n(90286);let y=class extends g.TerminalCodeExecutionProvider{constructor(e,t,n,r,i,o,s,a,c,l){super(e,t,n,a,i,c,o,l),this.terminalTitle="Django Shell",a.push(new m.DjangoContextInitializer(r,n,s,o))}async getExecutableInfo(e,t=[]){const n=await super.getExecutableInfo(e,t),r=e?this.workspace.getWorkspaceFolder(e):void 0,i=Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.length>0?this.workspace.workspaceFolders[0].uri.fsPath:"",o=r?r.uri.fsPath:i,s=0===o.length?"manage.py":l.join(o,"manage.py");return(0,v.copyPythonExecInfo)(n,[s.fileToCommandArgumentForPythonExt(),"shell"])}async getExecuteFileArgs(e,t=[]){const n=await super.getExecutableInfo(e);return(0,v.copyPythonExecInfo)(n,t)}};t.DjangoShellCodeExecutionProvider=y,t.DjangoShellCodeExecutionProvider=y=o([(0,c.injectable)(),a(0,(0,c.inject)(d.ITerminalServiceFactory)),a(1,(0,c.inject)(h.IConfigurationService)),a(2,(0,c.inject)(u.IWorkspaceService)),a(3,(0,c.inject)(u.IDocumentManager)),a(4,(0,c.inject)(p.IPlatformService)),a(5,(0,c.inject)(u.ICommandManager)),a(6,(0,c.inject)(p.IFileSystem)),a(7,(0,c.inject)(h.IDisposableRegistry)),a(8,(0,c.inject)(f.IInterpreterService)),a(9,(0,c.inject)(u.IApplicationShell))],y)},39031:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMultiLineSelectionText=t.getSingleLineSelectionText=t.CodeExecutionHelper=void 0,n(87295);const c=n(25891),l=n(54980),u=n(54661),p=n(552),d=s(n(8370)),h=n(35026),f=n(7855),v=n(29413),m=n(9100),g=n(61905),y=n(86156),b=n(51535),_=n(53322),E=n(6356);let S=class{constructor(e){this.serviceContainer=e,this.documentManager=e.get(u.IDocumentManager),this.applicationShell=e.get(u.IApplicationShell),this.processServiceFactory=e.get(h.IProcessServiceFactory),this.interpreterService=e.get(v.IInterpreterService),this.configSettings=e.get(y.IConfigurationService),this.commandManager=e.get(u.ICommandManager),this.activeResourceService=this.serviceContainer.get(u.IActiveResourceService)}async normalizeLines(e,t,n,r){var i,o,s,a,c,l,u,p,h,v,m;try{if(0===e.trim().length)return"";e=e.replace(new RegExp("\\r","g"),"");const g=this.documentManager.activeTextEditor,S=await this.interpreterService.getActiveInterpreter(r),w=await this.processServiceFactory.create(r),[P,T]=d.normalizeSelection(),C=w.execObservable((null==S?void 0:S.path)||"python",P,{throwOnStdErr:!0}),x=(0,f.createDeferred)();let I="";C.out.subscribe({next:e=>{"stdout"===e.source&&(I+=e.out)},complete:()=>{x.resolve(I)}}),(null===(i=null==g?void 0:g.selection)||void 0===i?void 0:i.isEmpty)&&(0,b.sendTelemetryEvent)(_.EventName.EXECUTION_CODE,void 0,{scope:"line"});const O=null!==(s=null===(o=null==g?void 0:g.selection)||void 0===o?void 0:o.start.line)&&void 0!==s?s:0,R=null!==(c=null===(a=null==g?void 0:g.selection)||void 0===a?void 0:a.end.line)&&void 0!==c?c:0,D=null===(u=null===(l=null==g?void 0:g.selection)||void 0===l?void 0:l.isEmpty)||void 0===u||u;let k=!0,A=!1;const N=this.serviceContainer.get(y.IConfigurationService);if(N){const e=N.getSettings(this.activeResourceService.getActiveResource());k=e.REPL.enableREPLSmartSend,A=e.terminal.shellIntegration.enabled}const j=JSON.stringify({code:e,wholeFileContent:n,startLine:O,endLine:R,emptyHighlight:D,smartSendSettingsEnabled:k});null===(h=null===(p=C.proc)||void 0===p?void 0:p.stdin)||void 0===h||h.write(j),null===(m=null===(v=C.proc)||void 0===v?void 0:v.stdin)||void 0===m||m.end();const M=await x.promise,L=JSON.parse(M);if((null==g?void 0:g.selection)&&k&&"deprecated"!==L.normalized){const e=L.nextBlockLineno-g.selection.start.line-1;await this.moveToNextBlock(e,g)}if(L.attach_bracket_paste&&!A&&t===E.ReplType.terminal){let e=L.normalized.replace(/\n$/,"");return e.endsWith(":\n")&&(e=e.replace(/\n$/,"")),`[200~${e}[201~`}return T(L.normalized)}catch(t){return(0,g.traceError)(t,"Python: Failed to normalize code for execution in terminal"),e}}async moveToNextBlock(e,t){var n;return(null===(n=null==t?void 0:t.selection)||void 0===n?void 0:n.isEmpty)&&(await this.commandManager.executeCommand("cursorMove",{to:"down",by:"line",value:Number(e)}),await this.commandManager.executeCommand("cursorEnd")),Promise.resolve()}async getFileToExecute(){const e=this.documentManager.activeTextEditor;if(e)if(e.document.isUntitled)this.applicationShell.showErrorMessage(l.l10n.t("The active file needs to be saved before it can be run"));else{if(e.document.languageId===p.PYTHON_LANGUAGE)return e.document.isDirty&&await e.document.save(),e.document.uri;this.applicationShell.showErrorMessage(l.l10n.t("The active file is not a Python source file"))}else this.applicationShell.showErrorMessage(l.l10n.t("No open file to run in terminal"))}async getSelectedTextToExecute(e){if(!e)return;const{selection:t}=e;let n;return n=t.isEmpty?e.document.lineAt(t.start.line).text:t.isSingleLine?w(e):P(e),n}async saveFileIfDirty(e){const t=this.documentManager.textDocuments.filter((t=>t.uri.path===e.path));if(1===t.length&&(t[0].isDirty||t[0].isUntitled))return this.serviceContainer.get(u.IWorkspaceService).save(t[0].uri)}};function w(e){const{selection:t}=e,n=new l.Range(t.start,t.end),r=e.document.getText(n),i=e.document.lineAt(t.start.line).text;return r.trim()===i.trim()?i:r}function P(e){const{selection:t}=e,n=new l.Range(t.start,t.end),r=e.document.getText(n),i=new l.Range(new l.Position(t.start.line,0),new l.Position(t.end.line,e.document.lineAt(t.end.line).text.length)),o=e.document.getText(i);if(r.trim()===o.trim())return o;const s=e.document.lineAt(t.start.line).text,a=new l.Range(t.start,new l.Position(t.start.line,s.length)),c=e.document.getText(a);return c.trimLeft()===s.trimLeft()?s+r.substr(c.length):r}t.CodeExecutionHelper=S,t.CodeExecutionHelper=S=o([(0,c.injectable)(),a(0,(0,c.inject)(m.IServiceContainer))],S),t.getSingleLineSelectionText=w,t.getMultiLineSelectionText=P},50226:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReplProvider=void 0;const o=n(25891),s=n(54661),a=n(22408),c=n(23935),l=n(86156),u=n(29413),p=n(90286);let d=class extends p.TerminalCodeExecutionProvider{constructor(e,t,n,r,i,o,s,a){super(e,t,n,r,i,o,s,a),this.terminalTitle="REPL"}};t.ReplProvider=d,t.ReplProvider=d=r([(0,o.injectable)(),i(0,(0,o.inject)(c.ITerminalServiceFactory)),i(1,(0,o.inject)(l.IConfigurationService)),i(2,(0,o.inject)(s.IWorkspaceService)),i(3,(0,o.inject)(l.IDisposableRegistry)),i(4,(0,o.inject)(a.IPlatformService)),i(5,(0,o.inject)(u.IInterpreterService)),i(6,(0,o.inject)(s.ICommandManager)),i(7,(0,o.inject)(s.IApplicationShell))],d)},90286:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalCodeExecutionProvider=void 0;const c=n(25891),l=s(n(16928)),u=n(54661);n(87295);const p=n(22408),d=n(23935),h=n(86156),f=n(14152),v=n(85784),m=n(29413),g=n(61905),y=n(20467),b=n(53322),_=n(51535);let E=class{constructor(e,t,n,r,i,o,s,a){this.terminalServiceFactory=e,this.configurationService=t,this.workspace=n,this.disposables=r,this.platformService=i,this.interpreterService=o,this.commandManager=s,this.applicationShell=a,this.hasRanOutsideCurrentDrive=!1}async executeFile(e,t){await this.setCwdForFileExecution(e,t);const{command:n,args:r}=await this.getExecuteFileArgs(e,[e.fsPath.fileToCommandArgumentForPythonExt()]);await this.getTerminalService(e,t).sendCommand(n,r)}async execute(e,t){if(e&&0!==e.trim().length)if(await this.initializeRepl(t),"deprecated"==e){const e=await(0,v.showWarningMessage)(f.Diagnostics.invalidSmartSendMessage,f.Repl.disableSmartSend);(0,g.traceInfo)("Selected file contains invalid Python or Deprecated Python 2 code"),e===f.Repl.disableSmartSend&&this.configurationService.updateSetting("REPL.enableREPLSmartSend",!1,t)}else await this.getTerminalService(t).executeCommand(e,!0)}async initializeRepl(e){const t=this.getTerminalService(e);this.replActive&&await this.replActive?await t.show():((0,_.sendTelemetryEvent)(b.EventName.REPL,void 0,{replType:"Terminal"}),this.replActive=new Promise((async n=>{const r=await this.getExecutableInfo(e);let i;Promise.race([new Promise((e=>setTimeout((()=>e(!0)),3e3))),new Promise((e=>{let t=0;const n=setTimeout((()=>{e(!0)}),3e3);i=this.applicationShell.onDidWriteTerminalData((r=>{for(let i=0;i<r.data.length;i++)">"===r.data[i]&&(t++,3===t&&(clearTimeout(n),e(!0)))}))}))]).then((()=>{i&&i.dispose(),n(!0)})),await t.sendCommand(r.command,r.args)})),this.disposables.push(t.onDidCloseTerminal((()=>{this.replActive=void 0}))),await this.replActive)}async getExecutableInfo(e,t=[]){var n;const r=this.configurationService.getSettings(e),i=await this.interpreterService.getActiveInterpreter(e),o=null!==(n=null==i?void 0:i.path)&&void 0!==n?n:r.pythonPath,s=this.platformService.isWindows?o.replace(/\\/g,"/"):o,a=r.terminal.launchArgs;return(0,y.buildPythonExecInfo)(s,[...a,...t])}async getExecuteFileArgs(e,t=[]){return this.getExecutableInfo(e,t)}getTerminalService(e,t){return this.terminalServiceFactory.getTerminalService({resource:e,title:this.terminalTitle,newTerminalPerFile:null==t?void 0:t.newTerminalPerFile})}async setCwdForFileExecution(e,t){if(!this.configurationService.getSettings(e).terminal.executeInFileDir)return;const n=l.dirname(e.fsPath);if(n.length>0){if(this.platformService.isWindows&&/[a-z]\:/i.test(n)){const t="string"==typeof this.workspace.rootPath?this.workspace.rootPath.replace(/\:.*/g,""):void 0,r=n.replace(/\:.*/g,"");(r!==t||this.hasRanOutsideCurrentDrive)&&(this.hasRanOutsideCurrentDrive=!0,await this.getTerminalService(e).sendText(`${r}:`))}await this.getTerminalService(e,t).sendText(`cd ${n.fileToCommandArgumentForPythonExt()}`)}}};t.TerminalCodeExecutionProvider=E,t.TerminalCodeExecutionProvider=E=o([(0,c.injectable)(),a(0,(0,c.inject)(d.ITerminalServiceFactory)),a(1,(0,c.inject)(h.IConfigurationService)),a(2,(0,c.inject)(u.IWorkspaceService)),a(3,(0,c.inject)(h.IDisposableRegistry)),a(4,(0,c.inject)(p.IPlatformService)),a(5,(0,c.inject)(m.IInterpreterService)),a(6,(0,c.inject)(u.ICommandManager)),a(7,(0,c.inject)(u.IApplicationShell))],E)},54380:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTriggerForTerminalREPL=void 0;const r=n(85784),i=n(51535),o=n(53322);t.registerTriggerForTerminalREPL=function(e){e.push((0,r.onDidStartTerminalShellExecution)((async e=>{const t=function(e){const t=e.toLowerCase().trimStart();if(t.startsWith("python")||t.startsWith("py "))return 1===t.split(" ").length?"manualTerminal":"runningScript"}(e.execution.commandLine.value);e.execution.commandLine.isTrusted&&t&&(0,i.sendTelemetryEvent)(o.EventName.REPL,void 0,{replType:t})})))}},83328:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalDeactivateService=void 0;const c=n(25891),l=s(n(16928)),u=n(54661),p=n(25943),d=n(3931),h=n(18065),f=n(23935),v=n(7855),m=n(68989),g=n(51080),y=n(29413),b=n(61905),_=n(15721),E=[f.TerminalShellType.powershell,f.TerminalShellType.powershellCore,f.TerminalShellType.bash,f.TerminalShellType.zsh,f.TerminalShellType.fish];let S=class{constructor(e,t,n){this.terminalManager=e,this.interpreterService=t,this.terminalHelper=n,this.envVarScript=l.join(d._SCRIPTS_DIR,"printEnvVariablesToFile.py")}async initializeScriptParams(e){const t=this.getLocation(e);if(!t)return;const n=(0,h.identifyShellFromShellPath)(e),r=this.terminalManager.createTerminal({name:`Python ${n} Deactivate`,shellPath:e,hideFromUser:!0,cwd:t}),i=this.interpreterService.getInterpreters().filter((e=>!e.type)),o=l.join(t,"envVars.txt"),s=i.length>0&&i[0]?i[0].path:"python",a=new g.StopWatch,c=this.terminalHelper.buildCommandForTerminal(n,s,[this.envVarScript,o]);r.sendText(c),await(0,v.waitForCondition)((()=>(0,p.pathExists)(o)),3e4,`"${o}" file not created`),(0,b.traceVerbose)(`Time taken to get env vars using terminal is ${a.elapsedTime}ms`)}async getScriptLocation(e,t){const n=await this.interpreterService.getActiveInterpreter(t);if((null==n?void 0:n.type)===_.PythonEnvType.Virtual)return this.getLocation(e)}getLocation(e){const t=(0,h.identifyShellFromShellPath)(e);if(E.includes(t))return l.join(d._SCRIPTS_DIR,"deactivate",this.getShellFolderName(t))}getShellFolderName(e){switch(e){case f.TerminalShellType.powershell:case f.TerminalShellType.powershellCore:return"powershell";case f.TerminalShellType.fish:return"fish";case f.TerminalShellType.zsh:return"zsh";case f.TerminalShellType.bash:return"bash";default:throw new Error(`Unsupported shell type ${e}`)}}};t.TerminalDeactivateService=S,o([(0,m.cache)(-1,!0)],S.prototype,"initializeScriptParams",null),t.TerminalDeactivateService=S=o([(0,c.injectable)(),a(0,(0,c.inject)(u.ITerminalManager)),a(1,(0,c.inject)(y.IInterpreterService)),a(2,(0,c.inject)(f.ITerminalHelper))],S)},97938:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalIndicatorPrompt=t.terminalEnvCollectionPromptKey=void 0;const c=n(25891),l=n(54980),u=s(n(16928)),p=n(54661),d=n(86156),h=n(14152),f=n(8103),v=n(29413),m=n(52060),g=n(7855),y=n(552),b=n(15721),_=n(36380);t.terminalEnvCollectionPromptKey="TERMINAL_ENV_COLLECTION_PROMPT_KEY";let E=class{constructor(e,t,n,r,i,o,s,a,c){this.appShell=e,this.persistentStateFactory=t,this.terminalManager=n,this.disposableRegistry=r,this.activeResourceService=i,this.terminalEnvVarCollectionService=o,this.configurationService=s,this.interpreterService=a,this.experimentService=c,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!1}}async activate(){(0,f.inTerminalEnvVarExperiment)(this.experimentService)&&!(0,_.useEnvExtension)()&&((0,y.isTestExecution)()||await(0,g.sleep)(6e3),this.disposableRegistry.push(this.terminalManager.onDidOpenTerminal((async e=>{const t="hideFromUser"in e.creationOptions&&e.creationOptions.hideFromUser,n="strictEnv"in e.creationOptions&&e.creationOptions.strictEnv;if(t||n||e.creationOptions.name)return;const r="cwd"in e.creationOptions&&e.creationOptions.cwd?e.creationOptions.cwd:this.activeResourceService.getActiveResource(),i="string"==typeof r?l.Uri.file(r):r;this.configurationService.getSettings(i).terminal.activateEnvironment&&(this.terminalEnvVarCollectionService.isTerminalPromptSetCorrectly(i)||await this.notifyUsers(i))}))))}async notifyUsers(e){const n=this.persistentStateFactory.createGlobalPersistentState(t.terminalEnvCollectionPromptKey,!0);if(!n.value)return;const r=[h.Common.doNotShowAgain],i=await this.interpreterService.getActiveInterpreter(e);if(!i||!i.type)return;const o=function(e){return e.envName?`"(${e.envName})"`:e.envPath?`"(${u.basename(e.envPath)})"`:"environment indicator"}(i),s=i.type===b.PythonEnvType.Conda?"Selected conda":"Python virtual",a=await this.appShell.showInformationMessage(h.Interpreters.terminalEnvVarCollectionPrompt.format(s,o),...r);a&&a===r[0]&&await n.updateValue(!1)}};t.TerminalIndicatorPrompt=E,t.TerminalIndicatorPrompt=E=o([(0,c.injectable)(),a(0,(0,c.inject)(p.IApplicationShell)),a(1,(0,c.inject)(d.IPersistentStateFactory)),a(2,(0,c.inject)(p.ITerminalManager)),a(3,(0,c.inject)(d.IDisposableRegistry)),a(4,(0,c.inject)(p.IActiveResourceService)),a(5,(0,c.inject)(m.ITerminalEnvVarCollectionService)),a(6,(0,c.inject)(d.IConfigurationService)),a(7,(0,c.inject)(v.IInterpreterService)),a(8,(0,c.inject)(d.IExperimentService))],E)},3062:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalEnvVarCollectionService=void 0;const c=s(n(16928)),l=n(25891),u=n(54980),p=n(25943),d=n(54661),h=n(8103),f=n(22408),v=n(18065),m=n(86156),g=n(14152),y=n(61905),b=n(29413),_=n(15656),E=n(67714),S=n(25297),w=n(62982),P=n(53694),T=n(23935),C=n(48112),x=n(15721),I=n(52060),O=n(69922),R=n(36380),D=n(5274);let k=class{constructor(e,t,n,r,i,o,s,a,c,l,u,p,d,h){this.platform=e,this.interpreterService=t,this.context=n,this.shell=r,this.experimentService=i,this.applicationEnvironment=o,this.disposables=s,this.environmentActivationService=a,this.workspaceService=c,this.configurationService=l,this.terminalDeactivateService=u,this.pathUtils=p,this.shellIntegrationDetectionService=d,this.environmentVariablesProvider=h,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!1},this.noPromptVariableShells=[T.TerminalShellType.powershell,T.TerminalShellType.powershellCore,T.TerminalShellType.fish],this.registeredOnce=!1,this.isPromptSet=new Map,this.separator=e.osType===C.OSType.Windows?";":":",this.progressService=new O.ProgressService(this.shell)}async activate(e){try{if((0,R.useEnvExtension)())return(0,y.traceVerbose)("Ignoring environment variable experiment since env extension is being used"),this.context.environmentVariableCollection.clear(),void await(0,D.registerPythonStartup)(this.context);if(!(0,h.inTerminalEnvVarExperiment)(this.experimentService))return this.context.environmentVariableCollection.clear(),await this.handleMicroVenv(e),this.registeredOnce||(this.interpreterService.onDidChangeInterpreter((async e=>{await this.handleMicroVenv(e)}),this,this.disposables),this.registeredOnce=!0),void await(0,D.registerPythonStartup)(this.context);if(!this.registeredOnce){this.interpreterService.onDidChangeInterpreter((async e=>{await this._applyCollection(e).ignoreErrors()}),this,this.disposables),this.shellIntegrationDetectionService.onDidChangeStatus((async()=>{(0,y.traceInfo)("Shell integration status changed, can confirm it's working."),await this._applyCollection(void 0).ignoreErrors()}),this,this.disposables),this.environmentVariablesProvider.onDidEnvironmentVariablesChange((async e=>{await this._applyCollection(e).ignoreErrors()}),this,this.disposables),this.applicationEnvironment.onDidChangeShell((async e=>{this.processEnvVars=void 0,await this._applyCollection(void 0,e).ignoreErrors()}),this,this.disposables);const{shell:e}=this.applicationEnvironment,t=await this.shellIntegrationDetectionService.isWorking(),n=(0,v.identifyShellFromShellPath)(e);t||n===T.TerminalShellType.commandPrompt||(0,y.traceWarn)("Shell integration may not be active, environment activated may be overridden by the shell."),this.registeredOnce=!0}this._applyCollection(e).ignoreErrors()}catch(e){(0,y.traceError)("Activating terminal env collection failed",e)}}async _applyCollection(e,t){this.progressService.showProgress({location:u.ProgressLocation.Window,title:g.Interpreters.activatingTerminals}),await this._applyCollectionImpl(e,t).catch((e=>((0,y.traceError)("Failed to apply terminal env vars",t,e),Promise.reject(e)))),this.progressService.hideProgress()}async _applyCollectionImpl(e,t=this.applicationEnvironment.shell){const n=this.getWorkspaceFolder(e),r=this.configurationService.getSettings(e),i=this.getEnvironmentVariableCollection({workspaceFolder:n});if((0,R.useEnvExtension)())return i.clear(),void(0,y.traceVerbose)("Do not activate terminal env vars as env extension is being used");if(!r.terminal.activateEnvironment)return i.clear(),void(0,y.traceVerbose)("Activating environments in terminal is disabled for",null==e?void 0:e.fsPath);const o=await this.environmentActivationService.getActivatedEnvironmentVariables(e,void 0,void 0,t),s=o?N(o):void 0;if((0,y.traceVerbose)(`Activated environment variables for ${null==e?void 0:e.fsPath}`,s),!s){const n=(0,v.identifyShellFromShellPath)(t),r=_.defaultShells[this.platform.osType];return(null==r?void 0:r.shellType)!==n?void await this._applyCollectionImpl(e,null==r?void 0:r.shell):(await this.trackTerminalPrompt(t,e,s),i.clear(),void(this.processEnvVars=void 0))}this.processEnvVars||(this.processEnvVars=await this.environmentActivationService.getProcessEnvironmentVariables(e,t));const a=N(this.processEnvVars);s.PS1=await this.getPS1(t,e,s);const c=await this.getPrependOptions();i.clear();const l=await this.terminalDeactivateService.getScriptLocation(t,e);Object.keys(s).forEach((e=>{var t;if(function(e){return["_","SHLVL","PYTHONUTF8","_OLD_VIRTUAL_PATH","PWD"].includes(e)}(e))return;let n=s[e];if(a[e]!==n&&void 0!==n){if("PS1"===e)return(0,y.traceLog)(`Prepending environment variable ${e} in collection with ${n} ${JSON.stringify(c)}`),void i.prepend(e,n,c);if("PATH"===e){const r={applyAtShellIntegration:!0,applyAtProcessCreation:!0};return void(a.PATH&&(null===(t=s.PATH)||void 0===t?void 0:t.endsWith(a.PATH))?(n=s.PATH.slice(0,-a.PATH.length),l&&(n=`${l}${this.separator}${n}`),(0,y.traceLog)(`Prepending environment variable ${e} in collection with ${n} ${JSON.stringify(r)}`),i.prepend(e,n,r)):(n.endsWith(this.separator)||(n=n.concat(this.separator)),l&&(n=`${l}${this.separator}${n}`),(0,y.traceLog)(`Prepending environment variable ${e} in collection to ${n} ${JSON.stringify(r)}`),i.prepend(e,n,r)))}const r={applyAtShellIntegration:!0,applyAtProcessCreation:!0};(0,y.traceLog)(`Setting environment variable ${e} in collection to ${n} ${JSON.stringify(r)}`),i.replace(e,n,r)}}));const p=this.pathUtils.getDisplayName(r.pythonPath,null==n?void 0:n.uri.fsPath),d=new u.MarkdownString(`${g.Interpreters.activateTerminalDescription} \`${p}\``);i.description=d,await this.trackTerminalPrompt(t,e,s),await this.terminalDeactivateService.initializeScriptParams(t).catch((e=>{(0,y.traceError)("Failed to initialize deactivate script",t,e)}))}isTerminalPromptSetCorrectly(e){const t=this.getWorkspaceFolder(e);return!!this.isPromptSet.get(null==t?void 0:t.index)}terminalPromptIsCorrect(e){var t;const n=null===(t=this.getWorkspaceFolder(e))||void 0===t?void 0:t.index;this.isPromptSet.set(n,!0)}terminalPromptIsUnknown(e){var t;const n=null===(t=this.getWorkspaceFolder(e))||void 0===t?void 0:t.index;this.isPromptSet.delete(n)}async trackTerminalPrompt(e,t,n){if(this.terminalPromptIsUnknown(t),!n)return void this.terminalPromptIsCorrect(t);const r=(0,v.identifyShellFromShellPath)(e);if(!this.noPromptVariableShells.includes(r)){if(this.platform.osType!==C.OSType.Windows){const e=await this.interpreterService.getActiveInterpreter(t);if(A(null==e?void 0:e.type,n)&&!n.PS1)return;if(!await this.shellIntegrationDetectionService.isWorking())return void(0,y.traceVerbose)("PS1 is not set when shell integration is disabled.")}this.terminalPromptIsCorrect(t)}}async getPS1(e,t,n){const r=(0,v.identifyShellFromShellPath)(e);if(this.noPromptVariableShells.includes(r))return n.PS1;if(this.platform.osType!==C.OSType.Windows){const e=await this.interpreterService.getActiveInterpreter(t);if(A(null==e?void 0:e.type,n)){const t=function(e,t){if(e){if(e.envName){if("base"===e.envName)return;return e.type===x.PythonEnvType.Virtual&&t.VIRTUAL_ENV_PROMPT?`${t.VIRTUAL_ENV_PROMPT}`:`(${e.envName}) `}return e.envPath?`(${c.basename(e.envPath)}) `:void 0}}(e,n);if(t)return t}}return n.PS1?n.PS1:void 0}async handleMicroVenv(e){try{const t=this.configurationService.getSettings(e),n=this.getWorkspaceFolder(e);if((0,R.useEnvExtension)())return this.getEnvironmentVariableCollection({workspaceFolder:n}).clear(),void(0,y.traceVerbose)("Do not activate microvenv as env extension is being used");if(!t.terminal.activateEnvironment)return this.getEnvironmentVariableCollection({workspaceFolder:n}).clear(),void(0,y.traceVerbose)("Do not activate microvenv as activating environments in terminal is disabled for",null==e?void 0:e.fsPath);const r=await this.interpreterService.getActiveInterpreter(e);if((null==r?void 0:r.envType)===S.EnvironmentType.Venv){const e=c.join(c.dirname(r.path),"activate");if(!await(0,p.pathExists)(e)){const e=this.getEnvironmentVariableCollection({workspaceFolder:n}),t=(0,w.getSearchPathEnvVarNames)()[0];return void e.replace("PATH",`${c.dirname(r.path)}${c.delimiter}${process.env[t]}`,{applyAtShellIntegration:!0,applyAtProcessCreation:!0})}this.getEnvironmentVariableCollection({workspaceFolder:n}).clear()}}catch(e){(0,y.traceWarn)("Microvenv failed as it is using proposed API which is constantly changing",e)}}async getPrependOptions(){return await this.shellIntegrationDetectionService.isWorking()?{applyAtShellIntegration:!0,applyAtProcessCreation:!1}:{applyAtShellIntegration:!0,applyAtProcessCreation:!0}}getEnvironmentVariableCollection(e={}){return this.context.environmentVariableCollection.getScoped(e)}getWorkspaceFolder(e){let t=this.workspaceService.getWorkspaceFolder(e);return!t&&Array.isArray(this.workspaceService.workspaceFolders)&&this.workspaceService.workspaceFolders.length>0&&([t]=this.workspaceService.workspaceFolders),t}};function A(e,t){if(t.PS1)return!0;if(e===x.PythonEnvType.Virtual){const e=t.VIRTUAL_ENV_DISABLE_PROMPT;return!(e&&void 0!==e)}if(e===x.PythonEnvType.Conda){const e=t.CONDA_PROMPT_MODIFIER;return!(!e||""===e)}return!1}function N(e){const t={};return Object.keys(e).forEach((n=>{t[(0,p.normCase)(n)]=e[n]})),t}t.TerminalEnvVarCollectionService=k,t.TerminalEnvVarCollectionService=k=o([(0,l.injectable)(),a(0,(0,l.inject)(f.IPlatformService)),a(1,(0,l.inject)(b.IInterpreterService)),a(2,(0,l.inject)(m.IExtensionContext)),a(3,(0,l.inject)(d.IApplicationShell)),a(4,(0,l.inject)(m.IExperimentService)),a(5,(0,l.inject)(d.IApplicationEnvironment)),a(6,(0,l.inject)(m.IDisposableRegistry)),a(7,(0,l.inject)(E.IEnvironmentActivationService)),a(8,(0,l.inject)(d.IWorkspaceService)),a(9,(0,l.inject)(m.IConfigurationService)),a(10,(0,l.inject)(I.ITerminalDeactivateService)),a(11,(0,l.inject)(m.IPathUtils)),a(12,(0,l.inject)(I.IShellIntegrationDetectionService)),a(13,(0,l.inject)(P.IEnvironmentVariablesProvider))],k)},12330:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShellIntegrationDetectionService=t.isShellIntegrationWorking=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(18065),l=n(23935),u=n(86156),p=n(7855),d=n(61905),h=n(8841),f=[l.TerminalShellType.powershell,l.TerminalShellType.powershellCore,l.TerminalShellType.bash,l.TerminalShellType.zsh,l.TerminalShellType.fish];var v;!function(e){e.key="SHELL_INTEGRATION_WORKING_KEY"}(v||(t.isShellIntegrationWorking=v={}));let m=class{constructor(e,t,n,r,i,o){this.terminalManager=e,this.appShell=t,this.workspaceService=n,this.persistentStateFactory=r,this.appEnvironment=i,this.disposables=o,this.isWorkingForShell=new Set,this.didChange=new s.EventEmitter,this.isDataWriteEventWorking=!0,this.onDidChangeStatus=this.didChange.event;try{const e=(0,c.identifyShellFromShellPath)(this.appEnvironment.shell),t=g(e);this.persistentStateFactory.createGlobalPersistentState(t).value&&this.isWorkingForShell.add(e),this.appShell.onDidWriteTerminalData((e=>{if(e.data.includes("]633;A")||e.data.includes("]133;A")){let{shell:t}=this.appEnvironment;"shellPath"in e.terminal.creationOptions&&e.terminal.creationOptions.shellPath&&(t=e.terminal.creationOptions.shellPath);const n=(0,c.identifyShellFromShellPath)(t);(0,d.traceVerbose)("Received shell integration sequence for",n);const r=this.isWorkingForShell.has(n);this.isWorkingForShell.add(n),r||this.didChange.fire()}}),this,this.disposables),this.appEnvironment.onDidChangeShell((async e=>{this.createDummyHiddenTerminal(e)}),this,this.disposables),this.createDummyHiddenTerminal(this.appEnvironment.shell)}catch(e){this.isDataWriteEventWorking=!1,(0,d.traceError)("Unable to check if shell integration is active",e)}this.workspaceService.getConfiguration("terminal").get("integrated.shellIntegration.enabled")||(0,d.traceVerbose)("Shell integration is disabled in user settings.")}async isWorking(){const{shell:e}=this.appEnvironment;return this._isWorking(e).catch((t=>((0,d.traceError)("Failed to determine if shell supports shell integration",e,t),!1)))}async _isWorking(e){const t=(0,c.identifyShellFromShellPath)(e);if(!f.includes(t))return!1;const n=g(t),r=this.persistentStateFactory.createGlobalPersistentState(n);if(void 0!==r.value)return r.value;const i=await this.useDataWriteApproach(t);return i&&await r.updateValue(i),i}async useDataWriteApproach(e){return!this.isDataWriteEventWorking||e===l.TerminalShellType.powershell||e===l.TerminalShellType.powershellCore||(this.isWorkingForShell.has(e)||await(0,p.sleep)(1e3),(0,d.traceVerbose)("Did we determine shell integration to be working for",e,"?",this.isWorkingForShell.has(e)),this.isWorkingForShell.has(e))}createDummyHiddenTerminal(e){(0,h.isTrusted)()&&this.terminalManager.createTerminal({shellPath:e,hideFromUser:!0})}};function g(e){return`${v.key}_${e}`}t.ShellIntegrationDetectionService=m,t.ShellIntegrationDetectionService=m=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ITerminalManager)),i(1,(0,o.inject)(a.IApplicationShell)),i(2,(0,o.inject)(a.IWorkspaceService)),i(3,(0,o.inject)(u.IPersistentStateFactory)),i(4,(0,o.inject)(a.IApplicationEnvironment)),i(5,(0,o.inject)(u.IDisposableRegistry))],m)},5274:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.registerPythonStartup=void 0;const s=n(54980),a=o(n(16928)),c=n(8841),l=n(84090);async function u(e){if((0,c.getConfiguration)("python").get("terminal.shellIntegration.enabled")){const t=e.storageUri||e.globalStorageUri;try{await(0,c.createDirectory)(t)}catch(e){}const n=s.Uri.joinPath(t,"pythonrc.py"),r=a.join(l.EXTENSION_ROOT_DIR,"python_files","pythonrc.py");await(0,c.copy)(s.Uri.file(r),n,{overwrite:!0}),e.environmentVariableCollection.replace("PYTHONSTARTUP",n.fsPath),e.environmentVariableCollection.replace("PYTHON_BASIC_REPL","1")}else e.environmentVariableCollection.delete("PYTHONSTARTUP"),e.environmentVariableCollection.delete("PYTHON_BASIC_REPL")}t.registerPythonStartup=async function(e){await u(e),e.subscriptions.push((0,c.onDidChangeConfiguration)((async t=>{t.affectsConfiguration("python.terminal.shellIntegration.enabled")&&await u(e)})))}},83295:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerCustomTerminalLinkProvider=t.CustomTerminalLinkProvider=void 0;const r=n(93029),i=n(85784),o=n(14152);class s{provideTerminalLinks(e,t){const n=[];let r;return r="darwin"===process.platform?"Cmd click to launch VS Code Native REPL":"Ctrl click to launch VS Code Native REPL",e.line.includes(r)&&n.push({startIndex:e.line.indexOf(r),length:r.length,tooltip:o.Repl.launchNativeRepl,command:"python.startNativeREPL"}),n}async handleTerminalLink(e){await(0,r.executeCommand)(e.command)}}t.CustomTerminalLinkProvider=s,t.registerCustomTerminalLinkProvider=function(e){e.push((0,i.registerTerminalLinkProvider)(new s))}},95609:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(43333),i=n(96943),o=n(83887),s=n(39031),a=n(50226),c=n(90286),l=n(52060),u=n(3062),p=n(11925),d=n(97938),h=n(83328),f=n(12330);t.registerTypes=function(e){e.addSingleton(l.ICodeExecutionHelper,s.CodeExecutionHelper),e.addSingleton(l.ICodeExecutionManager,i.CodeExecutionManager),e.addSingleton(l.ICodeExecutionService,o.DjangoShellCodeExecutionProvider,"djangoShell"),e.addSingleton(l.ICodeExecutionService,c.TerminalCodeExecutionProvider,"standard"),e.addSingleton(l.ICodeExecutionService,a.ReplProvider,"repl"),e.addSingleton(l.ITerminalAutoActivation,r.TerminalAutoActivation),e.addSingleton(l.ITerminalEnvVarCollectionService,u.TerminalEnvVarCollectionService),e.addSingleton(l.ITerminalDeactivateService,h.TerminalDeactivateService),e.addSingleton(p.IExtensionSingleActivationService,d.TerminalIndicatorPrompt),e.addSingleton(l.IShellIntegrationDetectionService,f.ShellIntegrationDetectionService),e.addBinding(l.ITerminalEnvVarCollectionService,p.IExtensionActivationService)}},52060:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPythonStartupEnvVarService=t.ITerminalDeactivateService=t.IShellIntegrationDetectionService=t.ITerminalEnvVarCollectionService=t.ITerminalAutoActivation=t.ICodeExecutionManager=t.ICodeExecutionHelper=t.ICodeExecutionService=void 0,t.ICodeExecutionService=Symbol("ICodeExecutionService"),t.ICodeExecutionHelper=Symbol("ICodeExecutionHelper"),t.ICodeExecutionManager=Symbol("ICodeExecutionManager"),t.ITerminalAutoActivation=Symbol("ITerminalAutoActivation"),t.ITerminalEnvVarCollectionService=Symbol("ITerminalEnvVarCollectionService"),t.IShellIntegrationDetectionService=Symbol("IShellIntegrationDetectionService"),t.ITerminalDeactivateService=Symbol("ITerminalDeactivateService"),t.IPythonStartupEnvVarService=Symbol("IPythonStartupEnvVarService")},20504:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferedTestConfigSettingsService=void 0,t.BufferedTestConfigSettingsService=class{constructor(){this.ops=[]}async updateTestArgs(e,t,n){return this.ops.push(["updateTestArgs",e,t,n]),Promise.resolve()}async enable(e,t){return this.ops.push(["enable",e,t,[]]),Promise.resolve()}async disable(e,t){return this.ops.push(["disable",e,t,[]]),Promise.resolve()}async apply(e){const{ops:t}=this;this.ops=[];for(const[n,r,i,o]of t)switch(n){case"updateTestArgs":await e.updateTestArgs(r,i,o);break;case"enable":await e.enable(r,i);break;case"disable":await e.disable(r,i)}return Promise.resolve()}getTestEnablingSetting(e){throw new Error("Method not implemented.")}}},96279:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestConfigSettingsService=void 0;const o=n(25891),s=n(54980),a=n(54661),c=n(86156),l=n(9100);let u=class{constructor(e){this.workspaceService=e.get(a.IWorkspaceService)}async updateTestArgs(e,t,n){const r=this.getTestArgSetting(t);return this.updateSetting(e,r,n)}async enable(e,t){const n=this.getTestEnablingSetting(t);return this.updateSetting(e,n,!0)}async disable(e,t){const n=this.getTestEnablingSetting(t);return this.updateSetting(e,n,!1)}getTestEnablingSetting(e){switch(e){case c.Product.unittest:return"testing.unittestEnabled";case c.Product.pytest:return"testing.pytestEnabled";default:throw new Error("Invalid Test Product")}}getTestArgSetting(e){switch(e){case c.Product.unittest:return"testing.unittestArgs";case c.Product.pytest:return"testing.pytestArgs";default:throw new Error("Invalid Test Product")}}async updateSetting(e,t,n){var r;let i;const o="string"==typeof e?s.Uri.file(e):e;if(((null===(r=this.workspaceService.workspaceFolders)||void 0===r?void 0:r.length)||0)>0)if(1===this.workspaceService.workspaceFolders.length)i=this.workspaceService.getConfiguration("python",this.workspaceService.workspaceFolders[0].uri);else{const t=this.workspaceService.getWorkspaceFolder(o);if(!t)throw new Error(`Test directory does not belong to any workspace (${e})`);i=this.workspaceService.getConfiguration("python",t.uri)}else i=this.workspaceService.getConfiguration("python");return i.update(t,n)}};t.TestConfigSettingsService=u,t.TestConfigSettingsService=u=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IServiceContainer))],u)},77329:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNITTEST_PROVIDER=t.PYTEST_PROVIDER=t.UNIT_TEST_PRODUCTS=void 0;const r=n(86156);t.UNIT_TEST_PRODUCTS=[r.Product.pytest,r.Product.unittest],t.PYTEST_PROVIDER="pytest",t.UNITTEST_PROVIDER="unittest"},46099:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugLauncher=void 0;const l=n(25891),u=a(n(16928)),p=n(54980),d=n(54661),h=n(552),f=a(n(8370)),v=n(86156),m=n(54786),g=n(2769),y=n(59858),b=n(9100),_=n(61905),E=n(21114),S=n(8841),w=n(85784),P=n(7855),T=n(73873);let C=r=class{constructor(e,t){this.serviceContainer=e,this.launchResolver=t,this.configService=this.serviceContainer.get(v.IConfigurationService)}async launchDebugger(e,t,n){var i;const o=(0,P.createDeferred)();let s=!1;if(e.token&&e.token.isCancellationRequested)return void(s=!0);null===(i=e.token)||void 0===i||i.onCancellationRequested((()=>{o.resolve(),null==t||t(),s=!0}));const a=r.resolveWorkspaceFolder(e.cwd),c=await this.getLaunchArgs(e,a,this.configService.getSettings(a.uri)),l=this.serviceContainer.get(d.IDebugService);let u;return l.startDebugging(a,c,n).then((()=>{u=l.activeDebugSession})),l.onDidTerminateDebugSession((e=>{(0,_.traceVerbose)(`Debug session terminated. sessionId: ${e.id}`),s||void 0===u||e.id!==(null==u?void 0:u.id)||(o.resolve(),null==t||t())})),o.promise}static resolveWorkspaceFolder(e){var t;if(!(((null===(t=(0,S.getWorkspaceFolders)())||void 0===t?void 0:t.length)||0)>0))throw new Error("Please open a workspace");const n=e?p.Uri.file(e):void 0;let r=(0,S.getWorkspaceFolder)(n);if(!r){const[e]=(0,S.getWorkspaceFolders)();r=e}return r}async getLaunchArgs(e,t,n){let i=await r.readDebugConfig(t);return i||(i={name:"Debug Unit Test",type:"debugpy",request:"test",subProcess:!0}),i.rules||(i.rules=[]),i.rules.push({path:u.join(h.EXTENSION_ROOT_DIR,"python_files"),include:!1}),r.applyDefaults(i,t,n),this.convertConfigToArgs(i,t,e)}async readAllDebugConfigs(e){try{return await(0,E.getConfigurationsForWorkspace)(e)}catch(e){(0,_.traceError)("could not get debug config",e);const t=this.serviceContainer.get(d.IApplicationShell);return await t.showErrorMessage(p.l10n.t("Could not load unit test config from launch.json as it is missing a field")),[]}}static async readDebugConfig(e){var t;try{const n=await(0,E.getConfigurationsForWorkspace)(e);for(const e of n)if(e.name&&(e.type===m.DebuggerTypeName||e.type===m.PythonDebuggerTypeName)&&("test"===e.request||(null===(t=e.purpose)||void 0===t?void 0:t.includes(y.DebugPurpose.DebugTest))))return e;return}catch(e){return(0,_.traceError)("could not get debug config",e),void await(0,w.showErrorMessage)(p.l10n.t("Could not load unit test config from launch.json as it is missing a field"))}}static applyDefaults(e,t,n){e.console||(e.console="internalConsole"),e.cwd||(e.cwd=n.testing.cwd||t.uri.fsPath),e.env||(e.env={}),e.envFile||(e.envFile=n.envFile),void 0===e.stopOnEntry&&(e.stopOnEntry=!1),e.showReturnValue=!1!==e.showReturnValue,void 0===e.redirectOutput&&(e.redirectOutput=!0),void 0===e.debugStdLib&&(e.debugStdLib=!1),void 0===e.subProcess&&(e.subProcess=!0)}async convertConfigToArgs(e,t,n){const i=e,o="unittest"===n.testProvider?n.args.filter((e=>"--debug"!==e)):n.args,s=r.getTestLauncherScript(n.testProvider)(o),[a]=s;i.program=a,i.args=s.slice(1);let c=await this.launchResolver.resolveDebugConfiguration(t,i,n.token);if(!c)throw Error(`Invalid debug config "${e.name}"`);if(c=await this.launchResolver.resolveDebugConfigurationWithSubstitutedVariables(t,c,n.token),!c)throw Error(`Invalid debug config "${e.name}"`);if(c.request="launch",!n.pytestPort||!n.runTestIdsPort)throw Error(`Missing value for debug setup, both port and uuid need to be defined. port: "${n.pytestPort}" uuid: "${n.pytestUUID}"`);c.env={...c.env,TEST_RUN_PIPE:n.pytestPort,RUN_TEST_IDS_PIPE:n.runTestIdsPort};const l=u.join(h.EXTENSION_ROOT_DIR,"python_files");if(c.env){const e=[l];c.cwd?e.push(c.cwd):n.cwd&&e.push(n.cwd),(0,T.addPathToPythonpath)(e,c.env.PYTHONPATH)}return c.purpose=[],c}static getTestLauncherScript(e){switch(e){case"unittest":return f.execution_py_testlauncher;case"pytest":return f.pytestlauncher;default:throw new Error(`Unknown test provider '${e}'`)}}};t.DebugLauncher=C,t.DebugLauncher=C=r=s([(0,l.injectable)(),c(0,(0,l.inject)(b.IServiceContainer)),c(1,(0,l.inject)(g.IDebugConfigurationResolver)),c(1,(0,l.named)("launch"))],C)},73873:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.addPathToPythonpath=void 0;const s=o(n(16928));t.addPathToPythonpath=function(e,t){let n;return n=t?t.split(s.delimiter):[],n=n.map((e=>s.normalize(e))),e.forEach((e=>{const t=s.normalize(e);n.includes(t)||n.push(t)})),n.join(s.delimiter)}},72003:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TestConfigurationManager=void 0;const s=o(n(16928)),a=n(54661),c=n(22408),l=n(86156),u=n(7855),p=n(61905),d=n(77329),h=n(23365);function f(){throw(0,p.traceVerbose)("testing configuration (in UI) cancelled"),Error("cancelled")}t.TestConfigurationManager=class{constructor(e,t,n,r){this.workspace=e,this.product=t,this.serviceContainer=n,this.handleCancelled=f,this.installer=n.get(l.IInstaller),this.testConfigSettingsService=r||n.get(h.ITestConfigSettingsService)}async enable(){await Promise.all(d.UNIT_TEST_PRODUCTS.filter((e=>e!==this.product)).map((e=>this.testConfigSettingsService.disable(this.workspace,e)))),await this.testConfigSettingsService.enable(this.workspace,this.product)}async disable(){return this.testConfigSettingsService.enable(this.workspace,this.product)}selectTestDir(e,t,n=[]){let r=t.map((t=>{const n=s.relative(e,t);if(0!==n.indexOf("."))return{label:n,description:""}})).filter((e=>void 0!==e)).map((e=>e));return r=[{label:".",description:"Root directory"},...r],r=n.concat(r),this.showQuickPick(r,{ignoreFocusOut:!0,matchOnDescription:!0,matchOnDetail:!0,placeHolder:"Select the directory containing the tests"})}selectTestFilePattern(){return this.showQuickPick([{label:"*test.py",description:"Python files ending with 'test'"},{label:"*_test.py",description:"Python files ending with '_test'"},{label:"test*.py",description:"Python files beginning with 'test'"},{label:"test_*.py",description:"Python files beginning with 'test_'"},{label:"*test*.py",description:"Python files containing the word 'test'"}],{ignoreFocusOut:!0,matchOnDescription:!0,matchOnDetail:!0,placeHolder:"Select the pattern to identify test files"})}getTestDirs(e){return this.serviceContainer.get(c.IFileSystem).getSubDirectories(e).then((e=>{e.sort();const t=e.filter((e=>e.match(/test/i))),n=e.filter((e=>-1===t.indexOf(e)));return t.push(...n),t}))}showQuickPick(e,t){const n=(0,u.createDeferred)();return this.serviceContainer.get(a.IApplicationShell).showQuickPick(e,t).then((e=>{e?n.resolve(e.label):this.handleCancelled()})),n.promise}}},84349:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TestsHelper=t.selectTestWorkspace=void 0;const i=n(25891),o=n(54980),s=n(86156);t.selectTestWorkspace=async function(e){if(Array.isArray(o.workspace.workspaceFolders)&&0!==o.workspace.workspaceFolders.length){if(1===o.workspace.workspaceFolders.length)return o.workspace.workspaceFolders[0].uri;{const t=await e.showWorkspaceFolderPick({placeHolder:"Select a workspace"});return t?t.uri:void 0}}};let a=class{parseProviderName(e){switch(e){case s.Product.pytest:return"pytest";case s.Product.unittest:return"unittest";default:throw new Error(`Unknown Test Product ${e}`)}}parseProduct(e){switch(e){case"pytest":return s.Product.pytest;case"unittest":return s.Product.unittest;default:throw new Error(`Unknown Test Provider ${e}`)}}getSettingsPropertyNames(e){switch(this.parseProviderName(e)){case"pytest":return{argsName:"pytestArgs",pathName:"pytestPath",enabledName:"pytestEnabled"};case"unittest":return{argsName:"unittestArgs",enabledName:"unittestEnabled"};default:throw new Error(`Unknown Test Provider '${e}'`)}}};t.TestsHelper=a,t.TestsHelper=a=r([(0,i.injectable)()],a)},23365:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ITestDebugLauncher=t.ITestConfigurationManagerFactory=t.ITestConfigSettingsService=t.ITestConfigurationService=t.ITestsHelper=t.TestFilter=void 0,function(e){e.removeTests="removeTests",e.discovery="discovery",e.runAll="runAll",e.runSpecific="runSpecific",e.debugAll="debugAll",e.debugSpecific="debugSpecific"}(n||(t.TestFilter=n={})),t.ITestsHelper=Symbol("ITestsHelper"),t.ITestConfigurationService=Symbol("ITestConfigurationService"),t.ITestConfigSettingsService=Symbol("ITestConfigSettingsService"),t.ITestConfigurationManagerFactory=Symbol("ITestConfigurationManagerFactory"),t.ITestDebugLauncher=Symbol("ITestDebugLauncher")},71001:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnitTestConfigurationService=t.NONE_SELECTED=void 0;const o=n(25891),s=n(54661),a=n(86156),c=n(9100),l=n(61905),u=n(51535),p=n(53322),d=n(20504),h=n(23365);t.NONE_SELECTED=Error("none selected");let f=class{constructor(e){this.serviceContainer=e,this.configurationService=e.get(a.IConfigurationService),this.appShell=e.get(s.IApplicationShell),this.workspaceService=e.get(s.IWorkspaceService)}hasConfiguredTests(e){const t=this.configurationService.getSettings(e);return t.testing.pytestEnabled||t.testing.unittestEnabled||!1}async selectTestRunner(e){const t=[{label:"unittest",product:a.Product.unittest,description:"Standard Python test framework",detail:"https://docs.python.org/3/library/unittest.html"},{label:"pytest",product:a.Product.pytest,description:"pytest framework",detail:"http://docs.pytest.org/"}],n={ignoreFocusOut:!0,matchOnDescription:!0,matchOnDetail:!0,placeHolder:e},r=await this.appShell.showQuickPick(t,n);return r?r.product:void 0}async enableTest(e,t){const n=this.serviceContainer.get(h.ITestConfigurationManagerFactory).create(e,t);return this._enableTest(e,n)}async promptToEnableAndConfigureTestFramework(e){await this._promptToEnableAndConfigureTestFramework(e,void 0,!1,"commandpalette")}_enableTest(e,t){const n=this.workspaceService.getConfiguration("python",e);return n.get("testing.promptToConfigure")?t.enable():n.update("testing.promptToConfigure",void 0).then((()=>t.enable()),(e=>t.enable().then((()=>Promise.reject(e)))))}async _promptToEnableAndConfigureTestFramework(e,n="Select a test framework/tool to enable",r=!1,i="ui"){const o={trigger:i,failed:!1};try{const i=await this.selectTestRunner(n);if("number"!=typeof i)throw t.NONE_SELECTED;const s=this.serviceContainer.get(h.ITestsHelper);o.tool=s.parseProviderName(i);const a=new d.BufferedTestConfigSettingsService,c=this.serviceContainer.get(h.ITestConfigurationManagerFactory).create(e,i,a);r?await c.enable():await c.configure(e).then((()=>this._enableTest(e,c))).catch((t=>this._enableTest(e,c).then((()=>Promise.reject(t)))));const u=this.serviceContainer.get(h.ITestConfigSettingsService);try{await a.apply(u)}catch(e){(0,l.traceError)("Python Extension: applying unit test config updates",e),o.failed=!0}}finally{(0,u.sendTelemetryEvent)(p.EventName.UNITTEST_CONFIGURING,void 0,o)}}};t.UnitTestConfigurationService=f,t.UnitTestConfigurationService=f=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer))],f)},2592:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationManager=void 0;const s=o(n(16928)),a=n(22408),c=n(86156),l=n(54661),u=n(72003),p=n(26734),d=n(61905);class h extends u.TestConfigurationManager{constructor(e,t,n){super(e,c.Product.pytest,t,n);const r=t.get(l.IApplicationShell);this.pytestInstallationHelper=new p.PytestInstallationHelper(r)}async requiresUserToConfigure(e){const t=await this.getConfigFiles(e.fsPath);return!(t.length>0&&1!==t.length&&"setup.cfg"!==t[0])}async configure(e){const t=[],n="Use existing config file",r=[],i=await this.getConfigFiles(e.fsPath);if(i.length>0&&1!==i.length&&"setup.cfg"!==i[0])return;1===i.length&&"setup.cfg"===i[0]&&r.push({label:n,description:"setup.cfg"});const o=await this.getTestDirs(e.fsPath),s=await this.selectTestDir(e.fsPath,o,r);"string"==typeof s&&s!==n&&t.push(s);const a=await this.installer.isInstalled(c.Product.pytest);if(await this.testConfigSettingsService.updateTestArgs(e.fsPath,c.Product.pytest,t),!a)if(this.pytestInstallationHelper.isEnvExtensionAvailable()){if((0,d.traceInfo)("pytest not installed, prompting user with environment extension integration"),!await this.pytestInstallationHelper.promptToInstallPytest(e))return}else(0,d.traceInfo)("pytest not installed, falling back to traditional installer"),await this.installer.install(c.Product.pytest)}async getConfigFiles(e){const t=this.serviceContainer.get(a.IFileSystem),n=["pytest.ini","tox.ini","setup.cfg"].map((async n=>await t.fileExists(s.join(e,n))?n:""));return(await Promise.all(n)).filter((e=>e.length>0))}}t.ConfigurationManager=h},26734:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PytestInstallationHelper=void 0;const r=n(54980),i=n(61905),o=n(36380),s=n(36380);t.PytestInstallationHelper=class{constructor(e){this.appShell=e}async promptToInstallPytest(e){const t=r.l10n.t("pytest selected but not installed. Would you like to install pytest?"),n=r.l10n.t("Install pytest");return await this.appShell.showInformationMessage(t,{modal:!0},n)===n&&this.installPytest(e)}async installPytest(e){try{return(0,o.useEnvExtension)()?this.installPytestWithEnvExtension(e):((0,i.traceInfo)("Python Environments extension not available, installation cannot proceed via environment extension"),!1)}catch(e){return(0,i.traceError)("Error installing pytest:",e),!1}}async installPytestWithEnvExtension(e){try{const t=await(0,o.getEnvExtApi)(),n=await(0,s.getEnvironment)(e);return n?((0,i.traceInfo)("Installing pytest using Python Environments extension..."),await t.managePackages(n,{install:["pytest"]}),(0,i.traceInfo)("pytest installation completed successfully"),!0):((0,i.traceError)("No Python environment found for workspace:",e.fsPath),await this.appShell.showErrorMessage(r.l10n.t("No Python environment found. Please set up a Python environment first.")),!1)}catch(e){return(0,i.traceError)("Failed to install pytest using Python Environments extension:",e),!1}}isEnvExtensionAvailable(){return(0,o.useEnvExtension)()}}},36451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationManager=void 0;const r=n(86156),i=n(72003);class o extends i.TestConfigurationManager{constructor(e,t,n){super(e,r.Product.unittest,t,n)}async requiresUserToConfigure(e){return!0}async configure(e){const t=["-v"],n=await this.getTestDirs(e.fsPath),i=await this.selectTestDir(e.fsPath,n);t.push("-s"),"string"==typeof i&&"."!==i?t.push(`./${i}`):t.push(".");const o=await this.selectTestFilePattern();t.push("-p"),"string"==typeof o?t.push(o):t.push("test*.py"),await this.testConfigSettingsService.updateTestArgs(e.fsPath,r.Product.unittest,t)}}t.ConfigurationManager=o},90238:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestConfigurationManagerFactory=void 0;const c=n(25891),l=n(86156),u=n(9100),p=s(n(2592)),d=s(n(36451));let h=class{constructor(e){this.serviceContainer=e}create(e,t,n){switch(t){case l.Product.unittest:return new d.ConfigurationManager(e,this.serviceContainer,n);case l.Product.pytest:return new p.ConfigurationManager(e,this.serviceContainer,n);default:throw new Error("Invalid test configuration")}}};t.TestConfigurationManagerFactory=h,t.TestConfigurationManagerFactory=h=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IServiceContainer))],h)},76971:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnitTestManagementService=t.TestingService=void 0;const c=n(25891),l=n(54980),u=n(54661),p=s(n(552));n(87295);const d=n(86156),h=n(29413),f=n(9100),v=n(53322),m=n(51535),g=n(84349),y=n(23365),b=n(86294),_=n(56218),E=n(19419),S=n(64230),w=n(14152),P=n(61905),T=n(50109);let C=class{constructor(e){this.serviceContainer=e}getSettingsPropertyNames(e){return this.serviceContainer.get(y.ITestsHelper).getSettingsPropertyNames(e)}};t.TestingService=C,t.TestingService=C=o([(0,c.injectable)(),a(0,(0,c.inject)(f.IServiceContainer))],C);let x=class{constructor(e){this.serviceContainer=e,this.activatedOnce=!1,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!1},this.testStateMap=new Map,this.disposableRegistry=e.get(d.IDisposableRegistry),this.workspaceService=e.get(u.IWorkspaceService),this.context=this.serviceContainer.get(u.IContextKeyManager),l.tests&&l.tests.createTestController&&(this.testController=e.get(b.ITestController));const t=new _.DelayedTrigger(this.configurationChangeHandler.bind(this),500,"Test Configuration Change");this.configChangeTrigger=t,this.disposableRegistry.push(t)}async activate(){this.activatedOnce||(this.activatedOnce=!0,this.registerHandlers(),this.registerCommands(),l.tests.testResults&&(await this.updateTestUIButtons(),this.disposableRegistry.push(l.tests.onDidChangeTestResults((()=>{this.updateTestUIButtons()})))),this.testController&&(this.testController.onRefreshingStarted((async()=>{await this.context.setContext(E.ExtensionContextKey.RefreshingTests,!0)})),this.testController.onRefreshingCompleted((async()=>{await this.context.setContext(E.ExtensionContextKey.RefreshingTests,!1)})),this.testController.onRunWithoutConfiguration((async e=>{var t;const n=null!==(t=this.workspaceService.workspaceFolders)&&void 0!==t?t:[];if(e.length===n.length){const e=this.serviceContainer.get(u.ICommandManager);await e.executeCommand("workbench.view.testing.focus"),(0,P.traceWarn)("Testing: Run attempted but no test configurations found for any workspace, use command palette to configure tests for python if desired.")}}))))}async updateTestUIButtons(){(0,S.updateTestResultMap)(this.testStateMap,l.tests.testResults);const e=(0,S.checkForFailedTests)(this.testStateMap);await this.context.setContext(E.ExtensionContextKey.HasFailedTests,e)}async configurationChangeHandler(e){var t;const n=(null!==(t=this.workspaceService.workspaceFolders)&&void 0!==t?t:[]).filter((t=>e.affectsConfiguration("python.testing",t.uri))).map((e=>e.uri));await Promise.all(n.map((e=>{var t;return null===(t=this.testController)||void 0===t?void 0:t.refreshTestData(e)})))}async configureTests(e){let t;if(e){const n=this.workspaceService.getWorkspaceFolder(e);t=n?n.uri:void 0}else{const e=this.serviceContainer.get(u.IApplicationShell);t=await(0,g.selectTestWorkspace)(e)}if(!t)return;const n=this.serviceContainer.get(h.IInterpreterService),r=this.serviceContainer.get(u.ICommandManager);if(!await n.getActiveInterpreter(t))return void r.executeCommand(p.Commands.TriggerEnvironmentSelection,t);const i=this.serviceContainer.get(y.ITestConfigurationService);await i.promptToEnableAndConfigureTestFramework(t)}registerCommands(){const e=this.serviceContainer.get(u.ICommandManager);this.disposableRegistry.push(e.registerCommand(p.Commands.Tests_Configure,((e,t=p.CommandSource.commandPalette,n)=>{var r;this.configureTests(n).ignoreErrors(),(0,P.traceVerbose)("Testing: Trigger refresh after config change"),null===(r=this.testController)||void 0===r||r.refreshTestData(n,{forceRefresh:!0})})),e.registerCommand(p.Commands.Tests_CopilotSetup,(e=>{var t;const n=this.workspaceService.getWorkspaceFolder(e)||(null===(t=this.workspaceService.workspaceFolders)||void 0===t?void 0:t.at(0));if(n)return this.serviceContainer.get(y.ITestConfigurationService).hasConfiguredTests(n.uri)?void 0:{message:w.Testing.copilotSetupMessage,command:{title:w.Testing.configureTests,command:p.Commands.Tests_Configure,arguments:[void 0,p.CommandSource.ui,e]}}})),e.registerCommand(p.Commands.CopyTestId,(async e=>{(0,T.writeTestIdToClipboard)(e)})))}registerHandlers(){const e=this.serviceContainer.get(h.IInterpreterService);this.disposableRegistry.push(this.workspaceService.onDidChangeConfiguration((e=>{this.configChangeTrigger.trigger(e)})),e.onDidChangeInterpreter((async()=>{var e;(0,P.traceVerbose)("Testing: Triggered refresh due to interpreter change."),(0,m.sendTelemetryEvent)(v.EventName.UNITTEST_DISCOVERY_TRIGGER,void 0,{trigger:"interpreter"}),await(null===(e=this.testController)||void 0===e?void 0:e.refreshTestData(void 0,{forceRefresh:!0}))})))}};t.UnitTestManagementService=x,o([(0,m.captureTelemetry)(v.EventName.UNITTEST_CONFIGURE,void 0,!1)],x.prototype,"configureTests",null),t.UnitTestManagementService=x=o([(0,c.injectable)(),a(0,(0,c.inject)(f.IServiceContainer))],x)},61516:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(11925),i=n(46099),o=n(96279),s=n(84349),a=n(23365),c=n(71001),l=n(90238),u=n(76971),p=n(89113),d=n(88537);t.registerTypes=function(e){e.addSingleton(a.ITestDebugLauncher,i.DebugLauncher),e.add(a.ITestsHelper,s.TestsHelper),e.addSingleton(a.ITestConfigurationService,c.UnitTestConfigurationService),e.addSingleton(p.ITestingService,u.TestingService),e.addSingleton(a.ITestConfigSettingsService,o.TestConfigSettingsService),e.addSingleton(a.ITestConfigurationManagerFactory,l.TestConfigurationManagerFactory),e.addSingleton(r.IExtensionActivationService,u.UnitTestManagementService),(0,d.registerTestControllerTypes)(e)}},90859:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterArguments=t.getPositionalArguments=void 0;const r=n(61905);t.getPositionalArguments=function(e,t=[],n=[]){const i=[];return e.forEach(((e,o)=>{-1!==n.indexOf(e)?i.push(o):-1!==t.indexOf(e)?(i.push(o),i.push(o+1)):-1!==t.findIndex((t=>e.startsWith(`${t}=`)))?i.push(o):(e.startsWith("-")||e.indexOf("=")>0)&&((0,r.traceWarn)(`Unknown command line option passed into args parser for tests '${e}'. Please report on https://github.com/Microsoft/vscode-python/issues/new`),i.push(o))})),e.filter(((e,t)=>-1===i.indexOf(t)))},t.filterArguments=function(e,t=[],n=[]){let r=-1;return e.filter(((e,i)=>!(r===i||n.indexOf(e)>=0||n.filter((t=>t.endsWith("*")&&e.startsWith(t.slice(0,-1)))).length>0||(t.indexOf(e)>=0?(r=i+1,1):t.filter((t=>e.startsWith(`${t}=`))).length>0||(-1===e.indexOf("=")&&n.filter((t=>t.endsWith("*")&&e.startsWith(t.slice(0,-1)))).length>0?(r=i+1,1):e.indexOf("=")>=0&&n.filter((t=>t.endsWith("*")&&e.startsWith(t.slice(0,-1)))).length>0)))))}},66232:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonResultResolver=void 0;const s=n(54980),a=o(n(39023)),c=n(61905),l=n(14152),u=n(64230),p=n(51535),d=n(53322),h=n(74399),f=n(50442);t.PythonResultResolver=class{constructor(e,t,n){this.workspaceUri=n,this.subTestStats=new Map,this.detailedCoverageMap=new Map,this.testController=e,this.testProvider=t,this.runIdToTestItem=new Map,this.runIdToVSid=new Map,this.vsIdToRunId=new Map}resolveDiscovery(e,t){e&&this._resolveDiscovery(e,t)}_resolveDiscovery(e,t){var n,r;const i=this.workspaceUri.fsPath,o=e;if("error"===o.status){const e="pytest"===this.testProvider?l.Testing.errorPytestDiscovery:l.Testing.errorUnittestDiscovery,{error:t}=o;(0,c.traceError)(e,"for workspace: ",i,"\r\n",null!==(n=null==t?void 0:t.join("\r\n\r\n"))&&void 0!==n?n:"");let p=this.testController.items.get(`DiscoveryError:${i}`);const d=a.format(`${e} ${l.Testing.seePythonOutput}\r\n`,null!==(r=null==t?void 0:t.join("\r\n\r\n"))&&void 0!==r?r:"");if(void 0===p){const e=(0,f.buildErrorNodeOptions)(this.workspaceUri,d,this.testProvider);p=(0,u.createErrorTestItem)(this.testController,e),this.testController.items.add(p)}const h=new s.MarkdownString("[Show output](command:python.viewOutput) to view error logs");h.isTrusted=!0,p.error=h}else this.testController.items.delete(`DiscoveryError:${i}`);(o.tests||null===o.tests)&&(this.runIdToTestItem.clear(),this.runIdToVSid.clear(),this.vsIdToRunId.clear(),(0,f.populateTestTree)(this.testController,o.tests,void 0,this,t)),(0,p.sendTelemetryEvent)(d.EventName.UNITTEST_DISCOVERY_DONE,void 0,{tool:this.testProvider,failed:!1})}resolveExecution(e,t){"coverage"in e?((0,c.traceVerbose)("Coverage data received."),this._resolveCoverage(e,t)):this._resolveExecution(e,t)}_resolveCoverage(e,t){if(void 0!==e.result)for(const[n,r]of Object.entries(e.result)){const e=n,i=r,o=i.lines_covered?i.lines_covered:[],a=i.lines_missed?i.lines_missed:[],c=i.executed_branches,l=i.total_branches,u=new s.TestCoverageCount(o.length,o.length+a.length);let p;const d=s.Uri.file(e);if(-1===l)p=new s.FileCoverage(d,u);else{const e=new s.TestCoverageCount(c,l);p=new s.FileCoverage(d,u,e)}t.addCoverage(p);const h=[];for(const e of o){const t=new s.StatementCoverage(!0,new s.Range(e-1,0,e-1,Number.MAX_SAFE_INTEGER));h.push(t)}for(const e of a){const t=new s.StatementCoverage(!1,new s.Range(e-1,0,e-1,Number.MAX_SAFE_INTEGER));h.push(t)}this.detailedCoverageMap.set(d.fsPath,h)}}collectAllTestCases(){const e=[];return this.testController.items.forEach((t=>{const n=(0,u.getTestCaseNodes)(t);e.push(...n)})),e}findTestItemByIdEfficient(e){const t=this.runIdToTestItem.get(e);if(t){if(this.isTestItemValid(t))return t;this.runIdToTestItem.delete(e)}const n=this.runIdToVSid.get(e);if(n){let t;if(this.testController.items.forEach((e=>{e.id!==n?t||e.children.forEach((e=>{e.id===n&&(t=e)})):t=e})),t)return this.runIdToTestItem.set(e,t),t;this.runIdToVSid.delete(e),this.vsIdToRunId.delete(n)}return(0,c.traceError)(`Falling back to tree search for test: ${e}`),this.collectAllTestCases().find((e=>e.id===n))}isTestItemValid(e){let t=e;for(;null==t?void 0:t.parent;)t=t.parent;return t?this.testController.items.get(t.id)===t:this.testController.items.get(e.id)===e}cleanupStaleReferences(){const e=[];this.runIdToTestItem.forEach(((t,n)=>{this.isTestItemValid(t)||e.push(n)})),e.forEach((e=>{const t=this.runIdToVSid.get(e);this.runIdToTestItem.delete(e),this.runIdToVSid.delete(e),t&&this.vsIdToRunId.delete(t)})),e.length>0&&(0,c.traceVerbose)(`Cleaned up ${e.length} stale test item references`)}handleTestError(e,t,n){var r,i;const o=null!==(r=t.traceback)&&void 0!==r?r:"",a=(0,h.splitLines)(o,{trim:!1,removeEmptyEntries:!0}).join("\r\n"),c=`${t.test} failed with error: ${null!==(i=t.message)&&void 0!==i?i:t.outcome}\r\n${a}`,l=new s.TestMessage(c),u=this.findTestItemByIdEfficient(e);(null==u?void 0:u.uri)&&(u.range&&(l.location=new s.Location(u.uri,u.range)),n.errored(u,l))}handleTestFailure(e,t,n){var r,i;const o=null!==(r=t.traceback)&&void 0!==r?r:"",a=(0,h.splitLines)(o,{trim:!1,removeEmptyEntries:!0}).join("\r\n"),c=`${t.test} failed: ${null!==(i=t.message)&&void 0!==i?i:t.outcome}\r\n${a}`,l=new s.TestMessage(c),u=this.findTestItemByIdEfficient(e);(null==u?void 0:u.uri)&&(u.range&&(l.location=new s.Location(u.uri,u.range)),n.failed(u,l))}handleTestSuccess(e,t){const n=this.runIdToTestItem.get(e);if(void 0!==n){const r=this.findTestItemByIdEfficient(e);(null==r?void 0:r.uri)&&t.passed(n)}}handleTestSkipped(e,t){const n=this.runIdToTestItem.get(e);if(void 0!==n){const r=this.findTestItemByIdEfficient(e);(null==r?void 0:r.uri)&&t.skipped(n)}}handleSubtestFailure(e,t,n){var r,i,o;const[a,c]=(0,f.splitTestNameWithRegex)(e),l=this.runIdToTestItem.get(a);if(!l)throw new Error("Parent test item not found");{const e=this.subTestStats.get(a);e?e.failed+=1:(this.subTestStats.set(a,{failed:1,passed:0}),(0,u.clearAllChildren)(l));const p=null===(r=this.testController)||void 0===r?void 0:r.createTestItem(c,c,l.uri);if(!p)throw new Error("Unable to create new child node for subtest");{const e=null!==(i=t.traceback)&&void 0!==i?i:"",r=`${t.subtest} failed: ${null!==(o=t.message)&&void 0!==o?o:t.outcome}\r\n${e}`;l.children.add(p),n.started(p);const a=new s.TestMessage(r);l.uri&&l.range&&(a.location=new s.Location(l.uri,l.range)),n.failed(p,a)}}}handleSubtestSuccess(e,t){var n;const[r,i]=(0,f.splitTestNameWithRegex)(e),o=this.runIdToTestItem.get(r);if(!o)throw new Error("Parent test item not found");{const e=this.subTestStats.get(r);e?e.passed+=1:(this.subTestStats.set(r,{failed:0,passed:1}),(0,u.clearAllChildren)(o));const s=null===(n=this.testController)||void 0===n?void 0:n.createTestItem(i,i,o.uri);if(!s)throw new Error("Unable to create new child node for subtest");o.children.add(s),t.started(s),t.passed(s)}}_resolveExecution(e,t){const n=e;if(void 0!==n&&void 0!==n.result)for(const e of Object.keys(n.result)){const r=n.result[e];"error"===r.outcome?this.handleTestError(e,r,t):"failure"===r.outcome||"passed-unexpected"===r.outcome?this.handleTestFailure(e,r,t):"success"===r.outcome||"expected-failure"===r.outcome?this.handleTestSuccess(e,t):"skipped"===r.outcome?this.handleTestSkipped(e,t):"subtest-failure"===r.outcome?this.handleSubtestFailure(e,r,t):"subtest-success"===r.outcome&&this.handleSubtestSuccess(e,t)}}}},64230:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.clearAllChildren=t.checkForFailedTests=t.updateTestResultMap=t.getNodeByUri=t.getWorkspaceNode=t.getTestCaseNodes=t.updateTestItemFromRawData=t.getRunIdFromRawData=t.createWorkspaceRootTestItem=t.createErrorTestItem=t.removeItemByIdFromChildren=t.DebugTestTag=t.RunTestTag=void 0;const s=o(n(16928)),a=n(54980),c=n(83597),l=n(61905),u=n(86294);function p(e){const t=[];return e.forEach((e=>{t.push(e)})),t}function d(e,t,n){n.forEach((n=>{t.children.delete(n),e.delete(n)}))}function h(e,t,n){const r=e.get(s.join(t,n.parentid));let i;return r&&(i="."===r.id?t:r.id),i}function f(e){try{const t=e.source.substr(e.source.indexOf(":")+1),n=Number.parseInt(t,10);return new a.Range(new a.Position(n-1,0),new a.Position(n,0))}catch(e){}}function v(e){const t=e.replace(/\.py[^\w\-]/g,"").replace(/[\\\:\/]/g,".").replace(/\:\:/g,".").replace(/\.\./g,".");return t.startsWith(".")?t.substr(1):t}function m(e,n,r,i){const o=s.join(r,i.relpath),c=a.Uri.file(o),l=h(n,r,i),p=s.basename(o),d=e.createTestItem(o,p,c);return d.canResolveChildren=!0,n.set(d.id,{id:d.id,rawId:i.id,runId:i.relpath,uri:c,kind:u.TestDataKinds.FolderOrFile,parentId:l}),d.tags=[t.RunTestTag,t.DebugTestTag],d}async function g(e,n,r,i,o,g){var b;if(null==g?void 0:g.isCancellationRequested)return;const _=null===(b=r.get(e.id))||void 0===b?void 0:b.rawId;if(!_)return void(0,l.traceError)(`Unknown node id: ${e.id}`);const E=o.filter((e=>e.root===_||e.rootid===_||e.parents.find((e=>e.id===_))||e.tests.find((e=>e.id===_))));if(0===E.length&&e.parent)return d(r,e.parent,[e.id]),void(0,l.traceVerbose)(`Following test item was removed Reason: No-Raw-Data ${e.id}`);if(E.length>1)return void(0,l.traceError)(`Multiple (${E.length}) raw data nodes had the same id: ${_}`);if(_===E[0].root||_===E[0].rootid){await(0,c.asyncForEach)(p(e.children),(async e=>{await y(e,n,r,i,E,g)}));const t=E[0].parents.filter((e=>"."===e.parentid||e.parentid===_)),o=[];return e.children.forEach((e=>{var t,n;return o.push(null!==(n=null===(t=r.get(e.id))||void 0===t?void 0:t.rawId)&&void 0!==n?n:"")})),void await(0,c.asyncForEach)(t.filter((e=>!o.includes(e.id))),(async t=>{const o=(t.kind,m(n,r,i,t));e.children.add(o),await y(o,n,r,i,E,g)}))}const S=E[0].parents.filter((e=>e.id===_));if(1===S.length){switch(S[0].kind){case"file":case"folder":!function(e,n,r,i){const o=s.join(r,i.relpath),c=a.Uri.file(o),l=h(n,r,i);e.label=s.basename(o),e.canResolveChildren=!0,n.set(e.id,{id:e.id,rawId:i.id,runId:i.relpath,uri:c,kind:u.TestDataKinds.FolderOrFile,parentId:l}),e.tags=[t.RunTestTag,t.DebugTestTag]}(e,r,i,S[0]);break;case"suite":case"function":!function(e,n,r,i){const o=s.join(r,i.id.substr(0,i.id.indexOf(":"))),c=a.Uri.file(o);e.label=i.name;const l=h(n,r,i),p=v(i.id);e.canResolveChildren=!0,n.set(e.id,{id:e.id,rawId:i.id,runId:p,uri:c,kind:u.TestDataKinds.Collection,parentId:l}),e.tags=[t.RunTestTag,t.DebugTestTag]}(e,r,i,S[0])}await(0,c.asyncForEach)(p(e.children),(async e=>{await y(e,n,r,i,E,g)}));const o=[];e.children.forEach((e=>{var t,n;return o.push(null!==(n=null===(t=r.get(e.id))||void 0===t?void 0:t.rawId)&&void 0!==n?n:"")}));const l=E[0].parents.filter((e=>e.parentid===_));return await(0,c.asyncForEach)(l.filter((e=>!o.includes(e.id))),(async o=>{let c;switch(o.kind){case"file":case"folder":c=m(n,r,i,o);break;case"suite":case"function":c=function(e,n,r,i){const o=s.join(r,i.id),c=s.join(r,i.id.substr(0,i.id.indexOf(":"))),l=a.Uri.file(c),p=i.name,d=h(n,r,i),f=v(i.id),m=e.createTestItem(o,p,l);return m.canResolveChildren=!0,n.set(m.id,{id:m.id,rawId:i.id,runId:f,uri:l,kind:u.TestDataKinds.Collection,parentId:d}),m.tags=[t.RunTestTag,t.DebugTestTag],m}(n,r,i,o)}c&&(e.children.add(c),await y(c,n,r,i,E,g))})),void E[0].tests.filter((e=>e.parentid===_)).filter((e=>!o.includes(e.id))).forEach((o=>{const c=function(e,n,r,i){const o=s.join(r,i.id),c=s.join(r,i.source.substr(0,i.source.indexOf(":"))),l=a.Uri.file(c),p=i.name,d=h(n,r,i),m=v(i.id),g=e.createTestItem(o,p,l);return g.canResolveChildren=!1,g.range=f(i),n.set(g.id,{id:g.id,rawId:i.id,runId:m,uri:l,kind:u.TestDataKinds.Case,parentId:d}),g.tags=[t.RunTestTag,t.DebugTestTag],g}(n,r,i,o);e.children.add(c)}))}if(S.length>1)return void(0,l.traceError)(`Multiple (${S.length}) raw data nodes had the same id: ${_}`);const w=E[0].tests.filter((e=>e.id===_));1!==w.length?w.length>1&&(0,l.traceError)(`Multiple (${w.length}) raw data nodes had the same id: ${_}`):function(e,n,r,i){const o=s.join(r,i.source.substr(0,i.source.indexOf(":"))),c=a.Uri.file(o);e.label=i.name;const l=h(n,r,i),p=v(i.id);e.canResolveChildren=!1,e.range=f(i),n.set(e.id,{id:e.id,rawId:i.id,runId:p,uri:c,kind:u.TestDataKinds.Case,parentId:l}),e.tags=[t.RunTestTag,t.DebugTestTag]}(e,r,i,w[0])}async function y(e,t,n,r,i,o){e.busy=!0,await g(e,t,n,r,i,o),e.busy=!1}function b(e,t){for(const n of t.taskStates)e.set(t.id,n.state);t.children.forEach((t=>b(e,t)))}t.RunTestTag={id:"python-run"},t.DebugTestTag={id:"python-debug"},t.removeItemByIdFromChildren=d,t.createErrorTestItem=function(e,n){const r=e.createTestItem(n.id,n.label);return r.canResolveChildren=!1,r.error=n.error,r.tags=[t.RunTestTag,t.DebugTestTag],r},t.createWorkspaceRootTestItem=function(e,n,r){var i;const o=e.createTestItem(r.id,r.label,r.uri);return o.canResolveChildren=!0,n.set(r.id,{...r,rawId:null!==(i=r.rawId)&&void 0!==i?i:r.id,kind:u.TestDataKinds.Workspace}),o.tags=[t.RunTestTag,t.DebugTestTag],o},t.getRunIdFromRawData=v,t.updateTestItemFromRawData=y,t.getTestCaseNodes=function e(t,n=[]){return!t.canResolveChildren&&t.tags.length>0&&n.push(t),t.children.forEach((r=>{t.canResolveChildren?e(r,n):n.push(t)})),n},t.getWorkspaceNode=function e(t,n){const r=n.get(t.id);if(r){if(r.kind===u.TestDataKinds.Workspace)return t;if(t.parent)return e(t.parent,n)}},t.getNodeByUri=function e(t,n){var r,i;if((null===(r=t.uri)||void 0===r?void 0:r.fsPath)===n.fsPath)return t;const o=[];t.children.forEach((e=>o.push(e)));for(const e of o)if((null===(i=e.uri)||void 0===i?void 0:i.fsPath)===n.fsPath)return e;for(const t of o){const r=e(t,n);if(r)return r}},t.updateTestResultMap=function(e,t){new Array(...t).sort(((e,t)=>e.completedAt-t.completedAt)).forEach((t=>{t.results.forEach((t=>b(e,t)))}))},t.checkForFailedTests=function(e){return void 0!==Array.from(e.values()).find((e=>e===a.TestResultState.Failed||e===a.TestResultState.Errored))},t.clearAllChildren=function(e){const t=[];e.children.forEach((e=>t.push(e.id))),t.forEach(e.children.delete)}},86294:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ITestsRunner=t.ITestFrameworkController=t.ITestController=t.TestDataKinds=void 0,function(e){e[e.Workspace=0]="Workspace",e[e.FolderOrFile=1]="FolderOrFile",e[e.Collection=2]="Collection",e[e.Case=3]="Case"}(n||(t.TestDataKinds=n={})),t.ITestController=Symbol("ITestController"),t.ITestFrameworkController=Symbol("ITestFrameworkController"),t.ITestsRunner=Symbol("ITestsRunner")},50442:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hasSymlinkParent=t.argKeyExists=t.addValueIfKeyNotExist=t.splitTestNameWithRegex=t.createDiscoveryErrorPayload=t.createExecutionErrorPayload=t.populateTestTree=t.buildErrorNodeOptions=t.startDiscoveryNamedPipe=t.startRunResultNamedPipe=t.writeTestIdsFile=t.createTestingDeferred=t.fixLogLinesNoTrailing=void 0;const s=o(n(16928)),a=o(n(79896)),c=o(n(70857)),l=o(n(76982)),u=n(54980),p=n(61905),d=n(64230),h=n(7855),f=n(73673),v=n(84090);t.fixLogLinesNoTrailing=function(e){return`${e.split(/\r?\n/g).join("\r\n")}`},t.createTestingDeferred=function(){return(0,h.createDeferred)()},t.writeTestIdsFile=async function(e){const t=`test-ids-${l.randomBytes(10).toString("hex")}.txt`;let n;const r="win32"===process.platform?c.tmpdir():process.env.XDG_RUNTIME_DIR||c.tmpdir();try{(0,p.traceLog)("Attempting to use temp directory for test ids file, file name:",t),n=s.join(r,t),await a.promises.access(r)}catch(e){(0,p.traceError)("Error accessing temp directory:",e," Attempt to use extension root dir instead");const r=s.join(v.EXTENSION_ROOT_DIR,".temp");await a.promises.mkdir(r,{recursive:!0}),n=s.join(v.EXTENSION_ROOT_DIR,".temp",t),(0,p.traceLog)("New temp file:",n)}return await a.promises.writeFile(n,e.join("\n")),n},t.startRunResultNamedPipe=async function(e,t,n){(0,p.traceVerbose)("Starting Test Result named pipe");const r=(0,f.generateRandomPipeName)("python-test-results"),i=await(0,f.createReaderPipe)(r,n);(0,p.traceVerbose)(`Test Results named pipe ${r} connected`);let o=[];const s=new u.Disposable((()=>{(0,p.traceVerbose)(`Test Results named pipe ${r} disposed`),o.forEach((e=>e.dispose())),o=[],t.resolve()}));return n&&o.push(null==n?void 0:n.onCancellationRequested((()=>{(0,p.traceLog)(`Test Result named pipe ${r}  cancelled`),s.dispose()}))),o.push(i,i.listen((t=>{(0,p.traceVerbose)(`Test Result named pipe ${r} received data`),e(t.params)})),i.onClose((()=>{(0,p.traceVerbose)(`Test Result named pipe ${r} closed. Disposing of listener/s.`),s.dispose()})),i.onError((e=>{(0,p.traceError)(`Test Results named pipe ${r} error:`,e)}))),r},t.startDiscoveryNamedPipe=async function(e,t){(0,p.traceVerbose)("Starting Test Discovery named pipe");const n=(0,f.generateRandomPipeName)("python-test-discovery"),r=await(0,f.createReaderPipe)(n,t);(0,p.traceVerbose)(`Test Discovery named pipe ${n} connected`);let i=[];const o=new u.Disposable((()=>{(0,p.traceVerbose)(`Test Discovery named pipe ${n} disposed`),i.forEach((e=>e.dispose())),i=[]}));return t&&i.push(t.onCancellationRequested((()=>{(0,p.traceVerbose)(`Test Discovery named pipe ${n}  cancelled`),o.dispose()}))),i.push(r,r.listen((t=>{(0,p.traceVerbose)(`Test Discovery named pipe ${n} received data`),e(t.params)})),r.onClose((()=>{(0,p.traceVerbose)(`Test Discovery named pipe ${n} closed`),o.dispose()})),r.onError((e=>{(0,p.traceError)(`Test Discovery named pipe ${n} error:`,e)}))),n},t.buildErrorNodeOptions=function(e,t,n){let r="pytest"===n?"pytest Discovery Error":"Unittest Discovery Error",i=t;return"pytest"===n&&function(e){return e.includes("ModuleNotFoundError")&&e.includes("pytest")||e.includes("No module named")&&e.includes("pytest")||e.includes("ImportError")&&e.includes("pytest")}(t)&&(r="pytest Not Installed",i="pytest is not installed in the selected Python environment. Please install pytest to enable test discovery and execution."),{id:`DiscoveryError:${e.fsPath}`,label:`${r} [${s.basename(e.fsPath)}]`,error:i}},t.populateTestTree=function e(t,n,r,i,o){r||((r=t.createTestItem(n.path,n.name,u.Uri.file(n.path))).canResolveChildren=!0,r.tags=[d.RunTestTag,d.DebugTestTag],t.items.add(r)),n.children.forEach((n=>{if(!(null==o?void 0:o.isCancellationRequested))if("test"===n.type_){const e=t.createTestItem(n.id_,n.name,u.Uri.file(n.path));let o;e.tags=[d.RunTestTag,d.DebugTestTag],n.lineno&&(o=0===Number(n.lineno)?new u.Range(new u.Position(0,0),new u.Position(0,0)):new u.Range(new u.Position(Number(n.lineno)-1,0),new u.Position(Number(n.lineno),0))),e.canResolveChildren=!1,e.range=o,e.tags=[d.RunTestTag,d.DebugTestTag],r.children.add(e),i.runIdToTestItem.set(n.runID,e),i.runIdToVSid.set(n.runID,n.id_),i.vsIdToRunId.set(n.id_,n.runID)}else{let s=t.items.get(n.path);s||(s=t.createTestItem(n.id_,n.name,u.Uri.file(n.path)),s.canResolveChildren=!0,s.tags=[d.RunTestTag,d.DebugTestTag],r.children.add(s)),e(t,n,s,i,o)}}))},t.createExecutionErrorPayload=function(e,t,n,r){const i={cwd:r,status:"error",error:`Test run failed, the python test process was terminated before it could exit on its own for workspace ${r}`,result:{}};for(let r=0;r<n.length;r+=1){const o=n[r];i.result[o]={test:o,outcome:"error",message:` \n The python test process was terminated before it could exit on its own, the process errored with: Code: ${e}, Signal: ${t}`}}return i},t.createDiscoveryErrorPayload=function(e,t,n){return{cwd:n,status:"error",error:[` \n The python test process was terminated before it could exit on its own, the process errored with: Code: ${e}, Signal: ${t} for workspace ${n}`]}},t.splitTestNameWithRegex=function(e){const t=e.match(/^(.*?) ([\[(].*[\])])$/);return t?[t[1].trim(),t[2]||t[3]||e]:[e,e]},t.addValueIfKeyNotExist=function(e,t,n){for(const n of e)if(n.includes(t))return(0,p.traceInfo)(`arg: ${t} already exists in args, not adding.`),e;return n?e.push(`${t}=${n}`):e.push(`${t}`),e},t.argKeyExists=function(e,t){for(const n of e)if(n.includes(t))return!0;return!1},t.hasSymlinkParent=async function e(t){try{const n=s.resolve(t),r=s.dirname(n);return r!==n&&((await a.promises.lstat(r)).isSymbolicLink()?((0,p.traceLog)(`Symlink found at: ${r}`),!0):await e(r))}catch(e){return(0,p.traceError)("Error checking symlinks:",e),!1}}},97245:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonTestController=void 0;const c=n(25891),l=n(2543),u=s(n(94027)),p=n(54980),d=n(54661),h=s(n(552)),f=n(35026),v=n(86156),m=n(56218),g=n(98803),y=n(29413),b=n(61905),_=n(51535),E=n(53322),S=n(77329),w=n(64230),P=n(50442),T=n(86294),C=n(13979),x=n(20179),I=n(65043),O=n(64539),R=n(60369),D=n(23365),k=n(66232),A=n(8841),N=n(53694);let j=class{constructor(e,t,n,r,i,o,s,a,c,l){this.workspaceService=e,this.configSettings=t,this.pytest=n,this.unittest=r,this.disposables=i,this.interpreterService=o,this.commandManager=s,this.pythonExecFactory=a,this.debugLauncher=c,this.envVarsService=l,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!1},this.testAdapters=new Map,this.triggerTypes=[],this.refreshingCompletedEvent=new p.EventEmitter,this.refreshingStartedEvent=new p.EventEmitter,this.runWithoutConfigurationEvent=new p.EventEmitter,this.onRefreshingCompleted=this.refreshingCompletedEvent.event,this.onRefreshingStarted=this.refreshingStartedEvent.event,this.onRunWithoutConfiguration=this.runWithoutConfigurationEvent.event,this.sendTestDisabledTelemetry=!0,this.refreshCancellation=new p.CancellationTokenSource,this.testController=p.tests.createTestController("python-tests","Python Tests"),this.disposables.push(this.testController);const u=new m.DelayedTrigger(((e,t)=>{this.refreshTestDataInternal(e),t&&this.invalidateTests(e)}),250,"Refresh Test Data");this.disposables.push(u),this.refreshData=u,this.disposables.push(this.testController.createRunProfile("Run Tests",p.TestRunProfileKind.Run,this.runTests.bind(this),!0,w.RunTestTag),this.testController.createRunProfile("Debug Tests",p.TestRunProfileKind.Debug,this.runTests.bind(this),!0,w.DebugTestTag),this.testController.createRunProfile("Coverage Tests",p.TestRunProfileKind.Coverage,this.runTests.bind(this),!0,w.RunTestTag)),this.testController.resolveHandler=this.resolveChildren.bind(this),this.testController.refreshHandler=e=>(this.disposables.push(e.onCancellationRequested((()=>{(0,b.traceVerbose)("Testing: Stop refreshing triggered"),(0,_.sendTelemetryEvent)(E.EventName.UNITTEST_DISCOVERING_STOP),this.stopRefreshing()}))),(0,b.traceVerbose)("Testing: Manually triggered test refresh"),(0,_.sendTelemetryEvent)(E.EventName.UNITTEST_DISCOVERY_TRIGGER,void 0,{trigger:h.CommandSource.commandPalette}),this.refreshTestData(void 0,{forceRefresh:!0}))}async activate(){(this.workspaceService.workspaceFolders||[]).forEach((e=>{const t=this.configSettings.getSettings(e.uri);let n,r,i,o;t.testing.unittestEnabled?(i=S.UNITTEST_PROVIDER,o=new k.PythonResultResolver(this.testController,i,e.uri),n=new C.UnittestTestDiscoveryAdapter(this.configSettings,o,this.envVarsService),r=new x.UnittestTestExecutionAdapter(this.configSettings,o,this.envVarsService)):(i=S.PYTEST_PROVIDER,o=new k.PythonResultResolver(this.testController,i,e.uri),n=new I.PytestTestDiscoveryAdapter(this.configSettings,o,this.envVarsService),r=new O.PytestTestExecutionAdapter(this.configSettings,o,this.envVarsService));const s=new R.WorkspaceTestAdapter(i,n,r,e.uri,o);this.testAdapters.set(e.uri,s),t.testing.autoTestDiscoverOnSaveEnabled&&((0,b.traceVerbose)(`Testing: Setting up watcher for ${e.uri.fsPath}`),this.watchForSettingsChanges(e),this.watchForTestContentChangeOnSave())}))}refreshTestData(e,t){return(null==t?void 0:t.forceRefresh)?void 0===e?((0,b.traceVerbose)("Testing: Clearing all discovered tests"),this.testController.items.forEach((e=>{const t=[];e.children.forEach((e=>t.push(e.id))),t.forEach((t=>e.children.delete(t)))})),(0,b.traceVerbose)("Testing: Forcing test data refresh"),this.refreshTestDataInternal(void 0)):((0,b.traceVerbose)("Testing: Forcing test data refresh"),this.refreshTestDataInternal(e)):(this.refreshData.trigger(e,!1),Promise.resolve())}stopRefreshing(){this.refreshCancellation.cancel(),this.refreshCancellation.dispose(),this.refreshCancellation=new p.CancellationTokenSource}clearTestController(){const e=[];this.testController.items.forEach((t=>e.push(t.id))),e.forEach((e=>this.testController.items.delete(e)))}async refreshTestDataInternal(e){if(this.refreshingStartedEvent.fire(),e){const t=this.configSettings.getSettings(e),n=this.workspaceService.getWorkspaceFolder(e);if((0,b.traceInfo)(`Discover tests for workspace name: ${null==n?void 0:n.name} - uri: ${e.fsPath}`),this.sendTestDisabledTelemetry=!0,t.testing.pytestEnabled)if(n&&n.uri){const e=this.testAdapters.get(n.uri);if(e){if("pytest"!==e.getTestProvider())return(0,b.traceError)("Test provider in adapter is not pytest. Please reload window."),this.surfaceErrorNode(n.uri,"Test provider types are not aligned, please reload your VS Code window.","pytest"),Promise.resolve();await e.discoverTests(this.testController,this.refreshCancellation.token,this.pythonExecFactory,await this.interpreterService.getActiveInterpreter(n.uri))}else(0,b.traceError)("Unable to find test adapter for workspace.")}else(0,b.traceError)("Unable to find workspace for given file");else if(t.testing.unittestEnabled)if(n&&n.uri){const e=this.testAdapters.get(n.uri);if(e){if("unittest"!==e.getTestProvider())return(0,b.traceError)("Test provider in adapter is not unittest. Please reload window."),this.surfaceErrorNode(n.uri,"Test provider types are not aligned, please reload your VS Code window.","unittest"),Promise.resolve();await e.discoverTests(this.testController,this.refreshCancellation.token,this.pythonExecFactory,await this.interpreterService.getActiveInterpreter(n.uri))}else(0,b.traceError)("Unable to find test adapter for workspace.")}else(0,b.traceError)("Unable to find workspace for given file");else if(this.sendTestDisabledTelemetry&&(this.sendTestDisabledTelemetry=!1,(0,_.sendTelemetryEvent)(E.EventName.UNITTEST_DISABLED)),n){const e=[];this.testController.items.forEach((t=>{const r=this.workspaceService.getWorkspaceFolder(t.uri);(null==r?void 0:r.uri.fsPath)===n.uri.fsPath&&e.push(t.id)})),e.forEach((e=>this.testController.items.delete(e)))}}else{(0,b.traceVerbose)("Testing: Refreshing all test data");const e=this.workspaceService.workspaceFolders||[];await Promise.all(e.map((async e=>{await this.interpreterService.getActiveInterpreter(e.uri)?await this.refreshTestDataInternal(e.uri):this.commandManager.executeCommand(h.Commands.TriggerEnvironmentSelection,e.uri).then(g.noop,g.noop)})))}return this.refreshingCompletedEvent.fire(),Promise.resolve()}async resolveChildren(e){if(e){(0,b.traceVerbose)(`Testing: Resolving item ${e.id}`);const t=this.configSettings.getSettings(e.uri);if(t.testing.pytestEnabled)return this.pytest.resolveChildren(this.testController,e,this.refreshCancellation.token);if(t.testing.unittestEnabled)return this.unittest.resolveChildren(this.testController,e,this.refreshCancellation.token)}else{(0,b.traceVerbose)("Testing: Refreshing all test data"),this.sendTriggerTelemetry("auto");const e=this.workspaceService.workspaceFolders||[];await Promise.all(e.map((async e=>{await this.interpreterService.getActiveInterpreter(e.uri)?await this.refreshTestDataInternal(e.uri):(0,b.traceError)("Cannot trigger test discovery as a valid interpreter is not selected")})))}return Promise.resolve()}async runTests(e,t){const n=[];e.include?(0,l.uniq)(e.include.map((e=>this.workspaceService.getWorkspaceFolder(e.uri)))).forEach((e=>{e&&n.push(e)})):(this.workspaceService.workspaceFolders||[]).forEach((e=>n.push(e)));const r=this.testController.createTestRun(e,`Running Tests for Workspace(s): ${n.map((e=>e.uri.fsPath)).join(";")}`,!0),i=t.onCancellationRequested((()=>{r.appendOutput("\nRun instance cancelled.\r\n"),r.end()})),o=[];try{await Promise.all(n.map((async n=>{var i,s,a,c,l,u,d;if(!await this.interpreterService.getActiveInterpreter(n.uri))return void this.commandManager.executeCommand(h.Commands.TriggerEnvironmentSelection,n.uri).then(g.noop,g.noop);const f=[];(null!==(i=e.include)&&void 0!==i?i:this.testController.items).forEach((e=>{const t=this.workspaceService.getWorkspaceFolder(e.uri);(null==t?void 0:t.uri.fsPath)===n.uri.fsPath&&f.push(e)}));const v=this.configSettings.getSettings(n.uri);if(f.length>0){const i=this.testAdapters.get(n.uri)||this.testAdapters.values().next().value;if((null===(s=e.profile)||void 0===s?void 0:s.kind)&&(null===(a=e.profile)||void 0===a?void 0:a.kind)===p.TestRunProfileKind.Coverage&&(e.profile.loadDetailedCoverage=(e,t,n)=>{const r=i.resultResolver.detailedCoverageMap.get(t.uri.fsPath);return void 0===r?Promise.resolve([]):Promise.resolve(r)}),v.testing.pytestEnabled)return(0,_.sendTelemetryEvent)(E.EventName.UNITTEST_RUN,void 0,{tool:"pytest",debugging:(null===(c=e.profile)||void 0===c?void 0:c.kind)===p.TestRunProfileKind.Debug}),i.executeTests(this.testController,r,f,t,null===(l=e.profile)||void 0===l?void 0:l.kind,this.pythonExecFactory,this.debugLauncher,await this.interpreterService.getActiveInterpreter(n.uri));if(v.testing.unittestEnabled)return(0,_.sendTelemetryEvent)(E.EventName.UNITTEST_RUN,void 0,{tool:"unittest",debugging:(null===(u=e.profile)||void 0===u?void 0:u.kind)===p.TestRunProfileKind.Debug}),i.executeTests(this.testController,r,f,t,null===(d=e.profile)||void 0===d?void 0:d.kind,this.pythonExecFactory,this.debugLauncher,await this.interpreterService.getActiveInterpreter(n.uri))}return v.testing.pytestEnabled||v.testing.unittestEnabled||o.push(n),Promise.resolve()})))}finally{(0,b.traceVerbose)("Finished running tests, ending runInstance."),r.appendOutput("Finished running tests!\r\n"),r.end(),i.dispose(),o.length>0&&this.runWithoutConfigurationEvent.fire(o)}}invalidateTests(e){this.testController.items.forEach((t=>{const n=(0,w.getNodeByUri)(t,e);n&&n.invalidateResults&&n.invalidateResults()}))}watchForSettingsChanges(e){const t=new p.RelativePattern(e,"**/{settings.json,pytest.ini,pyproject.toml,setup.cfg}"),n=this.workspaceService.createFileSystemWatcher(t);this.disposables.push(n),this.disposables.push((0,A.onDidSaveTextDocument)((async e=>{const t=e.fileName;(t.includes("settings.json")||t.includes("pytest.ini")||t.includes("setup.cfg")||t.includes("pyproject.toml"))&&((0,b.traceVerbose)(`Testing: Trigger refresh after saving ${e.uri.fsPath}`),this.sendTriggerTelemetry("watching"),this.refreshData.trigger(e.uri,!1))}))),this.disposables.push(n.onDidCreate((e=>{(0,b.traceVerbose)(`Testing: Trigger refresh after creating ${e.fsPath}`),this.sendTriggerTelemetry("watching"),this.refreshData.trigger(e,!1)}))),this.disposables.push(n.onDidDelete((e=>{(0,b.traceVerbose)(`Testing: Trigger refresh after deleting in ${e.fsPath}`),this.sendTriggerTelemetry("watching"),this.refreshData.trigger(e,!1)})))}watchForTestContentChangeOnSave(){this.disposables.push((0,A.onDidSaveTextDocument)((async e=>{const t=this.configSettings.getSettings(e.uri);t.testing.autoTestDiscoverOnSaveEnabled&&u.default(e.uri.fsPath,t.testing.autoTestDiscoverOnSavePattern)&&((0,b.traceVerbose)(`Testing: Trigger refresh after saving ${e.uri.fsPath}`),this.sendTriggerTelemetry("watching"),this.refreshData.trigger(e.uri,!1))})))}sendTriggerTelemetry(e){this.triggerTypes.includes(e)||((0,_.sendTelemetryEvent)(E.EventName.UNITTEST_DISCOVERY_TRIGGER,void 0,{trigger:e}),this.triggerTypes.push(e))}surfaceErrorNode(e,t,n){let r=this.testController.items.get(`DiscoveryError:${e.fsPath}`);if(void 0===r){const i=(0,P.buildErrorNodeOptions)(e,t,n);r=(0,w.createErrorTestItem)(this.testController,i),this.testController.items.add(r)}const i=new p.MarkdownString(t);i.isTrusted=!0,r.error=i}};t.PythonTestController=j,t.PythonTestController=j=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IWorkspaceService)),a(1,(0,c.inject)(v.IConfigurationService)),a(2,(0,c.inject)(T.ITestFrameworkController)),a(2,(0,c.named)(S.PYTEST_PROVIDER)),a(3,(0,c.inject)(T.ITestFrameworkController)),a(3,(0,c.named)(S.UNITTEST_PROVIDER)),a(4,(0,c.inject)(v.IDisposableRegistry)),a(5,(0,c.inject)(y.IInterpreterService)),a(6,(0,c.inject)(d.ICommandManager)),a(7,(0,c.inject)(f.IPythonExecutionFactory)),a(8,(0,c.inject)(D.ITestDebugLauncher)),a(9,(0,c.inject)(N.IEnvironmentVariablesProvider))],j)},98817:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removePositionalFoldersAndFiles=void 0;const r=n(23365),i=n(90859),o=["-c","-k","-m","-o","-p","-r","-W","-n","--assert","--basetemp","--cache-show","--capture","--code-highlight","--color","--confcutdir","--cov","--cov-config","--cov-fail-under","--cov-report","--deselect","--dist","--doctest-glob","--doctest-report","--durations","--durations-min","--ignore","--ignore-glob","--import-mode","--junit-prefix","--junit-xml","--last-failed-no-failures","--lfnf","--log-auto-indent","--log-cli-date-format","--log-cli-format","--log-cli-level","--log-date-format","--log-file","--log-file-date-format","--log-file-format","--log-file-level","--log-format","--log-level","--maxfail","--override-ini","--pastebin","--pdbcls","--pythonwarnings","--result-log","--rootdir","--show-capture","--tb","--verbosity","--max-slave-restart","--numprocesses","--rsyncdir","--rsyncignore","--tx"],s=["--cache-clear","--collect-in-virtualenv","--collect-only","--co","--continue-on-collection-errors","--cov-append","--cov-branch","--debug","--disable-pytest-warnings","--disable-warnings","--doctest-continue-on-failure","--doctest-ignore-import-errors","--doctest-modules","--exitfirst","--failed-first","--ff","--fixtures","--fixtures-per-test","--force-sugar","--full-trace","--funcargs","--help","--keep-duplicates","--last-failed","--lf","--markers","--new-first","--nf","--no-cov","--no-cov-on-fail","--no-header","--no-print-logs","--no-summary","--noconftest","--old-summary","--pdb","--pyargs","-PyTest, Unittest-pyargs","--quiet","--runxfail","--setup-only","--setup-plan","--setup-show","--showlocals","--stepwise","--sw","--stepwise-skip","--strict","--strict-config","--strict-markers","--trace-config","--verbose","--version","-V","-h","-l","-q","-s","-v","-x","--boxed","--forked","--looponfail","--trace","--tx","-d"];t.removePositionalFoldersAndFiles=function(e){return function(e,t){const n=[],a=[];let c=!1;if(Array.isArray(t))t.forEach((e=>{o.indexOf(e)>=0&&a.push(e),s.indexOf(e)>=0&&n.push(e)}));else switch(t){case r.TestFilter.removeTests:n.push("--lf","--last-failed","--ff","--failed-first","--nf","--new-first"),a.push("-k","-m","--lfnf","--last-failed-no-failures"),c=!0;break;case r.TestFilter.discovery:n.push("-x","--exitfirst","--fixtures","--funcargs","--fixtures-per-test","--pdb","--lf","--last-failed","--ff","--failed-first","--nf","--new-first","--cache-show","-v","--verbose","-q","-quiet","-l","--showlocals","--no-print-logs","--debug","--setup-only","--setup-show","--setup-plan","--trace"),a.push("-m","--maxfail","--pdbcls","--capture","--lfnf","--last-failed-no-failures","--verbosity","-r","--tb","--show-capture","--durations","--junit-xml","--junit-prefix","--result-log","-W","--pythonwarnings","--log-*"),c=!0;break;case r.TestFilter.debugAll:case r.TestFilter.runAll:n.push("--collect-only","--trace");break;case r.TestFilter.debugSpecific:case r.TestFilter.runSpecific:n.push("--collect-only","--lf","--last-failed","--ff","--failed-first","--nf","--new-first","--trace"),a.push("-k","-m","--lfnf","--last-failed-no-failures"),c=!0;break;default:throw new Error(`Unsupported Filter '${t}'`)}let l=e.slice();if(c){const e=(0,i.getPositionalArguments)(l,o,s);l=l.filter((t=>-1===e.indexOf(t)))}return(0,i.filterArguments)(l,a,n)}(e,r.TestFilter.removeTests)}},91662:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PytestController=void 0;const c=n(25891),l=s(n(16928)),u=n(54980),p=n(54661),d=n(83597),h=n(64230);let f=class{constructor(e){this.workspaceService=e,this.testData=new Map,this.discovering=new Map,this.idToRawData=new Map}async resolveChildren(e,t,n){const r=this.workspaceService.getWorkspaceFolder(t.uri);if(r){const i=this.discovering.get(r.uri.fsPath);i&&await i.promise;const o=this.testData.get(r.uri.fsPath);if(o){if(0===o.length){const t=[];return e.items.forEach((e=>t.push(e))),t.forEach((t=>e.items.delete(t.id))),Promise.resolve()}const i=1===o.length?o[0].root:r.uri.fsPath;if(i===t.id)if(1===o.length){if(!(o[0].tests.length>0))return this.idToRawData.delete(t.id),e.items.delete(t.id),Promise.resolve();await(0,h.updateTestItemFromRawData)(t,e,this.idToRawData,t.id,o,n)}else{let r=[];t.children.forEach((e=>r.push(e.id))),await(0,d.asyncForEach)(o,(async o=>{let s,a=o.root;if(o.root===i){const e=o.parents.filter((e=>"."===e.parentid||e.parentid===i));a=l.join(o.root,e.length>0?e[0].id:""),s=e.length>0?e[0].id:void 0}if(o.tests.length>0){let c=t.children.get(a);c||(c=(0,h.createWorkspaceRootTestItem)(e,this.idToRawData,{id:a,label:l.basename(a),uri:u.Uri.file(a),runId:a,parentId:t.id,rawId:s}),t.children.add(c)),r=r.filter((e=>e!==a)),await(0,h.updateTestItemFromRawData)(c,e,this.idToRawData,i,[o],n)}else(0,h.removeItemByIdFromChildren)(this.idToRawData,t,[a])})),(0,h.removeItemByIdFromChildren)(this.idToRawData,t,r)}else{const r=(0,h.getWorkspaceNode)(t,this.idToRawData);r&&await(0,h.updateTestItemFromRawData)(t,e,this.idToRawData,r.id,o,n)}}else{const n=(0,h.getWorkspaceNode)(t,this.idToRawData);n&&e.items.delete(n.id)}}return Promise.resolve()}};t.PytestController=f,t.PytestController=f=o([(0,c.injectable)(),a(0,(0,c.inject)(p.IWorkspaceService))],f)},65043:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PytestTestDiscoveryAdapter=void 0;const s=o(n(16928)),a=n(54980),c=o(n(79896)),l=n(7855),u=n(84090),p=n(61905),d=n(50442),h=n(36380);t.PytestTestDiscoveryAdapter=class{constructor(e,t,n){this.configSettings=e,this.resultResolver=t,this.envVarsService=n}async discoverTests(e,t,n,r){const i=new a.CancellationTokenSource,o=(0,l.createDeferred)();null==n||n.onCancellationRequested((()=>{(0,p.traceInfo)("Test discovery cancelled."),i.cancel(),o.resolve()}));const s=await(0,d.startDiscoveryNamedPipe)((e=>{var t;(null==n?void 0:n.isCancellationRequested)||null===(t=this.resultResolver)||void 0===t||t.resolveDiscovery(e)}),i.token);return this.runPytestDiscovery(e,s,i,t,r,n).then((()=>{o.resolve()})),o.promise}async runPytestDiscovery(e,t,n,r,i,o){var a,l,f,v,m,g,y,b,_;const E=s.join(u.EXTENSION_ROOT_DIR,"python_files"),S=this.configSettings.getSettings(e);let{pytestArgs:w}=S.testing;const P=S.testing.cwd&&S.testing.cwd.length>0?S.testing.cwd:e.fsPath,T=await c.promises.lstat(P),C=await c.promises.realpath(P);let x=!1;T.isSymbolicLink()?(x=!0,(0,p.traceWarn)("The cwd is a symbolic link.")):C!==P&&((0,p.traceWarn)("The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path."),x=await(0,d.hasSymlinkParent)(P)),x&&((0,p.traceWarn)("Symlink found, adding '--rootdir' to pytestArgs only if it doesn't already exist. cwd: ",P),w=(0,d.addValueIfKeyNotExist)(w,"--rootdir",P)),(0,d.addValueIfKeyNotExist)(w,"--rootdir",P);const I={...await(null===(a=this.envVarsService)||void 0===a?void 0:a.getEnvironmentVariables(e))},O=[E,...null!==(f=null===(l=I.PYTHONPATH)||void 0===l?void 0:l.split(s.delimiter))&&void 0!==f?f:[]].join(s.delimiter);I.PYTHONPATH=O,I.TEST_RUN_PIPE=t,(0,p.traceInfo)(`Environment variables set for pytest discovery: PYTHONPATH=${I.PYTHONPATH}, TEST_RUN_PIPE=${I.TEST_RUN_PIPE}`);const R=["-m","pytest","-p","vscode_pytest","--collect-only"].concat(w);if((0,p.traceVerbose)(`Running pytest discovery with command: ${R.join(" ")} for workspace ${e.fsPath}.`),(0,h.useEnvExtension)()){const t=await(0,h.getEnvironment)(e);if(t){const r=(0,d.createTestingDeferred)(),i=await(0,h.runInBackground)(t,{cwd:P,args:R,env:I});null==o||o.onCancellationRequested((()=>{(0,p.traceInfo)(`Test discovery cancelled, killing pytest subprocess for workspace ${e.fsPath}`),i.kill(),r.resolve(),n.cancel()})),i.stdout.on("data",(e=>{const t=(0,d.fixLogLinesNoTrailing)(e.toString());(0,p.traceInfo)(t)})),i.stderr.on("data",(e=>{const t=(0,d.fixLogLinesNoTrailing)(e.toString());(0,p.traceError)(t)})),i.onExit(((t,n)=>{var i;0!==t&&((0,p.traceError)(`Subprocess exited unsuccessfully with exit code ${t} and signal ${n} on workspace ${e.fsPath}`),null===(i=this.resultResolver)||void 0===i||i.resolveDiscovery((0,d.createDiscoveryErrorPayload)(t,n,P))),r.resolve()})),await r.promise}else(0,p.traceError)(`Python Environment not found for: ${e.fsPath}`);return}const D={cwd:P,throwOnStdErr:!0,env:I,token:o},k={allowEnvironmentFetchExceptions:!1,resource:e,interpreter:i},A=await(null==r?void 0:r.createActivatedEnvironment(k)),N=await(null==A?void 0:A.getExecutablePath());(0,p.traceVerbose)(`Executable path for pytest discovery: ${N}.`);const j=(0,d.createTestingDeferred)();let M;null==o||o.onCancellationRequested((()=>{(0,p.traceInfo)(`Test discovery cancelled, killing pytest subprocess for workspace ${e.fsPath}`),M?null==M||M.kill():(j.resolve(),n.cancel())}));const L=null==A?void 0:A.execObservable(R,D);M=null==L?void 0:L.proc,null===(m=null===(v=null==L?void 0:L.proc)||void 0===v?void 0:v.stdout)||void 0===m||m.on("data",(e=>{const t=(0,d.fixLogLinesNoTrailing)(e.toString());(0,p.traceInfo)(t)})),null===(y=null===(g=null==L?void 0:L.proc)||void 0===g?void 0:g.stderr)||void 0===y||y.on("data",(e=>{const t=(0,d.fixLogLinesNoTrailing)(e.toString());(0,p.traceError)(t)})),null===(b=null==L?void 0:L.proc)||void 0===b||b.on("exit",((t,n)=>{0!==t&&(0,p.traceError)(`Subprocess exited unsuccessfully with exit code ${t} and signal ${n} on workspace ${e.fsPath}.`)})),null===(_=null==L?void 0:L.proc)||void 0===_||_.on("close",((t,n)=>{var r;0!==t&&5!==t&&((0,p.traceError)(`Subprocess exited unsuccessfully with exit code ${t} and signal ${n} on workspace ${e.fsPath}. Creating and sending error discovery payload`),null===(r=this.resultResolver)||void 0===r||r.resolveDiscovery((0,d.createDiscoveryErrorPayload)(t,n,P))),null==j||j.resolve()})),await j.promise}}},64539:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PytestTestExecutionAdapter=void 0;const s=n(54980),a=o(n(16928)),c=n(61905),l=n(98817),u=n(77329),p=n(552),d=o(n(50442)),h=n(36380);t.PytestTestExecutionAdapter=class{constructor(e,t,n){this.configSettings=e,this.resultResolver=t,this.envVarsService=n}async runTests(e,t,n,r,i,o,a){const l=d.createTestingDeferred(),u=new s.CancellationTokenSource;null==r||r.token.onCancellationRequested((()=>u.cancel()));const p=await d.startRunResultNamedPipe((t=>{var n;r&&!r.token.isCancellationRequested?null===(n=this.resultResolver)||void 0===n||n.resolveExecution(t,r):(0,c.traceError)(`No run instance found, cannot resolve execution, for workspace ${e.fsPath}.`)}),l,u.token);null==r||r.token.onCancellationRequested((()=>{(0,c.traceInfo)(`Test run cancelled, resolving 'TillServerClose' deferred for ${e.fsPath}.`)}));try{await this.runTestsNew(e,t,p,u,r,n,i,o,a)}finally{await l.promise}}async runTestsNew(e,t,n,r,i,o,f,v,m){var g,y,b,_,E,S,w,P,T;const C=a.join(p.EXTENSION_ROOT_DIR,"python_files"),x=this.configSettings.getSettings(e),{pytestArgs:I}=x.testing,O=x.testing.cwd&&x.testing.cwd.length>0?x.testing.cwd:e.fsPath,R={...await(null===(g=this.envVarsService)||void 0===g?void 0:g.getEnvironmentVariables(e))},D=[C,...null!==(b=null===(y=R.PYTHONPATH)||void 0===y?void 0:y.split(a.delimiter))&&void 0!==b?b:[]].join(a.delimiter);R.PYTHONPATH=D,R.TEST_RUN_PIPE=n,o&&o===s.TestRunProfileKind.Coverage&&(R.COVERAGE_ENABLED="True");const k=o&&o===s.TestRunProfileKind.Debug,A={allowEnvironmentFetchExceptions:!1,resource:e,interpreter:m},N=await(null==f?void 0:f.createActivatedEnvironment(A)),j=await(null==N?void 0:N.getExecutablePath());(0,c.traceVerbose)(`Executable path for pytest execution: ${j}.`);try{let o=(0,l.removePositionalFoldersAndFiles)(I);d.addValueIfKeyNotExist(o,"--rootdir",O),k&&!d.argKeyExists(o,"-s")&&(o=d.addValueIfKeyNotExist(o,"--capture","no"));const s=await d.writeTestIdsFile(t);R.RUN_TEST_IDS_PIPE=s,(0,c.traceInfo)(`Environment variables set for pytest execution: PYTHONPATH=${R.PYTHONPATH}, TEST_RUN_PIPE=${R.TEST_RUN_PIPE}, RUN_TEST_IDS_PIPE=${R.RUN_TEST_IDS_PIPE}`);const p={cwd:O,throwOnStdErr:!0,env:R,token:null==i?void 0:i.token};if(k){const t={cwd:O,args:o,token:null==i?void 0:i.token,testProvider:u.PYTEST_PROVIDER,runTestIdsPort:s,pytestPort:n},a={testRun:i};(0,c.traceInfo)(`Running DEBUG pytest with arguments: ${o} for workspace ${e.fsPath} \r\n`),await v.launchDebugger(t,(()=>{r.cancel()}),a)}else if((0,h.useEnvExtension)()){const t=await(0,h.getEnvironment)(e);if(t){const n=d.createTestingDeferred(),s=[a.join(C,"vscode_pytest","run_pytest_script.py"),...o];(0,c.traceInfo)(`Running pytest with arguments: ${s.join(" ")} for workspace ${e.fsPath} \r\n`);const l=await(0,h.runInBackground)(t,{cwd:O,args:s,env:R});null==i||i.token.onCancellationRequested((()=>{(0,c.traceInfo)(`Test run cancelled, killing pytest subprocess for workspace ${e.fsPath}`),l.kill(),n.resolve(),r.cancel()})),l.stdout.on("data",(e=>{const t=d.fixLogLinesNoTrailing(e.toString());null==i||i.appendOutput(t)})),l.stderr.on("data",(e=>{const t=d.fixLogLinesNoTrailing(e.toString());null==i||i.appendOutput(t)})),l.onExit(((t,i)=>{0!==t&&(0,c.traceError)(`Subprocess exited unsuccessfully with exit code ${t} and signal ${i} on workspace ${e.fsPath}`),n.resolve(),r.cancel()})),await n.promise}else(0,c.traceError)(`Python Environment not found for: ${e.fsPath}`)}else{const n=d.createTestingDeferred(),s=[a.join(C,"vscode_pytest","run_pytest_script.py"),...o];let l;(0,c.traceInfo)(`Running pytest with arguments: ${s.join(" ")} for workspace ${e.fsPath} \r\n`),null==i||i.token.onCancellationRequested((()=>{(0,c.traceInfo)(`Test run cancelled, killing pytest subprocess for workspace ${e.fsPath}`),l?null==l||l.kill():(n.resolve(),r.cancel())}));const u=null==N?void 0:N.execObservable(s,p);null===(E=null===(_=null==u?void 0:u.proc)||void 0===_?void 0:_.stdout)||void 0===E||E.on("data",(e=>{const t=d.fixLogLinesNoTrailing(e.toString());null==i||i.appendOutput(t)})),null===(w=null===(S=null==u?void 0:u.proc)||void 0===S?void 0:S.stderr)||void 0===w||w.on("data",(e=>{const t=d.fixLogLinesNoTrailing(e.toString());null==i||i.appendOutput(t)})),null===(P=null==u?void 0:u.proc)||void 0===P||P.on("exit",((t,n)=>{0!==t&&(0,c.traceError)(`Subprocess exited unsuccessfully with exit code ${t} and signal ${n} on workspace ${e.fsPath}`)})),null===(T=null==u?void 0:u.proc)||void 0===T||T.on("close",((o,s)=>{var a;(0,c.traceVerbose)("Test run finished, subprocess closed."),0!==o&&((0,c.traceError)(`Subprocess closed unsuccessfully with exit code ${o} and signal ${s} for workspace ${e.fsPath}. Creating and sending error execution payload \n`),i&&(null===(a=this.resultResolver)||void 0===a||a.resolveExecution(d.createExecutionErrorPayload(o,s,t,O),i))),n.resolve(),r.cancel()})),await n.promise}}catch(n){return(0,c.traceError)(`Error while running tests for workspace ${e}: ${t}\r\n${n}\r\n\r\n`),Promise.reject(n)}return{cwd:O,status:"success",error:""}}}},88537:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTestControllerTypes=void 0;const r=n(11925),i=n(77329),o=n(86294),s=n(97245),a=n(91662),c=n(88376);t.registerTestControllerTypes=function(e){e.addSingleton(o.ITestFrameworkController,a.PytestController,i.PYTEST_PROVIDER),e.addSingleton(o.ITestFrameworkController,c.UnittestController,i.UNITTEST_PROVIDER),e.addSingleton(o.ITestController,s.PythonTestController),e.addBinding(o.ITestController,r.IExtensionSingleActivationService)}},13979:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.UnittestTestDiscoveryAdapter=void 0;const s=o(n(16928)),a=n(54980),c=n(84090),l=n(7855),u=n(50442),p=n(61905),d=n(36380);t.UnittestTestDiscoveryAdapter=class{constructor(e,t,n){this.configSettings=e,this.resultResolver=t,this.envVarsService=n}async discoverTests(e,t,n){var r;const i=this.configSettings.getSettings(e),{unittestArgs:o}=i.testing,d=i.testing.cwd&&i.testing.cwd.length>0?i.testing.cwd:e.fsPath,h=new a.CancellationTokenSource,f=(0,l.createDeferred)();null==n||n.onCancellationRequested((()=>{(0,p.traceInfo)("Test discovery cancelled."),h.cancel(),f.resolve()}));const v=await(0,u.startDiscoveryNamedPipe)((e=>{var t;(null==n?void 0:n.isCancellationRequested)||null===(t=this.resultResolver)||void 0===t||t.resolveDiscovery(e)}),h.token);let m=await(null===(r=this.envVarsService)||void 0===r?void 0:r.getEnvironmentVariables(e));var g;void 0===m&&(m={}),m.TEST_RUN_PIPE=v;const y={workspaceFolder:e,command:(g=o,{script:s.join(c.EXTENSION_ROOT_DIR,"python_files","unittestadapter","discovery.py"),args:["--udiscovery",...g]}),cwd:d,token:n};return this.runDiscovery(e,y,v,d,h,t).then((()=>{f.resolve()})),f.promise}async runDiscovery(e,t,n,r,i,o){var s,a,c,h,f,v,m,g;const y={...await(null===(s=this.envVarsService)||void 0===s?void 0:s.getEnvironmentVariables(e))};y.TEST_RUN_PIPE=n;const b=[t.command.script].concat(t.command.args);if(t.outChannel&&t.outChannel.appendLine(`python ${b.join(" ")}`),(0,d.useEnvExtension)()){const n=await(0,d.getEnvironment)(e);if(n){const o=(0,l.createDeferred)(),s=await(0,d.runInBackground)(n,{cwd:r,args:b,env:y});null===(a=t.token)||void 0===a||a.onCancellationRequested((()=>{(0,p.traceInfo)(`Test discovery cancelled, killing unittest subprocess for workspace ${e.fsPath}`),s.kill(),o.resolve(),i.cancel()})),s.stdout.on("data",(e=>{const t=(0,u.fixLogLinesNoTrailing)(e.toString());(0,p.traceInfo)(t)})),s.stderr.on("data",(e=>{const t=(0,u.fixLogLinesNoTrailing)(e.toString());(0,p.traceError)(t)})),s.onExit(((t,n)=>{0!==t&&(0,p.traceError)(`Subprocess exited unsuccessfully with exit code ${t} and signal ${n} on workspace ${e.fsPath}`),o.resolve()})),await o.promise}else(0,p.traceError)(`Python Environment not found for: ${e.fsPath}`);return}const _={token:t.token,cwd:t.cwd,throwOnStdErr:!0,env:y};try{(0,p.traceLog)(`Discovering unittest tests for workspace ${t.cwd} with arguments: ${b}\r\n`);const n=(0,l.createDeferred)(),s={allowEnvironmentFetchExceptions:!1,resource:t.workspaceFolder},a=await(null==o?void 0:o.createActivatedEnvironment(s)),d=await(null==a?void 0:a.getExecutablePath());let y;(0,p.traceVerbose)(`Executable path for unittest discovery: ${d}.`),null===(c=t.token)||void 0===c||c.onCancellationRequested((()=>{(0,p.traceInfo)(`Test discovery cancelled, killing unittest subprocess for workspace ${e.fsPath}`),y?null==y||y.kill():(n.resolve(),i.cancel())}));const E=null==a?void 0:a.execObservable(b,_);y=null==E?void 0:E.proc,null===(f=null===(h=null==E?void 0:E.proc)||void 0===h?void 0:h.stdout)||void 0===f||f.on("data",(e=>{const t=(0,u.fixLogLinesNoTrailing)(e.toString());(0,p.traceInfo)(t)})),null===(m=null===(v=null==E?void 0:E.proc)||void 0===v?void 0:v.stderr)||void 0===m||m.on("data",(e=>{const t=(0,u.fixLogLinesNoTrailing)(e.toString());(0,p.traceError)(t)})),null===(g=null==E?void 0:E.proc)||void 0===g||g.on("exit",((i,o)=>{var s;0!==i&&((0,p.traceError)(`Subprocess exited unsuccessfully with exit code ${i} and signal ${o} on workspace ${t.cwd}. Creating and sending error discovery payload \n`),(0,p.traceError)(`Subprocess exited unsuccessfully with exit code ${i} and signal ${o} on workspace ${e.fsPath}. Creating and sending error discovery payload`),null===(s=this.resultResolver)||void 0===s||s.resolveDiscovery((0,u.createDiscoveryErrorPayload)(i,o,r))),n.resolve()})),await n.promise}catch(t){(0,p.traceError)(`Error while server attempting to run unittest command for workspace ${e.fsPath}: ${t}`)}}}},20179:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.UnittestTestExecutionAdapter=void 0;const s=o(n(16928)),a=n(54980),c=n(7855),l=n(84090),u=n(61905),p=n(50442),d=n(77329),h=o(n(50442)),f=n(36380);t.UnittestTestExecutionAdapter=class{constructor(e,t,n){this.configSettings=e,this.resultResolver=t,this.envVarsService=n}async runTests(e,t,n,r,i,o){const s=h.createTestingDeferred(),c=new a.CancellationTokenSource;null==r||r.token.onCancellationRequested((()=>c.cancel()));const l=await h.startRunResultNamedPipe((t=>{var n;r&&!r.token.isCancellationRequested?null===(n=this.resultResolver)||void 0===n||n.resolveExecution(t,r):(0,u.traceError)(`No run instance found, cannot resolve execution, for workspace ${e.fsPath}.`)}),s,c.token);null==r||r.token.onCancellationRequested((()=>{console.log(`Test run cancelled, resolving 'till TillAllServerClose' deferred for ${e.fsPath}.`),s.resolve()}));try{await this.runTestsNew(e,t,l,c,r,n,i,o)}catch(e){(0,u.traceError)(`Error in running unittest tests: ${e}`)}finally{await s.promise}}async runTestsNew(e,t,n,r,i,o,v,m){var g,y,b,_,E,S,w,P;const T=this.configSettings.getSettings(e),{unittestArgs:C}=T.testing,x=T.testing.cwd&&T.testing.cwd.length>0?T.testing.cwd:e.fsPath,I=function(e){return{script:s.join(l.EXTENSION_ROOT_DIR,"python_files","unittestadapter","execution.py"),args:["--udiscovery",...e]}}(C);let O=await(null===(g=this.envVarsService)||void 0===g?void 0:g.getEnvironmentVariables(e));void 0===O&&(O={});const R=null!==(b=null===(y=O.PYTHONPATH)||void 0===y?void 0:y.split(s.delimiter))&&void 0!==b?b:[],D=[x,...R].join(s.delimiter);O.PYTHONPATH=D,O.TEST_RUN_PIPE=n,o&&o===a.TestRunProfileKind.Coverage&&(O.COVERAGE_ENABLED=x);const k={workspaceFolder:e,command:I,cwd:x,profileKind:o,testIds:t,token:null==i?void 0:i.token};(0,u.traceLog)(`Running UNITTEST execution for the following test ids: ${t}`);const A=await h.writeTestIdsFile(t);O.RUN_TEST_IDS_PIPE=A,(0,u.traceInfo)(`All environment variables set for unittest execution, PYTHONPATH: ${JSON.stringify(O.PYTHONPATH)}`);const N={token:k.token,cwd:k.cwd,throwOnStdErr:!0,env:O},j={allowEnvironmentFetchExceptions:!1,resource:k.workspaceFolder},M=await(null==v?void 0:v.createActivatedEnvironment(j)),L=await(null==M?void 0:M.getExecutablePath());(0,u.traceVerbose)(`Executable path for unittest execution: ${L}.`);const F=[k.command.script].concat(k.command.args);k.outChannel&&k.outChannel.appendLine(`python ${F.join(" ")}`);try{if(k.profileKind&&k.profileKind===a.TestRunProfileKind.Debug){const e={cwd:k.cwd,args:F,token:k.token,testProvider:d.UNITTEST_PROVIDER,runTestIdsPort:A,pytestPort:n},t={testRun:i};if((0,u.traceInfo)(`Running DEBUG unittest for workspace ${k.cwd} with arguments: ${F}\r\n`),void 0===m)throw(0,u.traceError)("Debug launcher is not defined"),new Error("Debug launcher is not defined");await m.launchDebugger(e,(()=>{r.cancel()}),t)}else if((0,f.useEnvExtension)()){const t=await(0,f.getEnvironment)(e);if(t){(0,u.traceInfo)(`Running unittest with arguments: ${F.join(" ")} for workspace ${e.fsPath} \r\n`);const n=(0,c.createDeferred)(),o=await(0,f.runInBackground)(t,{cwd:x,args:F,env:O});null==i||i.token.onCancellationRequested((()=>{(0,u.traceInfo)(`Test run cancelled, killing unittest subprocess for workspace ${e.fsPath}`),o.kill(),n.resolve(),r.cancel()})),o.stdout.on("data",(e=>{const t=h.fixLogLinesNoTrailing(e.toString());null==i||i.appendOutput(t)})),o.stderr.on("data",(e=>{const t=h.fixLogLinesNoTrailing(e.toString());null==i||i.appendOutput(t)})),o.onExit(((t,i)=>{0!==t&&(0,u.traceError)(`Subprocess exited unsuccessfully with exit code ${t} and signal ${i} on workspace ${e.fsPath}`),n.resolve(),r.cancel()})),await n.promise}else(0,u.traceError)(`Python Environment not found for: ${e.fsPath}`)}else{(0,u.traceInfo)(`Running unittests for workspace ${x} with arguments: ${F}\r\n`);const e=(0,c.createDeferred)();let n;null==i||i.token.onCancellationRequested((()=>{(0,u.traceInfo)(`Test run cancelled, killing unittest subprocess for workspace ${x}.`),n?null==n||n.kill():(null==e||e.resolve(),r.cancel())}));const o=null==M?void 0:M.execObservable(F,N);n=null==o?void 0:o.proc,null===(E=null===(_=null==o?void 0:o.proc)||void 0===_?void 0:_.stdout)||void 0===E||E.on("data",(e=>{const t=(0,p.fixLogLinesNoTrailing)(e.toString());null==i||i.appendOutput(`${t}`)})),null===(w=null===(S=null==o?void 0:o.proc)||void 0===S?void 0:S.stderr)||void 0===w||w.on("data",(e=>{const t=(0,p.fixLogLinesNoTrailing)(e.toString());null==i||i.appendOutput(`${t}`)})),null===(P=null==o?void 0:o.proc)||void 0===P||P.on("exit",((n,o)=>{var s;0!==n&&t&&((0,u.traceError)(`Subprocess exited unsuccessfully with exit code ${n} and signal ${o} for workspace ${k.cwd}. Creating and sending error execution payload \n`),i&&(null===(s=this.resultResolver)||void 0===s||s.resolveExecution(h.createExecutionErrorPayload(n,o,t,x),i))),e.resolve(),r.cancel()})),await e.promise}}catch(n){return(0,u.traceError)(`Error while running tests for workspace ${e}: ${t}\r\n${n}\r\n\r\n`),Promise.reject(n)}return{cwd:x,status:"success",error:""}}}},88376:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnittestController=void 0;const o=n(25891),s=n(54661),a=n(64230);let c=class{constructor(e){this.workspaceService=e,this.testData=new Map,this.discovering=new Map,this.idToRawData=new Map}async resolveChildren(e,t,n){const r=this.workspaceService.getWorkspaceFolder(t.uri);if(r){const i=this.discovering.get(r.uri.fsPath);i&&await i.promise;const o=this.testData.get(r.uri.fsPath);if(o)if(o.root===t.id){if(0===o.tests.length)return e.items.delete(t.id),Promise.resolve();o.tests.length>0?await(0,a.updateTestItemFromRawData)(t,e,this.idToRawData,t.id,[o],n):(this.idToRawData.delete(t.id),e.items.delete(t.id))}else{const r=(0,a.getWorkspaceNode)(t,this.idToRawData);r&&await(0,a.updateTestItemFromRawData)(t,e,this.idToRawData,r.id,[o],n)}else{const n=(0,a.getWorkspaceNode)(t,this.idToRawData);n&&e.items.delete(n.id)}}return Promise.resolve()}};t.UnittestController=c,t.UnittestController=c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IWorkspaceService))],c)},60369:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceTestAdapter=void 0;const s=o(n(39023)),a=n(7855),c=n(14152),l=n(61905),u=n(51535),p=n(53322),d=n(64230),h=n(50442);t.WorkspaceTestAdapter=class{constructor(e,t,n,r,i){this.testProvider=e,this.discoveryAdapter=t,this.executionAdapter=n,this.workspaceUri=r,this.resultResolver=i}async executeTests(e,t,n,r,i,o,f,v){if(this.executing)return(0,l.traceError)("Test execution already in progress, not starting a new one."),this.executing.promise;const m=(0,a.createDeferred)();this.executing=m;const g=[],y=new Set;try{n.forEach((e=>{const t=(0,d.getTestCaseNodes)(e);g.push(...t)})),g.forEach((e=>{t.started(e);const n=this.resultResolver.vsIdToRunId.get(e.id);n&&y.add(n)}));const e=Array.from(y);void 0!==o?await this.executionAdapter.runTests(this.workspaceUri,e,i,t,o,f,v):await this.executionAdapter.runTests(this.workspaceUri,e,i),m.resolve()}catch(t){(0,u.sendTelemetryEvent)(p.EventName.UNITTEST_RUN_ALL_FAILED,void 0);let n=(null==r?void 0:r.isCancellationRequested)?c.Testing.cancelUnittestExecution:c.Testing.errorUnittestExecution;"pytest"===this.testProvider&&(n=(null==r?void 0:r.isCancellationRequested)?c.Testing.cancelPytestExecution:c.Testing.errorPytestExecution),(0,l.traceError)(`${n}\r\n`,t);const i=s.format(`${n} ${c.Testing.seePythonOutput}\r\n`,t),o=(0,h.buildErrorNodeOptions)(this.workspaceUri,i,this.testProvider),a=(0,d.createErrorTestItem)(e,o);e.items.add(a),m.reject(t)}finally{this.executing=void 0}return Promise.resolve()}async discoverTests(e,t,n,r){if((0,u.sendTelemetryEvent)(p.EventName.UNITTEST_DISCOVERING,void 0,{tool:this.testProvider}),this.discovering)return(0,l.traceError)("Test discovery already in progress, not starting a new one."),this.discovering.promise;const i=(0,a.createDeferred)();this.discovering=i;try{void 0!==n?await this.discoveryAdapter.discoverTests(this.workspaceUri,n,t,r):await this.discoveryAdapter.discoverTests(this.workspaceUri),i.resolve()}catch(n){(0,u.sendTelemetryEvent)(p.EventName.UNITTEST_DISCOVERY_DONE,void 0,{tool:this.testProvider,failed:!0});let r=(null==t?void 0:t.isCancellationRequested)?c.Testing.cancelUnittestDiscovery:c.Testing.errorUnittestDiscovery;"pytest"===this.testProvider&&(r=(null==t?void 0:t.isCancellationRequested)?c.Testing.cancelPytestDiscovery:c.Testing.errorPytestDiscovery),(0,l.traceError)(`${r} for workspace: ${this.workspaceUri} \r\n`,n);const o=s.format(`${r} ${c.Testing.seePythonOutput}\r\n`,n),a=(0,h.buildErrorNodeOptions)(this.workspaceUri,o,this.testProvider),f=(0,d.createErrorTestItem)(e,a);return e.items.add(f),i.reject(n)}finally{this.discovering=void 0}return(0,u.sendTelemetryEvent)(p.EventName.UNITTEST_DISCOVERY_DONE,void 0,{tool:this.testProvider,failed:!1}),Promise.resolve()}getTestProvider(){return this.testProvider}}},89113:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITestingService=void 0,t.ITestingService=Symbol("ITestingService")},50109:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clipboardWriteText=t.idToModuleClassMethod=t.writeTestIdToClipboard=void 0;const r=n(54980),i=n(61905);function o(e){const t=e.split("\\");if(1===t.length)return t[0];if(2===t.length){const[e,n]=t.slice(-2),r=e.split(/[\\/]/).pop();if(!r)return;return`${r.replace(/\.py$/,"")}.${n}`}const[n,r,i]=t.slice(-3),o=n.split(/[\\/]/).pop();return o?`${o.replace(/\.py$/,"")}.${r}.${i}`:void 0}function s(e){return r.env.clipboard.writeText(e)}t.writeTestIdToClipboard=async function(e){if(e&&"string"==typeof e.id){if(e.id.includes("\\")&&-1===e.id.indexOf("::")){const t=o(e.id);if(t)return await r.env.clipboard.writeText(t),void(0,i.traceLog)("Testing: Copied test id to clipboard, id: "+t)}await s(e.id),(0,i.traceLog)("Testing: Copied test id to clipboard, id: "+e.id)}},t.idToModuleClassMethod=o,t.clipboardWriteText=s},93710:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RestError:()=>Qe,bearerTokenAuthenticationPolicy:()=>Ot,bearerTokenAuthenticationPolicyName:()=>xt,createDefaultHttpClient:()=>mt,createEmptyPipeline:()=>o,createHttpHeaders:()=>lt,createPipelineFromOptions:()=>nt,createPipelineRequest:()=>bt,decompressResponsePolicy:()=>X,decompressResponsePolicyName:()=>J,defaultRetryPolicy:()=>ye,exponentialRetryPolicy:()=>Et,exponentialRetryPolicyName:()=>_t,formDataPolicy:()=>Se,formDataPolicyName:()=>Ee,getDefaultProxySettings:()=>Me,isRestError:()=>Ze,logPolicy:()=>V,logPolicyName:()=>F,ndJsonPolicy:()=>Dt,ndJsonPolicyName:()=>Rt,proxyPolicy:()=>Fe,proxyPolicyName:()=>De,redirectPolicy:()=>H,redirectPolicyName:()=>U,retryPolicy:()=>me,setClientRequestIdPolicy:()=>Ue,setClientRequestIdPolicyName:()=>Ve,systemErrorRetryPolicy:()=>wt,systemErrorRetryPolicyName:()=>St,throttlingRetryPolicy:()=>Tt,throttlingRetryPolicyName:()=>Pt,tlsPolicy:()=>He,tlsPolicyName:()=>We,tracingPolicy:()=>tt,tracingPolicyName:()=>et,userAgentPolicy:()=>Y,userAgentPolicyName:()=>z});const r=new Set(["Deserialize","Serialize","Retry","Sign"]);class i{constructor(e){var t;this._policies=[],this._policies=null!==(t=null==e?void 0:e.slice(0))&&void 0!==t?t:[],this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!r.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!r.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){const t=[];return this._policies=this._policies.filter((n=>!(e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase)||(t.push(n.policy),!1))),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight(((e,t)=>n=>t.sendRequest(n,e)),(t=>e.sendRequest(t)))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new i(this._policies)}static create(){return new i}orderPolicies(){const e=[],t=new Map;function n(e){return{name:e,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const r=n("Serialize"),i=n("None"),o=n("Deserialize"),s=n("Retry"),a=n("Sign"),c=[r,i,o,s,a];function l(e){return"Retry"===e?s:"Serialize"===e?r:"Deserialize"===e?o:"Sign"===e?a:i}for(const e of this._policies){const n=e.policy,r=e.options,i=n.name;if(t.has(i))throw new Error("Duplicate policy names not allowed in pipeline");const o={policy:n,dependsOn:new Set,dependants:new Set};r.afterPhase&&(o.afterPhase=l(r.afterPhase),o.afterPhase.hasAfterPolicies=!0),t.set(i,o),l(r.phase).policies.add(o)}for(const e of this._policies){const{policy:n,options:r}=e,i=n.name,o=t.get(i);if(!o)throw new Error(`Missing node for policy ${i}`);if(r.afterPolicies)for(const e of r.afterPolicies){const n=t.get(e);n&&(o.dependsOn.add(n),n.dependants.add(o))}if(r.beforePolicies)for(const e of r.beforePolicies){const n=t.get(e);n&&(n.dependsOn.add(o),o.dependants.add(n))}}function u(n){n.hasRun=!0;for(const r of n.policies)if((!r.afterPhase||r.afterPhase.hasRun&&!r.afterPhase.policies.size)&&0===r.dependsOn.size){e.push(r.policy);for(const e of r.dependants)e.dependsOn.delete(r);t.delete(r.policy.name),n.policies.delete(r)}}function p(){for(const e of c){if(u(e),e.policies.size>0&&e!==i)return void(i.hasRun||u(i));e.hasAfterPolicies&&u(i)}}let d=0;for(;t.size>0;){d++;const t=e.length;if(p(),e.length<=t&&d>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}function o(){return i.create()}var s=n(70857),a=n(39023),c=n.n(a);const l="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0;let u,p=[],d=[];const h=[];l&&v(l);const f=Object.assign((e=>g(e)),{enable:v,enabled:m,disable:function(){const e=u||"";return v(""),e},log:function(e,...t){process.stderr.write(`${c().format(e,...t)}${s.EOL}`)}});function v(e){u=e,p=[],d=[];const t=/\*/g,n=e.split(",").map((e=>e.trim().replace(t,".*?")));for(const e of n)e.startsWith("-")?d.push(new RegExp(`^${e.substr(1)}$`)):p.push(new RegExp(`^${e}$`));for(const e of h)e.enabled=m(e.namespace)}function m(e){if(e.endsWith("*"))return!0;for(const t of d)if(t.test(e))return!1;for(const t of p)if(t.test(e))return!0;return!1}function g(e){const t=Object.assign((function(...n){t.enabled&&(n.length>0&&(n[0]=`${e} ${n[0]}`),t.log(...n))}),{enabled:m(e),destroy:y,log:f.log,namespace:e,extend:b});return h.push(t),t}function y(){const e=h.indexOf(this);return e>=0&&(h.splice(e,1),!0)}function b(e){const t=g(`${this.namespace}:${e}`);return t.log=this.log,t}const _=f,E=new Set,S="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0;let w;const P=_("azure");P.log=(...e)=>{_.log(...e)};const T=["verbose","info","warning","error"];S&&(D(S)?function(e){if(e&&!D(e))throw new Error(`Unknown log level '${e}'. Acceptable values: ${T.join(",")}`);w=e;const t=[];for(const e of E)R(e)&&t.push(e.namespace);_.enable(t.join(","))}(S):console.error(`AZURE_LOG_LEVEL set to unknown log level '${S}'; logging is not enabled. Acceptable values: ${T.join(", ")}.`));const C={verbose:400,info:300,warning:200,error:100};function x(e){const t=P.extend(e);return I(P,t),{error:O(t,"error"),warning:O(t,"warning"),info:O(t,"info"),verbose:O(t,"verbose")}}function I(e,t){t.log=(...t)=>{e.log(...t)}}function O(e,t){const n=Object.assign(e.extend(t),{level:t});if(I(e,n),R(n)){const e=_.disable();_.enable(e+","+n.namespace)}return E.add(n),n}function R(e){return Boolean(w&&C[e.level]<=C[w])}function D(e){return T.includes(e)}const k=x("core-rest-pipeline");function A(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}const N="REDACTED",j=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],M=["api-version"];class L{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=j.concat(e),t=M.concat(t),this.allowedHeaderNames=new Set(e.map((e=>e.toLowerCase()))),this.allowedQueryParameters=new Set(t.map((e=>e.toLowerCase())))}sanitize(e){const t=new Set;return JSON.stringify(e,((e,n)=>{if(n instanceof Error)return Object.assign(Object.assign({},n),{name:n.name,message:n.message});if("headers"===e)return this.sanitizeHeaders(n);if("url"===e)return this.sanitizeUrl(n);if("query"===e)return this.sanitizeQuery(n);if("body"!==e&&"response"!==e&&"operationSpec"!==e){if(Array.isArray(n)||A(n)){if(t.has(n))return"[Circular]";t.add(n)}return n}}),2)}sanitizeHeaders(e){const t={};for(const n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?t[n]=e[n]:t[n]=N;return t}sanitizeQuery(e){if("object"!=typeof e||null===e)return e;const t={};for(const n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?t[n]=e[n]:t[n]=N;return t}sanitizeUrl(e){if("string"!=typeof e||null===e)return e;const t=new URL(e);if(!t.search)return e;for(const[e]of t.searchParams)this.allowedQueryParameters.has(e.toLowerCase())||t.searchParams.set(e,N);return t.toString()}}const F="logPolicy";function V(e={}){var t;const n=null!==(t=e.logger)&&void 0!==t?t:k.info,r=new L({additionalAllowedHeaderNames:e.additionalAllowedHeaderNames,additionalAllowedQueryParameters:e.additionalAllowedQueryParameters});return{name:F,async sendRequest(e,t){if(!n.enabled)return t(e);n(`Request: ${r.sanitize(e)}`);const i=await t(e);return n(`Response status code: ${i.status}`),n(`Headers: ${r.sanitize(i.headers)}`),i}}}const U="redirectPolicy",W=["GET","HEAD"];function H(e={}){const{maxRetries:t=20}=e;return{name:U,async sendRequest(e,n){const r=await n(e);return q(n,r,t)}}}async function q(e,t,n,r=0){const{request:i,status:o,headers:s}=t,a=s.get("location");if(a&&(300===o||301===o&&W.includes(i.method)||302===o&&W.includes(i.method)||303===o&&"POST"===i.method||307===o)&&r<n){const t=new URL(a,i.url);i.url=t.toString(),303===o&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");const s=await e(i);return q(e,s,n,r+1)}return t}const $="1.10.1",B=3;function K(e){const t=new Map;var n;t.set("core-rest-pipeline",$),(n=t).set("Node",process.version),n.set("OS",`(${s.arch()}-${s.type()}-${s.release()})`);const r=function(e){const t=[];for(const[n,r]of e){const e=r?`${n}/${r}`:n;t.push(e)}return t.join(" ")}(t);return e?`${e} ${r}`:r}const G="User-Agent",z="userAgentPolicy";function Y(e={}){const t=K(e.userAgentPrefix);return{name:z,sendRequest:async(e,n)=>(e.headers.has(G)||e.headers.set(G,t),n(e))}}const J="decompressResponsePolicy";function X(){return{name:J,sendRequest:async(e,t)=>("HEAD"!==e.method&&e.headers.set("Accept-Encoding","gzip,deflate"),t(e))}}const Q=new WeakMap,Z=new WeakMap;class ee{constructor(){this.onabort=null,Q.set(this,[]),Z.set(this,!1)}get aborted(){if(!Z.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return Z.get(this)}static get none(){return new ee}addEventListener(e,t){if(!Q.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");Q.get(this).push(t)}removeEventListener(e,t){if(!Q.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");const n=Q.get(this),r=n.indexOf(t);r>-1&&n.splice(r,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}function te(e){if(e.aborted)return;e.onabort&&e.onabort.call(e);const t=Q.get(e);t&&t.slice().forEach((t=>{t.call(e,{type:"abort"})})),Z.set(e,!0)}class ne extends Error{constructor(e){super(e),this.name="AbortError"}}class re{constructor(e){if(this._signal=new ee,e){Array.isArray(e)||(e=arguments);for(const t of e)t.aborted?this.abort():t.addEventListener("abort",(()=>{this.abort()}))}}get signal(){return this._signal}abort(){te(this._signal)}static timeout(e){const t=new ee,n=setTimeout(te,e,t);return"function"==typeof n.unref&&n.unref(),t}}const ie="The operation was aborted.";function oe(e,t,n){return new Promise(((r,i)=>{let o,s;const a=()=>i(new ne((null==n?void 0:n.abortErrorMsg)?null==n?void 0:n.abortErrorMsg:ie)),c=()=>{(null==n?void 0:n.abortSignal)&&s&&n.abortSignal.removeEventListener("abort",s)};if(s=()=>(o&&clearTimeout(o),c(),a()),(null==n?void 0:n.abortSignal)&&n.abortSignal.aborted)return a();o=setTimeout((()=>{c(),r(t)}),e),(null==n?void 0:n.abortSignal)&&n.abortSignal.addEventListener("abort",s)}))}function se(e,t){const n=e.headers.get(t);if(!n)return;const r=Number(n);return Number.isNaN(r)?void 0:r}const ae="Retry-After",ce=["retry-after-ms","x-ms-retry-after-ms",ae];function le(e){if(e&&[429,503].includes(e.status))try{for(const t of ce){const n=se(e,t);if(0===n||n)return n*(t===ae?1e3:1)}const t=e.headers.get(ae);if(!t)return;const n=Date.parse(t)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch(e){return}}function ue(){return{name:"throttlingRetryStrategy",retry({response:e}){const t=le(e);return Number.isFinite(t)?{retryAfterInMs:t}:{skipStrategy:!0}}}}const pe=1e3,de=64e3;function he(e={}){var t,n;const r=null!==(t=e.retryDelayInMs)&&void 0!==t?t:pe,i=null!==(n=e.maxRetryDelayInMs)&&void 0!==n?n:de;let o=r;return{name:"exponentialRetryStrategy",retry({retryCount:t,response:n,responseError:r}){const s=!!(p=r)&&("ETIMEDOUT"===p.code||"ESOCKETTIMEDOUT"===p.code||"ECONNREFUSED"===p.code||"ECONNRESET"===p.code||"ENOENT"===p.code),a=s&&e.ignoreSystemErrors,c=function(e){return Boolean(e&&void 0!==e.status&&(e.status>=500||408===e.status)&&501!==e.status&&505!==e.status)}(n),l=c&&e.ignoreHttpStatusCodes,u=n&&(function(e){return Number.isFinite(le(e))}(n)||!c);var p;if(u||l||a)return{skipStrategy:!0};if(r&&!s&&!c)return{errorToThrow:r};const d=o*Math.pow(2,t),h=Math.min(i,d);var f,v;return o=h/2+(f=0,v=h/2,f=Math.ceil(f),v=Math.floor(v),Math.floor(Math.random()*(v-f+1))+f),{retryAfterInMs:o}}}}const fe=x("core-rest-pipeline retryPolicy"),ve="retryPolicy";function me(e,t={maxRetries:B}){const n=t.logger||fe;return{name:ve,async sendRequest(r,i){var o,s;let a,c,l=-1;e:for(;;){l+=1,a=void 0,c=void 0;try{n.info(`Retry ${l}: Attempting to send request`,r.requestId),a=await i(r),n.info(`Retry ${l}: Received a response from request`,r.requestId)}catch(e){if(n.error(`Retry ${l}: Received an error from request`,r.requestId),c=e,!e||"RestError"!==c.name)throw e;a=c.response}if(null===(o=r.abortSignal)||void 0===o?void 0:o.aborted)throw n.error(`Retry ${l}: Request aborted.`),new ne;if(l>=(null!==(s=t.maxRetries)&&void 0!==s?s:B)){if(n.info(`Retry ${l}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}n.info(`Retry ${l}: Processing ${e.length} retry strategies.`);t:for(const t of e){const e=t.logger||fe;e.info(`Retry ${l}: Processing retry strategy ${t.name}.`);const n=t.retry({retryCount:l,response:a,responseError:c});if(n.skipStrategy){e.info(`Retry ${l}: Skipped.`);continue t}const{errorToThrow:i,retryAfterInMs:o,redirectTo:s}=n;if(i)throw e.error(`Retry ${l}: Retry strategy ${t.name} throws error:`,i),i;if(o||0===o){e.info(`Retry ${l}: Retry strategy ${t.name} retries after ${o}`),await oe(o,void 0,{abortSignal:r.abortSignal});continue e}if(s){e.info(`Retry ${l}: Retry strategy ${t.name} redirects to ${s}`),r.url=s;continue e}}if(c)throw n.info("None of the retry strategies could work with the received error. Throwing it."),c;if(a)return n.info("None of the retry strategies could work with the received response. Returning it."),a}}}}const ge="defaultRetryPolicy";function ye(e={}){var t;return{name:ge,sendRequest:me([ue(),he(e)],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:B}).sendRequest}}var be=n(30737),_e=n.n(be);const Ee="formDataPolicy";function Se(){return{name:Ee,async sendRequest(e,t){if(e.formData){const t=e.headers.get("Content-Type");t&&-1!==t.indexOf("application/x-www-form-urlencoded")?(e.body=function(e){const t=new URLSearchParams;for(const[n,r]of Object.entries(e))if(Array.isArray(r))for(const e of r)t.append(n,e.toString());else t.append(n,r.toString());return t.toString()}(e.formData),e.formData=void 0):await async function(e,t){const n=new(_e());for(const t of Object.keys(e)){const r=e[t];if(Array.isArray(r))for(const e of r)n.append(t,e);else n.append(t,r)}t.body=n,t.formData=void 0;const r=t.headers.get("Content-Type");r&&-1!==r.indexOf("multipart/form-data")&&t.headers.set("Content-Type",`multipart/form-data; boundary=${n.getBoundary()}`);try{const e=await new Promise(((e,t)=>{n.getLength(((n,r)=>{n?t(n):e(r)}))}));t.headers.set("Content-Length",e)}catch(e){}}(e.formData,e)}return t(e)}}}var we;const Pe="undefined"!=typeof process&&Boolean(process.version)&&Boolean(null===(we=process.versions)||void 0===we?void 0:we.node);var Te=n(62288),Ce=n(11344);const xe="HTTPS_PROXY",Ie="HTTP_PROXY",Oe="ALL_PROXY",Re="NO_PROXY",De="proxyPolicy",ke=[];let Ae=!1;const Ne=new Map;function je(e){return process.env[e]?process.env[e]:process.env[e.toLowerCase()]?process.env[e.toLowerCase()]:void 0}function Me(e){if(!e&&!(e=function(){if(!process)return;const e=je(xe),t=je(Oe),n=je(Ie);return e||t||n}()))return;const t=new URL(e);return{host:(t.protocol?t.protocol+"//":"")+t.hostname,port:Number.parseInt(t.port||"80"),username:t.username,password:t.password}}function Le(e,{headers:t,tlsSettings:n}){let r;try{r=new URL(e.host)}catch(t){throw new Error(`Expecting a valid host string in proxy settings, but found "${e.host}".`)}n&&k.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");const i={hostname:r.hostname,port:e.port,protocol:r.protocol,headers:t.toJSON()};return e.username&&e.password?i.auth=`${e.username}:${e.password}`:e.username&&(i.auth=`${e.username}`),i}function Fe(e=Me(),t){Ae||ke.push(...function(){const e=je(Re);return Ae=!0,e?e.split(",").map((e=>e.trim())).filter((e=>e.length)):[]}());const n={};return{name:De,async sendRequest(r,i){var o;return r.proxySettings||function(e,t,n){if(0===t.length)return!1;const r=new URL(e).hostname;if(null==n?void 0:n.has(r))return n.get(r);let i=!1;for(const e of t)"."===e[0]?(r.endsWith(e)||r.length===e.length-1&&r===e.slice(1))&&(i=!0):r===e&&(i=!0);return null==n||n.set(r,i),i}(r.url,null!==(o=null==t?void 0:t.customNoProxyList)&&void 0!==o?o:ke,(null==t?void 0:t.customNoProxyList)?void 0:Ne)||(r.proxySettings=e),r.proxySettings&&function(e,t){if(e.agent)return;const n="https:"!==new URL(e.url).protocol,r=e.proxySettings;if(r)if(n){if(!t.httpProxyAgent){const n=Le(r,e);t.httpProxyAgent=new Ce.HttpProxyAgent(n)}e.agent=t.httpProxyAgent}else{if(!t.httpsProxyAgent){const n=Le(r,e);t.httpsProxyAgent=new Te.HttpsProxyAgent(n)}e.agent=t.httpsProxyAgent}}(r,n),i(r)}}}const Ve="setClientRequestIdPolicy";function Ue(e="x-ms-client-request-id"){return{name:Ve,sendRequest:async(t,n)=>(t.headers.has(e)||t.headers.set(e,t.requestId),n(t))}}const We="tlsPolicy";function He(e){return{name:We,sendRequest:async(t,n)=>(t.tlsSettings||(t.tlsSettings=e),n(t))}}const qe={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function $e(e={}){let t=new Be(e.parentContext);return e.span&&(t=t.setValue(qe.span,e.span)),e.namespace&&(t=t.setValue(qe.namespace,e.namespace)),t}class Be{constructor(e){this._contextMap=e instanceof Be?new Map(e._contextMap):new Map}setValue(e,t){const n=new Be(this);return n._contextMap.set(e,t),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){const t=new Be(this);return t._contextMap.delete(e),t}}let Ke;function Ge(){return Ke||(Ke={createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(e,t)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}},tracingContext:$e({parentContext:t.tracingContext})}),withContext:(e,t,...n)=>t(...n)}),Ke}function ze(e){if(A(e)){const t="string"==typeof e.name,n="string"==typeof e.message;return t&&n}return!1}function Ye(e){if(ze(e))return e.message;{let t;try{t="object"==typeof e&&e?JSON.stringify(e):String(e)}catch(e){t="[unable to stringify input]"}return`Unknown error ${t}`}}const Je=a.inspect.custom,Xe=new L;class Qe extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,this.request=t.request,this.response=t.response,Object.setPrototypeOf(this,Qe.prototype)}[Je](){return`RestError: ${this.message} \n ${Xe.sanitize(this)}`}}function Ze(e){return e instanceof Qe||ze(e)&&"RestError"===e.name}Qe.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",Qe.PARSE_ERROR="PARSE_ERROR";const et="tracingPolicy";function tt(e={}){const t=K(e.userAgentPrefix),n=function(){try{return function(e){const{namespace:t,packageName:n,packageVersion:r}=e;function i(e,i,o){var s;const a=Ge().startSpan(e,Object.assign(Object.assign({},o),{packageName:n,packageVersion:r,tracingContext:null===(s=null==i?void 0:i.tracingOptions)||void 0===s?void 0:s.tracingContext}));let c=a.tracingContext;const l=a.span;return c.getValue(qe.namespace)||(c=c.setValue(qe.namespace,t)),l.setAttribute("az.namespace",c.getValue(qe.namespace)),{span:l,updatedOptions:Object.assign({},i,{tracingOptions:Object.assign(Object.assign({},null==i?void 0:i.tracingOptions),{tracingContext:c})})}}function o(e,t,...n){return Ge().withContext(e,t,...n)}return{startSpan:i,withSpan:async function(e,t,n,r){const{span:s,updatedOptions:a}=i(e,t,r);try{const e=await o(a.tracingOptions.tracingContext,(()=>Promise.resolve(n(a,s))));return s.setStatus({status:"success"}),e}catch(e){throw s.setStatus({status:"error",error:e}),e}finally{s.end()}},withContext:o,parseTraceparentHeader:function(e){return Ge().parseTraceparentHeader(e)},createRequestHeaders:function(e){return Ge().createRequestHeaders(e)}}}({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:$})}catch(e){return void k.warning(`Error when creating the TracingClient: ${Ye(e)}`)}}();return{name:et,async sendRequest(e,r){var i,o;if(!n||!(null===(i=e.tracingOptions)||void 0===i?void 0:i.tracingContext))return r(e);const{span:s,tracingContext:a}=null!==(o=function(e,t,n){try{const{span:r,updatedOptions:i}=e.startSpan(`HTTP ${t.method}`,{tracingOptions:t.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":t.method,"http.url":t.url,requestId:t.requestId}});if(!r.isRecording())return void r.end();n&&r.setAttribute("http.user_agent",n);const o=e.createRequestHeaders(i.tracingOptions.tracingContext);for(const[e,n]of Object.entries(o))t.headers.set(e,n);return{span:r,tracingContext:i.tracingOptions.tracingContext}}catch(e){return void k.warning(`Skipping creating a tracing span due to an error: ${Ye(e)}`)}}(n,e,t))&&void 0!==o?o:{};if(!s||!a)return r(e);try{const t=await n.withContext(a,r,e);return function(e,t){try{e.setAttribute("http.status_code",t.status);const n=t.headers.get("x-ms-request-id");n&&e.setAttribute("serviceRequestId",n),e.setStatus({status:"success"}),e.end()}catch(e){k.warning(`Skipping tracing span processing due to an error: ${Ye(e)}`)}}(s,t),t}catch(e){throw function(e,t){try{e.setStatus({status:"error",error:ze(t)?t:void 0}),Ze(t)&&t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(e){k.warning(`Skipping tracing span processing due to an error: ${Ye(e)}`)}}(s,e),e}}}}function nt(e){const t=o();return Pe&&(e.tlsOptions&&t.addPolicy(He(e.tlsOptions)),t.addPolicy(Fe(e.proxyOptions)),t.addPolicy(X())),t.addPolicy(Se()),t.addPolicy(Y(e.userAgentOptions)),t.addPolicy(Ue()),t.addPolicy(ye(e.retryOptions),{phase:"Retry"}),t.addPolicy(tt(e.userAgentOptions),{afterPhase:"Retry"}),Pe&&t.addPolicy(H(e.redirectOptions),{afterPhase:"Retry"}),t.addPolicy(V(e.loggingOptions),{afterPhase:"Sign"}),t}var rt=n(58611),it=n(65692),ot=n(43106),st=n(2203);function at(e){return e.toLowerCase()}class ct{constructor(e){if(this._headersMap=new Map,e)for(const t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(at(e),{name:e,value:String(t)})}get(e){var t;return null===(t=this._headersMap.get(at(e)))||void 0===t?void 0:t.value}has(e){return this._headersMap.has(at(e))}delete(e){this._headersMap.delete(at(e))}toJSON(e={}){const t={};if(e.preserveCase)for(const e of this._headersMap.values())t[e.name]=e.value;else for(const[e,n]of this._headersMap)t[e]=n.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(e){for(const t of e.values())yield[t.name,t.value]}(this._headersMap)}}function lt(e){return new ct(e)}const ut={};function pt(e){return e&&"function"==typeof e.pipe}function dt(e){return new Promise((t=>{e.on("close",t),e.on("end",t),e.on("error",t)}))}function ht(e){return e&&"number"==typeof e.byteLength}class ft extends st.Transform{constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}_transform(e,t,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(e){n(e)}}}class vt{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var t,n,r;const i=new re;let o;if(e.abortSignal){if(e.abortSignal.aborted)throw new ne("The operation was aborted.");o=e=>{"abort"===e.type&&i.abort()},e.abortSignal.addEventListener("abort",o)}e.timeout>0&&setTimeout((()=>{i.abort()}),e.timeout);const s=e.headers.get("Accept-Encoding"),a=(null==s?void 0:s.includes("gzip"))||(null==s?void 0:s.includes("deflate"));let c,l="function"==typeof e.body?e.body():e.body;if(l&&!e.headers.has("Content-Length")){const t=function(e){return e?Buffer.isBuffer(e)?e.length:pt(e)?null:ht(e)?e.byteLength:"string"==typeof e?Buffer.from(e).length:null:0}(l);null!==t&&e.headers.set("Content-Length",t)}try{if(l&&e.onUploadProgress){const t=e.onUploadProgress,n=new ft(t);n.on("error",(e=>{k.error("Error in upload progress",e)})),pt(l)?l.pipe(n):n.end(l),l=n}const o=await this.makeRequest(e,i,l),s=function(e){const t=lt();for(const n of Object.keys(e.headers)){const r=e.headers[n];Array.isArray(r)?r.length>0&&t.set(n,r[0]):r&&t.set(n,r)}return t}(o),p={status:null!==(t=o.statusCode)&&void 0!==t?t:0,headers:s,request:e};if("HEAD"===e.method)return o.resume(),p;c=a?function(e,t){const n=t.get("Content-Encoding");if("gzip"===n){const t=ot.createGunzip();return e.pipe(t),t}if("deflate"===n){const t=ot.createInflate();return e.pipe(t),t}return e}(o,s):o;const d=e.onDownloadProgress;if(d){const e=new ft(d);e.on("error",(e=>{k.error("Error in download progress",e)})),c.pipe(e),c=e}return(null===(n=e.streamResponseStatusCodes)||void 0===n?void 0:n.has(Number.POSITIVE_INFINITY))||(null===(r=e.streamResponseStatusCodes)||void 0===r?void 0:r.has(p.status))?p.readableStreamBody=c:p.bodyAsText=await(u=c,new Promise(((e,t)=>{const n=[];u.on("data",(e=>{Buffer.isBuffer(e)?n.push(e):n.push(Buffer.from(e))})),u.on("end",(()=>{e(Buffer.concat(n).toString("utf8"))})),u.on("error",(e=>{e&&"AbortError"===(null==e?void 0:e.name)?t(e):t(new Qe(`Error reading response as text: ${e.message}`,{code:Qe.PARSE_ERROR}))}))}))),p}finally{if(e.abortSignal&&o){let t=Promise.resolve();pt(l)&&(t=dt(l));let n=Promise.resolve();pt(c)&&(n=dt(c)),Promise.all([t,n]).then((()=>{var t;o&&(null===(t=e.abortSignal)||void 0===t||t.removeEventListener("abort",o))})).catch((e=>{k.warning("Error when cleaning up abortListener on httpRequest",e)}))}}var u}makeRequest(e,t,n){var r;const i=new URL(e.url),o="https:"!==i.protocol;if(o&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);const s={agent:null!==(r=e.agent)&&void 0!==r?r:this.getOrCreateAgent(e,o),hostname:i.hostname,path:`${i.pathname}${i.search}`,port:i.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise(((r,i)=>{const a=o?rt.request(s,r):it.request(s,r);a.once("error",(t=>{var n;i(new Qe(t.message,{code:null!==(n=t.code)&&void 0!==n?n:Qe.REQUEST_SEND_ERROR,request:e}))})),t.signal.addEventListener("abort",(()=>{const e=new ne("The operation was aborted.");a.destroy(e),i(e)})),n&&pt(n)?n.pipe(a):n?"string"==typeof n||Buffer.isBuffer(n)?a.end(n):ht(n)?a.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(k.error("Unrecognized body type",n),i(new Qe("Unrecognized body type"))):a.end()}))}getOrCreateAgent(e,t){var n;const r=e.disableKeepAlive;if(t)return r?rt.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new rt.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(r&&!e.tlsSettings)return it.globalAgent;const t=null!==(n=e.tlsSettings)&&void 0!==n?n:ut;let i=this.cachedHttpsAgents.get(t);return i&&i.options.keepAlive===!r||(k.info("No cached TLS Agent exist, creating a new Agent"),i=new it.Agent(Object.assign({keepAlive:!r},t)),this.cachedHttpsAgents.set(t,i)),i}}}function mt(){return new vt}var gt=n(52107);class yt{constructor(e){var t,n,r,i,o,s,a;this.url=e.url,this.body=e.body,this.headers=null!==(t=e.headers)&&void 0!==t?t:lt(),this.method=null!==(n=e.method)&&void 0!==n?n:"GET",this.timeout=null!==(r=e.timeout)&&void 0!==r?r:0,this.formData=e.formData,this.disableKeepAlive=null!==(i=e.disableKeepAlive)&&void 0!==i&&i,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=null!==(o=e.withCredentials)&&void 0!==o&&o,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||(0,gt.v4)(),this.allowInsecureConnection=null!==(s=e.allowInsecureConnection)&&void 0!==s&&s,this.enableBrowserStreams=null!==(a=e.enableBrowserStreams)&&void 0!==a&&a}}function bt(e){return new yt(e)}const _t="exponentialRetryPolicy";function Et(e={}){var t;return me([he(Object.assign(Object.assign({},e),{ignoreSystemErrors:!0}))],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:B})}const St="systemErrorRetryPolicy";function wt(e={}){var t;return{name:St,sendRequest:me([he(Object.assign(Object.assign({},e),{ignoreHttpStatusCodes:!0}))],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:B}).sendRequest}}const Pt="throttlingRetryPolicy";function Tt(e={}){var t;return{name:Pt,sendRequest:me([ue()],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:B}).sendRequest}}const Ct={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};const xt="bearerTokenAuthenticationPolicy";async function It(e){const{scopes:t,getAccessToken:n,request:r}=e,i={abortSignal:r.abortSignal,tracingOptions:r.tracingOptions},o=await n(t,i);o&&e.request.headers.set("Authorization",`Bearer ${o.token}`)}function Ot(e){var t;const{credential:n,scopes:r,challengeCallbacks:i}=e,o=e.logger||k,s=Object.assign({authorizeRequest:null!==(t=null==i?void 0:i.authorizeRequest)&&void 0!==t?t:It,authorizeRequestOnChallenge:null==i?void 0:i.authorizeRequestOnChallenge},i),a=n?function(e,t){let n,r=null,i=null;const o=Object.assign(Object.assign({},Ct),t),s={get isRefreshing(){return null!==r},get shouldRefresh(){var e;return!s.isRefreshing&&(null!==(e=null==i?void 0:i.expiresOnTimestamp)&&void 0!==e?e:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return null===i||i.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function a(t,a){var c;return s.isRefreshing||(r=async function(e,t,n){async function r(){if(!(Date.now()<n)){const t=await e();if(null===t)throw new Error("Failed to refresh access token.");return t}try{return await e()}catch(e){return null}}let i=await r();for(;null===i;)await oe(t),i=await r();return i}((()=>e.getToken(t,a)),o.retryIntervalInMs,null!==(c=null==i?void 0:i.expiresOnTimestamp)&&void 0!==c?c:Date.now()).then((e=>(r=null,i=e,n=a.tenantId,i))).catch((e=>{throw r=null,i=null,n=void 0,e}))),r}return async(e,t)=>n!==t.tenantId||Boolean(t.claims)||s.mustRefresh?a(e,t):(s.shouldRefresh&&a(e,t),i)}(n):()=>Promise.resolve(null);return{name:xt,async sendRequest(e,t){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let n,i;await s.authorizeRequest({scopes:Array.isArray(r)?r:[r],request:e,getAccessToken:a,logger:o});try{n=await t(e)}catch(e){i=e,n=e.response}if(s.authorizeRequestOnChallenge&&401===(null==n?void 0:n.status)&&function(e){const t=e.headers.get("WWW-Authenticate");if(401===e.status&&t)return t}(n)&&await s.authorizeRequestOnChallenge({scopes:Array.isArray(r)?r:[r],request:e,response:n,getAccessToken:a,logger:o}))return t(e);if(i)throw i;return n}}}const Rt="ndJsonPolicy";function Dt(){return{name:Rt,async sendRequest(e,t){if("string"==typeof e.body&&e.body.startsWith("[")){const t=JSON.parse(e.body);Array.isArray(t)&&(e.body=t.map((e=>JSON.stringify(e)+"\n")).join(""))}return t(e)}}}},47708:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,{signal:n}={}){return new Promise(((r,i)=>{function o(){null==n||n.removeEventListener("abort",o),e.removeListener(t,s),e.removeListener("error",a)}function s(...e){o(),r(e)}function a(e){o(),i(e)}null==n||n.addEventListener("abort",o),e.on(t,s),e.on("error",a)}))}},5864:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(37495)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},37495:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,o,s=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(6585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},78524:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(5864):e.exports=n(48490)},48490:(e,t,n)=>{const r=n(52018),i=n(39023);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${r} [0m`;n[0]=o+n[0].split("\n").join("\n"+o),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(27687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{}),e.exports=n(37495)(t);const{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},32985:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(69278)),s=i(n(64756)),a=i(n(87016)),c=i(n(78524)),l=i(n(47708)),u=n(9724),p=(0,c.default)("http-proxy-agent");class d extends u.Agent{constructor(e){let t;if(t="string"==typeof e?a.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");p("Creating new HttpProxyAgent instance: %o",t),super(t);const n=Object.assign({},t);var r;this.secureProxy=t.secureProxy||"string"==typeof(r=n.protocol)&&/^https:?$/i.test(r),n.host=n.hostname||n.host,"string"==typeof n.port&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return r(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:r}=this,i=a.default.parse(e.path);let c;if(i.protocol||(i.protocol="http:"),i.hostname||(i.hostname=t.hostname||t.host||null),null==i.port&&(t.port,1)&&(i.port=String(t.port)),"80"===i.port&&(i.port=""),e.path=a.default.format(i),n.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`),r?(p("Creating `tls.Socket`: %o",n),c=s.default.connect(n)):(p("Creating `net.Socket`: %o",n),c=o.default.connect(n)),e._header){let t,n;p("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(p("Patching connection write() output buffer with updated header"),t=e.output[0],n=t.indexOf("\r\n\r\n")+4,e.output[0]=e._header+t.substring(n),p("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(p("Patching connection write() output buffer with updated header"),t=e.outputData[0].data,n=t.indexOf("\r\n\r\n")+4,e.outputData[0].data=e._header+t.substring(n),p("Output buffer: %o",e.outputData[0].data))}return yield(0,l.default)(c,"connect"),c}))}}t.default=d},11344:function(e,t,n){"use strict";const r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(32985));function i(e){return new r.default(e)}!function(e){e.HttpProxyAgent=r.default,e.prototype=r.default.prototype}(i||(i={})),e.exports=i},88574:(e,t,n)=>{"use strict";const r=n(29611),i=global.Date;class o extends i{constructor(e){super(e),this.isDate=!0}toISOString(){return`${this.getUTCFullYear()}-${r(2,this.getUTCMonth()+1)}-${r(2,this.getUTCDate())}`}}e.exports=e=>{const t=new o(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}},56804:(e,t,n)=>{"use strict";const r=n(29611);class i extends Date{constructor(e){super(e+"Z"),this.isFloating=!0}toISOString(){return`${this.getUTCFullYear()}-${r(2,this.getUTCMonth()+1)}-${r(2,this.getUTCDate())}T${r(2,this.getUTCHours())}:${r(2,this.getUTCMinutes())}:${r(2,this.getUTCSeconds())}.${r(3,this.getUTCMilliseconds())}`}}e.exports=e=>{const t=new i(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}},11051:e=>{"use strict";e.exports=e=>{const t=new Date(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}},45879:(e,t,n)=>{"use strict";const r=n(29611);class i extends Date{constructor(e){super(`0000-01-01T${e}Z`),this.isTime=!0}toISOString(){return`${r(2,this.getUTCHours())}:${r(2,this.getUTCMinutes())}:${r(2,this.getUTCSeconds())}.${r(3,this.getUTCMilliseconds())}`}}e.exports=e=>{const t=new i(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}},29611:e=>{"use strict";e.exports=(e,t)=>{for(t=String(t);t.length<e;)t="0"+t;return t}},62526:e=>{"use strict";const t=1114112;class n extends Error{constructor(e,t,r){super("[ParserError] "+e,t,r),this.name="ParserError",this.code="ParserError",Error.captureStackTrace&&Error.captureStackTrace(this,n)}}class r{constructor(e){this.parser=e,this.buf="",this.returned=null,this.result=null,this.resultTable=null,this.resultArr=null}}class i{constructor(){this.pos=0,this.col=0,this.line=0,this.obj={},this.ctx=this.obj,this.stack=[],this._buf="",this.char=null,this.ii=0,this.state=new r(this.parseStart)}parse(e){if(0===e.length||null==e.length)return;let t;for(this._buf=String(e),this.ii=-1,this.char=-1;!1===t||this.nextChar();)t=this.runOne();this._buf=null}nextChar(){return 10===this.char&&(++this.line,this.col=-1),++this.ii,this.char=this._buf.codePointAt(this.ii),++this.pos,++this.col,this.haveBuffer()}haveBuffer(){return this.ii<this._buf.length}runOne(){return this.state.parser.call(this,this.state.returned)}finish(){let e;this.char=t;do{e=this.state.parser,this.runOne()}while(this.state.parser!==e);return this.ctx=null,this.state=null,this._buf=null,this.obj}next(e){if("function"!=typeof e)throw new n("Tried to set state to non-existent state: "+JSON.stringify(e));this.state.parser=e}goto(e){return this.next(e),this.runOne()}call(e,t){t&&this.next(t),this.stack.push(this.state),this.state=new r(e)}callNow(e,t){return this.call(e,t),this.runOne()}return(e){if(0===this.stack.length)throw this.error(new n("Stack underflow"));void 0===e&&(e=this.state.buf),this.state=this.stack.pop(),this.state.returned=e}returnNow(e){return this.return(e),this.runOne()}consume(){if(this.char===t)throw this.error(new n("Unexpected end-of-buffer"));this.state.buf+=this._buf[this.ii]}error(e){return e.line=this.line,e.col=this.col,e.pos=this.pos,e}parseStart(){throw new n("Must declare a parseStart method")}}i.END=t,i.Error=n,e.exports=i},25985:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=makeParserClass(__webpack_require__(62526)),module.exports.makeParserClass=makeParserClass;class TomlError extends Error{constructor(e){super(e),this.name="TomlError",Error.captureStackTrace&&Error.captureStackTrace(this,TomlError),this.fromTOML=!0,this.wrapped=null}}TomlError.wrap=e=>{const t=new TomlError(e.message);return t.code=e.code,t.wrapped=e,t},module.exports.TomlError=TomlError;const createDateTime=__webpack_require__(11051),createDateTimeFloat=__webpack_require__(56804),createDate=__webpack_require__(88574),createTime=__webpack_require__(45879),CTRL_I=9,CTRL_J=10,CTRL_M=13,CTRL_CHAR_BOUNDARY=31,CHAR_SP=32,CHAR_QUOT=34,CHAR_NUM=35,CHAR_APOS=39,CHAR_PLUS=43,CHAR_COMMA=44,CHAR_HYPHEN=45,CHAR_PERIOD=46,CHAR_0=48,CHAR_1=49,CHAR_7=55,CHAR_9=57,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_A=65,CHAR_E=69,CHAR_F=70,CHAR_T=84,CHAR_U=85,CHAR_Z=90,CHAR_LOWBAR=95,CHAR_a=97,CHAR_b=98,CHAR_e=101,CHAR_f=102,CHAR_i=105,CHAR_l=108,CHAR_n=110,CHAR_o=111,CHAR_r=114,CHAR_s=115,CHAR_t=116,CHAR_u=117,CHAR_x=120,CHAR_z=122,CHAR_LCUB=123,CHAR_RCUB=125,CHAR_LSQB=91,CHAR_BSOL=92,CHAR_RSQB=93,CHAR_DEL=127,SURROGATE_FIRST=55296,SURROGATE_LAST=57343,escapes={[CHAR_b]:"\b",[CHAR_t]:"\t",[CHAR_n]:"\n",[CHAR_f]:"\f",[CHAR_r]:"\r",[CHAR_QUOT]:'"',[CHAR_BSOL]:"\\"};function isDigit(e){return e>=CHAR_0&&e<=CHAR_9}function isHexit(e){return e>=CHAR_A&&e<=CHAR_F||e>=CHAR_a&&e<=CHAR_f||e>=CHAR_0&&e<=CHAR_9}function isBit(e){return e===CHAR_1||e===CHAR_0}function isOctit(e){return e>=CHAR_0&&e<=CHAR_7}function isAlphaNumQuoteHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_APOS||e===CHAR_QUOT||e===CHAR_LOWBAR||e===CHAR_HYPHEN}function isAlphaNumHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_LOWBAR||e===CHAR_HYPHEN}const _type=Symbol("type"),_declared=Symbol("declared"),hasOwnProperty=Object.prototype.hasOwnProperty,defineProperty=Object.defineProperty,descriptor={configurable:!0,enumerable:!0,writable:!0,value:void 0};function hasKey(e,t){return!!hasOwnProperty.call(e,t)||("__proto__"===t&&defineProperty(e,"__proto__",descriptor),!1)}const INLINE_TABLE=Symbol("inline-table");function InlineTable(){return Object.defineProperties({},{[_type]:{value:INLINE_TABLE}})}function isInlineTable(e){return null!==e&&"object"==typeof e&&e[_type]===INLINE_TABLE}const TABLE=Symbol("table");function Table(){return Object.defineProperties({},{[_type]:{value:TABLE},[_declared]:{value:!1,writable:!0}})}function isTable(e){return null!==e&&"object"==typeof e&&e[_type]===TABLE}const _contentType=Symbol("content-type"),INLINE_LIST=Symbol("inline-list");function InlineList(e){return Object.defineProperties([],{[_type]:{value:INLINE_LIST},[_contentType]:{value:e}})}function isInlineList(e){return null!==e&&"object"==typeof e&&e[_type]===INLINE_LIST}const LIST=Symbol("list");function List(){return Object.defineProperties([],{[_type]:{value:LIST}})}function isList(e){return null!==e&&"object"==typeof e&&e[_type]===LIST}let _custom;try{const utilInspect=eval("require('util').inspect");_custom=utilInspect.custom}catch(e){}const _inspect=_custom||"inspect";class BoxedBigInt{constructor(e){try{this.value=global.BigInt.asIntN(64,e)}catch(e){this.value=null}Object.defineProperty(this,_type,{value:INTEGER})}isNaN(){return null===this.value}toString(){return String(this.value)}[_inspect](){return`[BigInt: ${this.toString()}]}`}valueOf(){return this.value}}const INTEGER=Symbol("integer");function Integer(e){let t=Number(e);return Object.is(t,-0)&&(t=0),global.BigInt&&!Number.isSafeInteger(t)?new BoxedBigInt(e):Object.defineProperties(new Number(t),{isNaN:{value:function(){return isNaN(this)}},[_type]:{value:INTEGER},[_inspect]:{value:()=>`[Integer: ${e}]`}})}function isInteger(e){return null!==e&&"object"==typeof e&&e[_type]===INTEGER}const FLOAT=Symbol("float");function Float(e){return Object.defineProperties(new Number(e),{[_type]:{value:FLOAT},[_inspect]:{value:()=>`[Float: ${e}]`}})}function isFloat(e){return null!==e&&"object"==typeof e&&e[_type]===FLOAT}function tomlType(e){const t=typeof e;if("object"===t){if(null===e)return"null";if(e instanceof Date)return"datetime";if(_type in e)switch(e[_type]){case INLINE_TABLE:return"inline-table";case INLINE_LIST:return"inline-list";case TABLE:return"table";case LIST:return"list";case FLOAT:return"float";case INTEGER:return"integer"}}return t}function makeParserClass(e){return class extends e{constructor(){super(),this.ctx=this.obj=Table()}atEndOfWord(){return this.char===CHAR_NUM||this.char===CTRL_I||this.char===CHAR_SP||this.atEndOfLine()}atEndOfLine(){return this.char===e.END||this.char===CTRL_J||this.char===CTRL_M}parseStart(){if(this.char===e.END)return null;if(this.char===CHAR_LSQB)return this.call(this.parseTableOrList);if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(isAlphaNumQuoteHyphen(this.char))return this.callNow(this.parseAssignStatement);throw this.error(new TomlError(`Unknown character "${this.char}"`))}parseWhitespaceToEOL(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(this.char===CHAR_NUM)return this.goto(this.parseComment);if(this.char===e.END||this.char===CTRL_J)return this.return();throw this.error(new TomlError("Unexpected character, expected only whitespace or comments till end of line"))}parseAssignStatement(){return this.callNow(this.parseAssign,this.recordAssignStatement)}recordAssignStatement(e){let t=this.ctx,n=e.key.pop();for(let n of e.key){if(hasKey(t,n)&&(!isTable(t[n])||t[n][_declared]))throw this.error(new TomlError("Can't redefine existing key"));t=t[n]=t[n]||Table()}if(hasKey(t,n))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(e.value)||isFloat(e.value)?t[n]=e.value.valueOf():t[n]=e.value,this.goto(this.parseWhitespaceToEOL)}parseAssign(){return this.callNow(this.parseKeyword,this.recordAssignKeyword)}recordAssignKeyword(e){return this.state.resultTable?this.state.resultTable.push(e):this.state.resultTable=[e],this.goto(this.parseAssignKeywordPreDot)}parseAssignKeywordPreDot(){return this.char===CHAR_PERIOD?this.next(this.parseAssignKeywordPostDot):this.char!==CHAR_SP&&this.char!==CTRL_I?this.goto(this.parseAssignEqual):void 0}parseAssignKeywordPostDot(){if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.callNow(this.parseKeyword,this.recordAssignKeyword)}parseAssignEqual(){if(this.char===CHAR_EQUALS)return this.next(this.parseAssignPreValue);throw this.error(new TomlError('Invalid character, expected "="'))}parseAssignPreValue(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseValue,this.recordAssignValue)}recordAssignValue(e){return this.returnNow({key:this.state.resultTable,value:e})}parseComment(){do{if(this.char===e.END||this.char===CTRL_J)return this.return()}while(this.nextChar())}parseTableOrList(){if(this.char!==CHAR_LSQB)return this.goto(this.parseTable);this.next(this.parseList)}parseTable(){return this.ctx=this.obj,this.goto(this.parseTableNext)}parseTableNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseTableMore)}parseTableMore(e){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,e)&&(!isTable(this.ctx[e])||this.ctx[e][_declared]))throw this.error(new TomlError("Can't redefine existing key"));return this.ctx=this.ctx[e]=this.ctx[e]||Table(),this.ctx[_declared]=!0,this.next(this.parseWhitespaceToEOL)}if(this.char===CHAR_PERIOD){if(hasKey(this.ctx,e))if(isTable(this.ctx[e]))this.ctx=this.ctx[e];else{if(!isList(this.ctx[e]))throw this.error(new TomlError("Can't redefine existing key"));this.ctx=this.ctx[e][this.ctx[e].length-1]}else this.ctx=this.ctx[e]=Table();return this.next(this.parseTableNext)}throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseList(){return this.ctx=this.obj,this.goto(this.parseListNext)}parseListNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseListMore)}parseListMore(e){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,e)||(this.ctx[e]=List()),isInlineList(this.ctx[e]))throw this.error(new TomlError("Can't extend an inline array"));if(!isList(this.ctx[e]))throw this.error(new TomlError("Can't redefine an existing key"));{const t=Table();this.ctx[e].push(t),this.ctx=t}return this.next(this.parseListEnd)}if(this.char===CHAR_PERIOD){if(hasKey(this.ctx,e)){if(isInlineList(this.ctx[e]))throw this.error(new TomlError("Can't extend an inline array"));if(isInlineTable(this.ctx[e]))throw this.error(new TomlError("Can't extend an inline table"));if(isList(this.ctx[e]))this.ctx=this.ctx[e][this.ctx[e].length-1];else{if(!isTable(this.ctx[e]))throw this.error(new TomlError("Can't redefine an existing key"));this.ctx=this.ctx[e]}}else this.ctx=this.ctx[e]=Table();return this.next(this.parseListNext)}throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseListEnd(e){if(this.char===CHAR_RSQB)return this.next(this.parseWhitespaceToEOL);throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseValue(){if(this.char===e.END)throw this.error(new TomlError("Key without value"));if(this.char===CHAR_QUOT)return this.next(this.parseDoubleString);if(this.char===CHAR_APOS)return this.next(this.parseSingleString);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)return this.goto(this.parseNumberSign);if(this.char===CHAR_i)return this.next(this.parseInf);if(this.char===CHAR_n)return this.next(this.parseNan);if(isDigit(this.char))return this.goto(this.parseNumberOrDateTime);if(this.char===CHAR_t||this.char===CHAR_f)return this.goto(this.parseBoolean);if(this.char===CHAR_LSQB)return this.call(this.parseInlineList,this.recordValue);if(this.char===CHAR_LCUB)return this.call(this.parseInlineTable,this.recordValue);throw this.error(new TomlError("Unexpected character, expecting string, number, datetime, boolean, inline array or inline table"))}recordValue(e){return this.returnNow(e)}parseInf(){if(this.char===CHAR_n)return this.next(this.parseInf2);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseInf2(){if(this.char===CHAR_f)return"-"===this.state.buf?this.return(-1/0):this.return(1/0);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseNan(){if(this.char===CHAR_a)return this.next(this.parseNan2);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseNan2(){if(this.char===CHAR_n)return this.return(NaN);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseKeyword(){return this.char===CHAR_QUOT?this.next(this.parseBasicString):this.char===CHAR_APOS?this.next(this.parseLiteralString):this.goto(this.parseBareKey)}parseBareKey(){do{if(this.char===e.END)throw this.error(new TomlError("Key ended without value"));if(!isAlphaNumHyphen(this.char)){if(0===this.state.buf.length)throw this.error(new TomlError("Empty bare keys are not allowed"));return this.returnNow()}this.consume()}while(this.nextChar())}parseSingleString(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiStringMaybe):this.goto(this.parseLiteralString)}parseLiteralString(){do{if(this.char===CHAR_APOS)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiStringMaybe(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiString):this.returnNow()}parseLiteralMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseLiteralMultiStringContent):this.goto(this.parseLiteralMultiStringContent)}parseLiteralMultiStringContent(){do{if(this.char===CHAR_APOS)return this.next(this.parseLiteralMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiEnd(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd2):(this.state.buf+="'",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd2(){return this.char===CHAR_APOS?this.return():(this.state.buf+="''",this.goto(this.parseLiteralMultiStringContent))}parseDoubleString(){return this.char===CHAR_QUOT?this.next(this.parseMultiStringMaybe):this.goto(this.parseBasicString)}parseBasicString(){do{if(this.char===CHAR_BSOL)return this.call(this.parseEscape,this.recordEscapeReplacement);if(this.char===CHAR_QUOT)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}recordEscapeReplacement(e){return this.state.buf+=e,this.goto(this.parseBasicString)}parseMultiStringMaybe(){return this.char===CHAR_QUOT?this.next(this.parseMultiString):this.returnNow()}parseMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseMultiStringContent):this.goto(this.parseMultiStringContent)}parseMultiStringContent(){do{if(this.char===CHAR_BSOL)return this.call(this.parseMultiEscape,this.recordMultiEscapeReplacement);if(this.char===CHAR_QUOT)return this.next(this.parseMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}errorControlCharInString(){let e="\\u00";return this.char<16&&(e+="0"),e+=this.char.toString(16),this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in strings, use ${e} instead`))}recordMultiEscapeReplacement(e){return this.state.buf+=e,this.goto(this.parseMultiStringContent)}parseMultiEnd(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd2):(this.state.buf+='"',this.goto(this.parseMultiStringContent))}parseMultiEnd2(){return this.char===CHAR_QUOT?this.return():(this.state.buf+='""',this.goto(this.parseMultiStringContent))}parseMultiEscape(){return this.char===CTRL_M||this.char===CTRL_J?this.next(this.parseMultiTrim):this.char===CHAR_SP||this.char===CTRL_I?this.next(this.parsePreMultiTrim):this.goto(this.parseEscape)}parsePreMultiTrim(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CTRL_M||this.char===CTRL_J)return this.next(this.parseMultiTrim);throw this.error(new TomlError("Can't escape whitespace"))}parseMultiTrim(){return this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M?null:this.returnNow()}parseEscape(){if(this.char in escapes)return this.return(escapes[this.char]);if(this.char===CHAR_u)return this.call(this.parseSmallUnicode,this.parseUnicodeReturn);if(this.char===CHAR_U)return this.call(this.parseLargeUnicode,this.parseUnicodeReturn);throw this.error(new TomlError("Unknown escape character: "+this.char))}parseUnicodeReturn(e){try{const t=parseInt(e,16);if(t>=SURROGATE_FIRST&&t<=SURROGATE_LAST)throw this.error(new TomlError("Invalid unicode, character in range 0xD800 - 0xDFFF is reserved"));return this.returnNow(String.fromCodePoint(t))}catch(e){throw this.error(TomlError.wrap(e))}}parseSmallUnicode(){if(!isHexit(this.char))throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"));if(this.consume(),this.state.buf.length>=4)return this.return()}parseLargeUnicode(){if(!isHexit(this.char))throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"));if(this.consume(),this.state.buf.length>=8)return this.return()}parseNumberSign(){return this.consume(),this.next(this.parseMaybeSignedInfOrNan)}parseMaybeSignedInfOrNan(){return this.char===CHAR_i?this.next(this.parseInf):this.char===CHAR_n?this.next(this.parseNan):this.callNow(this.parseNoUnder,this.parseNumberIntegerStart)}parseNumberIntegerStart(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberIntegerExponentOrDecimal)):this.goto(this.parseNumberInteger)}parseNumberIntegerExponentOrDecimal(){return this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Integer(this.state.buf))}parseNumberInteger(){if(!isDigit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder);if(this.char===CHAR_E||this.char===CHAR_e)return this.consume(),this.next(this.parseNumberExponentSign);if(this.char===CHAR_PERIOD)return this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseNoUnder(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD||this.char===CHAR_E||this.char===CHAR_e)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNoUnderHexOctBinLiteral(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNumberFloat(){return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder,this.parseNumberFloat):isDigit(this.char)?void this.consume():this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Float(this.state.buf))}parseNumberExponentSign(){if(isDigit(this.char))return this.goto(this.parseNumberExponent);if(this.char!==CHAR_HYPHEN&&this.char!==CHAR_PLUS)throw this.error(new TomlError("Unexpected character, expected -, + or digit"));this.consume(),this.call(this.parseNoUnder,this.parseNumberExponent)}parseNumberExponent(){if(!isDigit(this.char))return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder):this.returnNow(Float(this.state.buf));this.consume()}parseNumberOrDateTime(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberBaseOrDateTime)):this.goto(this.parseNumberOrDateTimeOnly)}parseNumberOrDateTimeOnly(){return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder,this.parseNumberInteger):isDigit(this.char)?(this.consume(),void(this.state.buf.length>4&&this.next(this.parseNumberInteger))):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_HYPHEN?this.goto(this.parseDateTime):this.char===CHAR_COLON?this.goto(this.parseOnlyTimeHour):this.returnNow(Integer(this.state.buf))}parseDateTimeOnly(){if(this.state.buf.length<4){if(isDigit(this.char))return this.consume();if(this.char===CHAR_COLON)return this.goto(this.parseOnlyTimeHour);throw this.error(new TomlError("Expected digit while parsing year part of a date"))}if(this.char===CHAR_HYPHEN)return this.goto(this.parseDateTime);throw this.error(new TomlError("Expected hyphen (-) while parsing year part of date"))}parseNumberBaseOrDateTime(){return this.char===CHAR_b?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerBin)):this.char===CHAR_o?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerOct)):this.char===CHAR_x?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerHex)):this.char===CHAR_PERIOD?this.goto(this.parseNumberInteger):isDigit(this.char)?this.goto(this.parseDateTimeOnly):this.returnNow(Integer(this.state.buf))}parseIntegerHex(){if(!isHexit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseIntegerOct(){if(!isOctit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseIntegerBin(){if(!isBit(this.char)){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const e=Integer(this.state.buf);if(e.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(e)}}this.consume()}parseDateTime(){if(this.state.buf.length<4)throw this.error(new TomlError("Years less than 1000 must be zero padded to four characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseDateMonth)}parseDateMonth(){if(this.char===CHAR_HYPHEN){if(this.state.buf.length<2)throw this.error(new TomlError("Months less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseDateDay)}if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));this.consume()}parseDateDay(){if(this.char===CHAR_T||this.char===CHAR_SP){if(this.state.buf.length<2)throw this.error(new TomlError("Days less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseStartTimeHour)}if(this.atEndOfWord())return this.returnNow(createDate(this.state.result+"-"+this.state.buf));if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));this.consume()}parseStartTimeHour(){return this.atEndOfWord()?this.returnNow(createDate(this.state.result)):this.goto(this.parseTimeHour)}parseTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result+="T"+this.state.buf,this.state.buf="",this.next(this.parseTimeMin)}if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));this.consume()}parseTimeMin(){if(!(this.state.buf.length<2&&isDigit(this.char))){if(2===this.state.buf.length&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeSec);throw this.error(new TomlError("Incomplete datetime"))}this.consume()}parseTimeSec(){if(!isDigit(this.char))throw this.error(new TomlError("Incomplete datetime"));if(this.consume(),2===this.state.buf.length)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeZoneOrFraction)}parseOnlyTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeMin)}throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeMin(){if(!(this.state.buf.length<2&&isDigit(this.char))){if(2===this.state.buf.length&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeSec);throw this.error(new TomlError("Incomplete time"))}this.consume()}parseOnlyTimeSec(){if(!isDigit(this.char))throw this.error(new TomlError("Incomplete time"));if(this.consume(),2===this.state.buf.length)return this.next(this.parseOnlyTimeFractionMaybe)}parseOnlyTimeFractionMaybe(){if(this.state.result+=":"+this.state.buf,this.char!==CHAR_PERIOD)return this.return(createTime(this.state.result));this.state.buf="",this.next(this.parseOnlyTimeFraction)}parseOnlyTimeFraction(){if(!isDigit(this.char)){if(this.atEndOfWord()){if(0===this.state.buf.length)throw this.error(new TomlError("Expected digit in milliseconds"));return this.returnNow(createTime(this.state.result+"."+this.state.buf))}throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}this.consume()}parseTimeZoneOrFraction(){if(this.char===CHAR_PERIOD)this.consume(),this.next(this.parseDateTimeFraction);else{if(this.char!==CHAR_HYPHEN&&this.char!==CHAR_PLUS){if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}this.consume(),this.next(this.parseTimeZoneHour)}}parseDateTimeFraction(){if(isDigit(this.char))this.consume();else{if(1===this.state.buf.length)throw this.error(new TomlError("Expected digit in milliseconds"));if(this.char!==CHAR_HYPHEN&&this.char!==CHAR_PLUS){if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}this.consume(),this.next(this.parseTimeZoneHour)}}parseTimeZoneHour(){if(!isDigit(this.char))throw this.error(new TomlError("Unexpected character in datetime, expected digit"));if(this.consume(),/\d\d$/.test(this.state.buf))return this.next(this.parseTimeZoneSep)}parseTimeZoneSep(){if(this.char!==CHAR_COLON)throw this.error(new TomlError("Unexpected character in datetime, expected colon"));this.consume(),this.next(this.parseTimeZoneMin)}parseTimeZoneMin(){if(!isDigit(this.char))throw this.error(new TomlError("Unexpected character in datetime, expected digit"));if(this.consume(),/\d\d$/.test(this.state.buf))return this.return(createDateTime(this.state.result+this.state.buf))}parseBoolean(){return this.char===CHAR_t?(this.consume(),this.next(this.parseTrue_r)):this.char===CHAR_f?(this.consume(),this.next(this.parseFalse_a)):void 0}parseTrue_r(){if(this.char===CHAR_r)return this.consume(),this.next(this.parseTrue_u);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_u(){if(this.char===CHAR_u)return this.consume(),this.next(this.parseTrue_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_e(){if(this.char===CHAR_e)return this.return(!0);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_a(){if(this.char===CHAR_a)return this.consume(),this.next(this.parseFalse_l);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_l(){if(this.char===CHAR_l)return this.consume(),this.next(this.parseFalse_s);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_s(){if(this.char===CHAR_s)return this.consume(),this.next(this.parseFalse_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_e(){if(this.char===CHAR_e)return this.return(!1);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseInlineList(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===e.END)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_NUM?this.call(this.parseComment):this.char===CHAR_RSQB?this.return(this.state.resultArr||InlineList()):this.callNow(this.parseValue,this.recordInlineListValue)}recordInlineListValue(e){if(this.state.resultArr){const t=this.state.resultArr[_contentType],n=tomlType(e);if(t!==n)throw this.error(new TomlError(`Inline lists must be a single type, not a mix of ${t} and ${n}`))}else this.state.resultArr=InlineList(tomlType(e));return isFloat(e)||isInteger(e)?this.state.resultArr.push(e.valueOf()):this.state.resultArr.push(e),this.goto(this.parseInlineListNext)}parseInlineListNext(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CHAR_COMMA)return this.next(this.parseInlineList);if(this.char===CHAR_RSQB)return this.goto(this.parseInlineList);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTable(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_RCUB?this.return(this.state.resultTable||InlineTable()):(this.state.resultTable||(this.state.resultTable=InlineTable()),this.callNow(this.parseAssign,this.recordInlineTableValue))}recordInlineTableValue(e){let t=this.state.resultTable,n=e.key.pop();for(let n of e.key){if(hasKey(t,n)&&(!isTable(t[n])||t[n][_declared]))throw this.error(new TomlError("Can't redefine existing key"));t=t[n]=t[n]||Table()}if(hasKey(t,n))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(e.value)||isFloat(e.value)?t[n]=e.value.valueOf():t[n]=e.value,this.goto(this.parseInlineTableNext)}parseInlineTableNext(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)return this.next(this.parseInlineTable);if(this.char===CHAR_RCUB)return this.goto(this.parseInlineTable);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}}}},3643:(e,t,n)=>{"use strict";e.exports=function(e,t){t||(t={});const n=t.blocksize||40960,o=new r;return new Promise(((e,t)=>{setImmediate(s,0,n,e,t)}));function s(t,n,r,a){if(t>=e.length)try{return r(o.finish())}catch(t){return a(i(t,e))}try{o.parse(e.slice(t,t+n)),setImmediate(s,t+n,n,r,a)}catch(t){a(i(t,e))}}};const r=n(25985),i=n(43956)},43956:e=>{"use strict";e.exports=function(e,t){if(null==e.pos||null==e.line)return e;let n=e.message;if(n+=` at row ${e.line+1}, col ${e.col+1}, pos ${e.pos}:\n`,t&&t.split){const r=t.split(/\n/),i=String(Math.min(r.length,e.line+3)).length;let o=" ";for(;o.length<i;)o+=" ";for(let t=Math.max(0,e.line-1);t<Math.min(r.length,e.line+2);++t){let s=String(t+1);if(s.length<i&&(s=" "+s),e.line===t){n+=s+"> "+r[t]+"\n",n+=o+"  ";for(let t=0;t<e.col;++t)n+=" ";n+="^\n"}else n+=s+": "+r[t]+"\n"}}return e.message=n+"\n",e}},18551:(e,t,n)=>{"use strict";e.exports=function(e){return e?function(e){const t=new i;return e.setEncoding("utf8"),new Promise(((n,r)=>{let i,o=!1,s=!1;function a(){if(o=!0,!i)try{n(t.finish())}catch(e){r(e)}}function c(e){s=!0,r(e)}e.once("end",a),e.once("error",c),function n(){let r;for(i=!0;null!==(r=e.read());)try{t.parse(r)}catch(e){return c(e)}if(i=!1,o)return a();s||e.once("readable",n)}()}))}(e):function(){const e=new i;return new r.Transform({objectMode:!0,transform(t,n,r){try{e.parse(t.toString(n))}catch(e){this.emit("error",e)}r()},flush(t){try{this.push(e.finish())}catch(e){this.emit("error",e)}t()}})}()};const r=n(2203),i=n(25985)},96970:(e,t,n)=>{"use strict";e.exports=function(e){global.Buffer&&global.Buffer.isBuffer(e)&&(e=e.toString("utf8"));const t=new r;try{return t.parse(e),t.finish()}catch(t){throw i(t,e)}};const r=n(25985),i=n(43956)},37950:(e,t,n)=>{"use strict";e.exports=n(96970),e.exports.async=n(3643),e.exports.stream=n(18551),e.exports.prettyError=n(43956)},76608:e=>{"use strict";function t(e){return new Error("Can only stringify objects, not "+e)}function n(e){return Object.keys(e).filter((t=>o(e[t])))}function r(e){let t=Array.isArray(e)?[]:Object.prototype.hasOwnProperty.call(e,"__proto__")?{["__proto__"]:void 0}:{};for(let n of Object.keys(e))e[n]&&"function"==typeof e[n].toJSON&&!("toISOString"in e[n])?t[n]=e[n].toJSON():t[n]=e[n];return t}function i(e,c,l){var p,d;p=n(l=r(l)),d=function(e){return Object.keys(e).filter((t=>!o(e[t])))}(l);var f=[],v=c||"";p.forEach((e=>{var t=s(l[e]);"undefined"!==t&&"null"!==t&&f.push(v+a(e)+" = "+u(l[e],!0))})),f.length>0&&f.push("");var m=e&&p.length>0?c+"  ":"";return d.forEach((o=>{f.push(function(e,o,c,l){var u=s(l);if("array"===u)return function(e,n,o,c){h(c=r(c));var l=s(c[0]);if("table"!==l)throw t(l);var u=e+a(o),p="";return c.forEach((e=>{p.length>0&&(p+="\n"),p+=n+"[["+u+"]]\n",p+=i(u+".",n,e)})),p}(e,o,c,l);if("table"===u)return function(e,t,r,o){var s=e+a(r),c="";return n(o).length>0&&(c+=t+"["+s+"]\n"),c+i(s+".",t,o)}(e,o,c,l);throw t(u)}(e,m,o,l[o]))})),f.join("\n")}function o(e){switch(s(e)){case"undefined":case"null":case"integer":case"nan":case"float":case"boolean":case"string":case"datetime":return!0;case"array":return 0===e.length||"table"!==s(e[0]);case"table":return 0===Object.keys(e).length;default:return!1}}function s(e){return void 0===e?"undefined":null===e?"null":"bigint"==typeof e||Number.isInteger(e)&&!Object.is(e,-0)?"integer":"number"==typeof e?"float":"boolean"==typeof e?"boolean":"string"==typeof e?"string":"toISOString"in e?isNaN(e)?"undefined":"datetime":Array.isArray(e)?"array":"table"}function a(e){var t=String(e);return/^[-A-Za-z0-9_]+$/.test(t)?t:c(t)}function c(e){return'"'+l(e).replace(/"/g,'\\"')+'"'}function l(e){return e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/([\u0000-\u001f\u007f])/,(e=>"\\u"+function(e,t){for(;t.length<4;)t="0"+t;return t}(0,e.codePointAt(0).toString(16))))}function u(e,t){let n=s(e);return"string"===n&&(t&&/\n/.test(e)?n="string-multiline":!/[\b\t\n\f\r']/.test(e)&&/"/.test(e)&&(n="string-literal")),p(e,n)}function p(e,n){switch(n||(n=s(e)),n){case"string-multiline":return function(e){let t=e.split(/\n/).map((e=>l(e).replace(/"(?="")/g,'\\"'))).join("\n");return'"'===t.slice(-1)&&(t+="\\\n"),'"""\n'+t+'"""'}(e);case"string":return c(e);case"string-literal":return"'"+e+"'";case"integer":return d(e);case"float":return function(e){if(e===1/0)return"inf";if(e===-1/0)return"-inf";if(Object.is(e,NaN))return"nan";if(Object.is(e,-0))return"-0.0";var t=String(e).split("."),n=t[0],r=t[1]||0;return d(n)+"."+r}(e);case"boolean":return function(e){return String(e)}(e);case"datetime":return function(e){return e.toISOString()}(e);case"array":return function(e){const t=h(e=r(e));var n="[",i=e.map((e=>p(e,t)));return i.join(", ").length>60||/\n/.test(i)?n+="\n  "+i.join(",\n  ")+"\n":n+=" "+i.join(", ")+(i.length>0?" ":""),n+"]"}(e.filter((e=>"null"!==s(e)&&"undefined"!==s(e)&&"nan"!==s(e))));case"table":return function(e){e=r(e);var t=[];return Object.keys(e).forEach((n=>{t.push(a(n)+" = "+u(e[n],!1))})),"{ "+t.join(", ")+(t.length>0?" ":"")+"}"}(e);default:throw t(n)}}function d(e){return String(e).replace(/\B(?=(\d{3})+(?!\d))/g,"_")}function h(e){const t=function(e){var t=s(e[0]);return e.every((e=>s(e)===t))?t:e.every((e=>{return"float"===(t=s(e))||"integer"===t;var t}))?"float":"mixed"}(e);if("mixed"===t)throw new Error("Array values can't have mixed types");return t}e.exports=function(e){if(null===e)throw t("null");if(void 0===e)throw t("undefined");if("object"!=typeof e)throw t(typeof e);if("function"==typeof e.toJSON&&(e=e.toJSON()),null==e)return null;const n=s(e);if("table"!==n)throw t(n);return i("","",e)},e.exports.value=p},10009:(e,t,n)=>{"use strict";t.parse=n(37950),t.stringify=n(76608)},51801:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppInsightsCore:()=>se,BaseCore:()=>ce,BaseTelemetryPlugin:()=>$.s,CoreUtils:()=>ie.jS,DiagnosticLogger:()=>D.wq,ESPromise:()=>pe,ESPromiseScheduler:()=>ge,EventHelper:()=>Ee.fs,EventLatency:()=>T,EventPersistence:()=>x,EventPropertyType:()=>C,EventsDiscardedReason:()=>_e.x,FullVersionString:()=>ie.xE,InternalAppInsightsCore:()=>ne,InternalBaseCore:()=>Z,LoggingSeverity:()=>S,MinChannelPriorty:()=>be,NotificationManager:()=>te,PerfEvent:()=>k.Q6,PerfManager:()=>k.NS,ProcessTelemetryContext:()=>L.W0,TraceLevel:()=>I,Undefined:()=>Pe.bA,Utils:()=>ie.Aq,ValueKind:()=>P,ValueSanitizer:()=>ye,Version:()=>ie.Rx,_ExtendedInternalMessageId:()=>O,_InternalLogMessage:()=>D.WD,_InternalMessageId:()=>w,__getRegisteredEvents:()=>Se.El,_logInternalMessage:()=>D.Oc,_throwInternal:()=>D.ZP,_warnToConsole:()=>D.OG,addEventHandler:()=>Se.So,addEventListeners:()=>Se.lQ,addPageHideEventListener:()=>Se.Fc,addPageShowEventListener:()=>Se.oS,addPageUnloadEventListener:()=>Se.ee,areCookiesSupported:()=>W.gi,arrForEach:()=>s.Iu,arrIndexOf:()=>s.rD,arrMap:()=>s.W$,arrReduce:()=>s.KT,attachEvent:()=>Se.Q3,cookieAvailable:()=>W.gi,createCookieMgr:()=>W.xN,createEnumStyle:()=>o.Hj,createGuid:()=>ie.gj,createProcessTelemetryContext:()=>L.i8,createTraceParent:()=>Te.wk,createUniqueNamespace:()=>H.Z,createUnloadHandlerContainer:()=>K.P,dateNow:()=>s.x3,deleteCookie:()=>ie.Yj,detachEvent:()=>Se.Ym,disableCookies:()=>ie.WD,disallowsSameSiteNone:()=>W.It,doPerf:()=>k.r2,dumpObj:()=>A.mm,eventOff:()=>Se.ML,eventOn:()=>Se.mB,extend:()=>ie.X$,findW3cTraceParent:()=>Te.ef,formatTraceParent:()=>Te.L0,generateW3CId:()=>Ee.cL,getCommonSchemaMetaData:()=>ie.Go,getConsole:()=>A.U5,getCookie:()=>ie.Ri,getCookieValue:()=>ie.UM,getCrypto:()=>A.MY,getDocument:()=>A.YE,getExceptionName:()=>s.lL,getFieldValueType:()=>ie.cq,getGlobal:()=>j.mS,getGlobalInst:()=>A.EH,getHistory:()=>A.JK,getIEVersion:()=>A.L0,getISOString:()=>s._u,getJSON:()=>A.hm,getLocation:()=>A.g$,getMsCrypto:()=>A.iN,getNavigator:()=>A.w3,getPerformance:()=>A.FJ,getSetValue:()=>s.c2,getTenantId:()=>ie.EO,getTime:()=>ie.WB,getWindow:()=>A.zk,hasDocument:()=>A.Wt,hasHistory:()=>A.tw,hasJSON:()=>A.Z,hasNavigator:()=>A.w9,hasOwnProperty:()=>s.mQ,hasWindow:()=>A.Vd,isArray:()=>s.cy,isArrayValid:()=>ie.wJ,isBeaconsSupported:()=>A.Uf,isBoolean:()=>s.Lm,isChromium:()=>ie.F2,isDate:()=>s.$P,isDocumentObjectAvailable:()=>ie.g8,isError:()=>s.bJ,isFetchSupported:()=>A.R7,isFunction:()=>s.Tn,isIE:()=>A.lT,isLatency:()=>ie.Hh,isNotTruthy:()=>s.wo,isNullOrUndefined:()=>s.hX,isNumber:()=>s.Et,isObject:()=>s.Gv,isReactNative:()=>A.lV,isSampledFlag:()=>Te.N7,isString:()=>s.Kg,isTruthy:()=>s.zz,isTypeof:()=>s.Ed,isUint8ArrayAvailable:()=>ie.h3,isUndefined:()=>s.b0,isValidSpanId:()=>Te.wN,isValidTraceId:()=>Te.hX,isValidTraceParent:()=>Te.mJ,isValueAssigned:()=>ie.yD,isValueKind:()=>ie.m0,isWindowObjectAvailable:()=>ie.P$,isXhrSupported:()=>A.xk,mergeEvtNamespace:()=>Se.Hm,newGuid:()=>Ee.aq,newId:()=>we.Si,normalizeJsName:()=>s.cH,objCreate:()=>j.AQ,objDefineAccessors:()=>s.r,objForEachKey:()=>s.z,objFreeze:()=>s.N6,objKeys:()=>s.cG,objSeal:()=>s.js,openXhr:()=>ie.H$,optimizeObject:()=>s.hW,parseTraceParent:()=>Te.ZI,perfNow:()=>Ee.UU,proxyAssign:()=>s.qz,proxyFunctionAs:()=>s.RF,proxyFunctions:()=>s.o$,random32:()=>we.VN,randomValue:()=>we.Z1,removeEventHandler:()=>Se.zh,removeEventListeners:()=>Se.Wg,removePageHideEventListener:()=>Se.sq,removePageShowEventListener:()=>Se.vF,removePageUnloadEventListener:()=>Se.Ds,safeGetCookieMgr:()=>W.um,safeGetLogger:()=>D.y0,sanitizeProperty:()=>ie.TC,setCookie:()=>ie.TV,setEnableEnvMocks:()=>A.cU,setProcessTelemetryTimings:()=>ie.u9,setValue:()=>s.KY,strContains:()=>s.Ju,strEndsWith:()=>s.Cv,strFunction:()=>Pe.hW,strObject:()=>Pe._1,strPrototype:()=>Pe.vR,strStartsWith:()=>s.tG,strTrim:()=>s.EH,strUndefined:()=>Pe.bA,throwError:()=>s.$8,toISOString:()=>s._u,useXDomainRequest:()=>A.PV});var r,i=n(8747),o=n(96434),s=n(12497),a="Failed",c=a+"MonitorAjax",l="Track",u="Start",p="Stop",d="Event",h="AuthContext",f="Exception",v="Local",m="Session",g="Storage",y="Browser",b="Cannot",_="Buffer",E="InstrumentationKey",S=(0,o.Hj)({CRITICAL:1,WARNING:2}),w=(0,o.Hj)(((r={})[y+"DoesNotSupport"+v+g]=0,r[y+b+"Read"+v+g]=1,r[y+b+"Read"+m+g]=2,r[y+b+"Write"+v+g]=3,r[y+b+"Write"+m+g]=4,r[y+a+"RemovalFrom"+v+g]=5,r[y+a+"RemovalFrom"+m+g]=6,r[b+"SendEmptyTelemetry"]=7,r.ClientPerformanceMathError=8,r["ErrorParsingAI"+m+"Cookie"]=9,r.ErrorPVCalc=10,r[f+"WhileLoggingError"]=11,r[a+"AddingTelemetryTo"+_]=12,r[c+"Abort"]=13,r[c+"Dur"]=14,r[c+"Open"]=15,r[c+"RSC"]=16,r[c+"Send"]=17,r[c+"GetCorrelationHeader"]=18,r[a+"ToAddHandlerForOnBeforeUnload"]=19,r[a+"ToSendQueuedTelemetry"]=20,r[a+"ToReportDataLoss"]=21,r["Flush"+a]=22,r.MessageLimitPerPVExceeded=23,r.MissingRequiredFieldSpecification=24,r.NavigationTimingNotSupported=25,r.OnError=26,r[m+"RenewalDateIsZero"]=27,r.SenderNotInitialized=28,r[u+l+d+a]=29,r[p+l+d+a]=30,r[u+l+a]=31,r[p+l+a]=32,r.TelemetrySampledAndNotSent=33,r[l+d+a]=34,r[l+f+a]=35,r[l+"Metric"+a]=36,r[l+"PV"+a]=37,r[l+"PV"+a+"Calc"]=38,r[l+"Trace"+a]=39,r["Transmission"+a]=40,r[a+"ToSet"+g+_]=41,r[a+"ToRestore"+g+_]=42,r.InvalidBackendResponse=43,r[a+"ToFixDepricatedValues"]=44,r.InvalidDurationValue=45,r.TelemetryEnvelopeInvalid=46,r.CreateEnvelopeError=47,r[b+"SerializeObject"]=48,r[b+"SerializeObjectNonSerializable"]=49,r.CircularReferenceDetected=50,r["Clear"+h+a]=51,r[f+"Truncated"]=52,r.IllegalCharsInName=53,r.ItemNotInArray=54,r.MaxAjaxPerPVExceeded=55,r.MessageTruncated=56,r.NameTooLong=57,r.SampleRateOutOfRange=58,r["Set"+h+a]=59,r["Set"+h+a+"AccountName"]=60,r.StringValueTooLong=61,r.StartCalledMoreThanOnce=62,r.StopCalledWithoutStart=63,r["TelemetryInitializer"+a]=64,r.TrackArgumentsNotSpecified=65,r.UrlTooLong=66,r[m+g+_+"Full"]=67,r[b+"AccessCookie"]=68,r.IdTooLong=69,r.InvalidEvent=70,r[c+"SetRequestHeader"]=71,r["Send"+y+"InfoOnUserInit"]=72,r["Plugin"+f]=73,r["Notification"+f]=74,r.SnippetScriptLoadFailure=99,r["Invalid"+E]=100,r[b+"ParseAiBlobValue"]=101,r.InvalidContentBlob=102,r[l+"PageAction"+d+a]=103,r[a+"AddingCustomDefinedRequestContext"]=104,r["InMemory"+g+_+"Full"]=105,r[E+"Deprecation"]=106,r)),P=(0,o.Hj)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),T=(0,o.Hj)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),C=(0,o.Hj)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),x=(0,o.Hj)({Normal:1,Critical:2}),I=(0,o.Hj)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),O=(0,s.N6)((0,i.Im)((0,i.Im)({},w),(0,o.Hj)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),R=n(92457),D=n(99015),k=n(5204),A=n(44180),N=n(60830),j=n(75148),M=n(1972),L=n(8997),F=n(33540),V=500;function U(e,t,n){t&&(0,s.cy)(t)&&t[N.oI]>0&&(t=t.sort((function(e,t){return e[M.Vo]-t[M.Vo]})),(0,s.Iu)(t,(function(e){e[M.Vo]<V&&(0,s.$8)("Channel has invalid priority - "+e[N.Ju])})),e[N.y5]({queue:(0,s.N6)(t),chain:(0,L.PV)(t,n[N.GA],n)}))}var W=n(91698),H=n(64252),q=n(95331),$=n(56489),B=function(e){function t(){var n,r,i=e.call(this)||this;function o(){n=0,r=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,o(),(0,R.A)(t,i,(function(e,t){e.addTelemetryInitializer=function(e){var t={id:n++,fn:e};return r[N.y5](t),{remove:function(){(0,s.Iu)(r,(function(e,n){if(e.id===t.id)return r[N.Ic](n,1),-1}))}}},e[M.qT]=function(t,n){for(var i=!1,o=r[N.oI],a=0;a<o;++a){var c=r[a];if(c)try{if(!1===c.fn[N.y9](null,[t])){i=!0;break}}catch(e){(0,D.ZP)(n[N.e4](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,s.lL)(e),{exception:(0,A.mm)(e)},!0)}}i||e[N.$5](t,n)},e[N.tn]=function(){o()}})),i}return(0,i.qU)(t,e),t.__ieDyn=1,t}($.s),K=n(49388),G="Plugins must provide initialize method",z="_notificationManager",Y="SDK is still unloading...",J={loggingLevelConsole:1};function X(e,t){return new k.NS(t)}function Q(e,t){var n=!1;return(0,s.Iu)(t,(function(t){if(t===e)return n=!0,-1})),n}var Z=function(){function e(){var t,n,r,o,a,c,l,u,p,d,h,f,v,m,g,y,b,_,E,S,w=0,P=!1;(0,R.A)(e,this,(function(e){function T(n){if(!w&&!P&&(n||e[N.Uw]&&e[N.Uw].queue[N.oI]>0)){var r=(0,s.SA)(t.diagnosticLogInterval);r&&r>0||(r=1e4),w=setInterval((function(){clearInterval(w),w=0,$()}),r)}return w}function C(){n=!1,t=(0,s.CP)(!0,{},J),e[N.GA]=t,e[N.Uw]=new D.wq(t),e[N.H7]=[],g=new B,r=[],o=null,a=null,c=null,l=null,u=null,d=null,p=[],h=null,f=null,v=null,m=!1,y=null,b=(0,H.Z)("AIBaseCore",!0),_=(0,K.P)(),S=null}function x(){var n=(0,L.i8)(R(),t,e);return n[N.by](T),n}function I(n){var r=function(e,t,n){var r,i=[],o={};return(0,s.Iu)(n,(function(t){((0,s.hX)(t)||(0,s.hX)(t[N.mE]))&&(0,s.$8)(G);var n=t[M.Vo],r=t[N.Ju];t&&n&&((0,s.hX)(o[n])?o[n]=r:(0,D.OG)(e,"Two extensions have same priority #"+n+" - "+o[n]+", "+r)),(!n||n<500)&&i[N.y5](t)})),(r={all:n})[M.eT]=i,r}(e[N.Uw],0,p);d=r[M.eT],u=null;var i=r.all;if(v=(0,s.N6)(function(e,t,n){var r=[];if(e&&(0,s.Iu)(e,(function(e){return U(r,e,n)})),t){var i=[];(0,s.Iu)(t,(function(e){e[M.Vo]>V&&i[N.y5](e)})),U(r,i,n)}return r}(f,i,e)),h){var o=(0,s.rD)(i,h);-1!==o&&i[N.Ic](o,1),-1!==(o=(0,s.rD)(d,h))&&d[N.Ic](o,1),h._setQueue(v)}else h=function(e,t){function n(){return(0,L.i8)(null,t[N.GA],t,null)}function r(e,t,n,r){var i=e?e[N.oI]+1:1;function o(){0==--i&&(r&&r(),r=null)}i>0&&(0,s.Iu)(e,(function(e){if(e&&e.queue[N.oI]>0){var r=e.chain,s=t[N.$o](r);s[N.by](o),n(s)}else i--})),o()}var i=!1,o={identifier:"ChannelControllerPlugin",priority:V,initialize:function(t,n,r,o){i=!0,(0,s.Iu)(e,(function(e){e&&e.queue[N.oI]>0&&(0,F.pI)((0,L.i8)(e.chain,t,n),r)}))},isInitialized:function(){return i},processTelemetry:function(t,i){r(e,i||n(),(function(e){e[N.$5](t)}),(function(){i[N.$5](t)}))},update:function(t,n){var i=n||{reason:0};return r(e,t,(function(e){e[N.$5](i)}),(function(){t[N.$5](i)})),!0},pause:function(){r(e,n(),(function(e){e.iterate((function(e){e.pause&&e.pause()}))}),null)},resume:function(){r(e,n(),(function(e){e.iterate((function(e){e.resume&&e.resume()}))}),null)},teardown:function(t,n){var o=n||{reason:0,isAsync:!1};return r(e,t,(function(e){e[N.$5](o)}),(function(){t[N.$5](o),i=!1})),!0},getChannel:function(t){var n=null;return e&&e[N.oI]>0&&(0,s.Iu)(e,(function(e){if(e&&e.queue[N.oI]>0&&((0,s.Iu)(e.queue,(function(e){if(e[N.Ju]===t)return n=e,-1})),n))return-1})),n},flush:function(t,i,o,s){var a=1,c=!1,l=null;function u(){a--,c&&0===a&&(l&&(clearTimeout(l),l=null),i&&i(c),i=null)}return s=s||5e3,r(e,n(),(function(e){e.iterate((function(e){if(e[N.EX]){a++;var n=!1;e[N.EX](t,(function(){n=!0,u()}),o)||n||(t&&null==l?l=setTimeout((function(){l=null,u()}),s):u())}}))}),(function(){c=!0,u()})),!0},_setQueue:function(t){e=t}};return o}(v,e);i[N.y5](h),d[N.y5](h),e[N.H7]=(0,F.Xc)(i),h[N.mE](t,e,i);var a=x();(0,F.pI)(a,i),e[N.H7]=(0,s.N6)((0,F.Xc)(d||[])).slice(),n&&function(t){var n=(0,L.nU)(R(),e);n[N.by](T),e._updateHook&&!0===e._updateHook(n,t)||n[N.$5](t)}(n)}function O(t){var n,r=null,i=null;return(0,s.Iu)(e[N.H7],(function(e){if(e[N.Ju]===t&&e!==h&&e!==g)return i=e,-1})),!i&&h&&(i=h.getChannel(t)),i&&((n={plugin:i})[N.kt]=function(e){(0,F.Cr)(i)[M.Hr]=!e},n.isEnabled=function(){var e=(0,F.Cr)(i);return!e[N.Ik]&&!e[M.Hr]},n.remove=function(e,t){var n;void 0===e&&(e=!0);var r=[i],o=((n={reason:1})[N.tI]=e,n);A(r,o,(function(e){e&&I({reason:32,removed:r}),t&&t(e)}))},r=n),r}function R(){if(!u){var n=(d||[]).slice();-1===(0,s.rD)(n,g)&&n[N.y5](g),u=(0,L.PV)((0,F.Xc)(n),t,e)}return u}function A(n,r,i){if(n&&n[N.oI]>0){var o=(0,L.PV)(n,t,e),a=(0,L.tS)(o,e);a[N.by]((function(){var e=!1,t=[];(0,s.Iu)(p,(function(r,i){Q(r,n)?e=!0:t[N.y5](r)})),p=t;var r=[];f&&((0,s.Iu)(f,(function(t,i){var o=[];(0,s.Iu)(t,(function(t){Q(t,n)?e=!0:o[N.y5](t)})),r[N.y5](o)})),f=r),i&&i(e),T()})),a[N.$5](r)}else i(!1)}function $(){if(e[N.Uw]&&e[N.Uw].queue){var n=e[N.Uw].queue.slice(0);e[N.Uw].queue[N.oI]=0,(0,s.Iu)(n,(function(n){var r,i=((r={})[N.RS]=y||"InternalMessageId: "+n[N.JR],r.iKey=(0,s.SA)(t[N.sl]),r.time=(0,s._u)(new Date),r.baseType=D.WD.dataType,r.baseData={message:n[N.pM]},r);e.track(i)}))}}function Z(e,t,n,r){return h?h[N.EX](e,t,n||6,r):(t&&t(!1),!0)}function ee(t){var n=e[N.Uw];n?((0,D.ZP)(n,2,73,t),T()):(0,s.$8)(t)}C(),e[N.tZ]=function(){return n},e[N.mE]=function(r,a,l,u){var d,h;m&&(0,s.$8)(Y),e[N.tZ]()&&(0,s.$8)("Core should not be initialized more than once"),t=r||{},e[N.GA]=t,(0,s.hX)(r[N.sl])&&(0,s.$8)("Please provide instrumentation key"),o=u,e[z]=u,!0===(h=(0,s.SA)(t.disableDbgExt))&&E&&(o[N.TP](E),E=null),o&&!E&&!0!==h&&(E=(0,q.M)(t),o[N.vR](E)),!(d=(0,s.SA)(t.enablePerfMgr))&&c&&(c=null),d&&(0,s.c2)(t,M.Yd,X),(0,s.c2)(t,M.Bw,{}).NotificationManager=o,l&&(e[N.Uw]=l);var g=(0,s.c2)(t,M.jy,[]);(p=[])[N.y5].apply(p,(0,i.vz)((0,i.vz)([],a,!1),g,!1)),f=(0,s.c2)(t,M.LZ,[]),I(null),v&&0!==v[N.oI]||(0,s.$8)("No "+M.LZ+" available"),n=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return v&&(0,s.Iu)(v,(function(t){e[N.y5](t.queue)})),(0,s.N6)(e)},e.track=function(n){n.iKey=n.iKey||t[N.sl],n[N.fA]=n[N.fA]||(0,s._u)(new Date),n.ver=n.ver||"4.0",!m&&e[N.tZ]()?x()[N.$5](n):r[N.y5](n)},e[N.ps]=x,e[N.RF]=function(){return o||(o=function(){var e;return(0,j.AQ)(((e={})[N.vR]=function(e){},e[N.TP]=function(e){},e[M.fc]=function(e){},e[M.Yp]=function(e,t){},e[M.dI]=function(e,t){},e))}(),e[z]=o),o},e[N.vR]=function(e){o&&o[N.vR](e)},e[N.TP]=function(e){o&&o[N.TP](e)},e.getCookieMgr=function(){return l||(l=(0,W.xN)(t,e[N.Uw])),l},e.setCookieMgr=function(e){l=e},e[M.kI]=function(){if(!a&&!c&&(0,s.SA)(t.enablePerfMgr)){var n=(0,s.SA)(t[M.Yd]);(0,s.Tn)(n)&&(c=n(e,e[N.RF]()))}return a||c||(0,k.Z4)()},e.setPerfMgr=function(e){a=e},e.eventCnt=function(){return r[N.oI]},e.releaseQueue=function(){if(n&&r[N.oI]>0){var e=r;r=[],(0,s.Iu)(e,(function(e){x()[N.$5](e)}))}},e.pollInternalLogs=function(e){return y=e||null,P=!1,w&&(clearInterval(w),w=null),T(!0)},e[N.Di]=function(){P=!0,w&&(clearInterval(w),w=0,$())},(0,s.o$)(e,(function(){return g}),["addTelemetryInitializer"]),e.unload=function(t,r,i){var o;void 0===t&&(t=!0),n||(0,s.$8)("SDK is not initialized"),m&&(0,s.$8)(Y);var a=((o={reason:50})[N.tI]=t,o.flushComplete=!1,o),c=(0,L.tS)(R(),e);function l(t){a.flushComplete=t,m=!0,_.run(c,a),e[N.Di](),c[N.$5](a)}c[N.by]((function(){C(),r&&r(a)}),e),$(),Z(t,l,6,i)||l(!1)},e[N.AP]=O,e.addPlugin=function(e,t,n,r){if(!e)return r&&r(!1),void ee(G);var i=O(e[N.Ju]);if(i&&!t)return r&&r(!1),void ee("Plugin ["+e[N.Ju]+"] is already loaded!");var o={reason:16};function s(t){p[N.y5](e),o.added=[e],I(o),r&&r(!0)}if(i){var a=[i.plugin];A(a,{reason:2,isAsync:!!n},(function(e){e?(o.removed=a,o.reason|=32,s()):r&&r(!1)}))}else s()},e.evtNamespace=function(){return b},e[N.EX]=Z,e.getTraceCtx=function(e){return S||(S=(0,F.u7)()),S},e.setTraceCtx=function(e){S=e||null},(0,s.RF)(e,"addUnloadCb",(function(){return _}),"add")}))}return e.__ieDyn=1,e}();function ee(e,t,n,r){(0,s.Iu)(e,(function(e){if(e&&e[t])if(n)setTimeout((function(){return r(e)}),0);else try{r(e)}catch(e){}}))}var te=function(){function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;(0,R.A)(e,this,(function(e){e[N.vR]=function(t){e.listeners[N.y5](t)},e[N.TP]=function(t){for(var n=(0,s.rD)(e[N.lJ],t);n>-1;)e.listeners[N.Ic](n,1),n=(0,s.rD)(e[N.lJ],t)},e[M.fc]=function(t){ee(e[N.lJ],M.fc,!0,(function(e){e[M.fc](t)}))},e[M.Yp]=function(t,n){ee(e[N.lJ],M.Yp,!0,(function(e){e[M.Yp](t,n)}))},e[M.dI]=function(t,n){ee(e[N.lJ],M.dI,n,(function(e){e[M.dI](t,n)}))},e[M.l0]=function(t){t&&(!n&&t[N.Zu]()||ee(e[N.lJ],M.l0,!1,(function(e){t[N.tI]?setTimeout((function(){return e[M.l0](t)}),0):e[M.l0](t)})))}}))}return e.__ieDyn=1,e}(),ne=function(e){function t(){var n=e.call(this)||this;return(0,R.A)(t,n,(function(e,t){function n(t){var n=e[N.RF]();n&&n[M.Yp]([t],2)}e[N.mE]=function(e,n,r,i){t[N.mE](e,n,r||new D.wq(e),i||new te(e))},e.track=function(r){(0,k.r2)(e[M.kI](),(function(){return"AppInsightsCore:track"}),(function(){null===r&&(n(r),(0,s.$8)("Invalid telemetry item")),function(e){(0,s.hX)(e[N.RS])&&(n(e),(0,s.$8)("telemetry name required"))}(r),t.track(r)}),(function(){return{item:r}}),!r.sync)}})),n}return(0,i.qU)(t,e),t.__ieDyn=1,t}(Z),re=n(52976),ie=n(59091),oe=function(e){function t(){var n=e.call(this)||this;return n.pluginVersionStringArr=[],(0,R.A)(t,n,(function(e,t){e.logger&&e.logger.queue||(e.logger=new D.wq({loggingLevelConsole:1})),e.initialize=function(n,r,i,o){(0,k.r2)(e,(function(){return"AppInsightsCore.initialize"}),(function(){var a=e.pluginVersionStringArr;if(n){n.endpointUrl||(n.endpointUrl=re.S);var c=n.propertyStorageOverride;!c||c.getProperty&&c.setProperty||(0,s.$8)("Invalid property storage override passed."),n.channels&&(0,s.Iu)(n.channels,(function(e){e&&(0,s.Iu)(e,(function(e){if(e.identifier&&e.version){var t=e.identifier+"="+e.version;a.push(t)}}))}))}e.getWParam=function(){return"undefined"!=typeof document||n.enableWParam?0:-1},r&&(0,s.Iu)(r,(function(e){if(e&&e.identifier&&e.version){var t=e.identifier+"="+e.version;a.push(t)}})),e.pluginVersionString=a.join(";"),e.pluginVersionStringArr=a;try{t.initialize(n,r,i,o),e.pollInternalLogs("InternalLog")}catch(t){var l=e.logger,u=(0,A.mm)(t);-1!==u.indexOf("channels")&&(u+="\n - Channels must be provided through config.channels only!"),(0,D.ZP)(l,1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}}),(function(){return{config:n,extensions:r,logger:i,notificationManager:o}}))},e.track=function(n){(0,k.r2)(e,(function(){return"AppInsightsCore.track"}),(function(){var r=n;if(r){r.timings=r.timings||{},r.timings.trackStart=(0,ie.WB)(),(0,ie.Hh)(r.latency)||(r.latency=1);var i=r.ext=r.ext||{};i.sdk=i.sdk||{},i.sdk.ver=ie.xE;var o=r.baseData=r.baseData||{};o[re._0]=o[re._0]||{};var s=o[re._0];s[re.hj]=s[re.hj]||e.pluginVersionString||re.m5}t.track(r)}),(function(){return{item:n}}),!n.sync)}})),n}return(0,i.qU)(t,e),t.__ieDyn=1,t}(ne);const se=oe;var ae=function(e){function t(){var n=e.call(this)||this;return(0,R.A)(t,n,(function(e,t){e.initialize=function(n,r,i,o){n&&!n.endpointUrl&&(n.endpointUrl=re.S),e.getWParam=function(){return ie.g8||n.enableWParam?0:-1};try{t.initialize(n,r,i,o)}catch(t){(0,D.ZP)(e.logger,1,514,"Initialization Failed: "+(0,A.mm)(t)+"\n - Note: Channels must be provided through config.channels only")}},e.track=function(e){var n=e;if(n){var r=n.ext=n.ext||{};r.sdk=r.sdk||{},r.sdk.ver=ie.xE}t.track(n)}})),n}return(0,i.qU)(t,e),t.__ieDyn=1,t}(Z);const ce=ae;var le=s.Tn;function ue(e,t,n){return function(r){e[t]=r,n()}}const pe=function(){function e(t){var n=0,r=null,i=[];function o(){if(i.length>0){var e=i.slice();i=[],setTimeout((function(){for(var t=0,n=e.length;t<n;++t)try{e[t]()}catch(e){}}),0)}}function s(e){0===n&&(r=e,n=1,o())}function a(e){0===n&&(r=e,n=2,o())}(0,R.A)(e,this,(function(t){t.then=function(t,s){return new e((function(a,c){!function(t,s,a,c){i.push((function(){var i;try{(i=1===n?le(t)?t(r):r:le(s)?s(r):r)instanceof e?i.then(a,c):2!==n||le(s)?a(i):c(i)}catch(e){return void c(e)}})),0!==n&&o()}(t,s,a,c)}))},t.catch=function(e){return t.then(null,e)}})),function(){if(!le(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(s,a)}catch(e){a(e)}}()}return e.resolve=function(t){return t instanceof e?t:t&&le(t.then)?new e((function(e,n){try{t.then(e,n)}catch(e){n(e)}})):new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){if(t&&t.length)return new e((function(e,n){try{for(var r=[],i=0,o=0;o<t.length;o++){var s=t[o];s&&le(s.then)?(i++,s.then(ue(r,o,(function(){0==--i&&e(r)})),n)):r[o]=s}0===i&&setTimeout((function(){e(r)}),0)}catch(e){n(e)}}))},e.race=function(t){return new e((function(e,n){if(t&&t.length)try{for(var r=function(r){var i=t[r];i&&le(i.then)?i.then(e,n):setTimeout((function(){e(i)}),0)},i=0;i<t.length;i++)r(i)}catch(e){n(e)}}))},e}();var de=0,he=[],fe=[],ve=[];function me(){return(new Date).getTime()}const ge=function(){function e(t,n){var r=0,i=(t||"<unnamed>")+"."+de;function o(e){var t=(0,j.mS)();t&&t.QUnit&&console&&console.log("ESPromiseScheduler["+i+"] "+e)}function s(e){(0,D.OG)(n,"ESPromiseScheduler["+i+"] "+e)}de++,(0,R.A)(e,this,(function(e){var t=null,n=0;function a(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return e.splice(n,1)[0];return null}e.scheduleEvent=function(e,c,l){var u=i+"."+n;n++,c&&(u+="-("+c+")");var p=u+"{"+r+"}";r++;var d,h,f,v={evt:null,tm:me(),id:p,isRunning:!1,isAborted:!1};return v.evt=t?(d=v,h=t,f=new pe((function(e,t){var n=me()-h.tm,r=h.id;o("["+u+"] is waiting for ["+r+":"+n+" ms] to complete before starting -- ["+fe.length+"] waiting and ["+he.length+"] running"),d.abort=function(e){d.abort=null,a(fe,u),d.isAborted=!0,t(new Error(e))},h.evt.then((function(n){a(fe,u),E(d).then(e,t)}),(function(n){a(fe,u),E(d).then(e,t)}))})),fe.push(d),f):E(v),(t=v).evt._schId=p,v.evt;function m(e){for(var t=me(),n=t-6e5,r=e.length,i=0;i<r;){var o=e[i];if(o&&o.tm<n){var a=null;o.abort?(a="Aborting ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",o.abort(a)):a="Removing ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",s(a),e.splice(i,1),r--}else i++}}function g(e,n){var r=!1,i=a(he,e);if(i||(i=a(ve,e),r=!0),i){i.to&&(clearTimeout(i.to),i.to=null);var c=me()-i.tm;n?r?s("Timed out event ["+e+"] finally complete -- "+c+" ms"):o("Promise ["+e+"] Complete -- "+c+" ms"):(ve.push(i),s("Event ["+e+"] Timed out and removed -- "+c+" ms"))}else o("Failed to remove ["+e+"] from running queue");t&&t.id===e&&(t=null),m(he),m(fe),m(ve)}function y(e,t){return function(n){return g(e,!0),t&&t(n),n}}function b(e,t,n,r){t.then((function(t){return t instanceof pe?(o("Event ["+e+"] returned a promise -- waiting"),b(e,t,n,r),t):y(e,n)(t)}),y(e,r))}function _(e,t){var n=e.id;return new pe((function(r,i){o("Event ["+n+"] Starting -- waited for "+(e.wTm||"--")+" ms"),e.isRunning=!0,e.abort=function(t){e.abort=null,e.isAborted=!0,g(n,!1),i(new Error(t))};var s=t(n);s instanceof pe?(l&&(e.to=setTimeout((function(){g(n,!1),i(new Error("Timed out after ["+l+"] ms"))}),l)),b(n,s,(function(t){o("Event ["+n+"] Resolving after "+(me()-e.tm)+" ms"),r(t)}),i)):(o("Promise ["+n+"] Auto completed as the start action did not return a promise"),r())}))}function E(t){var n=me();return t.wTm=n-t.tm,t.tm=n,t.isAborted?pe.reject(new Error("["+u+"] was aborted")):(he.push(t),_(t,e))}}}))}return e.incomplete=function(){return he},e.waitingToStart=function(){return fe},e}();var ye=function(){function e(e){var t=this,n={},r=[],i=[];function o(e,t){var o,a=n[e];if(a&&(o=a[t]),!o&&null!==o){if((0,s.Kg)(e)&&(0,s.Kg)(t))if(i.length>0){for(var c=0;c<i.length;c++)if(i[c].handleField(e,t)){o={canHandle:!0,fieldHandler:i[c]};break}}else 0===r.length&&(o={canHandle:!0});if(!o&&null!==o)for(o=null,c=0;c<r.length;c++)if(r[c].handleField(e,t)){o={canHandle:!0,handler:r[c],fieldHandler:null};break}a||(a=n[e]={}),a[t]=o}return o}function a(e,t,n,r,i,o){if(e.handler)return e.handler.property(t,n,i,o);if(!(0,s.hX)(i.kind)){if(!(4096&~r&&(0,ie.m0)(i.kind)))return null;i.value=i.value.toString()}return l(e.fieldHandler,t,n,r,i)}function c(e,t,n){return(0,ie.yD)(n)?{value:n}:null}function l(e,n,r,i,o){if(o&&e){var a=e.getSanitizer(n,r,i,o.kind,o.propertyType);if(a)if(4===i){var u={},p=o.value;(0,s.z)(p,(function(t,i){var o=n+"."+r;if((0,ie.yD)(i)){var s=c(0,0,i);(s=l(e,o,t,(0,ie.cq)(i),s))&&(u[t]=s.value)}})),o.value=u}else{var d={path:n,name:r,type:i,prop:o,sanitizer:t};o=a.call(t,d)}}return o}e&&i.push(e),t.addSanitizer=function(e){e&&(r.push(e),n={})},t.addFieldSanitizer=function(e){e&&(i.push(e),n={})},t.handleField=function(e,t){var n=o(e,t);return!!n&&n.canHandle},t.value=function(e,t,n,r){var i=o(e,t);if(i&&i.canHandle){if(!i||!i.canHandle)return null;if(i.handler)return i.handler.value(e,t,n,r);if(!(0,s.Kg)(t)||(0,s.hX)(n)||n===re.m5)return null;var l=null,u=(0,ie.cq)(n);if(8192&~u)1!==u&&2!==u&&3!==u&&4096&~u?4===u&&(l=c(0,0,r?JSON.stringify(n):n)):l=c(0,0,n);else{var p=-8193&u;if(l=n,!(0,ie.yD)(l.value)||1!==p&&2!==p&&3!==p&&4096&~p)return null}if(l)return a(i,e,t,u,l,r)}return null},t.property=function(e,t,n,r){var i=o(e,t);if(!i||!i.canHandle)return null;if(!(0,s.Kg)(t)||(0,s.hX)(n)||!(0,ie.yD)(n.value))return null;var c=(0,ie.cq)(n.value);return 0===c?null:a(i,e,t,c,n,r)}}return e.getFieldType=ie.cq,e}(),be=100,_e=n(31590),Ee=n(32578),Se=n(18413),we=n(57679),Pe=n(47672),Te=n(68560)},52976:(e,t,n)=>{"use strict";n.d(t,{S:()=>i,_0:()=>s,hj:()=>o,m5:()=>r});var r="",i="https://browser.events.data.microsoft.com/OneCollector/1.0/",o="version",s="properties"},59091:(e,t,n)=>{"use strict";n.d(t,{Aq:()=>U,EO:()=>w,F2:()=>H,Go:()=>x,H$:()=>q,Hh:()=>T,P$:()=>E,Ri:()=>D,Rx:()=>h,TC:()=>C,TV:()=>O,UM:()=>k,WB:()=>j,WD:()=>I,X$:()=>N,Yj:()=>R,cq:()=>V,g8:()=>_,gj:()=>A,h3:()=>P,jS:()=>W,m0:()=>M,u9:()=>F,wJ:()=>L,xE:()=>f,yD:()=>S});var r,i=n(44180),o=n(12497),s=n(91698),a=n(32578),c=n(47672),l=n(18413),u=n(57679),p=n(75148),d=n(52976),h="3.2.13",f="1DS-Web-JS-"+h,v="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",m="withCredentials",g="timeout",y=((r={})[0]=0,r[2]=6,r[1]=1,r[3]=7,r[4098]=6,r[4097]=1,r[4099]=7,r),b=null,_=Boolean((0,i.YE)()),E=Boolean((0,i.zk)());function S(e){return!(e===d.m5||(0,o.hX)(e))}function w(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return d.m5}function P(){return null===b&&(b=!(0,o.b0)(Uint8Array)&&!function(){var e=(0,i.w3)();if(!(0,o.b0)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t.indexOf("safari")>=0||t.indexOf("firefox")>=0)&&t.indexOf("chrome")<0)return!0}return!1}()&&!(0,i.lV)()),b}function T(e){return!!(e&&(0,o.Et)(e)&&e>=1&&e<=4)}function C(e,t,n){if(!t&&!S(t)||"string"!=typeof e)return null;var r=typeof t;if("string"===r||"number"===r||"boolean"===r||(0,o.cy)(t))t={value:t};else if("object"!==r||c.J$.call(t,"value")){if((0,o.hX)(t.value)||t.value===d.m5||!(0,o.Kg)(t.value)&&!(0,o.Et)(t.value)&&!(0,o.Lm)(t.value)&&!(0,o.cy)(t.value))return null}else t={value:n?JSON.stringify(t):t};if((0,o.cy)(t.value)&&!L(t.value))return null;if(!(0,o.hX)(t.kind)){if((0,o.cy)(t.value)||!M(t.kind))return null;t.value=t.value.toString()}return t}function x(e,t,n){var r=-1;if(!(0,o.b0)(e))if(t>0&&(32===t?r=8192:t<=13&&(r=t<<5)),function(e){return e>=0&&e<=9}(n))-1===r&&(r=0),r|=n;else{var i=y[V(e)]||-1;-1!==r&&-1!==i?r|=i:6===i&&(r=i)}return r}function I(){(0,s.um)(null).setEnabled(!1)}function O(e,t,n){(0,s.gi)(null)&&(0,s.um)(null).set(e,t,86400*n,null,"/")}function R(e){(0,s.gi)(null)&&(0,s.um)(null).del(e)}function D(e){return(0,s.gi)(null)?k((0,s.um)(null),e):d.m5}function k(e,t,n){var r;return void 0===n&&(n=!0),e&&(r=e.get(t),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||d.m5}function A(e){void 0===e&&(e="D");var t=(0,a.aq)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,d.m5)),t}function N(e,t,n,r,i){var s={},a=!1,l=0,u=arguments.length,p=arguments;for("[object Boolean]"===Object[c.vR].toString.call(p[0])&&(a=p[0],l++);l<u;l++)e=p[l],(0,o.z)(e,(function(e,t){a&&t&&(0,o.Gv)(t)?(0,o.cy)(t)?(s[e]=s[e]||[],(0,o.Iu)(t,(function(t,n){t&&(0,o.Gv)(t)?s[e][n]=N(!0,s[e][n],t):s[e][n]=t}))):s[e]=N(!0,s[e],t):s[e]=t}));return s}var j=a.UU;function M(e){return 0===e||e>0&&e<=13||32===e}function L(e){return e.length>0}function F(e,t){var n=e;n.timings=n.timings||{},n.timings.processTelemetryStart=n.timings.processTelemetryStart||{},n.timings.processTelemetryStart[t]=j()}function V(e){var t=0;if(null!=e){var n=typeof e;"string"===n?t=1:"number"===n?t=2:"boolean"===n?t=3:n===c._1&&(t=4,(0,o.cy)(e)?(t=4096,e.length>0&&(t|=V(e[0]))):c.J$.call(e,"value")&&(t=8192|V(e.value)))}return t}var U={Version:h,FullVersionString:f,strUndefined:c.bA,strObject:c._1,Undefined:c.bA,arrForEach:o.Iu,arrIndexOf:o.rD,arrMap:o.W$,arrReduce:o.KT,objKeys:o.cG,toISOString:o._u,isReactNative:i.lV,isString:o.Kg,isNumber:o.Et,isBoolean:o.Lm,isFunction:o.Tn,isArray:o.cy,isObject:o.Gv,strTrim:o.EH,isDocumentObjectAvailable:_,isWindowObjectAvailable:E,isValueAssigned:S,getTenantId:w,isBeaconsSupported:i.Uf,isUint8ArrayAvailable:P,isLatency:T,sanitizeProperty:C,getISOString:o._u,useXDomainRequest:i.PV,getCommonSchemaMetaData:x,cookieAvailable:s.gi,disallowsSameSiteNone:s.It,setCookie:O,deleteCookie:R,getCookie:D,createGuid:A,extend:N,getTime:j,isValueKind:M,isArrayValid:L,objDefineAccessors:o.r,addPageUnloadEventListener:l.ee,setProcessTelemetryTimings:F,addEventHandler:l.So,getFieldValueType:V,strEndsWith:o.Cv,objForEachKey:o.z},W={_canUseCookies:void 0,isTypeof:o.Ed,isUndefined:o.b0,isNullOrUndefined:o.hX,hasOwnProperty:o.mQ,isFunction:o.Tn,isObject:o.Gv,isDate:o.$P,isArray:o.cy,isError:o.bJ,isString:o.Kg,isNumber:o.Et,isBoolean:o.Lm,toISOString:o._u,arrForEach:o.Iu,arrIndexOf:o.rD,arrMap:o.W$,arrReduce:o.KT,strTrim:o.EH,objCreate:p.AQ,objKeys:o.cG,objDefineAccessors:o.r,addEventHandler:l.So,dateNow:o.x3,isIE:i.lT,disableCookies:I,newGuid:a.aq,perfNow:a.UU,newId:u.Si,randomValue:u.Z1,random32:u.VN,mwcRandomSeed:u.yc,mwcRandom32:u.k5,generateW3CId:a.cL};function H(){return!!(0,i.EH)("chrome")}function q(e,t,n,r,i,o){function s(e,t,n){try{e[t]=n}catch(e){}}void 0===r&&(r=!1),void 0===i&&(i=!1);var a=new XMLHttpRequest;return r&&s(a,v,r),n&&s(a,m,n),a.open(e,t,!i),n&&s(a,m,n),!i&&o&&s(a,g,o),a}},28643:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BE_PROFILE:()=>m,NRT_PROFILE:()=>v,PostChannel:()=>ve,RT_PROFILE:()=>f});var r=n(8747),i=n(92457),o=n(5204),s=n(18413),a=n(64252),c=n(59091),l=n(12497),u=n(44180),p=n(31590),d=n(99015),h=n(56489),f="REAL_TIME",v="NEAR_REAL_TIME",m="BEST_EFFORT",g="",y="POST",b="drop",_="requeue",E="application/x-json-stream",S="cache-control",w="content-type",P="kill-duration",T="time-delta-millis",C="client-version",x="client-id",I="time-delta-to-apply-millis",O="upload-time",R="apikey",D="AuthMsaDeviceTicket",k="AuthXToken",A="msfpc",N="trace",j="user";function M(e){var t=(e.ext||{}).intweb;return t&&(0,c.yD)(t[A])?t[A]:null}function L(e){for(var t=null,n=0;null===t&&n<e.length;n++)t=M(e[n]);return t}var F=function(){function e(t,n){var r=n?[].concat(n):[],i=this,o=L(r);i.iKey=function(){return t},i.Msfpc=function(){return o||g},i.count=function(){return r.length},i.events=function(){return r},i.addEvent=function(e){return!!e&&(r.push(e),o||(o=M(e)),!0)},i.split=function(n,i){var s;if(n<r.length){var a=r.length-n;(0,l.hX)(i)||(a=i<a?i:a),s=r.splice(n,a),o=L(r)}return new e(t,s)}}return e.create=function(t,n){return new e(t,n)},e}();const V=function(){function e(){var t=!0,n=!0,r=!0,o="use-collector-delta",s=!1;(0,i.A)(e,this,(function(e){e.allowRequestSending=function(){return t},e.firstRequestSent=function(){r&&(r=!1,s||(t=!1))},e.shouldAddClockSkewHeaders=function(){return n},e.getClockSkewHeaderValue=function(){return o},e.setClockSkew=function(e){s||(e?(o=e,n=!0,s=!0):n=!1,t=!0)}}))}return e.__ieDyn=1,e}(),U=function(){function e(){var t={};(0,i.A)(e,this,(function(e){e.setKillSwitchTenants=function(e,n){if(e&&n)try{var r=(s=e.split(","),a=[],s&&(0,l.Iu)(s,(function(e){a.push((0,l.EH)(e))})),a);if("this-request-only"===n)return r;for(var i=1e3*parseInt(n,10),o=0;o<r.length;++o)t[r[o]]=(0,l.x3)()+i}catch(e){return[]}var s,a;return[]},e.isTenantKilled=function(e){var n=t,r=(0,l.EH)(e);return void 0!==n[r]&&n[r]>(0,l.x3)()||(delete n[r],!1)}}))}return e.__ieDyn=1,e}();var W=n(47672);function H(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)}var q,$=2e6,B=Math.min($,65e3),K="metadata",G="f",z=/\./,Y=function(){function e(t,n,r,s){var a="data",u="baseData",p=!!s,d=!0,h=n,f={};(0,i.A)(e,this,(function(e){function n(e,t,i,o,s,a,u){(0,l.z)(e,(function(e,d){var v=null;if(d||(0,c.yD)(d)){var m=i,g=e,y=s,b=t;if(p&&!o&&z.test(e)){var _=e.split("."),E=_.length;if(E>1){y&&(y=y.slice());for(var S=0;S<E-1;S++){var w=_[S];b=b[w]=b[w]||{},m+="."+w,y&&y.push(w)}g=_[E-1]}}var P=o&&function(e){var t=f[e];return void 0===t&&(e.length>=7&&(t=(0,l.tG)(e,"ext.metadata")||(0,l.tG)(e,"ext.web")),f[e]=t),t}(m);if(v=!P&&h&&h.handleField(m,g)?h.value(m,g,d,r):(0,c.TC)(g,d,r)){var T=v.value;if(b[g]=T,a&&a(y,g,v),u&&"object"==typeof T&&!(0,l.cy)(T)){var C=y;C&&(C=C.slice()).push(g),n(d,T,m+"."+g,o,C,a,u)}}}}))}e.createPayload=function(e,t,n,r,i,o){return{apiKeys:[],payloadBlob:g,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:n,isBeacon:r,sendType:o,sendReason:i}},e.appendPayload=function(n,r,i){var s=n&&r&&!n.overflow;return s&&(0,o.r2)(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=r.events(),o=n.payloadBlob,s=n.numEvents,a=!1,c=[],u=[],p=n.isBeacon,d=p?65e3:3984588,h=p?B:$,f=0,v=0;f<t.length;){var m=t[f];if(m){if(s>=i){n.overflow=r.split(f);break}var g=e.getEventBlob(m);if(g&&g.length<=h){var y=g.length;if(o.length+y>d){n.overflow=r.split(f);break}o&&(o+="\n"),o+=g,++v>20&&(o.substr(0,1),v=0),a=!0,s++}else g?c.push(m):u.push(m),t.splice(f,1),f--}f++}if(c&&c.length>0&&n.sizeExceed.push(F.create(r.iKey(),c)),u&&u.length>0&&n.failedEvts.push(F.create(r.iKey(),u)),a){n.batches.push(r),n.payloadBlob=o,n.numEvents=s;var b=r.iKey();-1===(0,l.rD)(n.apiKeys,b)&&n.apiKeys.push(b)}}),(function(){return{payload:n,theBatch:{iKey:r.iKey(),evts:r.events()},max:i}})),s},e.getEventBlob=function(e){try{return(0,o.r2)(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+(0,c.EO)(e.iKey);var r={},i=e.ext;i&&(t.ext=r,(0,l.z)(i,(function(e,t){n(t,r[e]={},"ext."+e,!0,null,null,!0)})));var o=t[a]={};o.baseType=e.baseType;var s=o[u]={};return n(e.baseData,s,u,!1,[u],(function(e,t,n){J(r,e,t,n)}),d),n(e.data,o,a,!1,[],(function(e,t,n){J(r,e,t,n)}),d),JSON.stringify(t)}),(function(){return{item:e}}))}catch(e){return null}}}))}return e.__ieDyn=1,e}();function J(e,t,n,r){if(r&&e){var i=(0,c.Go)(r.value,r.kind,r.propertyType);if(i>-1){var o=e[K];o||(o=e[K]={f:{}});var s=o[G];if(s||(s=o[G]={}),t)for(var a=0;a<t.length;a++){var u=t[a];s[u]||(s[u]={f:{}});var p=s[u][G];p||(p=s[u][G]={}),s=p}s=s[n]={},(0,l.cy)(r.value)?s.a={t:i}:s.t=i}}}var X="sendAttempt",Q="&NoResponseBody=true",Z=((q={})[1]=_,q[100]=_,q[200]="sent",q[8004]=b,q[8003]=b,q),ee={},te={};function ne(e,t,n){ee[e]=t,!1!==n&&(te[t]=e)}function re(e){try{return e.responseText}catch(e){}return g}function ie(e,t){var n=!1;if(e&&t){var r=(0,l.cG)(e);if(r&&r.length>0)for(var i=t.toLowerCase(),o=0;o<r.length;o++){var s=r[o];if(s&&(0,l.mQ)(t,s)&&s.toLowerCase()===i){n=!0;break}}}return n}function oe(e,t,n,r){t&&n&&n.length>0&&(r&&ee[t]?(e.hdrs[ee[t]]=n,e.useHdrs=!0):e.url+="&"+t+"="+n)}function se(e,t){return t&&((0,l.Et)(t)?e=[t].concat(e):(0,l.cy)(t)&&(e=t.concat(e))),e}ne(D,D,!1),ne(C,C),ne(x,"Client-Id"),ne(R,R),ne(I,I),ne(O,O),ne(k,k);var ae=function(){function e(t,n,r,s,a){this._responseHandlers=[];var p,h,f,v,m,_,D,k,N,j,M="?cors=true&"+w.toLowerCase()+"="+E,L=new U,F=!1,q=new V,$=!1,B=0,K=!0,G=[],z={},J=[],ee=null,ne=!1,ae=!1,ce=!1;(0,i.A)(e,this,(function(e){var i=!0;function V(e,t){for(var n=0,r=null,i=0;null==r&&i<e.length;)1===(n=e[i])?(0,u.PV)()?r=U:(0,u.xk)()&&(r=ue):2===n&&(0,u.R7)(t)&&(!t||t&&!k)?r=le:$&&3===n&&(0,u.Uf)()&&(r=de),i++;return r?{_transport:n,_isSync:t,sendPOST:r}:null}function U(e,t,n){var r=new XDomainRequest;r.open(y,e.urlString),e.timeout&&(r.timeout=e.timeout),r.onload=function(){var e=re(r);pe(t,200,{},e),we(e)},r.onerror=function(){pe(t,400,{})},r.ontimeout=function(){pe(t,500,{})},r.onprogress=function(){},n?r.send(e.data):a.set((function(){r.send(e.data)}),0)}function le(e,t,n){var r,o=e.urlString,s=!1,c=!1,u=((r={body:e.data,method:y}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,r);n&&(u.keepalive=!0,2===e._sendReason&&(s=!0,j&&(o+=Q))),i&&(u.credentials="include"),e.headers&&(0,l.cG)(e.headers).length>0&&(u.headers=e.headers),fetch(o,u).then((function(e){var n={},r=g,i=e.headers;i&&i.forEach((function(e,t){n[t]=e})),e.body&&e.text().then((function(e){r=e})),c||(c=!0,pe(t,e.status,n,r),we(r))})).catch((function(e){c||(c=!0,pe(t,0,{}))})),s&&!c&&(c=!0,pe(t,200,{})),!c&&e.timeout>0&&a.set((function(){c||(c=!0,pe(t,500,{}))}),e.timeout)}function ue(e,t,n){var r=e.urlString;function o(e,t,n){if(!e[n]&&t&&t.getResponseHeader){var r=t.getResponseHeader(n);r&&(e[n]=(0,l.EH)(r))}return e}function s(e,n){pe(t,e.status,function(e){var t={};return e.getAllResponseHeaders?t=function(e){var t={};if((0,l.Kg)(e)){var n=(0,l.EH)(e).split(/[\r\n]+/);(0,l.Iu)(n,(function(e){if(e){var n=e.indexOf(": ");if(-1!==n){var r=(0,l.EH)(e.substring(0,n)).toLowerCase(),i=(0,l.EH)(e.substring(n+1));t[r]=i}else t[(0,l.EH)(e)]=1}}))}return t}(e.getAllResponseHeaders()):(t=o(t,e,T),t=o(t,e,P),t=o(t,e,"kill-duration-seconds")),t}(e),n)}n&&e.disableXhrSync&&(n=!1);var a=(0,c.H$)(y,r,i,!0,n,e.timeout);(0,l.z)(e.headers,(function(e,t){a.setRequestHeader(e,t)})),a.onload=function(){var e=re(a);s(a,e),we(e)},a.onerror=function(){s(a)},a.ontimeout=function(){s(a)},a.send(e.data)}function pe(e,t,n,r){try{e(t,n,r)}catch(e){(0,d.ZP)(h,2,518,(0,u.mm)(e))}}function de(e,t,n){var r=200,i=e._thePayload,o=e.urlString+(j?Q:g);try{var s=(0,u.w3)();if(!s.sendBeacon(o,e.data))if(i){var a=[];(0,l.Iu)(i.batches,(function(e){if(a&&e&&e.count()>0){for(var t=e.events(),n=0;n<t.length;n++)if(!s.sendBeacon(o,ee.getEventBlob(t[n]))){a.push(e.split(n));break}}else a.push(e.split(0))})),Pe(a,8003,i.sendType,!0)}else r=0}catch(e){(0,d.OG)(h,"Failed to send telemetry using sendBeacon API. Ex:"+(0,u.mm)(e)),r=0}finally{pe(t,r,{},g)}}function he(e){return 2===e||3===e}function fe(e){return ae&&he(e)&&(e=2),e}function ve(){return!F&&B<n}function me(){var e=J;return J=[],e}function ge(e,t,n){var r=!1;return e&&e.length>0&&!F&&f[t]&&ee&&(r=0!==t||ve()&&(n>0||q.allowRequestSending())),r}function ye(e){var t={};return e&&(0,l.Iu)(e,(function(e,n){t[n]={iKey:e.iKey(),evts:e.events()}})),t}function be(e,n,r,i,s){if(e&&0!==e.length)if(F)Pe(e,1,i);else{i=fe(i);try{var a=e,l=0!==i;(0,o.r2)(v,(function(){return"HttpManager:_sendBatches"}),(function(o){o&&(e=e.slice(0));for(var a=[],u=null,p=(0,c.WB)(),d=f[i]||(l?f[1]:f[0]),h=d&&d._transport,v=N&&(ae||he(i)||3===h||d._isSync&&2===h);ge(e,i,n);){var m=e.shift();m&&m.count()>0&&(L.isTenantKilled(m.iKey())?a.push(m):(u=u||ee.createPayload(n,r,l,v,s,i),ee.appendPayload(u,m,t)?null!==u.overflow&&(e=[u.overflow].concat(e),u.overflow=null,Ee(u,p,(0,c.WB)(),s),p=(0,c.WB)(),u=null):(Ee(u,p,(0,c.WB)(),s),p=(0,c.WB)(),e=[m].concat(e),u=null)))}u&&Ee(u,p,(0,c.WB)(),s),e.length>0&&(J=e.concat(J)),Pe(a,8004,i)}),(function(){return{batches:ye(a),retryCount:n,isTeardown:r,isSynchronous:l,sendReason:s,useSendBeacon:he(i),sendType:i}}),!l)}catch(e){(0,d.ZP)(h,2,48,"Unexpected Exception sending batch: "+(0,u.mm)(e))}}}function _e(e,t,n){e[t]=e[t]||{},e[t][p.identifier]=n}function Ee(t,n,i,s){if(t&&t.payloadBlob&&t.payloadBlob.length>0){var a=!!e.sendHook,m=f[t.sendType];!he(t.sendType)&&t.isBeacon&&2===t.sendReason&&(m=f[2]||f[3]||m);var y=ce;(t.isBeacon||3===m._transport)&&(y=!1);var b=function(e,t){var n={url:M,hdrs:{},useHdrs:!1};t?(n.hdrs=(0,c.X$)(n.hdrs,z),n.useHdrs=(0,l.cG)(n.hdrs).length>0):(0,l.z)(z,(function(e,t){te[e]?oe(n,te[e],t,!1):(n.hdrs[e]=t,n.useHdrs=!0)})),oe(n,x,"NO_AUTH",t),oe(n,C,c.xE,t);var r=g;(0,l.Iu)(e.apiKeys,(function(e){r.length>0&&(r+=","),r+=e})),oe(n,R,r,t),oe(n,O,(0,l.x3)().toString(),t);var i=function(e){for(var t=0;t<e.batches.length;t++){var n=e.batches[t].Msfpc();if(n)return encodeURIComponent(n)}return g}(e);if((0,c.yD)(i)&&(n.url+="&ext.intweb.msfpc="+i),q.shouldAddClockSkewHeaders()&&oe(n,I,q.getClockSkewHeaderValue(),t),v.getWParam){var o=v.getWParam();o>=0&&(n.url+="&w="+o)}for(var s=0;s<G.length;s++)n.url+="&"+G[s].name+"="+G[s].value;return n}(t,y);y=y||b.useHdrs;var A=(0,c.WB)();(0,o.r2)(v,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var f=0;f<t.batches.length;f++)for(var g=t.batches[f].events(),C=0;C<g.length;C++){var x=g[C];if(ne){var I=x.timings=x.timings||{};_e(I,"sendEventStart",A),_e(I,"serializationStart",n),_e(I,"serializationCompleted",i)}x[X]>0?x[X]++:x[X]=1}Pe(t.batches,1e3+(s||0),t.sendType,!0);var O={data:t.payloadBlob,urlString:b.url,headers:b.hdrs,_thePayload:t,_sendReason:s,timeout:_,disableXhrSync:D,disableFetchKeepAlive:k};y&&(ie(O.headers,S)||(O.headers[S]="no-cache, no-store"),ie(O.headers,w)||(O.headers[w]=E));var R=null;m&&(R=function(n){q.firstRequestSent();var i=function(n,i){!function(t,n,i,o){var s,a=9e3,u=null,d=!1,h=!1;try{var f=!0;if(typeof t!==W.bA){if(n){q.setClockSkew(n[T]);var v=n[P]||n["kill-duration-seconds"];(0,l.Iu)(L.setKillSwitchTenants(n["kill-tokens"],v),(function(e){(0,l.Iu)(i.batches,(function(t){if(t.iKey()===e){u=u||[];var n=t.split(0);i.numEvents-=n.count(),u.push(n)}}))}))}if(200==t||204==t)return void(a=200);((s=t)>=300&&s<500&&408!=s&&429!=s||501==s||505==s||i.numEvents<=0)&&(f=!1),a=9e3+t%1e3}if(f){a=100;var m=i.retryCnt;0===i.sendType&&(m<r?(d=!0,Se((function(){0===i.sendType&&B--,be(i.batches,m+1,i.isTeardown,ae?2:i.sendType,5)}),ae,H(m))):(h=!0,ae&&(a=8001)))}}finally{d||(q.setClockSkew(),function(t,n,r,i){try{i&&p._backOffTransmission(),200===n&&(i||t.isSync||p._clearBackOff(),function(e){if(ne){var t=(0,c.WB)();(0,l.Iu)(e,(function(e){e&&e.count()>0&&function(e,t){ne&&(0,l.Iu)(e,(function(e){_e(e.timings=e.timings||{},"sendEventCompleted",t)}))}(e.events(),t)}))}}(t.batches)),Pe(t.batches,n,t.sendType,!0)}finally{0===t.sendType&&(B--,5!==r&&e.sendQueuedRequests(t.sendType,r))}}(i,a,o,h)),Pe(u,8004,i.sendType)}}(n,i,t,s)},o=t.isTeardown||t.isSync;try{m.sendPOST(n,i,o),e.sendListener&&e.sendListener(O,n,o,t.isBeacon)}catch(e){(0,d.OG)(h,"Unexpected exception sending payload. Ex:"+(0,u.mm)(e)),pe(i,0,{})}}),(0,o.r2)(v,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(R)if(0===t.sendType&&B++,a&&!t.isBeacon&&3!==m._transport){var n={data:O.data,urlString:O.urlString,headers:(0,c.X$)({},O.headers),timeout:O.timeout,disableXhrSync:O.disableXhrSync,disableFetchKeepAlive:O.disableFetchKeepAlive},r=!1;(0,o.r2)(v,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{e.sendHook(n,(function(e){r=!0,K||e._thePayload||(e._thePayload=e._thePayload||O._thePayload,e._sendReason=e._sendReason||O._sendReason),R(e)}),t.isSync||t.isTeardown)}catch(e){r||R(O)}}))}else R(O)}))}),(function(){return{thePayload:t,serializationStart:n,serializationCompleted:i,sendReason:s}}),t.isSync)}t.sizeExceed&&t.sizeExceed.length>0&&Pe(t.sizeExceed,8003,t.sendType),t.failedEvts&&t.failedEvts.length>0&&Pe(t.failedEvts,8002,t.sendType)}function Se(e,t,n){t?e():a.set(e,n)}function we(t){var n=e._responseHandlers;try{for(var r=0;r<n.length;r++)try{n[r](t)}catch(e){(0,d.ZP)(h,1,519,"Response handler failed: "+e)}if(t){var i=JSON.parse(t);(0,c.yD)(i.webResult)&&(0,c.yD)(i.webResult[A])&&m.set("MSFPC",i.webResult[A],31536e3)}}catch(e){}}function Pe(e,t,n,r){if(e&&e.length>0&&s){var i=s[(l=t,u=Z[l],(0,c.yD)(u)||(u="oth",l>=9e3&&l<=9999?u="rspFail":l>=8e3&&l<=8999?u=b:l>=1e3&&l<=1999&&(u="send")),u)];if(i){var a=0!==n;(0,o.r2)(v,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){Se((function(){try{i.call(s,e,t,a,n)}catch(e){(0,d.ZP)(h,1,74,"send request notification failed: "+e)}}),r||a,0)}),(function(){return{batches:ye(e),reason:t,isSync:a,sendSync:r,sendType:n}}),!a)}}var l,u}e.initialize=function(e,t,n,r,o){var s;o||(o={}),M=e+M,ce=!!(0,l.b0)(o.avoidOptions)||!o.avoidOptions,v=t,m=t.getCookieMgr(),ne=!v.config.disableEventTimings;var a=!!v.config.enableCompoundKey;h=(p=n).diagLog();var c=o.valueSanitizer,g=o.stringifyObjects;(0,l.b0)(o.enableCompoundKey)||(a=!!o.enableCompoundKey),_=o.xhrTimeout,D=!!o.disableXhrSync,k=!!o.disableFetchKeepAlive,j=!1!==o.addNoResponse,$=!(0,u.lV)(),ee=new Y(v,c,g,a),(0,l.hX)(o.useSendBeacon)||($=!!o.useSendBeacon);var y=r,b=o.alwaysUseXhrOverride?r:null,E=o.alwaysUseXhrOverride?r:null,S=[3,2];if(!r){K=!1;var w=(0,u.g$)();w&&w.protocol&&"file:"===w.protocol.toLowerCase()&&(i=!1);var P=[];(0,u.lV)()?(P=[2,1],S=[2,1,3]):P=[1,2,3],(r=V(P=se(P,o.transports),!1))||(0,d.OG)(h,"No available transport to send events"),y=V(P,!0)}b||(b=V(S=se(S,o.unloadTransports),!0)),N=!K&&($&&(0,u.Uf)()||!k&&(0,u.R7)(!0)),(s={})[0]=r,s[1]=y||V([1,2,3],!0),s[2]=b||y||V([1],!0),s[3]=E||V([2,3],!0)||y||V([1],!0),f=s},e._getDbgPlgTargets=function(){return[f[0],L,ee,f]},e.addQueryStringParameter=function(e,t){for(var n=0;n<G.length;n++)if(G[n].name===e)return void(G[n].value=t);G.push({name:e,value:t})},e.addHeader=function(e,t){z[e]=t},e.canSendRequest=function(){return ve()&&q.allowRequestSending()},e.sendQueuedRequests=function(e,t){(0,l.b0)(e)&&(e=0),ae&&(e=fe(e),t=2),ge(J,e,0)&&be(me(),0,!1,e,t||0)},e.isCompletelyIdle=function(){return!F&&0===B&&0===J.length},e.setUnloading=function(e){ae=e},e.addBatch=function(e){if(e&&e.count()>0){if(L.isTenantKilled(e.iKey()))return!1;J.push(e)}return!0},e.teardown=function(){J.length>0&&be(me(),0,!0,2,2)},e.pause=function(){F=!0},e.resume=function(){F=!1,e.sendQueuedRequests(0,4)},e.sendSynchronousBatch=function(e,t,n){e&&e.count()>0&&((0,l.hX)(t)&&(t=1),ae&&(t=fe(t),n=2),be([e],0,!1,t,n||0))}}))}return e.__ieDyn=1,e}();function ce(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout(e,t,n)}function le(e){clearTimeout(e)}function ue(e,t){return{set:e||ce,clear:t||le}}var pe="eventsDiscarded",de="overrideInstrumentationKey",he="maxEventRetryAttempts",fe="maxUnloadEventRetryAttempts";const ve=function(e){function t(){var n,r=e.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="3.2.13";var h,g,y,b,_,E,S,w=!1,P=[],T=null,C=!1,x=0,I=500,O=0,R=1e4,k={},A=f,M=null,L=null,V=0,U=0,W={},q=-1,$=!0,B=!1,K=6,G=2;return(0,i.A)(t,r,(function(e,t){function r(e){"beforeunload"!==(e||(0,u.zk)().event).type&&(B=!0,g.setUnloading(B)),te(2,2)}function i(e){B=!1,g.setUnloading(B)}function z(e,t){if(e.sendAttempt||(e.sendAttempt=0),e.latency||(e.latency=1),e.ext&&e.ext[N]&&delete e.ext[N],e.ext&&e.ext[j]&&e.ext[j].id&&delete e.ext[j].id,$&&(c.u9,e.ext=(0,l.hW)(e.ext),e.baseData&&(e.baseData=(0,l.hW)(e.baseData)),e.data&&(e.data=(0,l.hW)(e.data))),e.sync)if(V||C)e.latency=3,e.sync=!1;else if(g)return $&&(e=(0,l.hW)(e)),void g.sendSynchronousBatch(F.create(e.iKey,[e]),!0===e.sync?1:e.sync,3);var n=e.latency,r=O,i=R;4===n&&(r=x,i=I);var o=!1;if(r<i)o=!ie(e,t);else{var s=1,a=20;4===n&&(s=4,a=1),o=!0,function(e,t,n,r){for(;n<=t;){var i=ne(e,t,!0);if(i&&i.count()>0){var o=i.split(0,r),s=o.count();if(s>0)return 4===n?x-=s:O-=s,be(pe,[o],p.x.QueueFull),!0}n++}return oe(),!1}(e.iKey,e.latency,s,a)&&(o=!ie(e,t))}o&&ye(pe,[e],p.x.QueueFull)}function Y(e,t,n){var r=se(e,t,n);return g.sendQueuedRequests(t,n),r}function J(){return O>0}function X(){if(q>=0&&se(q,0,_)&&g.sendQueuedRequests(0,_),x>0&&!L&&!C){var e=k[A][2];e>=0&&(L=Z((function(){L=null,Y(4,0,1),X()}),e))}var t=k[A][1];!M&&!T&&t>=0&&!C&&(J()?M=Z((function(){M=null,Y(0===U?3:1,0,1),U++,U%=2,X()}),t):U=0)}function Q(){n=null,w=!1,P=[],T=null,C=!1,x=0,I=500,O=0,R=1e4,k={},A=f,M=null,L=null,V=0,U=0,h=null,W={},y=void 0,b=0,q=-1,_=null,$=!0,B=!1,K=6,G=2,E=null,S=ue(),g=new ae(500,2,1,{requeue:me,send:_e,sent:Ee,drop:Se,rspFail:we,oth:Pe},S),ve(),W[4]={batches:[],iKeyMap:{}},W[3]={batches:[],iKeyMap:{}},W[2]={batches:[],iKeyMap:{}},W[1]={batches:[],iKeyMap:{}},Te()}function Z(e,t){0===t&&V&&(t=1);var n=1e3;return V&&(n=H(V-1)),S.set(e,t*n)}function ee(){return null!==M&&(S.clear(M),M=null,U=0,!0)}function te(e,t){ee(),T&&(S.clear(T),T=null),C||Y(1,e,t)}function ne(e,t,n){var r=W[t];r||(r=W[t=1]);var i=r.iKeyMap[e];return!i&&n&&(i=F.create(e),r.batches.push(i),r.iKeyMap[e]=i),i}function re(t,n){g.canSendRequest()&&!V&&(y>0&&O>y&&(n=!0),n&&null==T&&e.flush(t,null,20))}function ie(e,t){$&&(e=(0,l.hW)(e));var n=e.latency,r=ne(e.iKey,n,!0);return!!r.addEvent(e)&&(4!==n?(O++,t&&0===e.sendAttempt&&re(!e.sync,b>0&&r.count()>=b)):x++,!0)}function oe(){for(var e=0,t=0,n=function(n){var r=W[n];r&&r.batches&&(0,l.Iu)(r.batches,(function(r){4===n?e+=r.count():t+=r.count()}))},r=1;r<=4;r++)n(r);O=t,x=e}function se(t,n,r){var i=!1,s=0===n;return!s||g.canSendRequest()?(0,o.r2)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],n=4;n>=t;){var r=W[n];r&&r.batches&&r.batches.length>0&&((0,l.Iu)(r.batches,(function(t){g.addBatch(t)?i=i||t&&t.count()>0:e=e.concat(t.events()),4===n?x-=t.count():O-=t.count()})),r.batches=[],r.iKeyMap={}),n--}e.length>0&&ye(pe,e,p.x.KillSwitch),i&&q>=t&&(q=-1,_=0)}),(function(){return{latency:t,sendType:n,sendReason:r}}),!s):(q=q>=0?Math.min(q,t):t,_=Math.max(_,r)),i}function ce(e,t){Y(1,0,t),oe(),le((function(){e&&e(),P.length>0?T=Z((function(){T=null,ce(P.shift(),t)}),0):(T=null,X())}))}function le(e){g.isCompletelyIdle()?e():T=Z((function(){T=null,le(e)}),.25)}function ve(){(k={})[f]=[2,1,0],k[v]=[6,3,0],k[m]=[18,9,0]}function me(t,n){var r=[],i=K;B&&(i=G),(0,l.Iu)(t,(function(t){t&&t.count()>0&&(0,l.Iu)(t.events(),(function(t){t&&(t.sync&&(t.latency=4,t.sync=!1),t.sendAttempt<i?((0,c.u9)(t,e.identifier),z(t,!1)):r.push(t))}))})),r.length>0&&ye(pe,r,p.x.NonRetryableStatus),B&&te(2,2)}function ge(t,n){var r=e._notificationManager||{},i=r[t];if(i)try{i.apply(r,n)}catch(n){(0,d.ZP)(e.diagLog(),1,74,t+" notification failed: "+n)}}function ye(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t.length>0&&ge(e,[t].concat(n))}function be(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t.length>0&&(0,l.Iu)(t,(function(t){t&&t.count()>0&&ge(e,[t.events()].concat(n))}))}function _e(e,t,n){e&&e.length>0&&ge("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==n])}function Ee(e,t){be("eventsSent",e,t),X()}function Se(e,t){be(pe,e,t>=8e3&&t<=8999?t-8e3:p.x.Unknown)}function we(e){be(pe,e,p.x.NonRetryableStatus),X()}function Pe(e,t){be(pe,e,p.x.Unknown),X()}function Te(){b=n&&n.disableAutoBatchFlushLimit?0:Math.max(1500,R/6)}Q(),e._getDbgPlgTargets=function(){return[g]},e.initialize=function(u,p,d){(0,o.r2)(p,(function(){return"PostChannel:initialize"}),(function(){var o=p;t.initialize(u,p,d);try{p.addUnloadCb,E=(0,s.Hm)((0,a.Z)(e.identifier),p.evtNamespace&&p.evtNamespace());var f=e._getTelCtx();u.extensionConfig[e.identifier]=u.extensionConfig[e.identifier]||{},n=f.getExtCfg(e.identifier),S=ue(n.setTimeoutOverride,n.clearTimeoutOverride),$=!n.disableOptimizeObj&&(0,c.F2)(),function(e){var t=e.getWParam;e.getWParam=function(){var e=0;return n.ignoreMc1Ms0CookieProcessing&&(e|=2),e|t()}}(o),n.eventsLimitInMem>0&&(R=n.eventsLimitInMem),n.immediateEventLimit>0&&(I=n.immediateEventLimit),n.autoFlushEventsLimit>0&&(y=n.autoFlushEventsLimit),(0,l.Et)(n[he])&&(K=n[he]),(0,l.Et)(n[fe])&&(G=n[fe]),Te(),n.httpXHROverride&&n.httpXHROverride.sendPOST&&(h=n.httpXHROverride),(0,c.yD)(u.anonCookieName)&&g.addQueryStringParameter("anoncknm",u.anonCookieName),g.sendHook=n.payloadPreprocessor,g.sendListener=n.payloadListener;var v=n.overrideEndpointUrl?n.overrideEndpointUrl:u.endpointUrl;e._notificationManager=p.getNotifyMgr(),g.initialize(v,e.core,e,h,n);var m=u.disablePageUnloadEvents||[];(0,s.ee)(r,m,E),(0,s.Fc)(r,m,E),(0,s.oS)(i,u.disablePageShowEvents,E)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{coreConfig:u,core:p,extensions:d}}))},e.processTelemetry=function(t,r){(0,c.u9)(t,e.identifier);var i=(r=e._getTelCtx(r)).getExtCfg(e.identifier),o=!!n.disableTelemetry;i&&(o=o||!!i.disableTelemetry);var s=t;o||w||(n[de]&&(s.iKey=n[de]),i&&i[de]&&(s.iKey=i[de]),z(s,!0),B?te(2,2):X()),e.processNext(s,r)},e._doTeardown=function(e,t){te(2,2),w=!0,g.teardown(),(0,s.Ds)(null,E),(0,s.sq)(null,E),(0,s.vF)(null,E),Q()},e.setEventQueueLimits=function(e,t){R=e>0?e:1e4,y=t>0?t:0,Te();var n=O>e;if(!n&&b>0)for(var r=1;!n&&r<=3;r++){var i=W[r];i&&i.batches&&(0,l.Iu)(i.batches,(function(e){e&&e.count()>=b&&(n=!0)}))}re(!0,n)},e.pause=function(){ee(),C=!0,g.pause()},e.resume=function(){C=!1,g.resume(),X()},e.addResponseHandler=function(e){g._responseHandlers.push(e)},e._loadTransmitProfiles=function(e){ee(),ve(),A=f,X(),(0,l.z)(e,(function(e,t){var n=t.length;if(n>=2){var r=n>2?t[2]:0;if(t.splice(0,n-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var i=t[0]/t[1];t[0]=Math.ceil(i)*t[1]}r>=0&&t[1]>=0&&r>t[1]&&(r=t[1]),t.push(r),k[e]=t}}))},e.flush=function(e,t,n){if(void 0===e&&(e=!0),!C)if(n=n||1,e)null==T?(ee(),se(1,0,n),T=Z((function(){T=null,ce(t,n)}),0)):P.push(t);else{var r=ee();Y(1,1,n),null!=t&&t(),r&&X()}},e.setMsaAuthTicket=function(e){g.addHeader(D,e)},e.hasEvents=J,e._setTransmitProfile=function(e){A!==e&&void 0!==k[e]&&(ee(),A=e,X())},e._backOffTransmission=function(){V<4&&(V++,ee(),X())},e._clearBackOff=function(){V&&(V=0,ee(),X())},(0,l.r)(e,"_setTimeoutOverride",(function(){return S.set}),(function(e){S=ue(e,S.clear)})),(0,l.r)(e,"_clearTimeoutOverride",(function(){return S.clear}),(function(e){S=ue(S.set,e)}))})),r}return(0,r.qU)(t,e),t.__ieDyn=1,t}(h.s)},96434:(e,t,n)=>{"use strict";n.d(t,{Hj:()=>i});var r=n(12497);function i(e){var t={};return(0,r.z)(e,(function(e,n){t[e]=n,t[n]=e})),(0,r.ol)(t)}},31590:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var r=(0,n(96434).Hj)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},56489:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var r=n(92457),i=n(60830),o=n(12497),s=n(1972),a=n(8997),c=n(49388),l="getPlugin",u=function(){function e(){var t,n,u,p,d,h=this;function f(e){void 0===e&&(e=null);var t=e;if(!t){var r=n||(0,a.i8)(null,{},h[s.eT]);t=u&&u[l]?r[i.$o](null,u[l]):r[i.$o](null,u)}return t}function v(e,t,r){e&&(0,o.KY)(e,s.Bw,[],null,o.hX),!r&&t&&(r=t[i.ps]()[i.uR]());var c=u;u&&u[l]&&(c=u[l]()),h[s.eT]=t,n=(0,a.i8)(r,e,t,c)}function m(){t=!1,h[s.eT]=null,n=null,u=null,d=[],p=(0,c.P)()}m(),(0,r.A)(e,h,(function(e){e[i.mE]=function(e,n,r,i){v(e,n,i),t=!0},e[i.Ik]=function(t,n){var r,c=e[s.eT];if(c&&(!t||c===t[s.eT]())){var h,f=!1,v=t||(0,a.tS)(null,c,u&&u[l]?u[l]():u),g=n||((r={reason:0})[i.tI]=!1,r);return e[i.tn]&&!0===e[i.tn](v,g,y)?h=!0:y(),h}function y(){if(!f){f=!0,p.run(v,n);var e=d;d=[],(0,o.Iu)(e,(function(e){e.rm()})),!0===h&&v[i.$5](g),m()}}},e[i.HC]=function(t,n){var r=e[s.eT];if(r&&(!t||r===t[s.eT]())){var o,c=!1,p=t||(0,a.nU)(null,r,u&&u[l]?u[l]():u),d=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(p,d,h)?o=!0:h(),o}function h(){c||(c=!0,v(p.getCfg(),p.core(),p[i.uR]()))}},e._addHook=function(e){e&&((0,o.cy)(e)?d=d.concat(e):d[i.y5](e))},(0,o.RF)(e,"_addUnloadCb",(function(){return p}),"add")})),h[i.e4]=function(e){return f(e)[i.e4]()},h[i.tZ]=function(){return t},h.setInitialized=function(e){t=e},h[i.YH]=function(e){u=e},h[i.$5]=function(e,t){t?t[i.$5](e):u&&(0,o.Tn)(u[s.qT])&&u[s.qT](e,null)},h._getTelCtx=f}return e.__ieDyn=1,e}()},91698:(e,t,n)=>{"use strict";n.d(t,{It:()=>A,d5:()=>S,gi:()=>x,um:()=>T,xN:()=>C});var r=n(60830),i=n(99015),o=n(44180),s=n(12497),a=n(1972),c="toGMTString",l="toUTCString",u="cookie",p="expires",d="enabled",h="isCookieUseDisabled",f="disableCookiesUsage",v="_ckMgr",m=null,g=null,y=null,b=(0,o.YE)(),_={},E={};function S(e,t){var n=C[v]||E[v];return n||(n=C[v]=C(e,t),E[v]=n),n}function w(e){return!e||e.isEnabled()}function P(e,t){return!!(t&&e&&(0,s.cy)(e.ignoreCookies))&&-1!==e.ignoreCookies[r.Sj](t)}function T(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var i=t[r.lK];n=i[v]?i[v]:C(t)}return n||(n=S(t,(e||{})[r.Uw])),n}function C(e,t){var n,i=function(e){var t=e[r.lK]=e[r.lK]||{};if((0,s.KY)(t,"domain",e.cookieDomain,s.Gh,s.hX),(0,s.KY)(t,"path",e.cookiePath||"/",null,s.hX),(0,s.hX)(t[d])){var n=void 0;(0,s.b0)(e[h])||(n=!e[h]),(0,s.b0)(e[f])||(n=!e[f]),t[d]=n}return t}(e||E),u=i.path||"/",m=i.domain,y=!1!==i[d],b=((n={isEnabled:function(){var e=y&&x(t),n=E[v];return e&&n&&b!==n&&(e=w(n)),e}})[r.kt]=function(e){y=!1!==e},n.set=function(e,t,n,d,h){var f=!1;if(w(b)&&!function(e,t){return!!(t&&e&&(0,s.cy)(e.blockedCookies)&&-1!==e.blockedCookies[r.Sj](t))||P(e,t)}(i,e)){var v={},y=(0,s.EH)(t||a.m5),_=y[r.Sj](";");if(-1!==_&&(y=(0,s.EH)(t[r.Re](0,_)),v=I(t[r.Re](_+1))),(0,s.KY)(v,"domain",d||m,s.zz,s.b0),!(0,s.hX)(n)){var E=(0,o.lT)();if((0,s.b0)(v[p])){var S=(0,s.x3)()+1e3*n;if(S>0){var T=new Date;T.setTime(S),(0,s.KY)(v,p,O(T,E?c:l)||O(T,E?c:l)||a.m5,s.zz)}}E||(0,s.KY)(v,"max-age",a.m5+n,null,s.b0)}var C=(0,o.g$)();C&&"https:"===C.protocol&&((0,s.KY)(v,"secure",null,null,s.b0),null===g&&(g=!A(((0,o.w3)()||{})[r.tX])),g&&(0,s.KY)(v,"SameSite","None",null,s.b0)),(0,s.KY)(v,"path",h||u,null,s.b0),(i.setCookie||k)(e,R(y,v)),f=!0}return f},n.get=function(e){var t=a.m5;return w(b)&&!P(i,e)&&(t=(i.getCookie||D)(e)),t},n.del=function(e,t){var n=!1;return w(b)&&(n=b.purge(e,t)),n},n.purge=function(e,n){var r,s=!1;if(x(t)){var c=((r={}).path=n||"/",r[p]="Thu, 01 Jan 1970 00:00:01 GMT",r);(0,o.lT)()||(c["max-age"]="0"),(i.delCookie||k)(e,R(a.m5,c)),s=!0}return s},n);return b[v]=b,b}function x(e){if(null===m){m=!1;try{m=void 0!==(b||{})[u]}catch(t){(0,i.ZP)(e,2,68,"Cannot access document.cookie - "+(0,s.lL)(t),{exception:(0,o.mm)(t)})}}return m}function I(e){var t={};if(e&&e[r.oI]){var n=(0,s.EH)(e)[r.sY](";");(0,s.Iu)(n,(function(e){if(e=(0,s.EH)(e||a.m5)){var n=e[r.Sj]("=");-1===n?t[e]=null:t[(0,s.EH)(e[r.Re](0,n))]=(0,s.EH)(e[r.Re](n+1))}}))}return t}function O(e,t){return(0,s.Tn)(e[t])?e[t]():null}function R(e,t){var n=e||a.m5;return(0,s.z)(t,(function(e,t){n+="; "+e+((0,s.hX)(t)?a.m5:"="+t)})),n}function D(e){var t=a.m5;if(b){var n=b[u]||a.m5;y!==n&&(_=I(n),y=n),t=(0,s.EH)(_[e]||a.m5)}return t}function k(e,t){b&&(b[u]=e+"="+t)}function A(e){return!(!(0,s.Kg)(e)||!(0,s.Ju)(e,"CPU iPhone OS 12")&&!(0,s.Ju)(e,"iPad; CPU OS 12")&&!((0,s.Ju)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,s.Ju)(e,"Version/")&&(0,s.Ju)(e,"Safari"))&&(!(0,s.Ju)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,s.Cv)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,s.Ju)(e,"Chrome/5")&&!(0,s.Ju)(e,"Chrome/6")&&(!(0,s.Ju)(e,"UnrealEngine")||(0,s.Ju)(e,"Chrome"))&&!(0,s.Ju)(e,"UCBrowser/12")&&!(0,s.Ju)(e,"UCBrowser/11"))}},32578:(e,t,n)=>{"use strict";n.d(t,{UU:()=>f,aq:()=>h,cL:()=>v,fs:()=>g});var r,i=n(75148),o=n(60830),s=n(91698),a=n(44180),c=n(18413),l=n(12497),u=n(1972),p=n(57679),d=null;function h(){var e=v();return e[o.Re](0,8)+"-"+e[o.Re](8,12)+"-"+e[o.Re](12,16)+"-"+e[o.Re](16,20)+"-"+e[o.Re](20)}function f(){var e=(0,a.FJ)();return e&&e.now?e.now():(0,l.x3)()}function v(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=u.m5,r=0;r<4;r++)n+=t[15&(e=(0,p.VN)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&(0,p.VN)())|0];return n[o.$4](0,8)+n[o.$4](9,4)+"4"+n[o.$4](13,3)+i+n[o.$4](16,3)+n[o.$4](19,12)}var m={_canUseCookies:void 0,isTypeof:l.Ed,isUndefined:l.b0,isNullOrUndefined:l.hX,hasOwnProperty:l.mQ,isFunction:l.Tn,isObject:l.Gv,isDate:l.$P,isArray:l.cy,isError:l.bJ,isString:l.Kg,isNumber:l.Et,isBoolean:l.Lm,toISOString:l._u,arrForEach:l.Iu,arrIndexOf:l.rD,arrMap:l.W$,arrReduce:l.KT,strTrim:l.EH,objCreate:i.AQ,objKeys:l.cG,objDefineAccessors:l.r,addEventHandler:c.So,dateNow:l.x3,isIE:a.lT,disableCookies:function(){var e,t,n,i;(n=(0,s.d5)(e,t),i=m._canUseCookies,null===d&&(d=[],r=i,(0,l.r)(m,"_canUseCookies",(function(){return r}),(function(e){r=e,(0,l.Iu)(d,(function(t){t[o.kt](e)}))}))),-1===(0,l.rD)(d,n)&&d[o.y5](n),(0,l.Lm)(i)&&n[o.kt](i),(0,l.Lm)(r)&&n[o.kt](r),n)[o.kt](!1)},newGuid:h,perfNow:f,newId:p.Si,randomValue:p.Z1,random32:p.VN,mwcRandomSeed:p.yc,mwcRandom32:p.k5,generateW3CId:v},g={Attach:c.Q3,AttachEvent:c.Q3,Detach:c.Ym,DetachEvent:c.Ym}},64252:(e,t,n)=>{"use strict";n.d(t,{T:()=>f,Z:()=>h});var r=n(47672),i=n(60830),o=n(12497),s=n(1972),a=n(57679),c=r.KU,l="2.8.15",u="."+(0,a.Si)(6),p=0;function d(e){return 1===e[i.re]||9===e[i.re]||!+e[i.re]}function h(e,t){return void 0===t&&(t=!1),(0,o.cH)(e+p+++(t?"."+l:s.m5)+u)}function f(e){var t={id:h("_aiData-"+(e||s.m5)+"."+l),accept:function(e){return d(e)},get:function(e,n,r,i){var s=e[t.id];return s?s[(0,o.cH)(n)]:(i&&((s=function(e,t){var n=t[e.id];if(!n){n={};try{d(t)&&(function(e,t,n){if(c)try{return c(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch(e){}return!1}(t,e.id,n)||(t[e.id]=n))}catch(e){}}return n}(t,e))[(0,o.cH)(n)]=r),r)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},95331:(e,t,n)=>{"use strict";n.d(t,{$:()=>l,M:()=>u});var r,i=n(60830),o=n(44180),s=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],a=null;function c(e,t){return function(){var n=arguments,r=l(t);if(r){var o=r.listener;o&&o[e]&&o[e][i.y9](o,n)}}}function l(e){var t,n=a;return n||!0===e.disableDbgExt||(n=a||((t=(0,o.EH)("Microsoft"))&&(a=t.ApplicationInsights),a)),n?n.ChromeDbgExt:null}function u(e){if(!r){r={};for(var t=0;t<s[i.oI];t++)r[s[t]]=c(s[t],e)}return r}},99015:(e,t,n)=>{"use strict";n.d(t,{OG:()=>m,Oc:()=>g,WD:()=>p,ZP:()=>v,wq:()=>h,y0:()=>d});var r=n(92457),i=n(60830),o=n(95331),s=n(44180),a=n(12497),c=n(1972);function l(e){return e?'"'+e[i.W7](/\"/g,c.m5)+'"':c.m5}function u(e,t){var n=(0,s.U5)();if(n){var r="log";n[e]&&(r=e),(0,a.Tn)(n[r])&&n[r](t)}}var p=function(){function e(e,t,n,r){void 0===n&&(n=!1);var o=this;o[i.JR]=e,o[i.pM]=(n?"AI: ":"AI (Internal): ")+e;var a=c.m5;(0,s.Z)()&&(a=(0,s.hm)().stringify(r));var u=(t?" message:"+l(t):c.m5)+(r?" props:"+l(a):c.m5);o[i.pM]+=u}return e.dataType="MessageData",e}();function d(e,t){return(e||{})[i.Uw]||new h(t)}var h=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,l,d,h,f=0,v={};(0,r.A)(e,this,(function(e){function r(t,n){if(!(f>=d)){var r=!0,o="AITR_"+n[i.JR];if(v[o]?r=!1:v[o]=!0,r&&(t<=l&&(e.queue[i.y5](n),f++,m(1===t?"error":"warn",n)),f===d)){var s="Internal events throttle limit per PageView reached for this app.",a=new p(23,s,!1);e.queue[i.y5](a),1===t?e[c.Zi](s):e[c.Tj](s)}}}function m(e,n){var r=(0,o.$)(t||{});r&&r[i.e4]&&r[i.e4](e,n)}!function(e){n=(0,a.SA)(e.loggingLevelConsole,0),l=(0,a.SA)(e.loggingLevelTelemetry,1),d=(0,a.SA)(e.maxMessageLimit,25),h=(0,a.SA)(e.enableDebug,(0,a.SA)(e[i.a$],!1))}(t||{}),e.consoleLoggingLevel=function(){return n},e.telemetryLoggingLevel=function(){return l},e.maxInternalMessageLimit=function(){return d},e[i.a$]=function(){return h},e.throwInternal=function(t,o,l,u,d){void 0===d&&(d=!1);var f=new p(o,l,d,u);if(h)throw(0,s.mm)(f);var g=1===t?c.Zi:c.Tj;if((0,a.b0)(f[i.pM]))m("throw"+(1===t?"Critical":"Warning"),f);else{if(d){var y=+f[i.JR];!v[y]&&n>=t&&(e[g](f[i.pM]),v[y]=!0)}else n>=t&&e[g](f[i.pM]);r(t,f)}},e[c.Tj]=function(e){u("warn",e),m("warning",e)},e[c.Zi]=function(e){u("error",e),m("error",e)},e.resetInternalMessageCount=function(){f=0,v={}},e[i.sx]=r}))}return e.__ieDyn=1,e}();function f(e){return e||new h}function v(e,t,n,r,i,o){void 0===o&&(o=!1),f(e).throwInternal(t,n,r,i,o)}function m(e,t){f(e)[c.Tj](t)}function g(e,t,n){f(e)[i.sx](t,n)}},44180:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>te,EH:()=>R,FJ:()=>W,Iu:()=>ne,JK:()=>F,L0:()=>z,MY:()=>$,PV:()=>Q,R7:()=>X,U5:()=>U,Uf:()=>J,Vd:()=>D,Wt:()=>A,YE:()=>N,Z:()=>H,cU:()=>O,g$:()=>V,hm:()=>q,iN:()=>B,lT:()=>G,lV:()=>K,mm:()=>Y,tw:()=>L,w3:()=>M,w9:()=>j,xk:()=>Z,zk:()=>k});var r=n(47672),i=n(75148),o=n(60830),s=n(12497),a=n(1972),c="window",l="document",u="documentMode",p="navigator",d="history",h="location",f="console",v="performance",m="JSON",g="crypto",y="msCrypto",b="ReactNative",_="msie",E="trident/",S="XMLHttpRequest",w=null,P=null,T=!1,C=null,x=null;function I(e,t){var n=!1;if(e){try{if(!(n=t in e)){var i=e[r.vR];i&&(n=t in i)}}catch(e){}if(!n)try{var o=new e;n=!(0,s.b0)(o[t])}catch(e){}}return n}function O(e){T=e}function R(e){var t=(0,i.mS)();return t&&t[e]?t[e]:e===c&&D()?window:null}function D(){return Boolean(typeof window===r._1&&window)}function k(){return D()?window:R(c)}function A(){return Boolean(typeof document===r._1&&document)}function N(){return A()?document:R(l)}function j(){return Boolean(typeof navigator===r._1&&navigator)}function M(){return j()?navigator:R(p)}function L(){return Boolean(typeof history===r._1&&history)}function F(){return L()?history:R(d)}function V(e){if(e&&T){var t=R("__mockLocation");if(t)return t}return typeof location===r._1&&location?location:R(h)}function U(){return typeof console!==r.bA?console:R(f)}function W(){return R(v)}function H(){return Boolean(typeof JSON===r._1&&JSON||null!==R(m))}function q(){return H()?JSON||R(m):null}function $(){return R(g)}function B(){return R(y)}function K(){var e=M();return!(!e||!e.product)&&e.product===b}function G(){var e=M();if(e&&(e[o.tX]!==P||null===w)){var t=((P=e[o.tX])||a.m5)[o.OL]();w=(0,s.Ju)(t,_)||(0,s.Ju)(t,E)}return w}function z(e){if(void 0===e&&(e=null),!e){var t=M()||{};e=t?(t[o.tX]||a.m5)[o.OL]():a.m5}var n=(e||a.m5)[o.OL]();if((0,s.Ju)(n,_)){var r=N()||{};return Math.max(parseInt(n[o.sY](_)[1]),r[u]||0)}if((0,s.Ju)(n,E)){var i=parseInt(n[o.sY](E)[1]);if(i)return i+4}return null}function Y(e){var t=Object[r.vR].toString[o.Ek](e),n=a.m5;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[o.RS]+"'":H()&&(n=q().stringify(e)),t+n}function J(){return null===x&&(x=j()&&Boolean(M().sendBeacon)),x}function X(e){var t=!1;try{t=!!R("fetch");var n=R("Request");t&&e&&n&&(t=I(n,"keepalive"))}catch(e){}return t}function Q(){return null===C&&(C=typeof XDomainRequest!==r.bA)&&Z()&&(C=C&&!I(R(S),"withCredentials")),C}function Z(){var e=!1;try{e=!!R(S)}catch(e){}return e}function ee(e,t){if(e)for(var n=0;n<e[o.oI];n++){var r=e[n];if(r[o.RS]&&r[o.RS]===t)return r}return{}}function te(e){var t=N();return t&&e?ee(t.querySelectorAll("meta"),e).content:null}function ne(e){var t,n=W();if(n){var r=n.getEntriesByType("navigation")||[];t=ee((r[o.oI]>0?r[0]:{}).serverTiming,e).description}return t}},18413:(e,t,n)=>{"use strict";n.d(t,{Ds:()=>q,El:()=>I,Fc:()=>$,Hm:()=>k,ML:()=>N,Q3:()=>j,So:()=>L,Wg:()=>W,Ym:()=>M,ee:()=>H,lQ:()=>U,mB:()=>A,oS:()=>K,sq:()=>B,vF:()=>G,zh:()=>F});var r=n(60830),i=n(64252),o=n(44180),s=n(12497),a=n(1972),c="on",l="attachEvent",u="addEventListener",p="detachEvent",d="removeEventListener",h="events",f="visibilitychange",v="pagehide",m="pageshow",g="unload",y="beforeunload",b=(0,i.Z)("aiEvtPageHide"),_=(0,i.Z)("aiEvtPageShow"),E=/\.[\.]+/g,S=/[\.]+$/,w=1,P=(0,i.T)("events"),T=/^([^.]*)(?:\.(.+)|)/;function C(e){return e&&e[r.W7]?e[r.W7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,a.m5):e}function x(e,t){var n;if(t){var i=a.m5;(0,s.cy)(t)?(i=a.m5,(0,s.Iu)(t,(function(e){(e=C(e))&&("."!==e[0]&&(e="."+e),i+=e)}))):i=C(t),i&&("."!==i[0]&&(i="."+i),e=(e||a.m5)+i)}var o=T.exec(e||a.m5)||[];return(n={})[r.QM]=o[1],n.ns=(o[2]||a.m5).replace(E,".").replace(S,a.m5)[r.sY](".").sort().join("."),n}function I(e,t,n){var i=[],o=P.get(e,h,{},!1),c=x(t,n);return(0,s.z)(o,(function(e,t){(0,s.Iu)(t,(function(e){var t;c[r.QM]&&c[r.QM]!==e.evtName[r.QM]||c.ns&&c.ns!=c.ns||i[r.y5](((t={})[r.RS]=e.evtName[r.QM]+(e.evtName.ns?"."+e.evtName.ns:a.m5),t.handler=e[r.Yo],t))}))})),i}function O(e,t,n){void 0===n&&(n=!0);var r=P.get(e,h,{},n),i=r[t];return i||(i=r[t]=[]),i}function R(e,t,n,i){e&&t&&t[r.QM]&&(e[d]?e[d](t[r.QM],n,i):e[p]&&e[p](c+t[r.QM],n))}function D(e,t,n,i){for(var o=t[r.oI];o--;){var s=t[o];s&&(n.ns&&n.ns!==s.evtName.ns||i&&!i(s)||(R(e,s.evtName,s[r.Yo],s.capture),t[r.Ic](o,1)))}}function k(e,t){return t?x("xx",(0,s.cy)(t)?[e].concat(t):[e,t]).ns[r.sY]("."):e}function A(e,t,n,i,o){var s;void 0===o&&(o=!1);var a=!1;if(e)try{var p=x(t,i);if(a=function(e,t,n,i){var o=!1;return e&&t&&t[r.QM]&&n&&(e[u]?(e[u](t[r.QM],n,i),o=!0):e[l]&&(e[l](c+t[r.QM],n),o=!0)),o}(e,p,n,o),a&&P.accept(e)){var d=((s={guid:w++,evtName:p})[r.Yo]=n,s.capture=o,s);O(e,p.type)[r.y5](d)}}catch(e){}return a}function N(e,t,n,i,o){if(void 0===o&&(o=!1),e)try{var a=x(t,i),c=!1;!function(e,t,n){if(t[r.QM])D(e,O(e,t[r.QM]),t,n);else{var i=P.get(e,h,{});(0,s.z)(i,(function(r,i){D(e,i,t,n)})),0===(0,s.cG)(i)[r.oI]&&P.kill(e,h)}}(e,a,(function(e){return!((!a.ns||n)&&e[r.Yo]!==n||(c=!0,0))})),c||R(e,a,n,o)}catch(e){}}function j(e,t,n,r){return void 0===r&&(r=!1),A(e,t,n,null,r)}function M(e,t,n,r){void 0===r&&(r=!1),N(e,t,n,null,r)}function L(e,t,n){var r=!1,i=(0,o.zk)();i&&(r=A(i,e,t,n),r=A(i.body,e,t,n)||r);var s=(0,o.YE)();return s&&(r=A(s,e,t,n)||r),r}function F(e,t,n){var r=(0,o.zk)();r&&(N(r,e,t,n),N(r.body,e,t,n));var i=(0,o.YE)();i&&N(i,e,t,n)}function V(e,t,n,i){var o=!1;return t&&e&&e[r.oI]>0&&(0,s.Iu)(e,(function(e){e&&(n&&-1!==(0,s.rD)(n,e)||(o=L(e,t,i)||o))})),o}function U(e,t,n,i){var o=!1;return t&&e&&(0,s.cy)(e)&&!(o=V(e,t,n,i))&&n&&n[r.oI]>0&&(o=V(e,t,null,i)),o}function W(e,t,n){e&&(0,s.cy)(e)&&(0,s.Iu)(e,(function(e){e&&F(e,t,n)}))}function H(e,t,n){return U([y,g,v],e,t,n)}function q(e,t){W([y,g,v],e,t)}function $(e,t,n){var r=k(b,n),i=V([v],e,t,r);return t&&-1!==(0,s.rD)(t,f)||(i=V([f],(function(t){var n=(0,o.YE)();e&&n&&"hidden"===n.visibilityState&&e(t)}),t,r)||i),!i&&t&&(i=$(e,null,n)),i}function B(e,t){var n=k(b,t);W([v],e,n),W([f],null,n)}function K(e,t,n){var r=k(_,n),i=V([m],e,t,r);return!(i=V([f],(function(t){var n=(0,o.YE)();e&&n&&"visible"===n.visibilityState&&e(t)}),t,r)||i)&&t&&(i=K(e,null,n)),i}function G(e,t){var n=k(_,t);W([m],e,n),W([f],null,n)}},12497:(e,t,n)=>{"use strict";n.d(t,{$8:()=>_e,$P:()=>K,CP:()=>Ce,Cv:()=>q,EH:()=>ie,Ed:()=>N,Et:()=>J,Gh:()=>L,Gv:()=>V,Iu:()=>ee,Ju:()=>B,KT:()=>re,KY:()=>ve,Kg:()=>Y,Lm:()=>X,N6:()=>pe,RF:()=>we,SA:()=>ge,Tn:()=>U,W$:()=>ne,_u:()=>Z,b0:()=>j,bJ:()=>z,c2:()=>me,cG:()=>ae,cH:()=>W,cy:()=>G,hW:()=>Te,hX:()=>M,js:()=>de,lL:()=>fe,mQ:()=>F,o$:()=>Pe,ol:()=>ue,qz:()=>Se,r:()=>ce,rD:()=>te,tG:()=>$,wo:()=>ye,x3:()=>he,z:()=>H,zz:()=>be});var r=n(47672),i=n(75148),o=n(60830),s=n(1972),a="toISOString",c="endsWith",l="startsWith",u="indexOf",p="map",d="reduce",h="trim",f="toString",v="__proto__",m="constructor",g=r.KU,y=r.s6.freeze,b=r.s6.seal,_=r.s6.keys,E=String[r.vR],S=E[h],w=E[c],P=E[l],T=Date[r.vR][a],C=Array.isArray,x=r.Wy[f],I=r.J$[f],O=I[o.Ek](r.s6),R=/-([a-z])/g,D=/([^\w\d_$])/g,k=/^(\d+[\w\d_$])/,A=Object.getPrototypeOf;function N(e,t){return typeof e===t}function j(e){return void 0===e||typeof e===r.bA}function M(e){return null===e||j(e)}function L(e){return!M(e)}function F(e,t){return!(!e||!r.J$[o.Ek](e,t))}function V(e){return!(!e||typeof e!==r._1)}function U(e){return!(!e||typeof e!==r.hW)}function W(e){var t=e;return t&&Y(t)&&(t=(t=(t=t[o.W7](R,(function(e,t){return t.toUpperCase()})))[o.W7](D,"_"))[o.W7](k,(function(e,t){return"_"+t}))),t}function H(e,t){if(e)for(var n in e)r.J$[o.Ek](e,n)&&t[o.Ek](e,n,e[n])}function q(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=w?e[c](t):function(e,t){var n=!1,r=t?t[o.oI]:0,i=e?e[o.oI]:0;if(r&&i&&i>=r&&!(n=e===t)){for(var s=i-1,a=r-1;a>=0;a--){if(e[s]!=t[a])return!1;s--}n=!0}return n}(e,t)),n}function $(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=P?e[l](t):function(e,t){var n=!1,r=t?t[o.oI]:0;if(e&&r&&e[o.oI]>=r&&!(n=e===t)){for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;n=!0}return n}(e,t)),n}function B(e,t){return!(!e||!t)&&-1!==e[o.Sj](t)}function K(e){return!(!e||"[object Date]"!==x[o.Ek](e))}var G=C||function(e){return!(!e||"[object Array]"!==x[o.Ek](e))};function z(e){return!(!e||"[object Error]"!==x[o.Ek](e))}function Y(e){return"string"==typeof e}function J(e){return"number"==typeof e}function X(e){return"boolean"==typeof e}function Q(e){var t=!1;if(e&&"object"==typeof e){var n=A?A(e):function(e){if(e){if(A)return A(e);var t=e[v]||e[r.vR]||e[m];if(t)return t}return null}(e);n?(n[m]&&r.J$[o.Ek](n,m)&&(n=n[m]),t=typeof n===r.hW&&I[o.Ek](n)===O):t=!0}return t}function Z(e){if(e)return T?e[a]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t[o.oI]&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function ee(e,t,n){var r=e[o.oI];try{for(var i=0;i<r&&(!(i in e)||-1!==t[o.Ek](n||e,e[i],i,e));i++);}catch(e){}}function te(e,t,n){if(e){if(e[u])return e[u](t,n);var r=e[o.oI],i=n||0;try{for(var s=Math.max(i>=0?i:r-Math.abs(i),0);s<r;s++)if(s in e&&e[s]===t)return s}catch(e){}}return-1}function ne(e,t,n){var r;if(e){if(e[p])return e[p](t,n);var i=e[o.oI],s=n||e;r=new Array(i);try{for(var a=0;a<i;a++)a in e&&(r[a]=t[o.Ek](s,e[a],e))}catch(e){}}return r}function re(e,t,n){var r;if(e){if(e[d])return e[d](t,n);var i=e[o.oI],s=0;if(arguments[o.oI]>=3)r=arguments[2];else{for(;s<i&&!(s in e);)s++;r=e[s++]}for(;s<i;)s in e&&(r=t(r,e[s],s,e)),s++}return r}function ie(e){return e&&(e=S&&e[h]?e[h]():e[o.W7]?e[o.W7](/^\s+|(?=\s)\s+$/g,s.m5):e),e}var oe=!{toString:null}.propertyIsEnumerable("toString"),se=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function ae(e){var t=typeof e;if(t===r.hW||t===r._1&&null!==e||(0,i.zk)("objKeys called on non-object"),!oe&&_)return _(e);var n=[];for(var s in e)e&&r.J$[o.Ek](e,s)&&n[o.y5](s);if(oe)for(var a=se[o.oI],c=0;c<a;c++)e&&r.J$[o.Ek](e,se[c])&&n[o.y5](se[c]);return n}function ce(e,t,n,r){if(g)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),g(e,t,i),!0}catch(e){}return!1}function le(e){return e}function ue(e){return y&&H(e,(function(e,t){(G(t)||V(t))&&y(t)})),pe(e)}var pe=y||le,de=b||le;function he(){var e=Date;return e.now?e.now():(new e).getTime()}function fe(e){return z(e)?e[o.RS]:s.m5}function ve(e,t,n,r,i){var o=n;return e&&((o=e[t])===n||i&&!i(o)||r&&!r(n)||(o=n,e[t]=o)),o}function me(e,t,n){var r;return e?!(r=e[t])&&M(r)&&(r=j(n)?{}:n,e[t]=r):r=j(n)?{}:n,r}function ge(e,t){return M(e)?t:e}function ye(e){return!e}function be(e){return!!e}function _e(e){throw new Error(e)}function Ee(e,t){var n=null,r=null;return U(e)?n=e:r=e,function(){var e=arguments;if(n&&(r=n()),r)return r[t][o.y9](r,e)}}function Se(e,t,n){if(e&&t&&V(e)&&V(t)){var r=function(r){if(Y(r)){var i=t[r];U(i)?n&&!n(r,!0,t,e)||(e[r]=Ee(t,r)):n&&!n(r,!1,t,e)||(F(e,r)&&delete e[r],ce(e,r,(function(){return t[r]}),(function(e){t[r]=e}))||(e[r]=i))}};for(var i in t)r(i)}return e}function we(e,t,n,r,i){e&&t&&n&&(!1!==i||j(e[t]))&&(e[t]=Ee(n,r))}function Pe(e,t,n,r){return e&&t&&V(e)&&G(n)&&ee(n,(function(n){Y(n)&&we(e,n,t,n,r)})),e}function Te(e){return e&&r.zi&&(e=(0,r.s6)((0,r.zi)({},e))),e}function Ce(e,t,n,i,s,a){var c=arguments,l=c[0]||{},u=c[o.oI],p=!1,d=1;for(u>0&&X(l)&&(p=l,l=c[d]||{},d++),V(l)||(l={});d<u;d++){var h=c[d],f=G(h),v=V(h);for(var m in h)if(f&&m in h||v&&r.J$[o.Ek](h,m)){var g=h[m],y=void 0;if(p&&g&&((y=G(g))||Q(g))){var b=l[m];y?G(b)||(b=[]):Q(b)||(b={}),g=Ce(p,b,g)}void 0!==g&&(l[m]=g)}}return l}},1972:(e,t,n)=>{"use strict";n.d(t,{Bw:()=>c,Hr:()=>a,LZ:()=>i,Tj:()=>g,Vo:()=>p,Yd:()=>s,Yp:()=>h,Zi:()=>m,dI:()=>f,eT:()=>o,fc:()=>d,jy:()=>l,kI:()=>y,l0:()=>v,m5:()=>r,qT:()=>u});var r="",i="channels",o="core",s="createPerfMgr",a="disabled",c="extensionConfig",l="extensions",u="processTelemetry",p="priority",d="eventsSent",h="eventsDiscarded",f="eventsSendRequest",v="perfEvent",m="errorToConsole",g="warnToConsole",y="getPerfMgr"},5204:(e,t,n)=>{"use strict";n.d(t,{NS:()=>d,Q6:()=>p,Z4:()=>v,r2:()=>f});var r=n(92457),i=n(60830),o=n(12497),s=n(1972),a="ctx",c="ParentContextKey",l="ChildrenContextKey",u=null,p=function(){function e(t,n,r){var s,u=this,p=!1;u.start=(0,o.x3)(),u[i.RS]=t,u[i.tI]=r,u[i.Zu]=function(){return!1},(0,o.Tn)(n)&&(p=(0,o.r)(u,"payload",(function(){return!s&&(0,o.Tn)(n)&&(s=n(),n=null),s}))),u[i.O_]=function(t){return t?t===e[c]||t===e[l]?u[t]:(u[a]||{})[t]:null},u[i.e_]=function(t,n){t&&(t===e[c]?(u[t]||(u[i.Zu]=function(){return!0}),u[t]=n):t===e[l]?u[t]=n:(u[a]=u[a]||{})[t]=n)},u[i.Ru]=function(){var t=0,r=u[i.O_](e[l]);if((0,o.cy)(r))for(var s=0;s<r[i.oI];s++){var a=r[s];a&&(t+=a[i.fA])}u[i.fA]=(0,o.x3)()-u.start,u.exTime=u[i.fA]-t,u[i.Ru]=function(){},!p&&(0,o.Tn)(n)&&(u.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),d=function(){function e(t){this.ctx={},(0,r.A)(e,this,(function(e){e.create=function(e,t,n){return new p(e,t,n)},e.fire=function(e){e&&(e[i.Ru](),t&&(0,o.Tn)(t[s.l0])&&t[s.l0](e))},e[i.e_]=function(t,n){t&&((e[a]=e[a]||{})[t]=n)},e[i.O_]=function(t){return(e[a]||{})[t]}}))}return e.__ieDyn=1,e}(),h="CoreUtils.doPerf";function f(e,t,n,r,o){if(e){var a=e;if(a[s.kI]&&(a=a[s.kI]()),a){var u=void 0,d=a[i.O_](h);try{if(u=a.create(t(),r,o)){if(d&&u[i.e_]&&(u[i.e_](p[c],d),d[i.O_]&&d[i.e_])){var f=d[i.O_](p[l]);f||(f=[],d[i.e_](p[l],f)),f[i.y5](u)}return a[i.e_](h,u),n(u)}}catch(e){u&&u[i.e_]&&u[i.e_]("exception",e)}finally{u&&a.fire(u),a[i.e_](h,d)}}}return n()}function v(){return u}},8997:(e,t,n)=>{"use strict";n.d(t,{PV:()=>y,W0:()=>b,i8:()=>v,nU:()=>g,tS:()=>m});var r=n(60830),i=n(99015),o=n(44180),s=n(12497),a=n(1972),c=n(5204),l=n(33540),u="TelemetryPluginChain",p="_hasRun",d="_getTelCtx",h=0;function f(e,t,n,c){var l=null,u=[];null!==c&&(l=c?function(e,t,n){for(;e;){if(e[r.AP]()===n)return e;e=e[r.uR]()}return y([n],t[r.GA]||{},t)}(e,n,c):e);var p={_next:function(){var e=l;if(l=e?e[r.uR]():null,!e){var t=u;t&&t[r.oI]>0&&((0,s.Iu)(t,(function(e){try{e.func[r.Ek](e.self,e.args)}catch(e){(0,i.ZP)(n[r.Uw],2,73,"Unexpected Exception during onComplete - "+(0,o.mm)(e))}})),u=[])}return e},ctx:{core:function(){return n},diagLog:function(){return(0,i.y0)(n,t)},getCfg:function(){return t},getExtCfg:d,getConfig:function(e,n,r){void 0===r&&(r=!1);var i,o=d(e,null);return o&&!(0,s.hX)(o[n])?i=o[n]:t&&!(0,s.hX)(t[n])&&(i=t[n]),(0,s.hX)(i)?r:i},hasNext:function(){return!!l},getNext:function(){return l},setNext:function(e){l=e},iterate:function(e){for(var t;t=p._next();){var n=t[r.AP]();n&&e(n)}},onComplete:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];e&&u[r.y5]({func:e,self:(0,s.b0)(t)?p.ctx:t,args:n})}}};function d(e,n,r){var i;if(void 0===n&&(n={}),void 0===r&&(r=0),t){var o=t[a.Bw];o&&e&&(i=o[e])}if(i){if((0,s.Gv)(n)&&0!==r){var c=(0,s.CP)(!0,n,i);t&&2===r&&(0,s.z)(n,(function(e){if((0,s.hX)(c[e])){var n=t[e];(0,s.hX)(n)||(c[e]=n)}})),i=c}}else i=n;return i}return p}function v(e,t,n,i){var o=f(e,t,n,i),c=o.ctx;return c[r.$5]=function(e){var t=o._next();return t&&t[a.qT](e,c),!t},c[r.$o]=function(e,i){return void 0===e&&(e=null),(0,s.cy)(e)&&(e=y(e,t,n,i)),v(e||c[r.uR](),t,n,i)},c}function m(e,t,n){var i=t[r.GA]||{},o=f(e,i,t,n),a=o.ctx;return a[r.$5]=function(e){var t=o._next();return t&&t.unload(a,e),!t},a[r.$o]=function(e,n){return void 0===e&&(e=null),(0,s.cy)(e)&&(e=y(e,i,t,n)),m(e||a[r.uR](),t,n)},a}function g(e,t,n){var i=t[r.GA]||{},o=f(e,i,t,n).ctx;return o[r.$5]=function(e){return o.iterate((function(t){(0,s.Tn)(t[r.HC])&&t[r.HC](o,e)}))},o[r.$o]=function(e,n){return void 0===e&&(e=null),(0,s.cy)(e)&&(e=y(e,i,t,n)),g(e||o[r.uR](),t,n)},o}function y(e,t,n,f){var m=null,g=!f;if((0,s.cy)(e)&&e[r.oI]>0){var b=null;(0,s.Iu)(e,(function(e){if(g||f!==e||(g=!0),g&&e&&(0,s.Tn)(e[a.qT])){var y=function(e,t,n){var f,m=null,g=(0,s.Tn)(e[a.qT]),y=(0,s.Tn)(e[r.YH]),b={getPlugin:function(){return e},getNext:function(){return m},processTelemetry:function(i,o){_(o=o||function(){var r;return e&&(0,s.Tn)(e[d])&&(r=e[d]()),r||(r=v(b,t,n)),r}(),(function(t){if(!e||!g)return!1;var n=(0,l.Cr)(e);return!n[r.Ik]&&!n[a.Hr]&&(y&&e[r.YH](m),e[a.qT](i,t),!0)}),"processTelemetry",(function(){return{item:i}}),!i.sync)||o[r.$5](i)},unload:function(t,n){_(t,(function(){var i=!1;if(e){var o=(0,l.Cr)(e),s=e[a.eT]||o[a.eT];!e||s&&s!==t.core()||o[r.Ik]||(o[a.eT]=null,o[r.Ik]=!0,o[r.tZ]=!1,e[r.Ik]&&!0===e[r.Ik](t,n)&&(i=!0))}return i}),"unload",(function(){}),n[r.tI])||t[r.$5](n)},update:function(t,n){_(t,(function(){var i=!1;if(e){var o=(0,l.Cr)(e),s=e[a.eT]||o[a.eT];!e||s&&s!==t.core()||o[r.Ik]||e[r.HC]&&!0===e[r.HC](t,n)&&(i=!0)}return i}),"update",(function(){}),!1)||t[r.$5](n)},_id:f=e?e[r.Ju]+"-"+e[a.Vo]+"-"+h++:"Unknown-0-"+h++,_setNext:function(e){m=e}};function _(t,n,s,l,d){var h=!1,v=e?e[r.Ju]:u,g=t[p];return g||(g=t[p]={}),t.setNext(m),e&&(0,c.r2)(t[a.eT](),(function(){return v+":"+s}),(function(){g[f]=!0;try{var e=m?m._id:a.m5;e&&(g[e]=!1),h=n(t)}catch(e){var c=!m||g[m._id];c&&(h=!0),m&&c||(0,i.ZP)(t[r.e4](),1,73,"Plugin ["+v+"] failed during "+s+" - "+(0,o.mm)(e)+", run flags: "+(0,o.mm)(g))}}),l,d),h}return(0,s.N6)(b)}(e,t,n);m||(m=y),b&&b._setNext(y),b=y}}))}return f&&!m?y([f],t,n):m}var b=function(e,t,n,r){var i=v(e,t,n,r);(0,s.o$)(this,i,(0,s.cG)(i))}},57679:(e,t,n)=>{"use strict";n.d(t,{Si:()=>y,VN:()=>v,Z1:()=>f,k5:()=>g,yc:()=>m});var r=n(60830),i=n(44180),o=n(12497),s=n(1972),a=4294967296,c=4294967295,l=!1,u=123456789,p=987654321;function d(e){e<0&&(e>>>=0),u=123456789+e&c,p=987654321-e&c,l=!0}function h(){try{var e=2147483647&(0,o.x3)();d((Math.random()*a^e)+e)}catch(e){}}function f(e){return e>0?Math.floor(v()/c*(e+1))>>>0:0}function v(e){var t=0,n=(0,i.MY)()||(0,i.iN)();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&c),0===t&&(0,i.lT)()&&(l||h(),t=g()&c),0===t&&(t=Math.floor(a*Math.random()|0)),e||(t>>>=0),t}function m(e){e?d(e):h()}function g(e){var t=((p=36969*(65535&p)+(p>>16)&c)<<16)+(65535&(u=18e3*(65535&u)+(u>>16)&c))>>>0&c;return e||(t>>>=0),t}function y(e){void 0===e&&(e=22);for(var t=v()>>>0,n=0,i=s.m5;i[r.oI]<e;)n++,i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(v()<<2&4294967295|3&t)>>>0,n=0);return i}},33540:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>l,Xc:()=>p,pI:()=>u,u7:()=>d});var r=n(60830),i=n(64252),o=n(12497),s=n(1972),a=n(68560),c=(0,i.T)("plugin");function l(e){return c.get(e,"state",{},!0)}function u(e,t){for(var n,i=[],a=null,c=e[r.uR]();c;){var u=c[r.AP]();u&&(a&&(0,o.Tn)(a[r.YH])&&(0,o.Tn)(u[s.qT])&&a[r.YH](u),((0,o.Tn)(u[r.tZ])?u[r.tZ]():(n=l(u))[r.tZ])||i[r.y5](u),a=u,c=c[r.uR]())}(0,o.Iu)(i,(function(i){var o=e[s.eT]();i[r.mE](e.getCfg(),o,t,e[r.uR]()),n=l(i),i[s.eT]||n[s.eT]||(n[s.eT]=o),n[r.tZ]=!0,delete n[r.Ik]}))}function p(e){return e.sort((function(e,t){var n=0;if(t){var r=(0,o.Tn)(t[s.qT]);(0,o.Tn)(e[s.qT])?n=r?e[s.Vo]-t[s.Vo]:1:r&&(n=-1)}else n=e?1:-1;return n}))}function d(e){var t={};return{getName:function(){return t[r.RS]},setName:function(n){e&&e.setName(n),t[r.RS]=n},getTraceId:function(){return t[r.P5]},setTraceId:function(n){e&&e.setTraceId(n),(0,a.hX)(n)&&(t[r.P5]=n)},getSpanId:function(){return t[r.wi]},setSpanId:function(n){e&&e.setSpanId(n),(0,a.wN)(n)&&(t[r.wi]=n)},getTraceFlags:function(){return t[r.Rr]},setTraceFlags:function(n){e&&e.setTraceFlags(n),t[r.Rr]=n}}}},49388:(e,t,n)=>{"use strict";n.d(t,{P:()=>a});var r=n(60830),i=n(99015),o=n(44180),s=n(12497);function a(){var e=[];return{add:function(t){t&&e[r.y5](t)},run:function(t,n){(0,s.Iu)(e,(function(e){try{e(t,n)}catch(e){(0,i.ZP)(t[r.e4](),2,73,"Unexpected error calling unload handler - "+(0,o.mm)(e))}})),e=[]}}}},68560:(e,t,n)=>{"use strict";n.d(t,{L0:()=>S,N7:()=>E,ZI:()=>g,ef:()=>w,hX:()=>y,mJ:()=>_,wN:()=>b,wk:()=>m});var r=n(60830),i=n(32578),o=n(44180),s=n(12497),a=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,c="00",l="ff",u="00000000000000000000000000000000",p="0000000000000000",d=1;function h(e,t,n){return!(!e||e[r.oI]!==t||e===n||!e.match(/^[\da-f]*$/))}function f(e,t,n){return h(e,t)?e:n}function v(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[r.oI]<2;)t="0"+t;return t}function m(e,t,n,o){var s;return(s={})[r.s]=h(o,2,l)?o:c,s[r.P5]=y(e)?e:(0,i.cL)(),s.spanId=b(t)?t:(0,i.cL)()[r.$4](0,16),s.traceFlags=n>=0&&n<=255?n:1,s}function g(e){var t;if(!e)return null;if((0,s.cy)(e)&&(e=e[0]||""),!e||!(0,s.Kg)(e)||e[r.oI]>8192)return null;var n=a.exec((0,s.EH)(e));return n&&n[1]!==l&&n[2]!==u&&n[3]!==p?((t={})[r.s]=n[1],t[r.P5]=n[2],t[r.wi]=n[3],t[r.Rr]=parseInt(n[4],16),t):null}function y(e){return h(e,32,u)}function b(e){return h(e,16,p)}function _(e){return!!(e&&h(e[r.s],2,l)&&h(e[r.P5],32,u)&&h(e[r.wi],16,p)&&h(v(e[r.Rr]),2))}function E(e){return!!_(e)&&(e[r.Rr]&d)===d}function S(e){if(e){var t=v(e[r.Rr]);h(t,2)||(t="01");var n=e[r.s]||c;return"00"!==n&&"ff"!==n&&(n=c),"".concat(n,"-").concat(f(e.traceId,32,u),"-").concat(f(e.spanId,16,p),"-").concat(t)}return""}function w(){var e="traceparent",t=g((0,o.$Z)(e));return t||(t=g((0,o.Iu)(e))),t}},60830:(e,t,n)=>{"use strict";n.d(t,{$4:()=>U,$5:()=>f,$o:()=>A,AP:()=>_,Di:()=>y,EX:()=>E,Ek:()=>G,GA:()=>l,H7:()=>S,HC:()=>O,Ic:()=>w,Ik:()=>P,JR:()=>T,Ju:()=>s,OL:()=>K,O_:()=>Q,P5:()=>te,QM:()=>z,RF:()=>o,RS:()=>i,Re:()=>M,Rr:()=>re,Ru:()=>ee,Sj:()=>j,TP:()=>g,Uw:()=>p,W7:()=>q,YH:()=>k,Yo:()=>Y,Zu:()=>X,a$:()=>$,by:()=>b,e4:()=>D,e_:()=>Z,fA:()=>h,kt:()=>V,lJ:()=>J,lK:()=>N,mE:()=>r,oI:()=>d,pM:()=>C,ps:()=>v,re:()=>W,s:()=>ie,sY:()=>F,sl:()=>u,sx:()=>B,tI:()=>x,tX:()=>L,tZ:()=>c,tn:()=>I,uR:()=>R,vR:()=>m,wi:()=>ne,y5:()=>a,y9:()=>H});var r="initialize",i="name",o="getNotifyMgr",s="identifier",a="push",c="isInitialized",l="config",u="instrumentationKey",p="logger",d="length",h="time",f="processNext",v="getProcessTelContext",m="addNotificationListener",g="removeNotificationListener",y="stopPollingInternalLogs",b="onComplete",_="getPlugin",E="flush",S="_extensions",w="splice",P="teardown",T="messageId",C="message",x="isAsync",I="_doTeardown",O="update",R="getNext",D="diagLog",k="setNextPlugin",A="createNew",N="cookieCfg",j="indexOf",M="substring",L="userAgent",F="split",V="setEnabled",U="substr",W="nodeType",H="apply",q="replace",$="enableDebugExceptions",B="logInternalMessage",K="toLowerCase",G="call",z="type",Y="handler",J="listeners",X="isChildEvt",Q="getCtx",Z="setCtx",ee="complete",te="traceId",ne="spanId",re="traceFlags",ie="version"},47672:(e,t,n)=>{"use strict";n.d(t,{J$:()=>h,KU:()=>d,OR:()=>p,QV:()=>a,Wy:()=>l,_1:()=>i,bA:()=>o,hW:()=>r,s6:()=>c,vR:()=>s,zi:()=>u});var r="function",i="object",o="undefined",s="prototype",a="hasOwnProperty",c=Object,l=c[s],u=c.assign,p=c.create,d=c.defineProperty,h=l[a]},75148:(e,t,n)=>{"use strict";n.d(t,{AQ:()=>a,mS:()=>o,zk:()=>s});var r=n(47672),i=null;function o(e){void 0===e&&(e=!0);var t=!1===e?null:i;return t||(typeof globalThis!==r.bA&&(t=globalThis),t||typeof self===r.bA||(t=self),t||typeof window===r.bA||(t=window),t||typeof global===r.bA||(t=global),i=t),t}function s(e){throw new TypeError(e)}function a(e){var t=r.OR;if(t)return t(e);if(null==e)return{};var n=typeof e;function i(){}return n!==r._1&&n!==r.hW&&s("Object prototype may only be an Object:"+e),i[r.vR]=e,new i}},8747:(e,t,n)=>{"use strict";n.d(t,{Im:()=>o,qU:()=>a,vz:()=>c});var r=n(47672),i=n(75148),o=(((0,i.mS)()||{}).Symbol,((0,i.mS)()||{}).Reflect,r.zi||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])r.Wy[r.QV].call(t,o)&&(e[o]=t[o]);return e}),s=function(e,t){return s=r.s6.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[r.QV](n)&&(e[n]=t[n])},s(e,t)};function a(e,t){function n(){this.constructor=e}typeof t!==r.hW&&null!==t&&(0,i.zk)("Class extends value "+String(t)+" is not a constructor or null"),s(e,t),e[r.vR]=null===t?(0,i.AQ)(t):(n[r.vR]=t[r.vR],new n)}function c(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}},5135:(e,t,n)=>{"use strict";n.r(t),n.d(t,{webSnippet:()=>r});var r='!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\\./g,"-"),hasFullStack:!1,stack:n+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(S&&S.pathname||"_unknown_")+"\\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message=\'AI (Internal): 99 message:"\'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\\"/g,"")+\'"\',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\r\nsrc: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source\r\n// name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r\n// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r\n// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r\n// crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r\n// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won\'t get called)\r\ncfg: { // Application Insights Configuration\r\n    instrumentationKey: "INSTRUMENTATION_KEY"\r\n}});'},92457:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>F});var i,o="undefined",s="constructor",a="prototype",c="function",l="_dynInstFuncs",u="_isDynProxy",p="_dynClass",d="_dynCls$",h="_dynInstChk",f=h,v="_dfOpts",m="_unknown_",g="__proto__",y="_dyn"+g,b="__dynProto$Gbl",_="_dynInstProto",E="useBaseInst",S="setInstFuncs",w=Object,P=w.getPrototypeOf,T=w.getOwnPropertyNames,C=(typeof globalThis!==o&&(i=globalThis),i||typeof self===o||(i=self),i||typeof window===o||(i=window),i||typeof global===o||(i=global),i||{}),x=C[b]||(C[b]={o:(r={},r[S]=!0,r[E]=!0,r),n:1e3});function I(e,t){return e&&w[a].hasOwnProperty.call(e,t)}function O(e){return e&&(e===w[a]||e===Array[a])}function R(e){return O(e)||e===Function[a]}function D(e){var t;if(e){if(P)return P(e);var n=e[g]||e[a]||(e[s]?e[s][a]:null);t=e[y]||n,I(e,y)||(delete e[_],t=e[y]=e[_]||e[y],e[_]=n)}return t}function k(e,t){var n=[];if(T)n=T(e);else for(var r in e)"string"==typeof r&&I(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function A(e,t,n){return t!==s&&typeof e[t]===c&&(n||I(e,t))}function N(e){throw new TypeError("DynamicProto: "+e)}function j(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function M(e,t,n,r,i){if(!O(e)){var o=n[l]=n[l]||{},s=o[t]=o[t]||{};!1!==o[f]&&(o[f]=!!i),k(n,(function(t){A(n,t,!1)&&n[t]!==r[t]&&(s[t]=n[t],delete n[t],(!I(e,t)||e[t]&&!e[t][u])&&(e[t]=function(e,t){var n=function(){var r=function(e,t,n,r){var i=null;if(e&&I(n,p)){var o=e[l]||{};if((i=(o[n[p]]||{})[t])||N("Missing ["+t+"] "+c),!i[h]&&!1!==o[f]){for(var s=!I(e,t),a=D(e),u=[];s&&a&&!R(a)&&!j(u,a);){var d=a[t];if(d){s=d===r;break}u.push(a),a=D(a)}try{s&&(e[t]=i),i[h]=1}catch(e){o[f]=!1}}}return i}(this,t,e,n)||function(e,t,n){var r=t[e];return r===n&&(r=D(t)[e]),typeof r!==c&&N("["+e+"] is not a "+c),r}(t,e,n);return r.apply(this,arguments)};return n[u]=1,n}(e,t)))}))}}function L(e,t){return I(e,a)?e.name||t||m:((e||{})[s]||{}).name||t||m}function F(e,t,n,r){I(e,a)||N("theClass is an invalid class definition.");var i=e[a];(function(e,t){if(P){for(var n=[],r=D(t);r&&!R(r)&&!j(n,r);){if(r===e)return!0;n.push(r),r=D(r)}return!1}return!0})(i,t)||N("["+L(e)+"] not in hierarchy of ["+L(t)+"]");var o=null;I(i,p)?o=i[p]:(o=d+L(e,"_")+"$"+x.n,x.n++,i[p]=o);var s=F[v],c=!!s[E];c&&r&&void 0!==r[E]&&(c=!!r[E]);var h=function(e){var t={};return k(e,(function(n){!t[n]&&A(e,n,!1)&&(t[n]=e[n])})),t}(t),m=function(e,t,n,r){function i(e,t,n){var i=t[n];if(i[u]&&r){var o=e[l]||{};!1!==o[f]&&(i=(o[t[p]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var o={};k(n,(function(e){o[e]=i(t,n,e)}));for(var s=D(e),a=[];s&&!R(s)&&!j(a,s);)k(s,(function(e){!o[e]&&A(s,e,!P)&&(o[e]=i(t,s,e))})),a.push(s),s=D(s);return o}(i,t,h,c);n(t,m);var g=!!P&&!!s[S];g&&r&&(g=!!r[S]),M(i,o,t,h,!1!==g)}F[v]=x.o},79100:(e,t,n)=>{"use strict";n.d(t,{_:()=>l});var r=n(38729),i=function(){function e(){}return e.prototype.active=function(){return r.l},e.prototype.with=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t.call.apply(t,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),o=n(69627),s=n(44892),a="context",c=new i,l=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return(0,o.$G)(a,e,s.K.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(r=this._getContextManager()).with.apply(r,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e,t,n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(i),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return(0,o.mS)(a)||c},e.prototype.disable=function(){this._getContextManager().disable(),(0,o.kv)(a,s.K.instance())},e}()},44892:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});var r=n(69627),i=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("verbose",this._namespace,e)},e}();function o(e,t,n){var i=(0,r.mS)("diag");if(i)return n.unshift(t),i[e].apply(i,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(n),!1))}var s=n(76733),a=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=(0,r.mS)("diag");if(i)return i[e].apply(i,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(t),!1))}}var t=this;t.setLogger=function(e,n){var i,o,a;if(void 0===n&&(n={logLevel:s.u.INFO}),e===t){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(i=c.stack)&&void 0!==i?i:c.message),!1}"number"==typeof n&&(n={logLevel:n});var l=(0,r.mS)("diag"),u=function(e,t){function n(n,r){var i=t[n];return"function"==typeof i&&e>=r?i.bind(t):function(){}}return e<s.u.NONE?e=s.u.NONE:e>s.u.ALL&&(e=s.u.ALL),t=t||{},{error:n("error",s.u.ERROR),warn:n("warn",s.u.WARN),info:n("info",s.u.INFO),debug:n("debug",s.u.DEBUG),verbose:n("verbose",s.u.VERBOSE)}}(null!==(o=n.logLevel)&&void 0!==o?o:s.u.INFO,e);if(l&&!n.suppressOverrideMessage){var p=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+p),u.warn("Current logger will overwrite one already registered from "+p)}return(0,r.$G)("diag",u,t,!0)},t.disable=function(){(0,r.kv)("diag",t)},t.createComponentLogger=function(e){return new i(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},11616:(e,t,n)=>{"use strict";n.d(t,{B:()=>c,L:()=>a});var r=n(44892),i=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2);return[t[0],t[1]]}))},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new e(this._entries);try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),a=s.next();!a.done;a=s.next()){var c=a.value;o._entries.delete(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},e.prototype.clear=function(){return new e},e}(),o=Symbol("BaggageEntryMetadata"),s=r.K.instance();function a(e){return void 0===e&&(e={}),new i(new Map(Object.entries(e)))}function c(e){return"string"!=typeof e&&(s.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:o,toString:function(){return e}}}},41844:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var r=n(79100)._.getInstance()},38729:(e,t,n)=>{"use strict";function r(e){return Symbol.for(e)}n.d(t,{l:()=>i,n:()=>r});var i=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}}},78758:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});var r=n(44892).K.instance()},76733:(e,t,n)=>{"use strict";var r;n.d(t,{u:()=>r}),function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(r||(r={}))},39104:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DiagConsoleLogger:()=>c,DiagLogLevel:()=>l.u,INVALID_SPANID:()=>H.w9,INVALID_SPAN_CONTEXT:()=>H.dM,INVALID_TRACEID:()=>H.RH,ProxyTracer:()=>O.y,ProxyTracerProvider:()=>R.n,ROOT_CONTEXT:()=>s.l,SamplingDecision:()=>D.i,SpanKind:()=>k.v,SpanStatusCode:()=>A.s,TraceFlags:()=>N.X,ValueType:()=>i,baggageEntryMetadataFromString:()=>o.B,context:()=>q._,createContextKey:()=>s.n,createNoopMeter:()=>x,createTraceState:()=>U,default:()=>Q,defaultTextMapGetter:()=>I.q,defaultTextMapSetter:()=>I.U,diag:()=>$.s,isSpanContextValid:()=>W.YA,isValidSpanId:()=>W.wN,isValidTraceId:()=>W.hX,metrics:()=>Y,propagation:()=>J.$,trace:()=>X.u});var r,i,o=n(11616),s=n(38729),a=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],c=function(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(console){var r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(var t=0;t<a.length;t++)this[a[t].n]=e(a[t].c)},l=n(76733),u=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(){function e(){}return e.prototype.createHistogram=function(e,t){return S},e.prototype.createCounter=function(e,t){return E},e.prototype.createUpDownCounter=function(e,t){return w},e.prototype.createObservableGauge=function(e,t){return T},e.prototype.createObservableCounter=function(e,t){return P},e.prototype.createObservableUpDownCounter=function(e,t){return C},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),d=function(){},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.add=function(e,t){},t}(d),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.add=function(e,t){},t}(d),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.record=function(e,t){},t}(d),m=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(m),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(m),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(m),_=new p,E=new h,S=new v,w=new f,P=new g,T=new y,C=new b;function x(){return _}!function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(i||(i={}));var I=n(22009),O=n(19505),R=n(74975),D=n(72674),k=n(58651),A=n(11908),N=n(47397),j="[_0-9a-z-*/]",M=new RegExp("^(?:[a-z]"+j+"{0,255}|[a-z0-9]"+j+"{0,240}@[a-z]"+j+"{0,13})$"),L=/^[ -~]{0,255}[!-~]$/,F=/,|=/,V=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),r=n.indexOf("=");if(-1!==r){var i=n.slice(0,r),o=n.slice(r+1,t.length);(function(e){return M.test(e)})(i)&&function(e){return L.test(e)&&!F.test(e)}(o)&&e.set(i,o)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function U(e){return new V(e)}var W=n(67823),H=n(97872),q=n(41844),$=n(78758),B=new(function(){function e(){}return e.prototype.getMeter=function(e,t,n){return _},e}()),K=n(69627),G=n(44892),z="metrics",Y=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return(0,K.$G)(z,e,G.K.instance())},e.prototype.getMeterProvider=function(){return(0,K.mS)(z)||B},e.prototype.getMeter=function(e,t,n){return this.getMeterProvider().getMeter(e,t,n)},e.prototype.disable=function(){(0,K.kv)(z,G.K.instance())},e}().getInstance(),J=n(49348),X=n(6664);const Q={context:q._,diag:$.s,metrics:Y,propagation:J.$,trace:X.u}},69627:(e,t,n)=>{"use strict";n.d(t,{mS:()=>p,$G:()=>u,kv:()=>d});var r="object"==typeof globalThis?globalThis:global,i="1.4.1",o=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,s=function(e){var t=new Set([e]),n=new Set,r=e.match(o);if(!r)return function(){return!1};var i=+r[1],s=+r[2],a=+r[3];if(null!=r[4])return function(t){return t===e};function c(e){return n.add(e),!1}function l(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(o);if(!r)return c(e);var u=+r[1],p=+r[2],d=+r[3];return null!=r[4]||i!==u?c(e):0===i?s===p&&a<=d?l(e):c(e):s<=p?l(e):c(e)}}(i),a=i.split(".")[0],c=Symbol.for("opentelemetry.js.api."+a),l=r;function u(e,t,n,r){var o;void 0===r&&(r=!1);var s=l[c]=null!==(o=l[c])&&void 0!==o?o:{version:i};if(!r&&s[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(a.stack||a.message),!1}return s.version!==i?(a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+i),n.error(a.stack||a.message),!1):(s[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+i+"."),!0)}function p(e){var t,n,r=null===(t=l[c])||void 0===t?void 0:t.version;if(r&&s(r))return null===(n=l[c])||void 0===n?void 0:n[e]}function d(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+i+".");var n=l[c];n&&delete n[e]}},49348:(e,t,n)=>{"use strict";n.d(t,{$:()=>g});var r=n(69627),i=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),o=n(22009),s=n(79100),a=(0,n(38729).n)("OpenTelemetry Baggage Key");function c(e){return e.getValue(a)||void 0}function l(){return c(s._.getInstance().active())}function u(e,t){return e.setValue(a,t)}function p(e){return e.deleteValue(a)}var d=n(11616),h=n(44892),f="propagation",v=new i,m=function(){function e(){this.createBaggage=d.L,this.getBaggage=c,this.getActiveBaggage=l,this.setBaggage=u,this.deleteBaggage=p}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return(0,r.$G)(f,e,h.K.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=o.U),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=o.q),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){(0,r.kv)(f,h.K.instance())},e.prototype._getGlobalPropagator=function(){return(0,r.mS)(f)||v},e}(),g=m.getInstance()},22009:(e,t,n)=>{"use strict";n.d(t,{U:()=>i,q:()=>r});var r={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},i={set:function(e,t,n){null!=e&&(e[t]=n)}}},6664:(e,t,n)=>{"use strict";n.d(t,{u:()=>l});var r=n(69627),i=n(74975),o=n(67823),s=n(13299),a=n(44892),c="trace",l=function(){function e(){this._proxyTracerProvider=new i.n,this.wrapSpanContext=o.IP,this.isSpanContextValid=o.YA,this.deleteSpan=s.EW,this.getSpan=s.fU,this.getActiveSpan=s.Bk,this.getSpanContext=s.w8,this.setSpan=s.Bx,this.setSpanContext=s.g_}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=(0,r.$G)(c,this._proxyTracerProvider,a.K.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return(0,r.mS)(c)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){(0,r.kv)(c,a.K.instance()),this._proxyTracerProvider=new i.n},e}().getInstance()},31440:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(97872),i=function(){function e(e){void 0===e&&(e=r.dM),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}()},79755:(e,t,n)=>{"use strict";n.d(t,{o:()=>c});var r=n(79100),i=n(13299),o=n(31440),s=n(67823),a=r._.getInstance(),c=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=a.active()),Boolean(null==t?void 0:t.root))return new o.d;var r,c=n&&(0,i.w8)(n);return"object"==typeof(r=c)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&(0,s.YA)(c)?new o.d(c):new o.d},e.prototype.startActiveSpan=function(e,t,n,r){var o,s,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(o=t,c=n):(o=t,s=n,c=r);var l=null!=s?s:a.active(),u=this.startSpan(e,o,l),p=(0,i.Bx)(l,u);return a.with(p,c,void 0,u)}},e}()},19505:(e,t,n)=>{"use strict";n.d(t,{y:()=>i});var r=new(n(79755).o),i=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):r},e}()},74975:(e,t,n)=>{"use strict";n.d(t,{n:()=>s});var r=n(19505),i=n(79755),o=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new i.o},e}()),s=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var i;return null!==(i=this.getDelegateTracer(e,t,n))&&void 0!==i?i:new r.y(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:o},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,n)},e}()},72674:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>r}),function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(r||(r={}))},13299:(e,t,n)=>{"use strict";n.d(t,{Bk:()=>c,Bx:()=>l,EW:()=>u,fU:()=>a,g_:()=>p,w8:()=>d});var r=n(38729),i=n(31440),o=n(79100),s=(0,r.n)("OpenTelemetry Context Key SPAN");function a(e){return e.getValue(s)||void 0}function c(){return a(o._.getInstance().active())}function l(e,t){return e.setValue(s,t)}function u(e){return e.deleteValue(s)}function p(e,t){return l(e,new i.d(t))}function d(e){var t;return null===(t=a(e))||void 0===t?void 0:t.spanContext()}},97872:(e,t,n)=>{"use strict";n.d(t,{RH:()=>o,dM:()=>s,w9:()=>i});var r=n(47397),i="0000000000000000",o="00000000000000000000000000000000",s={traceId:o,spanId:i,traceFlags:r.X.NONE}},58651:(e,t,n)=>{"use strict";var r;n.d(t,{v:()=>r}),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(r||(r={}))},67823:(e,t,n)=>{"use strict";n.d(t,{IP:()=>u,YA:()=>l,hX:()=>a,wN:()=>c});var r=n(97872),i=n(31440),o=/^([0-9a-f]{32})$/i,s=/^[0-9a-f]{16}$/i;function a(e){return o.test(e)&&e!==r.RH}function c(e){return s.test(e)&&e!==r.w9}function l(e){return a(e.traceId)&&c(e.spanId)}function u(e){return new i.d(e)}},11908:(e,t,n)=>{"use strict";var r;n.d(t,{s:()=>r}),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(r||(r={}))},47397:(e,t,n)=>{"use strict";var r;n.d(t,{X:()=>r}),function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(r||(r={}))},92068:(e,t,n)=>{"use strict";var r;n.d(t,{V:()=>r}),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(r||(r={}))},82711:(e,t,n)=>{"use strict";n.d(t,{EC:()=>o,KV:()=>c,QC:()=>a,hN:()=>i,kI:()=>l,r_:()=>s,un:()=>r});var r="=",i=";",o=",",s="baggage",a=180,c=4096,l=8192},75477:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var r=n(49348),i=n(4445),o=n(82711),s=n(98151),a=function(){function e(){}return e.prototype.inject=function(e,t,n){var a=r.$.getBaggage(e);if(a&&!(0,i.Zf)(e)){var c=(0,s.getKeyPairs)(a).filter((function(e){return e.length<=o.KV})).slice(0,o.QC),l=(0,s.serializeKeyPairs)(c);l.length>0&&n.set(t,o.r_,l)}},e.prototype.extract=function(e,t,n){var i=n.get(t,o.r_),a=Array.isArray(i)?i.join(o.EC):i;if(!a)return e;var c={};return 0===a.length?e:(a.split(o.EC).forEach((function(e){var t=(0,s.parsePairKeyValue)(e);if(t){var n={value:t.value};t.metadata&&(n.metadata=t.metadata),c[t.key]=n}})),0===Object.entries(c).length?e:r.$.setBaggage(e,r.$.createBaggage(c)))},e.prototype.fields=function(){return[o.r_]},e}()},98151:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getKeyPairs:()=>a,parseKeyPairsIntoRecord:()=>l,parsePairKeyValue:()=>c,serializeKeyPairs:()=>s});var r=n(11616),i=n(82711),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};function s(e){return e.reduce((function(e,t){var n=""+e+(""!==e?i.EC:"")+t;return n.length>i.kI?e:n}),"")}function a(e){return e.getAllEntries().map((function(e){var t=o(e,2),n=t[0],r=t[1],s=encodeURIComponent(n)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(s+=i.hN+r.metadata.toString()),s}))}function c(e){var t=e.split(i.hN);if(!(t.length<=0)){var n=t.shift();if(n){var o=n.indexOf(i.un);if(!(o<=0)){var s,a=decodeURIComponent(n.substring(0,o).trim()),c=decodeURIComponent(n.substring(o+1).trim());return t.length>0&&(s=(0,r.B)(t.join(i.hN))),{key:a,value:c,metadata:s}}}}}function l(e){return"string"!=typeof e||0===e.length?{}:e.split(i.EC).map((function(e){return c(e)})).filter((function(e){return void 0!==e&&e.value.length>0})).reduce((function(e,t){return e[t.key]=t.value,e}),{})}},80788:(e,t,n)=>{"use strict";n.d(t,{L:()=>s,m:()=>c,oU:()=>a});var r=n(78758),i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};function s(e){var t,n,s={};if("object"!=typeof e||null==e)return s;try{for(var l=i(Object.entries(e)),u=l.next();!u.done;u=l.next()){var p=o(u.value,2),d=p[0],h=p[1];a(d)?c(h)?Array.isArray(h)?s[d]=h.slice():s[d]=h:r.s.warn("Invalid attribute value set for key: "+d):r.s.warn("Invalid attribute key: "+d)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return s}function a(e){return"string"==typeof e&&e.length>0}function c(e){return null==e||(Array.isArray(e)?function(e){var t,n,r;try{for(var o=i(e),s=o.next();!s.done;s=o.next()){var a=s.value;if(null!=a){if(!r){if(l(a)){r=typeof a;continue}return!1}if(typeof a!==r)return!1}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0}(e):l(e))}function l(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}},78044:(e,t,n)=>{"use strict";n.d(t,{s:()=>o,u:()=>i});var r=(0,n(11590).o)();function i(e){r=e}function o(e){try{r(e)}catch(e){}}},11590:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});var r=n(78758);function i(){return function(e){r.s.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){for(var t={},n=e;null!==n;)Object.getOwnPropertyNames(n).forEach((function(e){if(!t[e]){var r=n[e];r&&(t[e]=String(r))}})),n=Object.getPrototypeOf(n);return t}(e))}(e))}}},65864:(e,t,n)=>{"use strict";n.d(t,{Ir:()=>g,JU:()=>f,KJ:()=>u,VL:()=>m,W5:()=>p,_5:()=>l,lg:()=>a,mw:()=>y,tq:()=>d,u5:()=>h,uc:()=>c,w_:()=>v});var r=n(53663),i=9,o=Math.pow(10,6),s=Math.pow(10,i);function a(e){var t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*o)]}function c(){var e=r.u.timeOrigin;if("number"!=typeof e){var t=r.u;e=t.timing&&t.timing.fetchStart}return e}function l(e){return y(a(c()),a("number"==typeof e?e:r.u.now()))}function u(e){if(m(e))return e;if("number"==typeof e)return e<c()?l(e):a(e);if(e instanceof Date)return a(e.getTime());throw TypeError("Invalid input type")}function p(e,t){var n=t[0]-e[0],r=t[1]-e[1];return r<0&&(n-=1,r+=s),[n,r]}function d(e){var t=i,n=""+"0".repeat(t)+e[1]+"Z",r=n.substr(n.length-t-1);return new Date(1e3*e[0]).toISOString().replace("000Z",r)}function h(e){return e[0]*s+e[1]}function f(e){return 1e3*e[0]+e[1]/1e6}function v(e){return 1e6*e[0]+e[1]/1e3}function m(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function g(e){return m(e)||"number"==typeof e||e instanceof Date}function y(e,t){var n=[e[0]+t[0],e[1]+t[1]];return n[1]>=s&&(n[1]-=s,n[0]+=1),n}},76492:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AlwaysOffSampler:()=>A,AlwaysOnSampler:()=>N,AnchoredClock:()=>i,BindOnceFuture:()=>Q.I,CompositePropagator:()=>T.n,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>H.fv,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>H.aE,DEFAULT_ENVIRONMENT:()=>H.Uz,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>H.h9,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>H.V,ExportResultCode:()=>l.V,ParentBasedSampler:()=>F,RPCType:()=>E,RandomIdGenerator:()=>y,SDK_INFO:()=>w.q,TRACE_PARENT_HEADER:()=>C.ZS,TRACE_STATE_HEADER:()=>C.UD,TimeoutError:()=>K,TraceIdRatioBasedSampler:()=>V,TraceState:()=>W.n,TracesSamplerValues:()=>$.R,VERSION:()=>u.x,W3CBaggagePropagator:()=>r.t,W3CTraceContextPropagator:()=>C.lm,_globalThis:()=>h,addHrTimes:()=>c.mw,baggageUtils:()=>p,callWithTimeout:()=>G,deleteRPCMetadata:()=>O,getEnv:()=>d._,getEnvWithoutDefaults:()=>H.wn,getRPCMetadata:()=>R,getTimeOrigin:()=>c.uc,globalErrorHandler:()=>s.s,hexToBase64:()=>g,hrTime:()=>c._5,hrTimeDuration:()=>c.W5,hrTimeToMicroseconds:()=>c.w_,hrTimeToMilliseconds:()=>c.JU,hrTimeToNanoseconds:()=>c.u5,hrTimeToTimeStamp:()=>c.tq,internal:()=>ee,isAttributeKey:()=>o.oU,isAttributeValue:()=>o.m,isTimeInput:()=>c.Ir,isTimeInputHrTime:()=>c.VL,isTracingSuppressed:()=>U.Zf,isUrlIgnored:()=>J,isWrapped:()=>X,loggingErrorHandler:()=>a.o,merge:()=>q.h,millisToHrTime:()=>c.lg,otperformance:()=>S.u,parseEnvironment:()=>H.Nq,parseTraceParent:()=>C.ZI,sanitizeAttributes:()=>o.L,setGlobalErrorHandler:()=>s.u,setRPCMetadata:()=>I,suppressTracing:()=>U.M1,timeInputToHrTime:()=>c.KJ,unrefTimer:()=>P.K,unsuppressTracing:()=>U.FU,urlMatches:()=>Y});var r=n(75477),i=function(){function e(e,t){this._monotonicClock=t,this._epochMillis=e.now(),this._performanceMillis=t.now()}return e.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},e}(),o=n(80788),s=n(78044),a=n(11590),c=n(65864),l=n(92068),u=n(42299),p=n(98151),d=n(37925),h="object"==typeof globalThis?globalThis:global;function f(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}var v=Buffer.alloc(8),m=Buffer.alloc(16);function g(e){var t;t=16===e.length?v:32===e.length?m:Buffer.alloc(e.length/2);for(var n=0,r=0;r<e.length;r+=2){var i=f(e.charCodeAt(r)),o=f(e.charCodeAt(r+1));t.writeUInt8(i<<4|o,n++)}return t.toString("base64")}var y=function(){this.generateTraceId=_(16),this.generateSpanId=_(8)},b=Buffer.allocUnsafe(16);function _(e){return function(){for(var t=0;t<e/4;t++)b.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,4*t);for(t=0;t<e&&!(b[t]>0);t++)t===e-1&&(b[e-1]=1);return b.toString("hex",0,e)}}var E,S=n(53663),w=n(68797),P=n(22778),T=n(22721),C=n(79859),x=(0,n(38729).n)("OpenTelemetry SDK Context Key RPC_METADATA");function I(e,t){return e.setValue(x,t)}function O(e){return e.deleteValue(x)}function R(e){return e.getValue(x)}!function(e){e.HTTP="http"}(E||(E={}));var D,k=n(72674),A=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:k.i.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),N=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:k.i.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),j=n(6664),M=n(67823),L=n(47397),F=function(){function e(e){var t,n,r,i;this._root=e.root,this._root||((0,s.s)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new N),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new N,this._remoteParentNotSampled=null!==(n=e.remoteParentNotSampled)&&void 0!==n?n:new A,this._localParentSampled=null!==(r=e.localParentSampled)&&void 0!==r?r:new N,this._localParentNotSampled=null!==(i=e.localParentNotSampled)&&void 0!==i?i:new A}return e.prototype.shouldSample=function(e,t,n,r,i,o){var s=j.u.getSpanContext(e);return s&&(0,M.YA)(s)?s.isRemote?s.traceFlags&L.X.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,r,i,o):this._remoteParentNotSampled.shouldSample(e,t,n,r,i,o):s.traceFlags&L.X.SAMPLED?this._localParentSampled.shouldSample(e,t,n,r,i,o):this._localParentNotSampled.shouldSample(e,t,n,r,i,o):this._root.shouldSample(e,t,n,r,i,o)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),V=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:(0,M.hX)(t)&&this._accumulate(t)<this._upperBound?k.i.RECORD_AND_SAMPLED:k.i.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t},e}(),U=n(4445),W=n(59406),H=n(61971),q=n(31194),$=n(70676),B=(D=function(e,t){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},D(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),K=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return B(t,e),t}(Error);function G(e,t){var n,r=new Promise((function(e,r){n=setTimeout((function(){r(new K("Operation timed out."))}),t)}));return Promise.race([e,r]).then((function(e){return clearTimeout(n),e}),(function(e){throw clearTimeout(n),e}))}var z=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Y(e,t){return"string"==typeof t?e===t:!!e.match(t)}function J(e,t){var n,r;if(!t)return!1;try{for(var i=z(t),o=i.next();!o.done;o=i.next())if(Y(e,o.value))return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}function X(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}var Q=n(77375),Z=n(41844),ee={_export:function(e,t){return new Promise((function(n){Z._.with((0,U.M1)(Z._.active()),(function(){e.export(t,(function(e){n(e)}))}))}))}}},37925:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var r=n(70857),i=n(61971);function o(){var e=(0,i.Nq)(process.env);return Object.assign({HOSTNAME:r.hostname()},i.Uz,e)}},53663:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});var r=require("perf_hooks").performance},68797:(e,t,n)=>{"use strict";n.d(t,{q:()=>s});var r,i=n(42299),o=n(87361),s=((r={})[o._2.TELEMETRY_SDK_NAME]="opentelemetry",r[o._2.PROCESS_RUNTIME_NAME]="node",r[o._2.TELEMETRY_SDK_LANGUAGE]=o.wP.NODEJS,r[o._2.TELEMETRY_SDK_VERSION]=i.x,r)},22778:(e,t,n)=>{"use strict";function r(e){e.unref()}n.d(t,{K:()=>r})},22721:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});var r=n(78758),i=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((function(e){return"function"==typeof e.fields?e.fields():[]})).reduce((function(e,t){return e.concat(t)}),[])))}return e.prototype.inject=function(e,t,n){var i,o;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._propagators),a=s.next();!a.done;a=s.next()){var c=a.value;try{c.inject(e,t,n)}catch(e){r.s.warn("Failed to inject with "+c.constructor.name+". Err: "+e.message)}}}catch(e){i={error:e}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}},e.prototype.extract=function(e,t,n){return this._propagators.reduce((function(e,i){try{return i.extract(e,t,n)}catch(e){r.s.warn("Failed to inject with "+i.constructor.name+". Err: "+e.message)}return e}),e)},e.prototype.fields=function(){return this._fields.slice()},e}()},59406:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var r="[_0-9a-z-*/]",i=new RegExp("^(?:[a-z]"+r+"{0,255}|[a-z0-9]"+r+"{0,240}@[a-z]"+r+"{0,13})$"),o=/^[ -~]{0,255}[!-~]$/,s=/,|=/,a=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),r=n.indexOf("=");if(-1!==r){var a=n.slice(0,r),c=n.slice(r+1,t.length);(function(e){return i.test(e)})(a)&&function(e){return o.test(e)&&!s.test(e)}(c)&&e.set(a,c)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}()},79859:(e,t,n)=>{"use strict";n.d(t,{UD:()=>l,ZI:()=>p,ZS:()=>c,lm:()=>d});var r=n(6664),i=n(67823),o=n(47397),s=n(4445),a=n(59406),c="traceparent",l="tracestate",u=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function p(e){var t=u.exec(e);return t?"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}var d=function(){function e(){}return e.prototype.inject=function(e,t,n){var a=r.u.getSpanContext(e);if(a&&!(0,s.Zf)(e)&&(0,i.YA)(a)){var u="00-"+a.traceId+"-"+a.spanId+"-0"+Number(a.traceFlags||o.X.NONE).toString(16);n.set(t,c,u),a.traceState&&n.set(t,l,a.traceState.serialize())}},e.prototype.extract=function(e,t,n){var i=n.get(t,c);if(!i)return e;var o=Array.isArray(i)?i[0]:i;if("string"!=typeof o)return e;var s=p(o);if(!s)return e;s.isRemote=!0;var u=n.get(t,l);if(u){var d=Array.isArray(u)?u.join(","):u;s.traceState=new a.n("string"==typeof d?d:void 0)}return r.u.setSpanContext(e,s)},e.prototype.fields=function(){return[c,l]},e}()},4445:(e,t,n)=>{"use strict";n.d(t,{FU:()=>o,M1:()=>i,Zf:()=>s});var r=(0,n(38729).n)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function i(e){return e.setValue(r,!0)}function o(e){return e.deleteValue(r)}function s(e){return!0===e.getValue(r)}},77375:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});var r=function(){function e(){var e=this;this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),i=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new r}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([this._that],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(n),!1))).then((function(e){return t._deferred.resolve(e)}),(function(e){return t._deferred.reject(e)}))}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}()},61971:(e,t,n)=>{"use strict";n.d(t,{fv:()=>f,aE:()=>h,Uz:()=>g,h9:()=>v,V:()=>m,wn:()=>P,Nq:()=>w});var r=n(76733),i=n(70676),o="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},s=",",a=["OTEL_SDK_DISABLED"];function c(e){return a.indexOf(e)>-1}var l=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function u(e){return l.indexOf(e)>-1}var p=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function d(e){return p.indexOf(e)>-1}var h=1/0,f=128,v=128,m=128,g={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:r.u.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:h,OTEL_ATTRIBUTE_COUNT_LIMIT:f,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:h,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:f,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:h,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:f,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:v,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:m,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:i.R.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function y(e,t,n){if(void 0!==n[e]){var r=String(n[e]);t[e]="true"===r.toLowerCase()}}function b(e,t,n,r,i){if(void 0===r&&(r=-1/0),void 0===i&&(i=1/0),void 0!==n[e]){var o=Number(n[e]);isNaN(o)||(t[e]=o<r?r:o>i?i:o)}}function _(e,t,n,r){void 0===r&&(r=s);var i=n[e];"string"==typeof i&&(t[e]=i.split(r).map((function(e){return e.trim()})))}var E={ALL:r.u.ALL,VERBOSE:r.u.VERBOSE,DEBUG:r.u.DEBUG,INFO:r.u.INFO,WARN:r.u.WARN,ERROR:r.u.ERROR,NONE:r.u.NONE};function S(e,t,n){var r=n[e];if("string"==typeof r){var i=E[r.toUpperCase()];null!=i&&(t[e]=i)}}function w(e){var t={};for(var n in g){var r=n;if("OTEL_LOG_LEVEL"===r)S(r,t,e);else if(c(r))y(r,t,e);else if(u(r))b(r,t,e);else if(d(r))_(r,t,e);else{var i=e[r];null!=i&&(t[r]=String(i))}}return t}function P(){return"undefined"!=typeof process&&process&&process.env?w(process.env):w(o)}},31194:(e,t,n)=>{"use strict";n.d(t,{h:()=>g});var r,i,o="[object Object]",s="[object Null]",a="[object Undefined]",c=Function.prototype.toString,l=c.call(Object),u=(r=Object.getPrototypeOf,i=Object,function(e){return r(i(e))}),p=Object.prototype,d=p.hasOwnProperty,h=Symbol?Symbol.toStringTag:void 0,f=p.toString;function v(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||function(e){return null==e?void 0===e?a:s:h&&h in Object(e)?function(e){var t=d.call(e,h),n=e[h],r=!1;try{e[h]=void 0,r=!0}catch(e){}var i=f.call(e);return r&&(t?e[h]=n:delete e[h]),i}(e):function(e){return f.call(e)}(e)}(e)!==o)return!1;var t=u(e);if(null===t)return!0;var n=d.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)===l}var m=20;function g(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift(),r=new WeakMap;e.length>0;)n=b(n,e.shift(),0,r);return n}function y(e){return E(e)?e.slice():e}function b(e,t,n,r){var i;if(void 0===n&&(n=0),!(n>m)){if(n++,P(e)||P(t)||S(t))i=y(t);else if(E(e)){if(i=e.slice(),E(t))for(var o=0,s=t.length;o<s;o++)i.push(y(t[o]));else if(w(t))for(o=0,s=(a=Object.keys(t)).length;o<s;o++)i[c=a[o]]=y(t[c])}else if(w(e))if(w(t)){if(!function(e,t){return!(!v(e)||!v(t))}(e,t))return t;var a;for(i=Object.assign({},e),o=0,s=(a=Object.keys(t)).length;o<s;o++){var c,l=t[c=a[o]];if(P(l))void 0===l?delete i[c]:i[c]=l;else{var u=i[c],p=l;if(_(e,c,r)||_(t,c,r))delete i[c];else{if(w(u)&&w(p)){var d=r.get(u)||[],h=r.get(p)||[];d.push({obj:e,key:c}),h.push({obj:t,key:c}),r.set(u,d),r.set(p,h)}i[c]=b(i[c],l,n,r)}}}}else i=t;return i}}function _(e,t,n){for(var r=n.get(e[t])||[],i=0,o=r.length;i<o;i++){var s=r[i];if(s.key===t&&s.obj===e)return!0}return!1}function E(e){return Array.isArray(e)}function S(e){return"function"==typeof e}function w(e){return!P(e)&&!E(e)&&!S(e)&&"object"==typeof e}function P(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}},70676:(e,t,n)=>{"use strict";var r;n.d(t,{R:()=>r}),function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(r||(r={}))},42299:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var r="1.15.2"},39478:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AlwaysOffSampler:()=>E,AlwaysOnSampler:()=>S,BasicTracerProvider:()=>ie,BatchSpanProcessor:()=>re,ConsoleSpanExporter:()=>oe,ForceFlushState:()=>F,InMemorySpanExporter:()=>se,NoopSpanProcessor:()=>X,ParentBasedSampler:()=>T,RandomIdGenerator:()=>N,SamplingDecision:()=>r,SimpleSpanProcessor:()=>ce,Span:()=>y,TraceIdRatioBasedSampler:()=>C,Tracer:()=>V});var r,i=n(41844),o=n(6664),s=n(78758),a=n(97872),c=n(58651),l=n(72674),u=n(47397),p=n(4445),d=n(80788),h=n(11908),f=n(53663),v=n(65864),m=n(366),g=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},y=function(){function e(e,t,n,r,i,o,s,a,c){void 0===s&&(s=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:h.s.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=r,this.parentSpanId=o,this.kind=i,this.links=s;var l=Date.now();this._performanceStartTime=f.u.now(),this._performanceOffset=l-(this._performanceStartTime+(0,v.uc)()),this._startTimeProvided=null!=a,this.startTime=this._getTime(null!=a?a:l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return null==t||this._isSpanEnded()?this:0===e.length?(s.s.warn("Invalid attribute key: "+e),this):(0,d.m)(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(s.s.warn("Invalid attribute value set for key: "+e),this)},e.prototype.setAttributes=function(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),i=r.next();!i.done;i=r.next()){var o=g(i.value,2),s=o[0],a=o[1];this.setAttribute(s,a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this},e.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return s.s.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(s.s.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,v.Ir)(t)&&((0,v.Ir)(n)||(n=t),t=void 0);var r=(0,d.L)(t);return this.events.push({name:e,attributes:r,time:this._getTime(n),droppedAttributesCount:0}),this},e.prototype.setStatus=function(e){return this._isSpanEnded()||(this.status=e),this},e.prototype.updateName=function(e){return this._isSpanEnded()||(this.name=e),this},e.prototype.end=function(e){this._isSpanEnded()?s.s.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(e),this._duration=(0,v.W5)(this.startTime,this.endTime),this._duration[0]<0&&(s.s.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this))},e.prototype._getTime=function(e){if("number"==typeof e&&e<f.u.now())return(0,v._5)(e+this._performanceOffset);if("number"==typeof e)return(0,v.lg)(e);if(e instanceof Date)return(0,v.lg)(e.getTime());if((0,v.VL)(e))return e;if(this._startTimeProvided)return(0,v.lg)(Date.now());var t=f.u.now()-this._performanceStartTime;return(0,v.mw)(this.startTime,(0,v.lg)(t))},e.prototype.isRecording=function(){return!1===this._ended},e.prototype.recordException=function(e,t){var n={};"string"==typeof e?n[m.IX.EXCEPTION_MESSAGE]=e:e&&(e.code?n[m.IX.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[m.IX.EXCEPTION_TYPE]=e.name),e.message&&(n[m.IX.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[m.IX.EXCEPTION_STACKTRACE]=e.stack)),n[m.IX.EXCEPTION_TYPE]||n[m.IX.EXCEPTION_MESSAGE]?this.addEvent("exception",n,t):s.s.warn("Failed to record an exception "+e)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&s.s.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},e.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(s.s.warn("Attribute value limit must be positive, got "+n),e):"string"==typeof e?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map((function(e){return"string"==typeof e?t._truncateToLimitUtil(e,n):e})):e},e}(),b=n(37925),_=n(70676);!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(r||(r={}));var E=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:r.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),S=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:r.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),w=n(67823),P=n(78044),T=function(){function e(e){var t,n,r,i;this._root=e.root,this._root||((0,P.s)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new S),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new S,this._remoteParentNotSampled=null!==(n=e.remoteParentNotSampled)&&void 0!==n?n:new E,this._localParentSampled=null!==(r=e.localParentSampled)&&void 0!==r?r:new S,this._localParentNotSampled=null!==(i=e.localParentNotSampled)&&void 0!==i?i:new E}return e.prototype.shouldSample=function(e,t,n,r,i,s){var a=o.u.getSpanContext(e);return a&&(0,w.YA)(a)?a.isRemote?a.traceFlags&u.X.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,r,i,s):this._remoteParentNotSampled.shouldSample(e,t,n,r,i,s):a.traceFlags&u.X.SAMPLED?this._localParentSampled.shouldSample(e,t,n,r,i,s):this._localParentNotSampled.shouldSample(e,t,n,r,i,s):this._root.shouldSample(e,t,n,r,i,s)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),C=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:(0,w.hX)(t)&&this._accumulate(t)<this._upperBound?r.RECORD_AND_SAMPLED:r.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t},e}(),x=(0,b._)(),I=_.R.AlwaysOn,O=1;function R(){return{sampler:D(x),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,b._)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,b._)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,b._)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,b._)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,b._)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,b._)().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:(0,b._)().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:(0,b._)().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function D(e){switch(void 0===e&&(e=(0,b._)()),e.OTEL_TRACES_SAMPLER){case _.R.AlwaysOn:return new S;case _.R.AlwaysOff:return new E;case _.R.ParentBasedAlwaysOn:return new T({root:new S});case _.R.ParentBasedAlwaysOff:return new T({root:new E});case _.R.TraceIdRatio:return new C(k(e));case _.R.ParentBasedTraceIdRatio:return new T({root:new C(k(e))});default:return s.s.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+I+'".'),new S}}function k(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return s.s.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+O+"."),O;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(s.s.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+O+"."),O):t<0||t>1?(s.s.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+O+"."),O):t}var A=n(61971),N=function(){this.generateTraceId=M(16),this.generateSpanId=M(8)},j=Buffer.allocUnsafe(16);function M(e){return function(){for(var t=0;t<e/4;t++)j.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,4*t);for(t=0;t<e&&!(j[t]>0);t++)t===e-1&&(j[e-1]=1);return j.toString("hex",0,e)}}var L,F,V=function(){function e(e,t,n){this._tracerProvider=n;var r,i,o,s,a=(r=t,i={sampler:D()},o=R(),(s=Object.assign({},o,i,r)).generalLimits=Object.assign({},o.generalLimits,r.generalLimits||{}),s.spanLimits=Object.assign({},o.spanLimits,r.spanLimits||{}),s);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=t.idGenerator||new N,this.resource=n.resource,this.instrumentationLibrary=e}return e.prototype.startSpan=function(e,t,n){var r,h,f;void 0===t&&(t={}),void 0===n&&(n=i._.active()),t.root&&(n=o.u.deleteSpan(n));var v=o.u.getSpan(n);if((0,p.Zf)(n))return s.s.debug("Instrumentation suppressed, returning Noop Span"),o.u.wrapSpanContext(a.dM);var m,g,b,_=null==v?void 0:v.spanContext(),E=this._idGenerator.generateSpanId();_&&o.u.isSpanContextValid(_)?(m=_.traceId,g=_.traceState,b=_.spanId):m=this._idGenerator.generateTraceId();var S=null!==(r=t.kind)&&void 0!==r?r:c.v.INTERNAL,w=(null!==(h=t.links)&&void 0!==h?h:[]).map((function(e){return{context:e.context,attributes:(0,d.L)(e.attributes)}})),P=(0,d.L)(t.attributes),T=this._sampler.shouldSample(n,m,e,S,P,w);g=null!==(f=T.traceState)&&void 0!==f?f:g;var C={traceId:m,spanId:E,traceFlags:T.decision===l.i.RECORD_AND_SAMPLED?u.X.SAMPLED:u.X.NONE,traceState:g};if(T.decision===l.i.NOT_RECORD)return s.s.debug("Recording is off, propagating context in a non-recording span"),o.u.wrapSpanContext(C);var x=new y(this,n,e,C,S,b,w,t.startTime),I=(0,d.L)(Object.assign(P,T.attributes));return x.setAttributes(I),x},e.prototype.startActiveSpan=function(e,t,n,r){var s,a,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(s=t,c=n):(s=t,a=n,c=r);var l=null!=a?a:i._.active(),u=this.startSpan(e,s,l),p=o.u.setSpan(l,u);return i._.with(p,c,void 0,u)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),U=n(49348),W=n(31194),H=n(22721),q=n(79859),$=n(75477),B=n(87361),K=n(68797),G=function(){return G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},G.apply(this,arguments)},z=function(){function e(e,t){var n,r=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(n=this._attributes)&&void 0!==n?n:{},this._asyncAttributesPromise=null==t?void 0:t.then((function(e){return r._attributes=Object.assign({},r._attributes,e),r.asyncAttributesPending=!1,e}),(function(e){return s.s.debug("a resource's async attributes promise rejected: %s",e),r.asyncAttributesPending=!1,{}}))}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})[B._2.SERVICE_NAME]="unknown_service:"+process.argv0,t[B._2.TELEMETRY_SDK_LANGUAGE]=K.q[B._2.TELEMETRY_SDK_LANGUAGE],t[B._2.TELEMETRY_SDK_NAME]=K.q[B._2.TELEMETRY_SDK_NAME],t[B._2.TELEMETRY_SDK_VERSION]=K.q[B._2.TELEMETRY_SDK_VERSION],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&s.s.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return e=this,t=void 0,r=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},new((n=void 0)||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.merge=function(t){var n,r=this;if(!t)return this;var i=G(G({},this._syncAttributes),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(i);var o=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then((function(e){var n,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2),o=i[0],s=i[1];return G(G(G(G({},r._syncAttributes),o),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes),s)}));return new e(i,o)},e.EMPTY=new e({}),e}(),Y=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},J=function(){function e(e){this._spanProcessors=e}return e.prototype.forceFlush=function(){var e,t,n=[];try{for(var r=Y(this._spanProcessors),i=r.next();!i.done;i=r.next()){var o=i.value;n.push(o.forceFlush())}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e){Promise.all(n).then((function(){e()})).catch((function(t){(0,P.s)(t||new Error("MultiSpanProcessor: forceFlush failed")),e()}))}))},e.prototype.onStart=function(e,t){var n,r;try{for(var i=Y(this._spanProcessors),o=i.next();!o.done;o=i.next())o.value.onStart(e,t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.onEnd=function(e){var t,n;try{for(var r=Y(this._spanProcessors),i=r.next();!i.done;i=r.next())i.value.onEnd(e)}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.shutdown=function(){var e,t,n=[];try{for(var r=Y(this._spanProcessors),i=r.next();!i.done;i=r.next()){var o=i.value;n.push(o.shutdown())}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e,t){Promise.all(n).then((function(){e()}),t)}))},e}(),X=function(){function e(){}return e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),Q=n(77375),Z=n(92068),ee=n(22778),te=function(){function e(e,t){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;var n=(0,b._)();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Q.I(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(s.s.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&u.X.SAMPLED&&this._addToBuffer(e)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e=this;return Promise.resolve().then((function(){return e.onShutdown()})).then((function(){return e._flushAll()})).then((function(){return e._exporter.shutdown()}))},e.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&s.s.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(s.s.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},e.prototype._flushAll=function(){var e=this;return new Promise((function(t,n){for(var r=[],i=0,o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize);i<o;i++)r.push(e._flushOneBatch());Promise.all(r).then((function(){t()})).catch(n)}))},e.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(t,n){var r=setTimeout((function(){n(new Error("Timeout"))}),e._exportTimeoutMillis);i._.with((0,p.M1)(i._.active()),(function(){var i=e._finishedSpans.splice(0,e._maxExportBatchSize),o=function(){return e._exporter.export(i,(function(e){var i;clearTimeout(r),e.code===Z.V.SUCCESS?t():n(null!==(i=e.error)&&void 0!==i?i:new Error("BatchSpanProcessor: span export failed"))}))},s=i.map((function(e){return e.resource})).filter((function(e){return e.asyncAttributesPending}));0===s.length?o():Promise.all(s.map((function(e){var t;return null===(t=e.waitForAsyncAttributes)||void 0===t?void 0:t.call(e)}))).then(o,(function(e){(0,P.s)(e),n(e)}))}))}))},e.prototype._maybeStartTimer=function(){var e=this;void 0===this._timer&&(this._timer=setTimeout((function(){e._flushOneBatch().then((function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())})).catch((function(e){(0,P.s)(e)}))}),this._scheduledDelayMillis),(0,ee.K)(this._timer))},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e}(),ne=(L=function(e,t){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},L(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}L(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.prototype.onShutdown=function(){},t}(te);!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(F||(F={}));var ie=function(){function e(e){var t;void 0===e&&(e={}),this._registeredSpanProcessors=[],this._tracers=new Map;var n=(0,W.h)({},R(),function(e){var t,n,r,i,o,s,a,c,l,u,p,d,h=Object.assign({},e.spanLimits),f=(0,A.wn)();return h.attributeCountLimit=null!==(s=null!==(o=null!==(i=null!==(n=null===(t=e.spanLimits)||void 0===t?void 0:t.attributeCountLimit)&&void 0!==n?n:null===(r=e.generalLimits)||void 0===r?void 0:r.attributeCountLimit)&&void 0!==i?i:f.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==o?o:f.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==s?s:A.fv,h.attributeValueLengthLimit=null!==(d=null!==(p=null!==(u=null!==(c=null===(a=e.spanLimits)||void 0===a?void 0:a.attributeValueLengthLimit)&&void 0!==c?c:null===(l=e.generalLimits)||void 0===l?void 0:l.attributeValueLengthLimit)&&void 0!==u?u:f.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==p?p:f.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==d?d:A.aE,Object.assign({},e,{spanLimits:h})}(e));this.resource=null!==(t=n.resource)&&void 0!==t?t:z.empty(),this.resource=z.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var r=this._buildExporterFromEnv();if(void 0!==r){var i=new re(r);this.activeSpanProcessor=i}else this.activeSpanProcessor=new X}return e.prototype.getTracer=function(e,t,n){var r=e+"@"+(t||"")+":"+((null==n?void 0:n.schemaUrl)||"");return this._tracers.has(r)||this._tracers.set(r,new V({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._config,this)),this._tracers.get(r)},e.prototype.addSpanProcessor=function(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((function(e){return s.s.error("Error while trying to shutdown current span processor",e)})),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new J(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(e){void 0===e&&(e={}),o.u.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&i._.setGlobalContextManager(e.contextManager),e.propagator&&U.$.setGlobalPropagator(e.propagator)},e.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map((function(t){return new Promise((function(n){var r,i=setTimeout((function(){n(new Error("Span processor did not completed within timeout period of "+e+" ms")),r=F.timeout}),e);t.forceFlush().then((function(){clearTimeout(i),r!==F.timeout&&(r=F.resolved,n(r))})).catch((function(e){clearTimeout(i),r=F.error,n(e)}))}))}));return new Promise((function(e,n){Promise.all(t).then((function(t){var r=t.filter((function(e){return e!==F.resolved}));r.length>0?n(r):e()})).catch((function(e){return n([e])}))}))},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(e){var t;return null===(t=this.constructor._registeredPropagators.get(e))||void 0===t?void 0:t()},e.prototype._getSpanExporter=function(e){var t;return null===(t=this.constructor._registeredExporters.get(e))||void 0===t?void 0:t()},e.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set((0,b._)().OTEL_PROPAGATORS)),n=t.map((function(t){var n=e._getPropagator(t);return n||s.s.warn('Propagator "'+t+'" requested through environment variable is unavailable.'),n})).reduce((function(e,t){return t&&e.push(t),e}),[]);return 0===n.length?void 0:1===t.length?n[0]:new H.n({propagators:n})},e.prototype._buildExporterFromEnv=function(){var e=(0,b._)().OTEL_TRACES_EXPORTER;if("none"!==e&&""!==e){var t=this._getSpanExporter(e);return t||s.s.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},e._registeredPropagators=new Map([["tracecontext",function(){return new q.lm}],["baggage",function(){return new $.t}]]),e._registeredExporters=new Map,e}(),oe=function(){function e(){}return e.prototype.export=function(e,t){return this._sendSpans(e,t)},e.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype._exportInfo=function(e){var t;return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:null===(t=e.spanContext().traceState)||void 0===t?void 0:t.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:(0,v.w_)(e.startTime),duration:(0,v.w_)(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},e.prototype._sendSpans=function(e,t){var n,r;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),o=i.next();!o.done;o=i.next()){var s=o.value;console.dir(this._exportInfo(s),{depth:3})}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}if(t)return t({code:Z.V.SUCCESS})},e}(),se=function(){function e(){this._finishedSpans=[],this._stopped=!1}return e.prototype.export=function(e,t){var n;if(this._stopped)return t({code:Z.V.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e),!1)),setTimeout((function(){return t({code:Z.V.SUCCESS})}),0)},e.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.reset=function(){this._finishedSpans=[]},e.prototype.getFinishedSpans=function(){return this._finishedSpans},e}(),ae=n(76492),ce=function(){function e(e){this._exporter=e,this._shutdownOnce=new Q.I(this._shutdown,this),this._unresolvedExports=new Set}return e.prototype.forceFlush=function(){return e=this,t=void 0,r=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){var t,n,r=this;if(!this._shutdownOnce.isCalled&&e.spanContext().traceFlags&u.X.SAMPLED){var i=function(){return ae.internal._export(r._exporter,[e]).then((function(e){var t;e.code!==Z.V.SUCCESS&&(0,P.s)(null!==(t=e.error)&&void 0!==t?t:new Error("SimpleSpanProcessor: span export failed (status "+e+")"))})).catch((function(e){(0,P.s)(e)}))};if(e.resource.asyncAttributesPending){var o=null===(n=(t=e.resource).waitForAsyncAttributes)||void 0===n?void 0:n.call(t).then((function(){return null!=o&&r._unresolvedExports.delete(o),i()}),(function(e){return(0,P.s)(e)}));null!=o&&this._unresolvedExports.add(o)}else i()}},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}()},74813:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AwsEcsLaunchtypeValues:()=>i.AS,CloudPlatformValues:()=>i.ns,CloudProviderValues:()=>i.jV,DbCassandraConsistencyLevelValues:()=>r.Nx,DbSystemValues:()=>r.Q5,FaasDocumentOperationValues:()=>r.Ij,FaasInvokedProviderValues:()=>r.zI,FaasTriggerValues:()=>r.iP,HostArchValues:()=>i.Cg,HttpFlavorValues:()=>r.dN,MessageTypeValues:()=>r.Yw,MessagingDestinationKindValues:()=>r.b7,MessagingOperationValues:()=>r.Qg,NetHostConnectionSubtypeValues:()=>r.cA,NetHostConnectionTypeValues:()=>r.KS,NetTransportValues:()=>r.z4,OsTypeValues:()=>i.h0,RpcGrpcStatusCodeValues:()=>r.f3,SemanticAttributes:()=>r.IX,SemanticResourceAttributes:()=>i._2,TelemetrySdkLanguageValues:()=>i.wP});var r=n(366),i=n(87361)},87361:(e,t,n)=>{"use strict";n.d(t,{AS:()=>s,Cg:()=>a,_2:()=>r,h0:()=>c,jV:()=>i,ns:()=>o,wP:()=>l});var r={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},i={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},o={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},s={EC2:"ec2",FARGATE:"fargate"},a={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},c={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},l={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}},366:(e,t,n)=>{"use strict";n.d(t,{IX:()=>r,Ij:()=>a,KS:()=>u,Nx:()=>o,Q5:()=>i,Qg:()=>f,Yw:()=>m,b7:()=>h,cA:()=>p,dN:()=>d,f3:()=>v,iP:()=>s,z4:()=>l,zI:()=>c});var r={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},i={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},o={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},s={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},a={INSERT:"insert",EDIT:"edit",DELETE:"delete"},c={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},l={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},u={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},p={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},d={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},h={QUEUE:"queue",TOPIC:"topic"},f={RECEIVE:"receive",PROCESS:"process"},v={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},m={SENT:"SENT",RECEIVED:"RECEIVED"}},25396:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.oneDataSystemClientFactory=void 0,t.oneDataSystemClientFactory=async(e,t,r)=>{let i=await(async(e,t,r)=>{const i=await Promise.resolve().then((()=>o(n(51801)))),s=await Promise.resolve().then((()=>o(n(28643)))),a=new i.AppInsightsCore,c=new s.PostChannel,l={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[c]]};if(r){l.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:r};l.extensionConfig[c.identifier]=e}const u=t.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(l,[]),a.addTelemetryInitializer((e=>{u&&(e.ext=e.ext??{},e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),a})(e,t,r);const s=async()=>{try{return new Promise(((e,t)=>{i?i.flush(!0,(e=>{e||t("Failed to flush app 1DS!")})):e()}))}catch(e){throw new Error("Failed to flush 1DS!\n"+e.message)}};return{logEvent:(e,t)=>{try{i?.track({name:e,baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:s,dispose:async()=>(await s(),new Promise((e=>{i?i.unload(!0,(()=>{e(),i=void 0})):e()})))}}},86548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetryReporter=void 0,t.BaseTelemetryReporter=class{constructor(e,t,n){this.telemetrySender=e,this.vscodeAPI=t,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates((()=>{this.updateUserOptIn()}))}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logUsage(e,{properties:t,measurements:n})}sendTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!1)}sendRawTelemetryEvent(e,t,n){const r={...t};for(const e of Object.keys(r??{})){const t=r[e];"string"==typeof e&&void 0!==t&&(r[e]=new this.vscodeAPI.TelemetryTrustedValue("string"==typeof t?t:t.value))}this.sendTelemetryEvent(e,r,n)}sendDangerousTelemetryEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,t,n,!0)}internalSendTelemetryErrorEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logError(e,{properties:t,measurements:n})}sendTelemetryErrorEvent(e,t,n){this.internalSendTelemetryErrorEvent(e,t,n,!1)}sendDangerousTelemetryErrorEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,t,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map((e=>e.dispose())))}}},52396:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetrySender=void 0,function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"}(n||(n={})),t.BaseTelemetrySender=class{constructor(e,t){this._instantiationStatus=n.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}sendEventData(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._instantiationStatus!==n.INSTANTIATED&&this._eventQueue.push({eventName:e,data:t})}sendErrorData(e,t){if(!this._telemetryClient)return void(this._instantiationStatus!==n.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:t}));const r={stack:e.stack,message:e.message,name:e.name};t?t.properties={...t.properties,...r}:t={properties:r},this._telemetryClient.logEvent("unhandlederror",t)}async flush(){return this._telemetryClient?.flush()}async dispose(){await this.flush(),this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.sendEventData(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.sendErrorData(e,t))),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===n.NOT_INSTANTIATED&&(this._instantiationStatus=n.INSTANTIATING,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=n.INSTANTIATED,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=n.INSTANTIATED})))}}},38393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryUtil=void 0;class n{static applyReplacements(e,t){for(const n of Object.keys(e))for(const r of t)r.lookup.test(n)&&(void 0!==r.replacementString?e[n]=r.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.8.4"}}static getInstance(){return n._instance||(n._instance=new n),n._instance}}t.TelemetryUtil=n},81170:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(70857)),a=o(n(54980)),c=o(n(65692)),l=n(86548),u=n(52396),p=n(38393),d=n(25396);class h extends l.BaseTelemetryReporter{constructor(e,t){let r=e=>(async(e,t)=>{let r;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";const t=await Promise.resolve().then((()=>o(n(86048))));t.defaultClient?(r=new t.TelemetryClient(e),r.channel.setUseDiskRetryCaching(!0)):(t.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setAutoCollectIncomingRequestAzureFunctions(!1).setUseDiskRetryCaching(!0).start(),r=t.defaultClient),a&&a.env&&(r.context.tags[r.context.keys.userId]=a.env.machineId,r.context.tags[r.context.keys.sessionId]=a.env.sessionId,r.context.tags[r.context.keys.cloudRole]=a.env.appName,r.context.tags[r.context.keys.cloudRoleInstance]=a.env.appName)}catch(e){return Promise.reject("Failed to initialize app insights!\n"+e.message)}return t?.length&&function(e,t){e.addTelemetryProcessor((e=>(Array.isArray(e.tags)?e.tags.forEach((e=>p.TelemetryUtil.applyReplacements(e,t))):e.tags&&p.TelemetryUtil.applyReplacements(e.tags,t),e.data.baseData&&p.TelemetryUtil.applyReplacements(e.data.baseData,t),!0)))}(r,t),{logEvent:(e,t)=>{try{r?.trackEvent({name:e,properties:t?.properties,measurements:t?.measurements})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{r?.flush()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}},dispose:async()=>{r?.flush(),r=void 0}}})(e,t);p.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(r=e=>(0,d.oneDataSystemClientFactory)(e,a,{sendPOST:(e,t)=>{const n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{const r=c.request(e.urlString,n,(e=>{e.on("data",(function(n){t(e.statusCode??200,e.headers,n.toString())})),e.on("error",(function(){t(0,{})}))}));r.write(e.data,(e=>{e&&t(0,{})})),r.end()}catch{t(0,{})}}}));const i={release:s.release(),platform:s.platform(),architecture:s.arch()},l=new u.BaseTelemetrySender(e,r);if(e&&0===e.indexOf("AIF-"))throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(l,a,{additionalCommonProperties:p.TelemetryUtil.getAdditionalCommonProperties(i)})}}t.default=h},9724:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(24434),o=r(n(88514)),s=r(n(61956)),a=o.default("agent-base");function c(){const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}function l(e,t){return new l.Agent(e,t)}!function(e){class t extends i.EventEmitter{constructor(e,t){super();let n=t;"function"==typeof e?this.callback=e:e&&(n=e),this.timeout=null,n&&"number"==typeof n.timeout&&(this.timeout=n.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:c()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:c()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,n){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const n=Object.assign({},t);"boolean"!=typeof n.secureEndpoint&&(n.secureEndpoint=c()),null==n.host&&(n.host="localhost"),null==n.port&&(n.port=n.secureEndpoint?443:80),null==n.protocol&&(n.protocol=n.secureEndpoint?"https:":"http:"),n.host&&n.path&&delete n.path,delete n.agent,delete n.hostname,delete n._defaultAgent,delete n.defaultPort,delete n.createConnection,e._last=!0,e.shouldKeepAlive=!1;let r=!1,i=null;const o=n.timeout||this.timeout,l=t=>{e._hadError||(e.emit("error",t),e._hadError=!0)},u=()=>{i=null,r=!0;const e=new Error(`A "socket" was not created for HTTP request before ${o}ms`);e.code="ETIMEOUT",l(e)},p=e=>{r||(null!==i&&(clearTimeout(i),i=null),l(e))},d=t=>{if(r)return;if(null!=i&&(clearTimeout(i),i=null),o=t,Boolean(o)&&"function"==typeof o.addRequest)return a("Callback returned another Agent instance %o",t.constructor.name),void t.addRequest(e,n);var o;if(t)return t.once("free",(()=>{this.freeSocket(t,n)})),void e.onSocket(t);const s=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);l(s)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(a("Converting legacy callback function to promise"),this.promisifiedCallback=s.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof o&&o>0&&(i=setTimeout(u,o)),"port"in n&&"number"!=typeof n.port&&(n.port=Number(n.port));try{a("Resolving socket for %o request: %o",n.protocol,`${e.method} ${e.path}`),Promise.resolve(this.promisifiedCallback(e,n)).then(d,p)}catch(e){Promise.reject(e).catch(p)}}else l(new Error("`callback` is not defined"))}freeSocket(e,t){a("Freeing socket %o %o",e.constructor.name,t),e.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype}(l||(l={})),e.exports=l},61956:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){return new Promise(((r,i)=>{e.call(this,t,n,((e,t)=>{e?i(e):r(t)}))}))}}},61090:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(65645)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},65645:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,o,s=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(6585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},88514:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(61090):e.exports=n(26296)},26296:(e,t,n)=>{const r=n(52018),i=n(39023);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${r} [0m`;n[0]=o+n[0].split("\n").join("\n"+o),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(27687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{}),e.exports=n(65645)(t);const{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},46936:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScopeManager=t.OpenTelemetryScopeManagerWrapper=void 0;var i=n(13097),o=n(24434),s=function(){function e(){}return e.prototype.active=function(){var e=this,t=i.CorrelationContextManager.getCurrentContext();return r(r({},t),{getValue:function(n){return e._activeSymbol?n===e._activeSymbol&&t:(e._activeSymbol=n,t)},setValue:function(){}})},e.prototype.with=function(t,n){var r=t.parentSpanId,o=t.name,s=e._spanToContext(t,r,o);return i.CorrelationContextManager.runWithContext(s,n)()},e.prototype.bind=function(e){return"function"==typeof e?i.CorrelationContextManager.wrapCallback(e):(e instanceof o.EventEmitter&&i.CorrelationContextManager.wrapEmitter(e),e)},e.prototype.enable=function(){return i.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return i.CorrelationContextManager.disable(),this},e._spanToContext=function(e,t,n){var o=e.spanContext?e.spanContext():e.context(),s=r(r({},e.spanContext()),{traceFlags:e.spanContext().traceFlags}),a=t?"|"+o.traceId+"."+t+".":o.traceId,c=i.CorrelationContextManager.getCurrentContext();return c&&(s.traceId=c.operation.id,t||(a=c.operation.parentId)),i.CorrelationContextManager.spanToContextObject(s,a,n)},e}();t.OpenTelemetryScopeManagerWrapper=s,t.AsyncScopeManager=new s},66784:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AzureFunctionsHook=void 0;var o=n(41102),s=n(13097),a=function(){function e(e){this._client=e,this._autoGenerateIncomingRequests=!1;try{this._functionsCoreModule=n(78789);var t=this._functionsCoreModule.getProgrammingModel();"@azure/functions"===t.name&&t.version.startsWith("3.")?(this._addPreInvocationHook(),this._addPostInvocationHook()):o.warn('AzureFunctionsHook does not support model "'+t.name+'" version "'+t.version+'"')}catch(e){o.info("AzureFunctionsHook failed to load, not running in Azure Functions")}}return e.prototype.enable=function(e){this._autoGenerateIncomingRequests=e},e.prototype.dispose=function(){this.enable(!1),this._removeInvocationHooks(),this._functionsCoreModule=void 0},e.prototype._addPreInvocationHook=function(){var e=this;this._preInvocationHook||(this._preInvocationHook=this._functionsCoreModule.registerHook("preInvocation",(function(t){return r(e,void 0,void 0,(function(){var e,n;return i(this,(function(r){e=t.invocationContext;try{(n=s.CorrelationContextManager.startOperation(e))&&(n.customProperties.setProperty("InvocationId",e.invocationId),e.traceContext.attributes&&(n.customProperties.setProperty("ProcessId",e.traceContext.attributes.ProcessId),n.customProperties.setProperty("LogLevel",e.traceContext.attributes.LogLevel),n.customProperties.setProperty("Category",e.traceContext.attributes.Category),n.customProperties.setProperty("HostInstanceId",e.traceContext.attributes.HostInstanceId),n.customProperties.setProperty("AzFuncLiveLogsSessionId",e.traceContext.attributes["#AzFuncLiveLogsSessionId"])),t.functionCallback=s.CorrelationContextManager.wrapCallback(t.functionCallback,n),this._isHttpTrigger(e)&&this._autoGenerateIncomingRequests&&(t.hookData.appInsightsExtractedContext=n,t.hookData.appInsightsStartTime=Date.now()))}catch(e){return o.warn("Failed to propagate context in Azure Functions",e),[2]}return[2]}))}))})))},e.prototype._addPostInvocationHook=function(){var e=this;this._postInvocationHook||(this._postInvocationHook=this._functionsCoreModule.registerHook("postInvocation",(function(t){return r(e,void 0,void 0,(function(){var e,n,r,a,c,l=this;return i(this,(function(i){try{this._autoGenerateIncomingRequests&&(e=t.invocationContext,this._isHttpTrigger(e)&&(n=t.inputs[0])&&(r=t.hookData.appInsightsStartTime||Date.now(),a=this._getAzureFunctionResponse(t,e),(c=t.hookData.appInsightsExtractedContext)?s.CorrelationContextManager.runWithContext(c,(function(){l._createIncomingRequestTelemetry(n,a,r,c.operation.parentId)})):this._createIncomingRequestTelemetry(n,a,r,null)))}catch(e){o.warn("Error creating automatic incoming request in Azure Functions",e)}return[2]}))}))})))},e.prototype._createIncomingRequestTelemetry=function(e,t,n,r){var i=200;if(t)for(var o=0,s=[t.statusCode,t.status];o<s.length;o++){var a=s[o];if("number"==typeof a&&Number.isInteger(a)){i=a;break}if("string"==typeof a){var c=parseInt(a);if(!isNaN(c)){i=c;break}}}else i=void 0;this._client.trackRequest({name:e.method+" "+e.url,resultCode:i,success:"number"==typeof i?0<i&&i<400:void 0,url:e.url,time:new Date(n),duration:Date.now()-n,id:r}),this._client.flush()},e.prototype._getAzureFunctionResponse=function(e,t){var n=t.bindingDefinitions.find((function(e){return"out"===e.direction&&"http"===e.type.toLowerCase()}));return"$return"===(null==n?void 0:n.name)?e.result:n&&t.bindings&&void 0!==t.bindings[n.name]?t.bindings[n.name]:t.res},e.prototype._isHttpTrigger=function(e){return e.bindingDefinitions.find((function(e){var t;return"httptrigger"===(null===(t=e.type)||void 0===t?void 0:t.toLowerCase())}))},e.prototype._removeInvocationHooks=function(){this._preInvocationHook&&(this._preInvocationHook.dispose(),this._preInvocationHook=void 0),this._postInvocationHook&&(this._postInvocationHook.dispose(),this._postInvocationHook=void 0)},e}();t.AzureFunctionsHook=a},43970:(e,t,n)=>{"use strict";var r=n(59193),i=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){r.IsInitialized&&(n(14960).sS(e&&t,this._client),n(98822).sS(e,this._client),n(85581).sS(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();e.exports=i},13097:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CorrelationContextManager=void 0;var r=n(41102),i=n(59193),o=n(24782),s=n(71113),a=n(67065),c=n(66495),l=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,n,r,i,o){return t=t||e,this.enabled?{operation:{name:n,id:e,parentId:t,traceparent:i,tracestate:o},customProperties:new u(r)}:null},e.spanToContextObject=function(t,n,r){var i=new o;return i.traceId=t.traceId,i.spanId=t.spanId,i.traceFlag=o.formatOpenTelemetryTraceFlags(t.traceFlags)||o.DEFAULT_TRACE_FLAG,i.parentId=n,e.generateContextObject(i.traceId,i.parentId,r,null,i)},e.runWithContext=function(t,n){var i;if(e.enabled)try{return e.session.bind(n,((i={})[e.CONTEXT_NAME]=t,i))()}catch(e){r.warn("Error binding to session context",c.dumpObj(e))}return n()},e.wrapEmitter=function(t){if(e.enabled)try{e.session.bindEmitter(t)}catch(e){r.warn("Error binding to session context",c.dumpObj(e))}},e.wrapCallback=function(t,n){var i;if(e.enabled)try{return e.session.bind(t,n?((i={})[e.CONTEXT_NAME]=n,i):void 0)}catch(e){r.warn("Error binding to session context",c.dumpObj(e))}return t},e.enable=function(t){this.enabled||(this.isNodeVersionCompatible()?(e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,void 0===this.cls&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=n(9132):this.cls=n(19423)),e.session=this.cls.createNamespace("AI-CLS-Session"),i.registerContextPreservation((function(t){try{return e.session.bind(t)}catch(e){r.warn("Error binding to session context",c.dumpObj(e))}}))),this.enabled=!0):this.enabled=!1)},e.startOperation=function(t,n){var i=t&&t.traceContext||null,c=t&&t.spanContext?t:null,l=t&&t.traceId?t:null,u=t&&t.headers;if(c)return this.spanToContextObject(c.spanContext(),c.parentSpanId,c.name);if(l)return this.spanToContextObject(l,"|"+l.traceId+"."+l.spanId+".","string"==typeof n?n:"");var p="string"==typeof n?n:"";if(i){var d=null,h=null;if(p=i.attributes.OperationName||p,n){var f=n;f.headers&&(f.headers.traceparent?d=new o(f.headers.traceparent):f.headers["request-id"]&&(d=new o(null,f.headers["request-id"])),f.headers.tracestate&&(h=new s(f.headers.tracestate)))}d||(d=new o(i.traceparent)),h||(h=new s(i.tracestate));var v=void 0;return"object"==typeof n&&(v=(m=new a(n)).getCorrelationContextHeader(),p=m.getOperationName({})),e.generateContextObject(d.traceId,d.parentId,p,v,d,h)}if(u){d=new o(u.traceparent?u.traceparent.toString():null),h=new s(u.tracestate?u.tracestate.toString():null);var m=new a(t);return e.generateContextObject(d.traceId,d.parentId,m.getOperationName({}),m.getCorrelationContextHeader(),d,h)}return r.warn("startOperation was called with invalid arguments",arguments),null},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,r=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&n)&&r},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();t.CorrelationContextManager=l;var u=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n.key===e)return n.value}},e.prototype.setProperty=function(t,n){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(n))r.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+n);else{for(var i=0;i<this.props.length;++i){var o=this.props[i];if(o.key===t)return void(o.value=n)}this.props.push({key:t,value:n})}},e.bannedCharacters=/[,=]/,e}()},8025:e=>{"use strict";var t=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var n=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(n[0])>13||13===parseInt(n[0])&&parseInt(n[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var n=this;if(t){if(this._isInitialized=!0,!this._exceptionListenerHandle){var r=function(t,r,i){void 0===i&&(i=new Error(e._FALLBACK_ERROR_MESSAGE));var o={exception:i,contextObjects:{}};o.contextObjects.Error=i,n._client.trackException(o),n._client.flush({isAppCrashing:!0}),t&&r&&1===process.listeners(r).length&&(console.error(i),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=r.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=r.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=r.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();e.exports=t},43511:(e,t,n)=>{"use strict";var r=n(76982),i=n(70857),o=n(54804),s=n(87396),a=function(){function e(t){this._collectionInterval=9e5,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(e){var t=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval((function(){return t.trackHeartBeat(t._client.config,(function(){}))}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(e,t){var n={},a=s.sdkVersion;n.sdkVersion=a,n.osType=i.type(),n.osVersion=i.release(),this._uniqueProcessId||(this._uniqueProcessId=r.randomBytes(16).toString("hex")),n.processSessionId=this._uniqueProcessId,process.env.WEBSITE_SITE_NAME&&(n.appSrv_SiteName=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_HOME_STAMPNAME&&(n.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME),process.env.WEBSITE_HOSTNAME&&(n.appSrv_wsHost=process.env.WEBSITE_HOSTNAME),process.env.WEBSITE_OWNER_NAME&&(n.appSrv_wsOwner=process.env.WEBSITE_OWNER_NAME),process.env.WEBSITE_RESOURCE_GROUP&&(n.appSrv_ResourceGroup=process.env.WEBSITE_RESOURCE_GROUP),process.env.WEBSITE_SLOT_NAME&&(n.appSrv_SlotName=process.env.WEBSITE_SLOT_NAME),this._client.trackMetric({name:o.HeartBeatMetricName,value:0,properties:n}),t()},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();e.exports=a},4558:function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},i=n(58611),o=n(65692),s=n(41102),a=n(66495),c=n(96491),l=n(10041),u=n(13097),p=n(24782),d=n(59193),h=n(24835),f=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),d.IsInitialized&&(n(1948).sS(e,this._client),n(54747).sS(e,this._client),n(20863).sS(e,this._client),n(22222).sS(e,this._client),n(92010).sS(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=i.request,c=o.request,l=function(n,r){try{var i=!r[e.disableCollectionRequestOption]&&!n[e.alreadyAutoCollectedFlag],o=null;if(r.headers&&(o=r.headers["User-Agent"]||r.headers["user-agent"])&&-1!==o.toString().indexOf("azsdk-js")&&(i=!1),n&&r&&i&&(u.CorrelationContextManager.wrapEmitter(n),t._isEnabled))if(n[e.alreadyAutoCollectedFlag]=!0,u.CorrelationContextManager.getCurrentContext())e.trackRequest(t._client,{options:r,request:n});else{var c=null;if(h.w3cEnabled)c=(new p).traceId;else{var l=h.generateRequestId(null);c=h.getRootId(l)}var d=u.CorrelationContextManager.generateContextObject(c);u.CorrelationContextManager.runWithContext(d,(function(){e.trackRequest(t._client,{options:r,request:n})}))}}catch(e){s.warn("Failed to generate dependency telemetry.",a.dumpObj(e))}};i.request=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var s=n.call.apply(n,r([i,e],t));return l(s,e),s},o.request=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=c.call.apply(c,r([o,e],t));return l(i,e),i},i.get=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var s=(t=i.request).call.apply(t,r([i,e],n));return s.end(),s},o.get=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var s=(t=o.request).call.apply(t,r([o,e],n));return s.end(),s}},e.trackRequest=function(t,n){if(n.options&&n.request&&t){var r,i,o=new l(n.options,n.request),d=u.CorrelationContextManager.getCurrentContext();if(d&&d.operation&&d.operation.traceparent&&p.isValidTraceId(d.operation.traceparent.traceId)?(d.operation.traceparent.updateSpanId(),r=d.operation.traceparent.getBackCompatRequestId()):h.w3cEnabled?(i=(v=new p).toString(),r=v.getBackCompatRequestId()):r=d&&d.operation&&d.operation.parentId+e.requestNumber+++".",a.canIncludeCorrelationHeader(t,o.getUrl())&&n.request.getHeader&&n.request.setHeader&&t.config&&t.config.correlationId){var f=n.request.getHeader(c.requestContextHeader);try{a.safeIncludeCorrelationHeader(t,n.request,f)}catch(e){s.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(d&&d.operation)try{if(n.request.setHeader(c.requestIdHeader,r),t.config.ignoreLegacyHeaders||(n.request.setHeader(c.parentIdHeader,d.operation.id),n.request.setHeader(c.rootIdHeader,r)),i||d.operation.traceparent)n.request.setHeader(c.traceparentHeader,i||d.operation.traceparent.toString());else if(h.w3cEnabled){var v=(new p).toString();n.request.setHeader(c.traceparentHeader,v)}if(d.operation.tracestate){var m=d.operation.tracestate.toString();m&&n.request.setHeader(c.traceStateHeader,m)}var g=d.customProperties.serializeToHeader();g&&n.request.setHeader(c.correlationContextHeader,g)}catch(e){s.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}n.request.on&&(n.request.on("response",(function(e){if(!n.isProcessed){n.isProcessed=!0,o.onResponse(e);var i=o.getDependencyTelemetry(n,r);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects["http.ClientResponse"]=e,t.trackDependency(i)}})),n.request.on("error",(function(e){if(!n.isProcessed){n.isProcessed=!0,o.onError(e);var i=o.getDependencyTelemetry(n,r);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects.Error=e,t.trackDependency(i)}})),n.request.on("abort",(function(){if(!n.isProcessed){n.isProcessed=!0,o.onError(new Error("The request has been aborted and the network socket has closed."));var e=o.getDependencyTelemetry(n,r);e.contextObjects=e.contextObjects||{},e.contextObjects["http.RequestOptions"]=n.options,e.contextObjects["http.ClientRequest"]=n.request,t.trackDependency(e)}})))}else s.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!n.options,!n.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();e.exports=f},10041:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(87016),s=n(94909),a=n(66495),c=n(96491),l=n(16089),u=n(24835),p=function(e){function t(n,r){var i=e.call(this)||this;return r&&r.method&&n&&(i.method=r.method,i.url=t._getUrlFromRequestOptions(n,r),i.startTime=+new Date),i}return i(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var n=this.method.toUpperCase(),r=s.RemoteDependencyDataConstants.TYPE_HTTP,i="";try{var a=new o.URL(this.url);a.search=void 0,a.hash=void 0,n+=" "+a.pathname,i=a.hostname,a.port&&(i+=":"+a.port)}catch(e){}this.correlationId?(r=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==u.correlationIdPrefix&&(i+=" | "+this.correlationId)):r=s.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:t,name:n,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:r,target:i};if(e&&e.time?c.time=e.time:this.startTime&&(c.time=new Date(this.startTime)),e){for(var l in e)c[l]||(c[l]=e[l]);if(e.properties)for(var l in e.properties)c.properties[l]=e.properties[l]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)if(0===e.indexOf("http://")||0===e.indexOf("https://"))try{e=new o.URL(e)}catch(e){}else try{var n=new o.URL("http://"+e);e="443"===n.port?new o.URL("https://"+e):new o.URL("http://"+e)}catch(e){}else{if(e&&"function"==typeof o.URL&&e instanceof o.URL)return o.format(e);var r=e;e={},r&&Object.keys(r).forEach((function(t){e[t]=r[t]}))}if(e.path&&e.host)try{var i=new o.URL(e.path,"http://"+e.host+e.path);e.pathname=i.pathname,e.search=i.search}catch(e){}if(e.path&&e.hostname&&!e.host)try{i=new o.URL(e.path,"http://"+e.hostname+e.path),e.pathname=i.pathname,e.search=i.search}catch(e){}if(e.host&&e.port)try{!new o.URL("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host)}catch(e){}return e.protocol=e.protocol||t.agent&&t.agent.protocol||t.protocol||void 0,e.hostname=e.hostname||"localhost",o.format(e)},t}(l);e.exports=p},67065:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(87016),s=n(94909),a=n(66495),c=n(96491),l=n(16089),u=n(24835),p=n(71113),d=n(24782),h=function(e){function t(t,n){var r=e.call(this)||this;return t&&(r.method=t.method,r.url=r._getAbsoluteUrl(t),r.startTime=+new Date,r.socketRemoteAddress=t.socket&&t.socket.remoteAddress,r.parseHeaders(t,n),t.connection&&(r.connectionRemoteAddress=t.connection.remoteAddress,r.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),r}return i(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t=this.method;try{t+=" "+new o.URL(this.url).pathname}catch(e){}var n={id:this.requestId,name:t,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e&&e.time?n.time=e.time:this.startTime&&(n.time=new Date(this.startTime)),e){for(var r in e)n[r]||(n[r]=e[r]);if(e.properties)for(var r in e.properties)n.properties[r]=e.properties[r]}return n},t.prototype.getRequestTags=function(e){var n={};for(var r in e)n[r]=e[r];return n[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(e),n[t.keys.operationParentId]=this.getOperationParentId(e),n[t.keys.operationId]=this.getOperationId(e),n},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){if(e[t.keys.operationName])return e[t.keys.operationName];var n="";try{n=new o.URL(this.url).pathname}catch(e){}var r=this.method;return n&&(r+=" "+n),r},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection&&e.connection.encrypted||"https"==e.headers["x-forwarded-proto"]?"https":"http",n=t+"://"+e.headers.host+"/",r="",i="";try{var s=new o.URL(e.url,n);r=s.pathname,i=s.search}catch(e){}return o.format({protocol:t,host:e.headers.host,pathname:r,search:i})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var n=e.exec(t);if(n)return n[0]},n=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!n&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(n="127.0.0.1"),n},t.prototype._getId=function(e){var n=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(a.getCookie(e,n))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){var n=e.headers[c.traceStateHeader]?e.headers[c.traceStateHeader].toString():null,r=e.headers[c.traceparentHeader]?e.headers[c.traceparentHeader].toString():null,i=e.headers[c.requestIdHeader]?e.headers[c.requestIdHeader].toString():null,o=e.headers[c.parentIdHeader]?e.headers[c.parentIdHeader].toString():null,s=e.headers[c.rootIdHeader]?e.headers[c.rootIdHeader].toString():null;this.correlationContextHeader=e.headers[c.correlationContextHeader]?e.headers[c.correlationContextHeader].toString():null,u.w3cEnabled&&(r||n)?(this.traceparent=new d(r?r.toString():null),this.tracestate=r&&n&&new p(n?n.toString():null),this.setBackCompatFromThisTraceContext()):i?u.w3cEnabled?(this.traceparent=new d(null,i),this.setBackCompatFromThisTraceContext()):(this.parentId=i,this.requestId=u.generateRequestId(this.parentId),this.operationId=u.getRootId(this.requestId)):u.w3cEnabled?(this.traceparent=new d,this.traceparent.parentId=o,this.traceparent.legacyRootId=s||o,this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=u.generateRequestId(s||this.parentId),this.correlationContextHeader=null,this.operationId=u.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=u.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new s.ContextTagKeys,t}(l);e.exports=h},93633:(e,t,n)=>{"use strict";var r=n(58611),i=n(65692),o=n(41102),s=n(66495),a=n(96491),c=n(67065),l=n(13097),u=n(38441),p=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||u.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?l.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&l.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return l.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._registerRequest=function(t,n,r){var i=this,o=new c(t),s=this._generateCorrelationContext(o);l.CorrelationContextManager.runWithContext(s,(function(){i._isEnabled&&(t[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(i._client,{request:t,response:n},o)),"function"==typeof r&&r(t,n)}))},e.prototype._initialize=function(){if(this._isInitialized=!0,!e.HANDLER_READY){e.HANDLER_READY=!0;var t=function(t){if(t){if("function"!=typeof t)throw new Error("onRequest handler must be a function");return function(n,r){var i;l.CorrelationContextManager.wrapEmitter(n),l.CorrelationContextManager.wrapEmitter(r);var o=n&&!n[e.alreadyAutoCollectedFlag];n&&o?null===(i=e.INSTANCE)||void 0===i||i._registerRequest(n,r,t):"function"==typeof t&&t(n,r)}}},n=function(e){var n=e.addListener.bind(e);e.addListener=function(e,r){switch(e){case"request":case"checkContinue":return n(e,t(r));default:return n(e,r)}},e.on=e.addListener},o=r.createServer;r.createServer=function(e,r){if(r&&"function"==typeof r){var i=o(e,t(r));return n(i),i}return i=o(t(e)),n(i),i};var s=i.createServer;i.createServer=function(e,r){var i=s(e,t(r));return n(i),i}}},e.trackRequestSync=function(t,n){if(n.request&&n.response&&t){n.isProcessed=!1,e.addResponseCorrelationIdHeader(t,n.response);var r=l.CorrelationContextManager.getCurrentContext(),i=new c(n.request,r&&r.operation.parentId);r&&(r.operation.id=i.getOperationId(t.context.tags)||r.operation.id,r.operation.name=i.getOperationName(t.context.tags)||r.operation.name,r.operation.parentId=i.getRequestId()||r.operation.parentId,r.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,n,n.duration,n.error)}else o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!n.request,!n.response,!t)},e.trackRequest=function(t,n,r){if(n.request&&n.response&&t){n.isProcessed=!1;var i=l.CorrelationContextManager.getCurrentContext(),a=r||new c(n.request,i&&i.operation.parentId);s.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,n.response),i&&!r&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),n.response.once&&n.response.once("finish",(function(){e.endRequest(t,a,n,null,null)})),n.request.on&&n.request.on("error",(function(r){e.endRequest(t,a,n,null,r)})),n.request.on&&n.request.on("aborted",(function(){e.endRequest(t,a,n,null,"The request has been aborted and the network socket has closed.")}))}else o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!n.request,!n.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var n=t.getHeader(a.requestContextHeader);s.safeIncludeCorrelationHeader(e,t,n)}},e.endRequest=function(e,t,n,r,i){if(!n.isProcessed){n.isProcessed=!0,i?t.onError(i,r):t.onResponse(n.response,r);var o=t.getRequestTelemetry(n);if(o.tagOverrides=t.getRequestTags(e.context.tags),n.tagOverrides)for(var s in n.tagOverrides)o.tagOverrides[s]=n.tagOverrides[s];var a=t.getLegacyRootId();a&&(o.properties.ai_legacyRootId=a),o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=n.request,o.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(o)}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,l.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.HANDLER_READY=!1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();e.exports=p},30460:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCollectNativePerformance=void 0;var i=n(87396),o=n(41102),s=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t,r,i){var s=this;if(void 0===r&&(r={}),void 0===i&&(i=6e4),null==e._metricsAvailable&&t&&!this._isInitialized)try{var a=n(5827);e._emitter=new a,e._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch(t){return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,i),this._handle||(this._handle=setInterval((function(){return s._trackNativeMetrics()}),i),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e,t){var n=t.disableAllExtendedMetrics,i=t.extendedMetricDisablers;if(n)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,c=o;a<c.length;a++)s[c[a]]=!0;return"object"==typeof e?{isEnabled:!0,disabledMetrics:r(r({},e),s)}:{isEnabled:e,disabledMetrics:s}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var n=e._emitter.getGCData();for(var r in n){var o=n[r].metrics,s=r+" Garbage Collection Duration",a=Math.sqrt(o.sumSquares/o.count-Math.pow(o.total/o.count,2))||0;this._client.trackMetric({name:s,value:o.total,count:o.count,max:o.max,min:o.min,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var n=e._emitter.getLoopData().loopUsage;if(0!=n.count){var r=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:n.total,count:n.count,min:n.min,max:n.max,stdDev:r,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var e,t,n;if(!this._disabledMetrics.heap){var r=process.memoryUsage(),o=r.heapUsed,s=r.heapTotal,a=r.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,n)})}},e}();t.AutoCollectNativePerformance=s},14166:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkStatsbeat=void 0;t.NetworkStatsbeat=function(e,t){this.endpoint=e,this.host=t,this.totalRequestCount=0,this.totalSuccesfulRequestCount=0,this.totalFailedRequestCount=[],this.retryCount=[],this.exceptionCount=[],this.throttleCount=[],this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0}},38441:(e,t,n)=>{"use strict";var r=n(70857),i=n(54804),o=function(){function e(t,n,r){void 0===n&&(n=6e4),void 0===r&&(r=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._lastRequests={totalRequestCount:0,totalFailedRequestCount:0,time:0},this._lastDependencies={totalDependencyCount:0,totalFailedDependencyCount:0,time:0},this._lastExceptions={totalExceptionCount:0,time:0},this._isInitialized=!1,this._client=t,this._collectionInterval=n,this._enableLiveMetricsCounters=r}return e.prototype.enable=function(t,n){var i=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=n||this._collectionInterval,this._handle=setInterval((function(){return i.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,n){var r;if(e.isEnabled()){if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}e._intervalRequestExecutionTime+=r,!1===n&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,n){var r;if(e.isEnabled()){if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}e._intervalDependencyExecutionTime+=r,!1===n&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=r.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,n=0,o=0,s=0,a=0,c=0;e&&c<e.length;c++){var l=e[c],u=this._lastCpus[c],p=(l.model,l.speed,l.times),d=u.times;t+=p.user-d.user||0,n+=p.sys-d.sys||0,o+=p.nice-d.nice||0,s+=p.idle-d.idle||0,a+=p.irq-d.irq||0}var h=void 0;if("function"==typeof process.cpuUsage){var f=process.cpuUsage(),v=process.hrtime(),m=f.user-this._lastAppCpuUsage.user+(f.system-this._lastAppCpuUsage.system)||0;void 0!==this._lastHrtime&&2===this._lastHrtime.length&&(h=100*m/((1e6*(v[0]-this._lastHrtime[0])+(v[1]-this._lastHrtime[1])/1e3||0)*e.length)),this._lastAppCpuUsage=f,this._lastHrtime=v}var g=t+n+o+s+a||1;this._client.trackMetric({name:i.PerformanceCounter.PROCESSOR_TIME,value:(g-s)/g*100}),this._client.trackMetric({name:i.PerformanceCounter.PROCESS_TIME,value:h||t/g*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=r.freemem(),t=process.memoryUsage().rss,n=r.totalmem()-e;this._client.trackMetric({name:i.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:i.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.COMMITTED_BYTES,value:n})},e.prototype._trackNetwork=function(){var t=this._lastRequests,n={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},r=n.totalRequestCount-t.totalRequestCount||0,o=n.totalFailedRequestCount-t.totalFailedRequestCount||0,s=n.time-t.time,a=s/1e3,c=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/r||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,s>0){var l=r/a,u=o/a;this._client.trackMetric({name:i.PerformanceCounter.REQUEST_RATE,value:l}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:i.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=n},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,n={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},r=n.totalDependencyCount-t.totalDependencyCount||0,o=n.totalFailedDependencyCount-t.totalFailedDependencyCount||0,s=n.time-t.time,a=s/1e3,c=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/r||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,s>0){var l=r/a,u=o/a;this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_RATE,value:l}),this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=n}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,n={totalExceptionCount:e._totalExceptionCount,time:+new Date},r=n.totalExceptionCount-t.totalExceptionCount||0,o=n.time-t.time;if(o>0){var s=r/(o/1e3);this._client.trackMetric({name:i.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=n}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();e.exports=o},85534:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=n(54804),o=n(2391),s=n(45311),a=function(){function e(t,n){void 0===n&&(n=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=n}return e.prototype.enable=function(e,t){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=t||this._collectionInterval,this._handle=setInterval((function(){return n.trackPreAggregatedMetrics()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._exceptionCountersCollection).totalCount++},e.countTrace=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._traceCountersCollection).totalCount++},e.countRequest=function(t,n){if(e.isEnabled()){var r,i=e._getAggregatedCounter(n,this._requestCountersCollection);if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}i.intervalExecutionTime+=r,i.totalCount++}},e.countDependency=function(t,n){if(e.isEnabled()){var r,i=e._getAggregatedCounter(n,this._dependencyCountersCollection);if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}i.intervalExecutionTime+=r,i.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(e,t){for(var n=!1,r=0;r<t.length;r++){if(e===t[r].dimensions)return t[r];if(Object.keys(e).length===Object.keys(t[r].dimensions).length){for(var i in e)if(e[i]!=t[r].dimensions[i]){n=!0;break}if(!n)return t[r];n=!1}}var s=new o.AggregatedMetricCounter(e);return t.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var n=e._requestCountersCollection[t];n.time=+new Date;var r=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime,s=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/r||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,o>0&&r>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:n.dimensions,value:s,count:r,aggregationInterval:o,metricType:i.MetricId.REQUESTS_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var n=e._dependencyCountersCollection[t];n.time=+new Date;var r=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime,s=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/r||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,o>0&&r>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:n.dimensions,value:s,count:r,aggregationInterval:o,metricType:i.MetricId.DEPENDENCIES_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var n=e._exceptionCountersCollection[t];n.time=+new Date;var r=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime;o>0&&r>0&&this._trackPreAggregatedMetric({name:"Exceptions",dimensions:n.dimensions,value:r,count:r,aggregationInterval:o,metricType:i.MetricId.EXCEPTIONS_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var n=e._traceCountersCollection[t];n.time=+new Date;var r=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime;o>0&&r>0&&this._trackPreAggregatedMetric({name:"Traces",dimensions:n.dimensions,value:r,count:r,aggregationInterval:o,metricType:i.MetricId.TRACES_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackPreAggregatedMetric=function(e){var t={};for(var n in e.dimensions)t[s.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];t=r(r({},t),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:e.name,value:e.value,count:e.count,properties:t,kind:"Aggregation"};this._client.trackMetric(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();e.exports=a},16089:e=>{"use strict";var t=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var r=this.properties||{};if(t)if("string"==typeof t)r.error=t;else if(t instanceof Error)r.error=t.message;else if("object"==typeof t)for(var i in t)r[i]=t[i]&&t[i].toString&&t[i].toString();this.properties=r},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();e.exports=t},35884:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=n(70857),a=n(43273),c=n(41102),l=n(43790),u=n(54804),p=n(94909),d=n(49820),h=n(181),f=n(87396),v=n(14166),m=n(66495),g=function(){function e(e,t){this._attach=u.StatsbeatAttach.sdk,this._feature=u.StatsbeatFeature.NONE,this._instrumentation=u.StatsbeatInstrumentation.NONE,this._isInitialized=!1,this._statbeatMetrics=[],this._networkStatsbeatCollection=[],this._config=e,this._context=t||new f;var n=this._getConnectionString(e);this._statsbeatConfig=new h(n),this._statsbeatConfig.samplingPercentage=100,this._sender=new l(this._statsbeatConfig,null,null,null,null,!0,this._shutdownStatsbeat.bind(this))}return e.prototype.enable=function(t){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._getCustomProperties(),this._isInitialized=!0),t?(this._handle||(this._handle=setInterval((function(){n.trackShortIntervalStatsbeats()}),e.STATS_COLLECTION_SHORT_INTERVAL),this._handle.unref()),this._longHandle||(this.trackLongIntervalStatsbeats(),this._longHandle=setInterval((function(){n.trackLongIntervalStatsbeats()}),e.STATS_COLLECTION_LONG_INTERVAL),this._longHandle.unref())):(this._handle&&(clearInterval(this._handle),this._handle=null),this._longHandle&&(clearInterval(this._longHandle),this._longHandle=null))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isEnabled=function(){return this._isEnabled},e.prototype.setCodelessAttach=function(){this._attach=u.StatsbeatAttach.codeless},e.prototype.addFeature=function(e){this._feature|=e},e.prototype.removeFeature=function(e){this._feature&=~e},e.prototype.addInstrumentation=function(e){this._instrumentation|=e},e.prototype.removeInstrumentation=function(e){this._instrumentation&=~e},e.prototype.countRequest=function(e,t,n,r,i){if(this.isEnabled()){var o=this._getNetworkStatsbeatCounter(e,t);if(o.totalRequestCount++,o.intervalRequestExecutionTime+=n,!1===r){if(!i)return;var s=o.totalFailedRequestCount.find((function(e){return i===e.statusCode}));s?s.count++:o.totalFailedRequestCount.push({statusCode:i,count:1})}else o.totalSuccesfulRequestCount++}},e.prototype.countException=function(e,t,n){if(this.isEnabled()){var r=this._getNetworkStatsbeatCounter(e,t),i=r.exceptionCount.find((function(e){return n.name===e.exceptionType}));i?i.count++:r.exceptionCount.push({exceptionType:n.name,count:1})}},e.prototype.countThrottle=function(e,t,n){if(this.isEnabled()){var r=this._getNetworkStatsbeatCounter(e,t),i=r.throttleCount.find((function(e){return n===e.statusCode}));i?i.count++:r.throttleCount.push({statusCode:n,count:1})}},e.prototype.countRetry=function(e,t,n){if(this.isEnabled()){var r=this._getNetworkStatsbeatCounter(e,t),i=r.retryCount.find((function(e){return n===e.statusCode}));i?i.count++:r.retryCount.push({statusCode:n,count:1})}},e.prototype.trackShortIntervalStatsbeats=function(){return i(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return r.sent(),t={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},this._trackRequestDuration(t),this._trackRequestsCount(t),[4,this._sendStatsbeats()];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),c.info(e.TAG,"Failed to send Statsbeat metrics: "+m.dumpObj(n)),[3,4];case 4:return[2]}}))}))},e.prototype.trackLongIntervalStatsbeats=function(){return i(this,void 0,void 0,(function(){var t,n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return o.sent(),t={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},n=Object.assign({rpId:this._resourceIdentifier},t),this._statbeatMetrics.push({name:u.StatsbeatCounter.ATTACH,value:1,properties:n}),this._instrumentation!=u.StatsbeatInstrumentation.NONE&&(r=Object.assign({feature:this._instrumentation,type:u.StatsbeatFeatureType.Instrumentation},t),this._statbeatMetrics.push({name:u.StatsbeatCounter.FEATURE,value:1,properties:r})),this._feature!=u.StatsbeatFeature.NONE&&(i=Object.assign({feature:this._feature,type:u.StatsbeatFeatureType.Feature},t),this._statbeatMetrics.push({name:u.StatsbeatCounter.FEATURE,value:1,properties:i})),[4,this._sendStatsbeats()];case 2:return o.sent(),[3,4];case 3:return s=o.sent(),c.info(e.TAG,"Failed to send Statsbeat metrics: "+m.dumpObj(s)),[3,4];case 4:return[2]}}))}))},e.prototype._getNetworkStatsbeatCounter=function(e,t){for(var n=this._getShortHost(t),r=0;r<this._networkStatsbeatCollection.length;r++)if(e===this._networkStatsbeatCollection[r].endpoint&&n===this._networkStatsbeatCollection[r].host)return this._networkStatsbeatCollection[r];var i=new v.NetworkStatsbeat(e,n);return this._networkStatsbeatCollection.push(i),i},e.prototype._trackRequestDuration=function(e){for(var t=0;t<this._networkStatsbeatCollection.length;t++){var n=this._networkStatsbeatCollection[t];n.time=+new Date;var r=n.totalRequestCount-n.lastRequestCount||0,i=n.intervalRequestExecutionTime-n.lastIntervalRequestExecutionTime,o=i>0&&i/r||0;if(n.lastIntervalRequestExecutionTime=n.intervalRequestExecutionTime,r>0){var s=Object.assign({endpoint:this._networkStatsbeatCollection[t].endpoint,host:this._networkStatsbeatCollection[t].host},e);this._statbeatMetrics.push({name:u.StatsbeatCounter.REQUEST_DURATION,value:o,properties:s})}n.lastRequestCount=n.totalRequestCount,n.lastTime=n.time}},e.prototype._getShortHost=function(e){var t=e;try{var n=new RegExp(/^https?:\/\/(?:www\.)?([^\/.-]+)/).exec(e);null!=n&&n.length>1&&(t=n[1]),t=t.replace(".in.applicationinsights.azure.com","")}catch(e){}return t},e.prototype._trackRequestsCount=function(e){for(var t,n=this,i=function(i){t=o._networkStatsbeatCollection[i];var s=Object.assign({endpoint:t.endpoint,host:t.host},e);t.totalSuccesfulRequestCount>0&&(o._statbeatMetrics.push({name:u.StatsbeatCounter.REQUEST_SUCCESS,value:t.totalSuccesfulRequestCount,properties:s}),t.totalSuccesfulRequestCount=0),t.totalFailedRequestCount.length>0&&(t.totalFailedRequestCount.forEach((function(e){s=Object.assign(r(r({},s),{statusCode:e.statusCode})),n._statbeatMetrics.push({name:u.StatsbeatCounter.REQUEST_FAILURE,value:e.count,properties:s})})),t.totalFailedRequestCount=[]),t.retryCount.length>0&&(t.retryCount.forEach((function(e){s=Object.assign(r(r({},s),{statusCode:e.statusCode})),n._statbeatMetrics.push({name:u.StatsbeatCounter.RETRY_COUNT,value:e.count,properties:s})})),t.retryCount=[]),t.throttleCount.length>0&&(t.throttleCount.forEach((function(e){s=Object.assign(r(r({},s),{statusCode:e.statusCode})),n._statbeatMetrics.push({name:u.StatsbeatCounter.THROTTLE_COUNT,value:e.count,properties:s})})),t.throttleCount=[]),t.exceptionCount.length>0&&(t.exceptionCount.forEach((function(e){s=Object.assign(r(r({},s),{exceptionType:e.exceptionType})),n._statbeatMetrics.push({name:u.StatsbeatCounter.EXCEPTION_COUNT,value:e.count,properties:s})})),t.exceptionCount=[])},o=this,s=0;s<this._networkStatsbeatCollection.length;s++)i(s)},e.prototype._sendStatsbeats=function(){return i(this,void 0,void 0,(function(){var e,t,n,r;return o(this,(function(i){switch(i.label){case 0:for(e=[],t=0;t<this._statbeatMetrics.length;t++)n={name:this._statbeatMetrics[t].name,value:this._statbeatMetrics[t].value,properties:this._statbeatMetrics[t].properties},(r=a.createEnvelope(n,p.TelemetryType.Metric,null,this._context,this._statsbeatConfig)).name=u.StatsbeatTelemetryName,e.push(r);return this._statbeatMetrics=[],[4,this._sender.send(e)];case 1:return i.sent(),[2]}}))}))},e.prototype._getCustomProperties=function(){this._language="node",this._cikey=this._config.instrumentationKey,this._sdkVersion=f.sdkVersion,this._os=s.type(),this._runtimeVersion=process.version},e.prototype._getResourceProvider=function(){var e=this;return new Promise((function(t,n){var r=!1;e._resourceProvider=u.StatsbeatResourceProvider.unknown,e._resourceIdentifier=u.StatsbeatResourceProvider.unknown,process.env.WEBSITE_SITE_NAME?(e._resourceProvider=u.StatsbeatResourceProvider.appsvc,e._resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(e._resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(e._resourceProvider=u.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(e._resourceIdentifier=process.env.WEBSITE_HOSTNAME)):e._config&&(void 0===e._isVM||1==e._isVM?(r=!0,d.AzureVirtualMachine.getAzureComputeMetadata(e._config,(function(n){e._isVM=n.isVM,e._isVM&&(e._resourceProvider=u.StatsbeatResourceProvider.vm,e._resourceIdentifier=n.id+"/"+n.subscriptionId,n.osType&&(e._os=n.osType)),t()}))):e._resourceProvider=u.StatsbeatResourceProvider.unknown),r||t()}))},e.prototype._shutdownStatsbeat=function(){this.enable(!1)},e.prototype._getConnectionString=function(t){for(var n=t.endpointUrl,r=["westeurope","northeurope","francecentral","francesouth","germanywestcentral","norwayeast","norwaywest","swedencentral","switzerlandnorth","switzerlandwest","uksouth","ukwest"],i=0;i<r.length;i++)if(n.indexOf(r[i])>-1)return e.EU_CONNECTION_STRING;return e.NON_EU_CONNECTION_STRING},e.NON_EU_CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com",e.EU_CONNECTION_STRING="InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com",e.STATS_COLLECTION_SHORT_INTERVAL=9e5,e.STATS_COLLECTION_LONG_INTERVAL=864e5,e.TAG="Statsbeat",e}();e.exports=g},41860:(e,t,n)=>{"use strict";var r=n(58611),i=n(65692),o=n(43106),s=n(41102),a=n(44989),c=n(5655),l=n(54804),u=n(89397),p=n(5135),d=function(){function e(t){var n;if(this._isIkeyValid=!0,e.INSTANCE)throw new Error("Web snippet injection should be configured from the applicationInsights object");e.INSTANCE=this,e._aiUrl=l.WEB_INSTRUMENTATION_DEFAULT_SOURCE,e._aiDeprecatedUrl=l.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;var r=this._getWebSnippetIkey(null===(n=t.config)||void 0===n?void 0:n.webInstrumentationConnectionString);this._webInstrumentationIkey=r||t.config.instrumentationKey,this._clientWebInstrumentationConfig=t.config.webInstrumentationConfig,this._clientWebInstrumentationSrc=t.config.webInstrumentationSrc,this._statsbeat=t.getStatsbeat()}return e.prototype.enable=function(t,n){this._isEnabled=t,this._webInstrumentationIkey=this._getWebSnippetIkey(n)||this._webInstrumentationIkey,e._snippet=this._getWebInstrumentationReplacedStr(),this._isEnabled&&!this._isInitialized&&this._isIkeyValid?(this._statsbeat&&this._statsbeat.addFeature(l.StatsbeatFeature.WEB_SNIPPET),this._initialize()):this._isEnabled||this._statsbeat&&this._statsbeat.removeFeature(l.StatsbeatFeature.WEB_SNIPPET)},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._getWebSnippetIkey=function(e){var t=null;try{var n=u.parse(e).instrumentationkey||"";u.isIkeyValid(n)?(this._isIkeyValid=!0,t=n):(this._isIkeyValid=!1,s.info("Invalid web Instrumentation connection string, web Instrumentation is not enabled."))}catch(e){s.info("get web snippet ikey error: "+e)}return t},e.prototype._getWebInstrumentationReplacedStr=function(){var e=this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig),t=c.getOsPrefix(),n=c.getResourceProvider(),r=this._webInstrumentationIkey+'",\r\n'+e+' disableIkeyDeprecationMessage: true,\r\n sdkExtension: "'+n+t+"d_n_",i=p.webSnippet.replace("INSTRUMENTATION_KEY",r);return this._clientWebInstrumentationSrc?i.replace(l.WEB_INSTRUMENTATION_DEFAULT_SOURCE+".2.min.js",this._clientWebInstrumentationSrc):i},e.prototype._getClientWebInstrumentationConfigStr=function(e){var t="";try{null!=e&&e.length>0&&e.forEach((function(e){var n=e.name;if(void 0!==n){var r=e.value;switch(typeof r){case"function":case"object":break;case"string":t+=" "+n+': "'+r+'",\r\n';break;default:t+=" "+n+": "+r+",\r\n"}}}))}catch(e){this._isEnabled=!1,s.info("Parse client web instrumentation error. Web Instrumentation is disabled")}return t},e.prototype._initialize=function(){this._isInitialized=!0;var t=r.createServer,n=i.createServer,o=this._isEnabled;r.createServer=function(n){var r=n;return r&&(n=function(t,n){var i=n.write,c="GET"==t.method;n.write=function(t,r,l){try{if(o&&c){var u=a.getContentEncodingFromHeaders(n),p=void 0;if("string"==typeof r&&(p=r),null==u)e.INSTANCE.ValidateInjection(n,t)&&(arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,void 0,p));else if(u.length){var d=u[0];arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,d)}}}catch(e){s.warn("Inject snippet error: "+e)}return i.apply(n,arguments)};var l=n.end;return n.end=function(t,r,i){if(o&&c)try{if(o&&c){var u=a.getContentEncodingFromHeaders(n),p=void 0;if("string"==typeof r&&(p=r),null==u)e.INSTANCE.ValidateInjection(n,t)&&(arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,void 0,p));else if(u.length){var d=u[0];arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,d)}}}catch(e){s.warn("Inject snipet error: "+e)}return l.apply(n,arguments)},r(t,n)}),t(n)},i.createServer=function(t,r){var i=r;if(i)return r=function(t,n){var r="GET"==t.method,c=n.write,l=n.end;return n.write=function(t,i,l){try{if(o&&r){var u=a.getContentEncodingFromHeaders(n),p=void 0;if("string"==typeof i&&(p=i),null==u)e.INSTANCE.ValidateInjection(n,t)&&(arguments[0]=this.InjectWebSnippet(n,t,void 0,p));else if(u.length){var d=u[0];arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,d)}}}catch(e){s.warn("Inject snippet error: "+e)}return c.apply(n,arguments)},n.end=function(t,i,c){try{if(o&&r){var u=a.getContentEncodingFromHeaders(n),p=void 0;if("string"==typeof i&&(p=i),null==u)e.INSTANCE.ValidateInjection(n,t)&&(arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,void 0,p));else if(u.length){var d=u[0];arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,d)}}}catch(e){s.warn("Inject snippet error: "+e)}return l.apply(n,arguments)},i(t,n)},n(t,r)}},e.prototype.ValidateInjection=function(t,n){try{if(!t||!n||200!=t.statusCode)return!1;if(!a.isContentTypeHeaderHtml(t))return!1;var r=n.slice().toString();if(r.indexOf("<head>")>=0&&r.indexOf("</head>")>=0&&r.indexOf(e._aiUrl)<0&&r.indexOf(e._aiDeprecatedUrl)<0)return!0}catch(e){s.info("validate injections error: "+e)}return!1},e.prototype.InjectWebSnippet=function(t,n,r,i){try{if(r)t.removeHeader("Content-Length"),n=this._getInjectedCompressBuffer(t,n,r),t.setHeader("Content-Length",n.length);else{var o=n.toString(),c=o.indexOf("</head>");if(c<0)return n;var l=a.insertSnippetByIndex(c,o,e._snippet);if("string"==typeof n)t.removeHeader("Content-Length"),n=l,t.setHeader("Content-Length",Buffer.byteLength(n));else if(Buffer.isBuffer(n)){var u=i||"utf8";if(a.isBufferType(n,u)){t.removeHeader("Content-Length");var p=Buffer.from(l).toString(u);n=Buffer.from(p,u),t.setHeader("Content-Length",n.length)}}}}catch(e){s.warn("Failed to inject web snippet and change content-lenght headers. Exception:"+e)}return n},e.prototype._getInjectedCompressBuffer=function(e,t,n){try{switch(n){case a.contentEncodingMethod.GZIP:var r=o.gunzipSync(t);if(this.ValidateInjection(e,r)){var i=this.InjectWebSnippet(e,r);t=o.gzipSync(i)}break;case a.contentEncodingMethod.DEFLATE:var c=o.inflateSync(t);if(this.ValidateInjection(e,c)){var l=this.InjectWebSnippet(e,c);t=o.deflateSync(l)}break;case a.contentEncodingMethod.BR:var u=a.getBrotliDecompressSync(o),p=a.getBrotliCompressSync(o);if(u&&p){var d=u(t);this.ValidateInjection(e,d)&&(t=p(this.InjectWebSnippet(e,d)));break}}}catch(e){s.info("get web injection compress buffer error: "+e)}return t},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();e.exports=d},20922:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseEventHubSpan=void 0;var i=n(39104),o=n(76492),s=n(74813),a=n(54804);t.parseEventHubSpan=function(e,t){var n,c=e.attributes[a.AzNamespace],l=(e.attributes[s.SemanticAttributes.NET_PEER_NAME]||e.attributes["peer.address"]||"unknown").replace(/\/$/g,""),u=e.attributes[a.MessageBusDestination]||"unknown";switch(e.kind){case i.SpanKind.CLIENT:t.dependencyTypeName=c,t.target=l+"/"+u;break;case i.SpanKind.PRODUCER:t.dependencyTypeName=a.DependencyTypeName.QueueMessage+" | "+c,t.target=l+"/"+u;break;case i.SpanKind.CONSUMER:t.source=l+"/"+u,t.measurements=r(r({},t.measurements),((n={})[a.TIME_SINCE_ENQUEUED]=function(e){var t=0,n=0,r=o.hrTimeToMilliseconds(e.startTime);return e.links.forEach((function(e){var i=e.attributes,o=null==i?void 0:i[a.ENQUEUED_TIME];o&&(t+=1,n+=r-(parseFloat(o.toString())||0))})),Math.max(n/(t||1),0)}(e),n))}}},46862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spanToTelemetryContract=void 0;var r=n(87016),i=n(39104),o=n(74813),s=n(54804),a=n(20922),c=n(66495);function l(e){if(e.attributes[o.SemanticAttributes.HTTP_METHOD]){var t=e.attributes[o.SemanticAttributes.HTTP_URL];if(t)return String(t);var n=e.attributes[o.SemanticAttributes.HTTP_SCHEME],r=e.attributes[o.SemanticAttributes.HTTP_TARGET];if(n&&r){var i=e.attributes[o.SemanticAttributes.HTTP_HOST];if(i)return n+"://"+i+r;var s=e.attributes[o.SemanticAttributes.NET_PEER_PORT];if(s){var a=e.attributes[o.SemanticAttributes.NET_PEER_NAME];if(a)return n+"://"+a+":"+s+r;var c=e.attributes[o.SemanticAttributes.NET_PEER_IP];if(c)return n+"://"+c+":"+s+r}}}return""}function u(e){var t=e.attributes[o.SemanticAttributes.PEER_SERVICE],n=e.attributes[o.SemanticAttributes.HTTP_HOST],r=e.attributes[o.SemanticAttributes.HTTP_URL],i=e.attributes[o.SemanticAttributes.NET_PEER_NAME],s=e.attributes[o.SemanticAttributes.NET_PEER_IP];return t?String(t):n?String(n):r?String(r):i?String(i):s?String(s):""}t.spanToTelemetryContract=function(e){var t;switch(e.kind){case i.SpanKind.CLIENT:case i.SpanKind.PRODUCER:case i.SpanKind.INTERNAL:t=function(e){var t={name:e.name,success:e.status.code!=i.SpanStatusCode.ERROR,resultCode:"0",duration:0,data:"",dependencyTypeName:""};e.kind===i.SpanKind.PRODUCER&&(t.dependencyTypeName=s.DependencyTypeName.QueueMessage),e.kind===i.SpanKind.INTERNAL&&e.parentSpanId&&(t.dependencyTypeName=s.DependencyTypeName.InProc);var n=e.attributes[o.SemanticAttributes.HTTP_METHOD],a=e.attributes[o.SemanticAttributes.DB_SYSTEM],c=e.attributes[o.SemanticAttributes.RPC_SYSTEM];if(n){t.dependencyTypeName=s.DependencyTypeName.Http;var p=e.attributes[o.SemanticAttributes.HTTP_URL];if(p){var d="";try{d=new r.URL(String(p)).pathname}catch(e){}t.name=n+" "+d}t.data=l(e);var h=e.attributes[o.SemanticAttributes.HTTP_STATUS_CODE];if(h&&(t.resultCode=String(h)),b=u(e)){try{var f=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/).exec(b);if(null!=f){var v=f[1],m=f[3];("https"==v&&":443"==m||"http"==v&&":80"==m)&&(b=f[1]+f[2]+f[4])}}catch(e){}t.target=""+b}}else if(a){String(a)===o.DbSystemValues.MYSQL?t.dependencyTypeName="mysql":String(a)===o.DbSystemValues.POSTGRESQL?t.dependencyTypeName="postgresql":String(a)===o.DbSystemValues.MONGODB?t.dependencyTypeName="mongodb":String(a)===o.DbSystemValues.REDIS?t.dependencyTypeName="redis":function(e){return e===o.DbSystemValues.DB2||e===o.DbSystemValues.DERBY||e===o.DbSystemValues.MARIADB||e===o.DbSystemValues.MSSQL||e===o.DbSystemValues.ORACLE||e===o.DbSystemValues.SQLITE||e===o.DbSystemValues.OTHER_SQL||e===o.DbSystemValues.HSQLDB||e===o.DbSystemValues.H2}(String(a))?t.dependencyTypeName="SQL":t.dependencyTypeName=String(a);var g=e.attributes[o.SemanticAttributes.DB_STATEMENT],y=e.attributes[o.SemanticAttributes.DB_OPERATION];g?t.data=String(g):y&&(t.data=String(y));var b=u(e),_=e.attributes[o.SemanticAttributes.DB_NAME];t.target=b?_?b+"|"+_:""+b:_?""+_:""+a}else if(c){t.dependencyTypeName=s.DependencyTypeName.Grpc;var E=e.attributes[o.SemanticAttributes.RPC_GRPC_STATUS_CODE];E&&(t.resultCode=String(E)),(b=u(e))?t.target=""+b:c&&(t.target=String(c))}return t}(e);break;case i.SpanKind.SERVER:case i.SpanKind.CONSUMER:t=function(e){var t={name:e.name,success:e.status.code!=i.SpanStatusCode.ERROR,resultCode:"0",duration:0,url:"",source:void 0},n=e.attributes[o.SemanticAttributes.HTTP_METHOD],s=e.attributes[o.SemanticAttributes.RPC_GRPC_STATUS_CODE];if(n){if(e.kind==i.SpanKind.SERVER){var a=e.attributes[o.SemanticAttributes.HTTP_ROUTE],c=e.attributes[o.SemanticAttributes.HTTP_URL];if(a)t.name=n+" "+a;else if(c)try{var u=new r.URL(String(c));t.name=n+" "+u.pathname}catch(e){}}t.url=l(e);var p=e.attributes[o.SemanticAttributes.HTTP_STATUS_CODE];p&&(t.resultCode=String(p))}else s&&(t.resultCode=String(s));return t}(e)}var n=""+(e.spanContext?e.spanContext():e.context()).spanId,p=Math.round(1e3*e.duration[0]+e.duration[1]/1e6);return t.id=n,t.duration=p,t.properties=function(e){for(var t={},n=0,r=Object.keys(e.attributes);n<r.length;n++){var i=r[n];i.startsWith("http.")||i.startsWith("rpc.")||i.startsWith("db.")||i.startsWith("peer.")||i.startsWith("net.")||(t[i]=e.attributes[i])}var o=e.links.map((function(e){return{operation_Id:e.context.traceId,id:e.context.spanId}}));return o.length>0&&(t["_MS.links"]=c.stringify(o)),t}(e),e.attributes[s.AzNamespace]&&(e.kind===i.SpanKind.INTERNAL&&(t.dependencyTypeName=s.DependencyTypeName.InProc+" | "+e.attributes[s.AzNamespace]),e.attributes[s.AzNamespace]===s.MicrosoftEventHub&&a.parseEventHubSpan(e,t)),t}},1948:(e,t,n)=>{"use strict";t.sS=t.v_=void 0;var r=n(39104),i=n(54804),o=n(18579),s=n(46862),a=n(46936),c=[];t.v_=function(e){try{var t=e.data,n=s.spanToTelemetryContract(t);a.AsyncScopeManager.with(t,(function(){c.forEach((function(e){t.kind===r.SpanKind.SERVER||t.kind===r.SpanKind.CONSUMER?e.trackRequest(n):t.kind!==r.SpanKind.CLIENT&&t.kind!==r.SpanKind.INTERNAL&&t.kind!==r.SpanKind.PRODUCER||e.trackDependency(n)}))}))}catch(e){}},t.sS=function(e,n){if(e){if(c.find((function(e){return e==n})))return;0===c.length&&o.channel.subscribe("azure-coretracing",t.v_,o.trueFilter,(function(e,t){var r=n.getStatsbeat();r&&r.addInstrumentation(i.StatsbeatInstrumentation.AZURE_CORE_TRACING)})),c.push(n)}else 0===(c=c.filter((function(e){return e!=n}))).length&&o.channel.unsubscribe("azure-coretracing",t.v_)}},98822:(e,t,n)=>{"use strict";t.sS=void 0;var r=n(94909),i=n(54804),o=n(18579),s=[],a={10:r.SeverityLevel.Verbose,20:r.SeverityLevel.Verbose,30:r.SeverityLevel.Information,40:r.SeverityLevel.Warning,50:r.SeverityLevel.Error,60:r.SeverityLevel.Critical},c=function(e){var t=e.data.result,n=a[e.data.level];s.forEach((function(e){try{var r=JSON.parse(t);if(r.err){var i=new Error(r.err.message);return i.name=r.err.name,i.stack=r.err.stack,e.config.enableLoggerErrorToTrace?void e.trackTrace({message:t,severity:n}):void e.trackException({exception:i})}}catch(e){}e.trackTrace({message:t,severity:n})}))};t.sS=function(e,t){if(e){if(s.find((function(e){return e==t})))return;0===s.length&&o.channel.subscribe("bunyan",c,o.trueFilter,(function(e,n){var r=t.getStatsbeat();r&&r.addInstrumentation(i.StatsbeatInstrumentation.BUNYAN)})),s.push(t)}else 0===(s=s.filter((function(e){return e!=t}))).length&&o.channel.unsubscribe("bunyan",c)}},14960:(e,t,n)=>{"use strict";t.sS=void 0;var r=n(94909),i=n(54804),o=n(18579),s=[],a=function(e){var t=e.data.message;s.forEach((function(n){t instanceof Error&&!n.config.enableLoggerErrorToTrace?n.trackException({exception:t}):t instanceof Error?n.trackTrace({message:t.toString(),severity:e.data.stderr?r.SeverityLevel.Error:r.SeverityLevel.Information}):(t.lastIndexOf("\n")==t.length-1&&(t=t.substring(0,t.length-1)),n.trackTrace({message:t,severity:e.data.stderr?r.SeverityLevel.Warning:r.SeverityLevel.Information}))}))};t.sS=function(e,t){if(e){if(s.find((function(e){return e==t})))return;0===s.length&&o.channel.subscribe("console",a,o.trueFilter,(function(e,n){var r=t.getStatsbeat();r&&r.addInstrumentation(i.StatsbeatInstrumentation.CONSOLE)})),s.push(t)}else 0===(s=s.filter((function(e){return e!=t}))).length&&o.channel.unsubscribe("console",a)}},59193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextPreservation=t.IsInitialized=void 0;var r=n(41102),i=n(77215);t.IsInitialized=!i.JsonConfig.getInstance().noDiagnosticChannel;var o="DiagnosticChannel";if(t.IsInitialized){var s=n(45670),a=i.JsonConfig.getInstance().noPatchModules.split(","),c={bunyan:s.bunyan,console:s.console,mongodb:s.mongodb,mongodbCore:s.mongodbCore,mysql:s.mysql,redis:s.redis,pg:s.pg,pgPool:s.pgPool,winston:s.winston,azuresdk:s.azuresdk};for(var l in c)-1===a.indexOf(l)&&(c[l].enable(),r.info(o,"Subscribed to "+l+" events"));a.length>0&&r.info(o,"Some modules will not be patched",a)}else r.info(o,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");t.registerContextPreservation=function(e){t.IsInitialized&&n(18579).channel.addContextPreservation(e)}},54747:(e,t,n)=>{"use strict";t.sS=t.v_=void 0;var r=n(54804),i=n(18579),o=[];t.v_=function(e){"ismaster"!==e.data.event.commandName&&o.forEach((function(t){var n=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:n,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})}))},t.sS=function(e,n){if(e){if(o.find((function(e){return e==n})))return;0===o.length&&i.channel.subscribe("mongodb",t.v_,i.trueFilter,(function(e,t){var i=n.getStatsbeat();i&&i.addInstrumentation(r.StatsbeatInstrumentation.MONGODB)})),o.push(n)}else 0===(o=o.filter((function(e){return e!=n}))).length&&i.channel.unsubscribe("mongodb",t.v_)}},20863:(e,t,n)=>{"use strict";t.sS=t.v_=void 0;var r=n(54804),i=n(18579),o=[];t.v_=function(e){o.forEach((function(t){var n=e.data.query||{},r=n.sql||"Unknown query",i=!e.data.err,o=(n._connection||{}).config||{},s=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;t.trackDependency({target:s,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})}))},t.sS=function(e,n){if(e){if(o.find((function(e){return e==n})))return;0===o.length&&i.channel.subscribe("mysql",t.v_,i.trueFilter,(function(e,t){var i=n.getStatsbeat();i&&i.addInstrumentation(r.StatsbeatInstrumentation.MYSQL)})),o.push(n)}else 0===(o=o.filter((function(e){return e!=n}))).length&&i.channel.unsubscribe("mysql",t.v_)}},92010:(e,t,n)=>{"use strict";t.sS=t.v_=void 0;var r=n(54804),i=n(18579),o=[];t.v_=function(e){o.forEach((function(t){var n=e.data.query,r=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query",i=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})}))},t.sS=function(e,n){if(e){if(o.find((function(e){return e==n})))return;0===o.length&&i.channel.subscribe("postgres",t.v_,i.trueFilter,(function(e,t){var i=n.getStatsbeat();i&&i.addInstrumentation(r.StatsbeatInstrumentation.POSTGRES)})),o.push(n)}else 0===(o=o.filter((function(e){return e!=n}))).length&&i.channel.unsubscribe("postgres",t.v_)}},22222:(e,t,n)=>{"use strict";t.sS=t.v_=void 0;var r=n(54804),i=n(18579),o=[];t.v_=function(e){o.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})}))},t.sS=function(e,n){if(e){if(o.find((function(e){return e==n})))return;0===o.length&&i.channel.subscribe("redis",t.v_,i.trueFilter,(function(e,t){var i=n.getStatsbeat();i&&i.addInstrumentation(r.StatsbeatInstrumentation.REDIS)})),o.push(n)}else 0===(o=o.filter((function(e){return e!=n}))).length&&i.channel.unsubscribe("redis",t.v_)}},85581:(e,t,n)=>{"use strict";t.sS=void 0;var r=n(54804),i=n(94909),o=n(18579),s=[],a={syslog:function(e){var t={emerg:i.SeverityLevel.Critical,alert:i.SeverityLevel.Critical,crit:i.SeverityLevel.Critical,error:i.SeverityLevel.Error,warning:i.SeverityLevel.Warning,notice:i.SeverityLevel.Information,info:i.SeverityLevel.Information,debug:i.SeverityLevel.Verbose};return void 0===t[e]?i.SeverityLevel.Information:t[e]},npm:function(e){var t={error:i.SeverityLevel.Error,warn:i.SeverityLevel.Warning,info:i.SeverityLevel.Information,verbose:i.SeverityLevel.Verbose,debug:i.SeverityLevel.Verbose,silly:i.SeverityLevel.Verbose};return void 0===t[e]?i.SeverityLevel.Information:t[e]},unknown:function(e){return i.SeverityLevel.Information}},c=function(e){var t=e.data.message,n=a[e.data.levelKind](e.data.level);s.forEach((function(r){t instanceof Error&&!r.config.enableLoggerErrorToTrace?r.trackException({exception:t,properties:e.data.meta}):t instanceof Error?r.trackTrace({message:t.toString(),severity:n,properties:e.data.meta}):r.trackTrace({message:t,severity:n,properties:e.data.meta})}))};t.sS=function(e,t){if(e){if(s.find((function(e){return e==t})))return;0===s.length&&o.channel.subscribe("winston",c,o.trueFilter,(function(e,n){var i=t.getStatsbeat();i&&i.addInstrumentation(r.StatsbeatInstrumentation.WINSTON)})),s.push(t)}else 0===(s=s.filter((function(e){return e!=t}))).length&&o.channel.unsubscribe("winston",c)}},54804:(e,t)=>{"use strict";var n,r,i,o,s,a,c,l;Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_INSTRUMENTATION_DEPRECATED_SOURCE=t.WEB_INSTRUMENTATION_DEFAULT_SOURCE=t.TIME_SINCE_ENQUEUED=t.ENQUEUED_TIME=t.MessageBusDestination=t.MicrosoftEventHub=t.AzNamespace=t.StatsbeatNetworkCategory=t.StatsbeatFeatureType=t.StatsbeatInstrumentation=t.StatsbeatFeature=t.StatsbeatCounter=t.StatsbeatAttach=t.StatsbeatResourceProvider=t.StatsbeatTelemetryName=t.HeartBeatMetricName=t.DependencyTypeName=t.TelemetryTypeStringToQuickPulseDocumentType=t.TelemetryTypeStringToQuickPulseType=t.QuickPulseType=t.QuickPulseDocumentType=t.PerformanceToQuickPulseCounter=t.MetricId=t.PerformanceCounter=t.QuickPulseCounter=t.DEFAULT_LIVEMETRICS_HOST=t.DEFAULT_LIVEMETRICS_ENDPOINT=t.DEFAULT_BREEZE_ENDPOINT=t.APPLICATION_INSIGHTS_SDK_VERSION=void 0,t.APPLICATION_INSIGHTS_SDK_VERSION="2.7.3",t.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",function(e){e.COMMITTED_BYTES="\\Memory\\Committed Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",e.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",e.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",e.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",e.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",e.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",e.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"}(r=t.QuickPulseCounter||(t.QuickPulseCounter={})),function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(i=t.PerformanceCounter||(t.PerformanceCounter={})),(l=t.MetricId||(t.MetricId={})).REQUESTS_DURATION="requests/duration",l.DEPENDENCIES_DURATION="dependencies/duration",l.EXCEPTIONS_COUNT="exceptions/count",l.TRACES_COUNT="traces/count",t.PerformanceToQuickPulseCounter=((n={})[i.PROCESSOR_TIME]=r.PROCESSOR_TIME,n[i.REQUEST_RATE]=r.REQUEST_RATE,n[i.REQUEST_DURATION]=r.REQUEST_DURATION,n[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,n[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,n[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,n[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,n[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,n[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,n),t.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},t.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},t.TelemetryTypeStringToQuickPulseType={EventData:t.QuickPulseType.Event,ExceptionData:t.QuickPulseType.Exception,MessageData:t.QuickPulseType.Trace,MetricData:t.QuickPulseType.Metric,RequestData:t.QuickPulseType.Request,RemoteDependencyData:t.QuickPulseType.Dependency,AvailabilityData:t.QuickPulseType.Availability,PageViewData:t.QuickPulseType.PageView},t.TelemetryTypeStringToQuickPulseDocumentType={EventData:t.QuickPulseDocumentType.Event,ExceptionData:t.QuickPulseDocumentType.Exception,MessageData:t.QuickPulseDocumentType.Trace,MetricData:t.QuickPulseDocumentType.Metric,RequestData:t.QuickPulseDocumentType.Request,RemoteDependencyData:t.QuickPulseDocumentType.Dependency,AvailabilityData:t.QuickPulseDocumentType.Availability,PageViewData:t.QuickPulseDocumentType.PageView},t.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc",Sql:"SQL",QueueMessage:"Queue Message"},t.HeartBeatMetricName="HeartbeatState",t.StatsbeatTelemetryName="Statsbeat",t.StatsbeatResourceProvider={appsvc:"appsvc",functions:"functions",vm:"vm",unknown:"unknown"},t.StatsbeatAttach={codeless:"codeless",sdk:"sdk"},t.StatsbeatCounter={REQUEST_SUCCESS:"Request Success Count",REQUEST_FAILURE:"Request Failure Count",REQUEST_DURATION:"Request Duration",RETRY_COUNT:"Retry Count",THROTTLE_COUNT:"Throttle Count",EXCEPTION_COUNT:"Exception Count",ATTACH:"Attach",FEATURE:"Feature"},(c=t.StatsbeatFeature||(t.StatsbeatFeature={}))[c.NONE=0]="NONE",c[c.DISK_RETRY=1]="DISK_RETRY",c[c.AAD_HANDLING=2]="AAD_HANDLING",c[c.WEB_SNIPPET=4]="WEB_SNIPPET",(a=t.StatsbeatInstrumentation||(t.StatsbeatInstrumentation={}))[a.NONE=0]="NONE",a[a.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",a[a.MONGODB=2]="MONGODB",a[a.MYSQL=4]="MYSQL",a[a.REDIS=8]="REDIS",a[a.POSTGRES=16]="POSTGRES",a[a.BUNYAN=32]="BUNYAN",a[a.WINSTON=64]="WINSTON",a[a.CONSOLE=128]="CONSOLE",(s=t.StatsbeatFeatureType||(t.StatsbeatFeatureType={}))[s.Feature=0]="Feature",s[s.Instrumentation=1]="Instrumentation",(o=t.StatsbeatNetworkCategory||(t.StatsbeatNetworkCategory={}))[o.Breeze=0]="Breeze",o[o.Quickpulse=1]="Quickpulse",t.AzNamespace="az.namespace",t.MicrosoftEventHub="Microsoft.EventHub",t.MessageBusDestination="message_bus.destination",t.ENQUEUED_TIME="enqueuedTime",t.TIME_SINCE_ENQUEUED="timeSinceEnqueued",t.WEB_INSTRUMENTATION_DEFAULT_SOURCE="https://js.monitor.azure.com/scripts/b/ai",t.WEB_INSTRUMENTATION_DEPRECATED_SOURCE="https://az416426.vo.msecnd.net/scripts/b/ai"},19508:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainSupportsProperties=t.RemoteDependencyDataConstants=void 0;var r=n(60635),i=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();t.RemoteDependencyDataConstants=i,t.domainSupportsProperties=function(e){return"properties"in e||e instanceof r.EventData||e instanceof r.ExceptionData||e instanceof r.MessageData||e instanceof r.MetricData||e instanceof r.PageViewData||e instanceof r.RemoteDependencyData||e instanceof r.RequestData}},14264:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(13771));e.exports=o},73814:e=>{"use strict";e.exports=function(){}},42498:e=>{"use strict";e.exports=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}},91551:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){return e.call(this)||this}return i(t,e),t}(n(73814));e.exports=o},45009:(e,t,n)=>{"use strict";var r=n(11553);e.exports=function(){this.kind=r.Measurement}},11553:e=>{"use strict";var t;!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(t||(t={})),e.exports=t},13771:e=>{"use strict";e.exports=function(){}},57459:e=>{"use strict";e.exports=function(){this.ver=1,this.sampleRate=100,this.tags={}}},64055:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(13771));e.exports=o},33490:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return i(t,e),t}(n(13771));e.exports=o},32946:e=>{"use strict";e.exports=function(){this.hasFullStack=!0,this.parsedStack=[]}},23404:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return i(t,e),t}(n(13771));e.exports=o},86147:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return i(t,e),t}(n(13771));e.exports=o},35593:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(64055));e.exports=o},84040:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return i(t,e),t}(n(13771));e.exports=o},71370:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(13771));e.exports=o},94700:e=>{"use strict";var t;!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(t||(t={})),e.exports=t},72590:e=>{"use strict";e.exports=function(){}},60635:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=n(14264),t.Base=n(73814),t.ContextTagKeys=n(42498),t.Data=n(91551),t.DataPoint=n(45009),t.DataPointType=n(11553),t.Domain=n(13771),t.Envelope=n(57459),t.EventData=n(64055),t.ExceptionData=n(33490),t.ExceptionDetails=n(32946),t.MessageData=n(23404),t.MetricData=n(86147),t.PageViewData=n(35593),t.RemoteDependencyData=n(84040),t.RequestData=n(71370),t.SeverityLevel=n(94700),t.StackFrame=n(72590)},63515:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},27150:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5591:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},40790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},98027:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},13693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71903:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},54171:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},75911:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(71903),t),i(n(5591),t),i(n(27150),t),i(n(98027),t),i(n(13693),t),i(n(63515),t),i(n(54171),t),i(n(40790),t)},57532:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5474:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},90697:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},11303:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},97364:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},28249:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6642:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},95268:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},33919:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},14260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},26949:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},10885:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryType=t.TelemetryTypeString=t.baseTypeToTelemetryType=t.telemetryTypeToBaseType=void 0,t.telemetryTypeToBaseType=function(e){switch(e){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}},t.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}},t.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"},function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency",e[e.Availability=6]="Availability",e[e.PageView=7]="PageView"}(n=t.TelemetryType||(t.TelemetryType={}))},53944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},53030:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5474),t),i(n(11303),t),i(n(97364),t),i(n(28249),t),i(n(14260),t),i(n(53944),t),i(n(26949),t),i(n(6642),t),i(n(95268),t),i(n(57532),t),i(n(33919),t),i(n(90697),t),i(n(10885),t)},94909:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(19508),t),i(n(60635),t),i(n(53030),t),i(n(75911),t)},2391:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregatedMetricCounter=void 0;t.AggregatedMetricCounter=function(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}},45311:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreaggregatedMetricPropertyNames=void 0,t.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}},3144:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(93710);function s(e){return null}var a=function(){function e(e){this._azureTokenPolicy=o.bearerTokenAuthenticationPolicy({credential:e,scopes:["https://monitor.azure.com//.default"]})}return e.prototype.addAuthorizationHeader=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t="authorization",n=o.createPipelineRequest({url:"https://"}),[4,this._azureTokenPolicy.sendRequest(n,s)];case 1:return r.sent(),e.headers[t]=n.headers.get(t),[2]}}))}))},e}();e.exports=a},49820:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureVirtualMachine=void 0;var r=n(41102),i=n(66495),o=n(4558),s=function(){function e(){}return e.getAzureComputeMetadata=function(t,n){var s,a=this,c={},l=((s={method:"GET"})[o.disableCollectionRequestOption]=!0,s.headers={Metadata:"True"},s),u=i.makeRequest(t,"http://169.254.169.254/metadata/instance/compute?api-version=2017-12-01&format=json",l,(function(t){if(200===t.statusCode){c.isVM=!0;var i="";t.on("data",(function(e){i+=e})),t.on("end",(function(){try{var t=JSON.parse(i);c.id=t.vmId||"",c.subscriptionId=t.subscriptionId||"",c.osType=t.osType||""}catch(t){r.info(e.TAG,t)}n(c)}))}else n(c)}),!1,!1);u&&(setTimeout((function(){a._requestTimedOut=!0,u.abort()}),e.HTTP_TIMEOUT),u.on("error",(function(t){a._requestTimedOut&&t&&(t.name="telemetry timeout",t.message="telemetry request timed out"),t&&t.message&&t.message.indexOf("UNREACH")>-1?c.isVM=!1:r.info(e.TAG,t),n(c)})),u.end())},e.HTTP_TIMEOUT=2500,e.TAG="AzureVirtualMachine",e}();t.AzureVirtualMachine=s},79004:(e,t,n)=>{"use strict";var r=n(41102),i=n(66495),o=function(){function e(e,t,n,r){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=n,this._sender=r}return e.prototype.setUseDiskRetryCaching=function(e,t,n){this._sender.setDiskRetryMode(e,t,n)},e.prototype.send=function(e){var t=this;this._isDisabled()||(e?(this._buffer.push(e),this._buffer.length>=this._getBatchSize()?this.triggerSend(!1):!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs()))):r.warn("Cannot send null/undefined telemetry"))},e.prototype.triggerSend=function(e,t){var n=this._buffer.length<1;n||(e||i.isNodeExit?(this._sender.saveOnCrash(this._buffer),"function"==typeof t&&t("data saved on crash")):this._sender.send(this._buffer,t)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&"function"==typeof t&&t("no data to send")},e}();e.exports=o},181:(e,t,n)=>{"use strict";var r=n(24835),i=n(89397),o=n(41102),s=n(54804),a=n(87016),c=n(77215),l=function(){function e(t){this._endpointBase=s.DEFAULT_BREEZE_ENDPOINT,this._mergeConfig();var n=this._connectionString,r=i.parse(t),o=i.parse(n),c=!r.instrumentationkey&&Object.keys(r).length>0?null:t,l=this._instrumentationKey;this.instrumentationKey=r.instrumentationkey||c||o.instrumentationkey||l;var u=""+(this.endpointUrl||r.ingestionendpoint||o.ingestionendpoint||this._endpointBase);u.endsWith("/")&&(u=u.slice(0,-1)),this.endpointUrl=u+"/v2.1/track",this.maxBatchSize=this.maxBatchSize||250,this.maxBatchIntervalMs=this.maxBatchIntervalMs||15e3,this.disableAppInsights=this.disableAppInsights||!1,this.samplingPercentage=this.samplingPercentage||100,this.correlationIdRetryIntervalMs=this.correlationIdRetryIntervalMs||3e4,this.enableWebInstrumentation=this.enableWebInstrumentation||this.enableAutoWebSnippetInjection||!1,this.webInstrumentationConfig=this.webInstrumentationConfig||null,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.correlationHeaderExcludedDomains=this.correlationHeaderExcludedDomains||["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.ignoreLegacyHeaders=this.ignoreLegacyHeaders||!1,this.profileQueryEndpoint=r.ingestionendpoint||o.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this._endpointBase,this.quickPulseHost=this.quickPulseHost||r.liveendpoint||o.liveendpoint||process.env[e.ENV_quickPulseHost]||s.DEFAULT_LIVEMETRICS_HOST,this.webInstrumentationConnectionString=this.webInstrumentationConnectionString||this._webInstrumentationConnectionString||"",this.webSnippetConnectionString=this.webInstrumentationConnectionString,this.quickPulseHost.match(/^https?:\/\//)&&(this.quickPulseHost=new a.URL(this.quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){this._profileQueryEndpoint=e,this.correlationId=r.correlationIdPrefix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instrumentationKey",{get:function(){return this._instrumentationKey},set:function(t){e._validateInstrumentationKey(t)||o.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this._instrumentationKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"webSnippetConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"webInstrumentationConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),e.prototype._mergeConfig=function(){var e=c.JsonConfig.getInstance();this._connectionString=e.connectionString,this._instrumentationKey=e.instrumentationKey,this.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains,this.correlationIdRetryIntervalMs=e.correlationIdRetryIntervalMs,this.disableAllExtendedMetrics=e.disableAllExtendedMetrics,this.disableAppInsights=e.disableAppInsights,this.disableStatsbeat=e.disableStatsbeat,this.distributedTracingMode=e.distributedTracingMode,this.enableAutoCollectConsole=e.enableAutoCollectConsole,this.enableLoggerErrorToTrace=e.enableLoggerErrorToTrace,this.enableAutoCollectDependencies=e.enableAutoCollectDependencies,this.enableAutoCollectIncomingRequestAzureFunctions=e.enableAutoCollectIncomingRequestAzureFunctions,this.enableAutoCollectExceptions=e.enableAutoCollectExceptions,this.enableAutoCollectExtendedMetrics=e.enableAutoCollectExtendedMetrics,this.enableAutoCollectExternalLoggers=e.enableAutoCollectExternalLoggers,this.enableAutoCollectHeartbeat=e.enableAutoCollectHeartbeat,this.enableAutoCollectPerformance=e.enableAutoCollectPerformance,this.enableAutoCollectPreAggregatedMetrics=e.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectRequests=e.enableAutoCollectRequests,this.enableAutoDependencyCorrelation=e.enableAutoDependencyCorrelation,this.enableInternalDebugLogging=e.enableInternalDebugLogging,this.enableInternalWarningLogging=e.enableInternalWarningLogging,this.enableResendInterval=e.enableResendInterval,this.enableMaxBytesOnDisk=e.enableMaxBytesOnDisk,this.enableSendLiveMetrics=e.enableSendLiveMetrics,this.enableUseAsyncHooks=e.enableUseAsyncHooks,this.enableUseDiskRetryCaching=e.enableUseDiskRetryCaching,this.endpointUrl=e.endpointUrl,this.extendedMetricDisablers=e.extendedMetricDisablers,this.ignoreLegacyHeaders=e.ignoreLegacyHeaders,this.maxBatchIntervalMs=e.maxBatchIntervalMs,this.maxBatchSize=e.maxBatchSize,this.proxyHttpUrl=e.proxyHttpUrl,this.proxyHttpsUrl=e.proxyHttpsUrl,this.quickPulseHost=e.quickPulseHost,this.samplingPercentage=e.samplingPercentage,this.enableWebInstrumentation=e.enableWebInstrumentation,this._webInstrumentationConnectionString=e.webInstrumentationConnectionString,this.webInstrumentationConfig=e.webInstrumentationConfig,this.webInstrumentationSrc=e.webInstrumentationSrc},e._validateInstrumentationKey=function(e){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e}();e.exports=l},89397:(e,t,n)=>{"use strict";var r=n(54804),i=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR).reduce((function(t,n){var r=n.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===r.length){var i=r[0].toLowerCase(),o=r[1];t[i]=o}return t}),{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e.isIkeyValid=function(e){return!(!e||""==e)&&new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();e.exports=i},87396:(e,t,n)=>{"use strict";var r=n(70857),i=n(79896),o=n(16928),s=n(94909),a=n(54804),c=n(41102),l=function(){function e(e){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){try{if(t=t||o.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";var n=JSON.parse(i.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.appVersion[t]=n.version)}this.tags[this.keys.applicationVersion]=e.appVersion[t]}catch(e){c.info("Failed to read app version: ",e)}},e.prototype._loadDeviceContext=function(){var t=r&&r.hostname(),n=e.DefaultRoleName;process.env.WEBSITE_SITE_NAME&&(n=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_INSTANCE_ID&&(t=process.env.WEBSITE_INSTANCE_ID),this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=t,this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=n,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},e.prototype._loadInternalContext=function(){e.sdkVersion=a.APPLICATION_INSIGHTS_SDK_VERSION,this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();e.exports=l},24835:(e,t,n)=>{"use strict";var r=n(66495),i=function(){function e(){}return e.queryCorrelationId=function(e,t){},e.cancelCorrelationIdQuery=function(e,t){},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var n=(e.currentRootId++).toString(16);return e.appendSuffix(t,n,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var n="|"===e[0]?1:0;return e.substring(n,t)},e.generateRootId=function(){return"|"+r.w3cTraceId()+"."},e.appendSuffix=function(t,n,i){if(t.length+n.length<e.requestIdMaxLength)return t+n+i;var o=e.requestIdMaxLength-9;if(t.length>o)for(;o>1;--o){var s=t[o-1];if("."===s||"_"===s)break}if(o<=1)return e.generateRootId();for(n=r.randomu32().toString(16);n.length<8;)n="0"+n;return t.substring(0,o)+n+"#"},e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.HTTP_TIMEOUT=2500,e.requestIdMaxLength=1024,e.currentRootId=r.randomu32(),e}();e.exports=i},43273:(e,t,n)=>{"use strict";var r=n(94909),i=n(66495),o=n(13097),s=n(41102),a=function(){function e(){}return e.createEnvelope=function(t,n,o,s,a){var c=null;switch(n){case r.TelemetryType.Trace:c=e.createTraceData(t);break;case r.TelemetryType.Dependency:c=e.createDependencyData(t);break;case r.TelemetryType.Event:c=e.createEventData(t);break;case r.TelemetryType.Exception:c=e.createExceptionData(t);break;case r.TelemetryType.Request:c=e.createRequestData(t);break;case r.TelemetryType.Metric:c=e.createMetricData(t);break;case r.TelemetryType.Availability:c=e.createAvailabilityData(t);break;case r.TelemetryType.PageView:c=e.createPageViewData(t)}if(c&&c.baseData&&r.domainSupportsProperties(c.baseData)){if(o)if(c.baseData.properties)for(var l in o)c.baseData.properties[l]||(c.baseData.properties[l]=o[l]);else c.baseData.properties=o;e.addAzureFunctionsCorrelationProperties(c.baseData.properties),c.baseData.properties&&(c.baseData.properties=i.validateStringMap(c.baseData.properties))}var u=a&&a.instrumentationKey||"",p=new r.Envelope;return p.data=c,p.iKey=u,p.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),p.tags=this.getTags(s,t.tagOverrides),p.time=(new Date).toISOString(),p.ver=1,p.sampleRate=a?a.samplingPercentage:100,n===r.TelemetryType.Metric&&(p.sampleRate=100),p},e.addAzureFunctionsCorrelationProperties=function(e){var t=o.CorrelationContextManager.getCurrentContext();if(t&&t.customProperties&&t.customProperties.getProperty instanceof Function){e=e||{};var n=t.customProperties.getProperty("InvocationId");n&&(e.InvocationId=n),(n=t.customProperties.getProperty("ProcessId"))&&(e.ProcessId=n),(n=t.customProperties.getProperty("LogLevel"))&&(e.LogLevel=n),(n=t.customProperties.getProperty("Category"))&&(e.Category=n),(n=t.customProperties.getProperty("HostInstanceId"))&&(e.HostInstanceId=n),(n=t.customProperties.getProperty("AzFuncLiveLogsSessionId"))&&(e.AzFuncLiveLogsSessionId=n)}},e.truncateProperties=function(e){if(e.properties)try{for(var t={},n=Object.keys(e.properties),r=Object.values(e.properties),o=0;o<n.length;o++)n[o].length<=150&&(i.isDate(r[o])||(null==r[o]&&(r[o]=""),"object"==typeof r[o]&&(r[o]=i.stringify(r[o])),t[n[o]]=String(r[o]).substring(0,8192)),t[n[o]]=r[o]);return t}catch(e){s.warn("Failed to properly truncate telemetry properties: ",e)}},e.createTraceData=function(e){var t,n=new r.MessageData;n.message=null===(t=e.message)||void 0===t?void 0:t.substring(0,32768),n.properties=this.truncateProperties(e),isNaN(e.severity)?n.severityLevel=r.SeverityLevel.Information:n.severityLevel=e.severity;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),i.baseData=n,i},e.createDependencyData=function(e){var t,n,o,s=new r.RemoteDependencyData;s.name=null===(t=e.name)||void 0===t?void 0:t.substring(0,1024),s.data=null===(n=e.data)||void 0===n?void 0:n.substring(0,8192),s.target=null===(o=e.target)||void 0===o?void 0:o.substring(0,1024),s.duration=i.msToTimeSpan(e.duration),s.success=e.success,s.type=e.dependencyTypeName,s.properties=this.truncateProperties(e),s.resultCode=e.resultCode?e.resultCode.toString():"0",e.id?s.id=e.id:s.id=i.w3cTraceId();var a=new r.Data;return a.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),a.baseData=s,a},e.createEventData=function(e){var t,n=new r.EventData;n.name=null===(t=e.name)||void 0===t?void 0:t.substring(0,512),n.properties=this.truncateProperties(e),n.measurements=e.measurements;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),i.baseData=n,i},e.createExceptionData=function(e){var t,n,o=new r.ExceptionData;o.properties=this.truncateProperties(e),isNaN(e.severity)?o.severityLevel=r.SeverityLevel.Error:o.severityLevel=e.severity,o.measurements=e.measurements,o.exceptions=[];var s=e.exception.stack,a=new r.ExceptionDetails;a.message=null===(t=e.exception.message)||void 0===t?void 0:t.substring(0,32768),a.typeName=null===(n=e.exception.name)||void 0===n?void 0:n.substring(0,1024),a.parsedStack=this.parseStack(s),a.hasFullStack=i.isArray(a.parsedStack)&&a.parsedStack.length>0,o.exceptions.push(a);var c=new r.Data;return c.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),c.baseData=o,c},e.createRequestData=function(e){var t,n,o,s,a=new r.RequestData;e.id?a.id=e.id:a.id=i.w3cTraceId(),a.name=null===(t=e.name)||void 0===t?void 0:t.substring(0,1024),a.url=null===(n=e.url)||void 0===n?void 0:n.substring(0,2048),a.source=null===(o=e.source)||void 0===o?void 0:o.substring(0,1024),a.duration=i.msToTimeSpan(e.duration),a.responseCode=null===(s=e.resultCode?e.resultCode.toString():"0")||void 0===s?void 0:s.substring(0,1024),a.success=e.success,a.properties=this.truncateProperties(e),a.measurements=e.measurements;var c=new r.Data;return c.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),c.baseData=a,c},e.createMetricData=function(e){var t,n=new r.MetricData;n.metrics=[];var i=new r.DataPoint;i.count=isNaN(e.count)?1:e.count,i.kind=r.DataPointType.Aggregation,i.max=isNaN(e.max)?e.value:e.max,i.min=isNaN(e.min)?e.value:e.min,i.name=null===(t=e.name)||void 0===t?void 0:t.substring(0,1024),i.stdDev=isNaN(e.stdDev)?0:e.stdDev,i.value=e.value,i.ns=e.namespace,n.metrics.push(i),n.properties=this.truncateProperties(e);var o=new r.Data;return o.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),o.baseData=n,o},e.createAvailabilityData=function(e){var t,n,o=new r.AvailabilityData;e.id?o.id=e.id:o.id=i.w3cTraceId(),o.name=null===(t=e.name)||void 0===t?void 0:t.substring(0,1024),o.duration=i.msToTimeSpan(e.duration),o.success=e.success,o.runLocation=e.runLocation,o.message=null===(n=e.message)||void 0===n?void 0:n.substring(0,8192),o.measurements=e.measurements,o.properties=this.truncateProperties(e);var s=new r.Data;return s.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),s.baseData=o,s},e.createPageViewData=function(e){var t,n,o=new r.PageViewData;o.name=null===(t=e.name)||void 0===t?void 0:t.substring(0,1024),o.duration=i.msToTimeSpan(e.duration),o.url=null===(n=e.url)||void 0===n?void 0:n.substring(0,2048),o.measurements=e.measurements,o.properties=this.truncateProperties(e);var s=new r.Data;return s.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),s.baseData=o,s},e.getTags=function(e,t){var n=o.CorrelationContextManager.getCurrentContext(),r={};if(e&&e.tags)for(var i in e.tags)r[i]=e.tags[i];if(t)for(var i in t)r[i]=t[i];return n&&(r[e.keys.operationId]=r[e.keys.operationId]||n.operation.id,r[e.keys.operationName]=r[e.keys.operationName]||n.operation.name,r[e.keys.operationParentId]=r[e.keys.operationParentId]||n.operation.parentId),r},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var n=e.split("\n");t=[];for(var r=0,i=0,o=0;o<=n.length;o++){var s=n[o];if(c.regex.test(s)){var a=new c(n[o],r++);i+=a.sizeInBytes,t.push(a)}}if(i>32768)for(var l=0,u=t.length-1,p=0,d=l,h=u;l<u;){if((p+=t[l].sizeInBytes+t[u].sizeInBytes)>32768){var f=h-d+1;t.splice(d,f);break}d=l,h=u,l++,u--}}return t},e}(),c=function(){function e(t,n){this.sizeInBytes=0,this.level=n,this.method="<no_method>",this.assembly=i.trim(t);var r=t.match(e.regex);r&&r.length>=5&&(this.method=i.trim(r[2])||this.method,this.fileName=i.trim(r[4])||"<no_filename>",this.line=parseInt(r[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();e.exports=a},28306:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileAccessControl=void 0;var o=n(79896),s=n(70857),a=n(35317),c=n(41102),l=function(){function e(){}return e.checkFileProtection=function(){if(!e.OS_PROVIDES_FILE_PROTECTION&&!e.OS_FILE_PROTECTION_CHECKED)if(e.OS_FILE_PROTECTION_CHECKED=!0,e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=o.existsSync(e.ICACLS_PATH)}catch(e){}e.OS_PROVIDES_FILE_PROTECTION||c.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0},e.applyACLRules=function(t){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:if(!e.USE_ICACLS)return[3,7];if(void 0!==e.ACLED_DIRECTORIES[t])return[3,6];e.ACLED_DIRECTORIES[t]=!1,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this._getACLIdentity()];case 2:return n=i.sent(),[4,this._runICACLS(this._getACLArguments(t,n))];case 3:return i.sent(),e.ACLED_DIRECTORIES[t]=!0,[3,5];case 4:throw r=i.sent(),e.ACLED_DIRECTORIES[t]=!1,r;case 5:return[3,7];case 6:if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)");i.label=7;case 7:return[2]}}))}))},e.applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e._runICACLS=function(t){return new Promise((function(n,r){var i=a.spawn(e.ICACLS_PATH,t,{windowsHide:!0});i.on("error",(function(e){return r(e)})),i.on("close",(function(e,t){0===e?n():r(new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))}))},e._runICACLSSync=function(t){if(!a.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var n=a.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(n.error)throw n.error;if(0!==n.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+n.status+")")},e._getACLIdentity=function(){return new Promise((function(t,n){e.ACL_IDENTITY&&t(e.ACL_IDENTITY);var r=a.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),i="";r.stdout.on("data",(function(e){return i+=e})),r.on("error",(function(e){return n(e)})),r.on("close",(function(r,o){e.ACL_IDENTITY=i&&i.trim(),0===r?t(e.ACL_IDENTITY):n(new Error("Getting ACL identity did not succeed (PS returned code "+r+")"))}))}))},e._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(a.spawnSync){var t=a.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.TAG="FileAccessControl",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.OS_FILE_PROTECTION_CHECKED=!1,e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===s.type(),e}();t.FileAccessControl=l},90244:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getShallowFileSize=t.getShallowDirectorySizeSync=t.getShallowDirectorySize=t.confirmDirExists=t.unlinkAsync=t.readdirAsync=t.readFileAsync=t.writeFileAsync=t.appendFileAsync=t.accessAsync=t.mkdirAsync=t.lstatAsync=t.statAsync=void 0;var o=n(79896),s=n(16928),a=n(39023);t.statAsync=a.promisify(o.stat),t.lstatAsync=a.promisify(o.lstat),t.mkdirAsync=a.promisify(o.mkdir),t.accessAsync=a.promisify(o.access),t.appendFileAsync=a.promisify(o.appendFile),t.writeFileAsync=a.promisify(o.writeFile),t.readFileAsync=a.promisify(o.readFile),t.readdirAsync=a.promisify(o.readdir),t.unlinkAsync=a.promisify(o.unlink),t.confirmDirExists=function(e){return r(void 0,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,t.lstatAsync(e)];case 1:if(!i.sent().isDirectory())throw new Error("Path existed but was not a directory");return[3,7];case 2:if(!(n=i.sent())||"ENOENT"!==n.code)return[3,6];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,t.mkdirAsync(e)];case 4:return i.sent(),[3,6];case 5:if((r=i.sent())&&"EEXIST"!==r.code)throw r;return[3,6];case 6:return[3,7];case 7:return[2]}}))}))},t.getShallowDirectorySize=function(e){return r(void 0,void 0,void 0,(function(){var n,r,o,a,c,l;return i(this,(function(i){switch(i.label){case 0:return[4,t.readdirAsync(e)];case 1:n=i.sent(),r=0,o=0,a=n,i.label=2;case 2:return o<a.length?(c=a[o],[4,t.statAsync(s.join(e,c))]):[3,5];case 3:(l=i.sent()).isFile()&&(r+=l.size),i.label=4;case 4:return o++,[3,2];case 5:return[2,r]}}))}))},t.getShallowDirectorySizeSync=function(e){for(var t=o.readdirSync(e),n=0,r=0;r<t.length;r++)n+=o.statSync(s.join(e,t[r])).size;return n},t.getShallowFileSize=function(e){return r(void 0,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,t.statAsync(e)];case 1:return(n=r.sent()).isFile()?[2,n.size]:[2]}}))}))}},88470:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},67979:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},s=n(79896),a=n(70857),c=n(16928),l=n(90244),u=function(){function e(){var t=this;this.TAG="Logger",this._cleanupTimeOut=18e5,this._tempDir="",this._logFileName="",this._fileFullPath="",this._backUpNameFormat="",this._logToFile=!1,this._logToConsole=!0;var n=process.env.APPLICATIONINSIGHTS_LOG_DESTINATION;"file+console"==n&&(this._logToFile=!0),"file"==n&&(this._logToFile=!0,this._logToConsole=!1),this.maxSizeBytes=5e4,this.maxHistory=1,this._logFileName="applicationinsights.log";var r=process.env.APPLICATIONINSIGHTS_LOGDIR;r?c.isAbsolute(r)?this._tempDir=r:this._tempDir=c.join(process.cwd(),r):this._tempDir=c.join(a.tmpdir(),"appInsights-node"),this._fileFullPath=c.join(this._tempDir,this._logFileName),this._backUpNameFormat="."+this._logFileName,this._logToFile&&(e._fileCleanupTimer||(e._fileCleanupTimer=setInterval((function(){t._fileCleanupTask()}),this._cleanupTimeOut),e._fileCleanupTimer.unref()))}return e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e?o([e],t):t;this._logToFile&&this._storeToDisk(r),this._logToConsole&&console.info.apply(console,r)},e.prototype.warning=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e?o([e],t):t;this._logToFile&&this._storeToDisk(r),this._logToConsole&&console.warn.apply(console,r)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype._storeToDisk=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:t=e+"\r\n",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,l.confirmDirExists(this._tempDir)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),console.log(this.TAG,"Failed to create directory for log file: "+(n&&n.message)),[2];case 4:return i.trys.push([4,6,,11]),[4,l.accessAsync(this._fileFullPath,s.constants.F_OK)];case 5:return i.sent(),[3,11];case 6:r=i.sent(),i.label=7;case 7:return i.trys.push([7,9,,10]),[4,l.appendFileAsync(this._fileFullPath,t)];case 8:return i.sent(),[2];case 9:return i.sent(),console.log(this.TAG,"Failed to put log into file: "+(r&&r.message)),[2];case 10:return[3,11];case 11:return i.trys.push([11,17,,18]),[4,l.getShallowFileSize(this._fileFullPath)];case 12:return i.sent()>this.maxSizeBytes?[4,this._createBackupFile(t)]:[3,14];case 13:return i.sent(),[3,16];case 14:return[4,l.appendFileAsync(this._fileFullPath,t)];case 15:i.sent(),i.label=16;case 16:return[3,18];case 17:return o=i.sent(),console.log(this.TAG,"Failed to create backup file: "+(o&&o.message)),[3,18];case 18:return[2]}}))}))},e.prototype._createBackupFile=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,l.readFileAsync(this._fileFullPath)];case 1:return t=i.sent(),n=c.join(this._tempDir,(new Date).getTime()+"."+this._logFileName),[4,l.writeFileAsync(n,t)];case 2:return i.sent(),[3,5];case 3:return r=i.sent(),console.log("Failed to generate backup log file",r),[3,5];case 4:return l.writeFileAsync(this._fileFullPath,e),[7];case 5:return[2]}}))}))},e.prototype._fileCleanupTask=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,o,s=this;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),[4,l.readdirAsync(this._tempDir)];case 1:(e=(e=i.sent()).filter((function(e){return c.basename(e).indexOf(s._backUpNameFormat)>-1}))).sort((function(e,t){var n=new Date(parseInt(e.split(s._backUpNameFormat)[0])),r=new Date(parseInt(t.split(s._backUpNameFormat)[0]));return n<r?-1:n>=r?1:void 0})),t=e.length,n=0,i.label=2;case 2:return n<t-this.maxHistory?(r=c.join(this._tempDir,e[n]),[4,l.unlinkAsync(r)]):[3,5];case 3:i.sent(),i.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return o=i.sent(),console.log(this.TAG,"Failed to cleanup log files: "+(o&&o.message)),[3,7];case 7:return[2]}}))}))},e._fileCleanupTimer=null,e}();e.exports=u},77215:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonConfig=void 0;var r=n(79896),i=n(16928),o=n(41102),s="APPSETTING_",a="APPINSIGHTS_INSTRUMENTATIONKEY",c="APPINSIGHTS_INSTRUMENTATION_KEY",l=function(){function e(){this.connectionString=process.env.APPLICATIONINSIGHTS_CONNECTION_STRING,this.instrumentationKey=process.env[a]||process.env[s+a]||process.env[c]||process.env[s+c],!this.connectionString&&this.instrumentationKey&&o.warn("APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK."),this.disableAllExtendedMetrics=!!process.env.APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS,this.extendedMetricDisablers=process.env.APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC,this.proxyHttpUrl=process.env.http_proxy,this.proxyHttpsUrl=process.env.https_proxy,this.noDiagnosticChannel=!!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL,this.disableStatsbeat=!!process.env.APPLICATION_INSIGHTS_NO_STATSBEAT,this.noHttpAgentKeepAlive=!!process.env.APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE,this.noPatchModules=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",this.enableWebInstrumentation=!!process.env.APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED||!!process.env.APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED,this.webInstrumentationSrc=process.env.APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE||"",this.webInstrumentationConnectionString=process.env.APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING||process.env.APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING||"",this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.webSnippetConnectionString=this.webInstrumentationConnectionString,this._loadJsonFile()}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype._loadJsonFile=function(){var e="",t=process.env.APPLICATIONINSIGHTS_CONFIGURATION_CONTENT;if(t)e=t;else{var n=i.join(__dirname,"../../"),s=i.join(n,"applicationinsights.json"),a=process.env.APPLICATIONINSIGHTS_CONFIGURATION_FILE;a&&(s=i.isAbsolute(a)?a:i.join(n,a));try{e=r.readFileSync(s,"utf8")}catch(e){o.info("Failed to read JSON config file: ",e)}}try{var c=JSON.parse(e);null!=c.disableStatsbeat&&(this.disableStatsbeat=c.disableStatsbeat),null!=c.disableAllExtendedMetrics&&(this.disableAllExtendedMetrics=c.disableStatsbeat),null!=c.noDiagnosticChannel&&(this.noDiagnosticChannel=c.noDiagnosticChannel),null!=c.noHttpAgentKeepAlive&&(this.noHttpAgentKeepAlive=c.noHttpAgentKeepAlive),null!=c.connectionString&&(this.connectionString=c.connectionString),null!=c.extendedMetricDisablers&&(this.extendedMetricDisablers=c.extendedMetricDisablers),null!=c.noDiagnosticChannel&&(this.noDiagnosticChannel=c.noDiagnosticChannel),null!=c.proxyHttpUrl&&(this.proxyHttpUrl=c.proxyHttpUrl),null!=c.proxyHttpsUrl&&(this.proxyHttpsUrl=c.proxyHttpsUrl),null!=c.proxyHttpsUrl&&(this.proxyHttpsUrl=c.proxyHttpsUrl),null!=c.noPatchModules&&(this.noPatchModules=c.noPatchModules),null!=c.enableAutoWebSnippetInjection&&(this.enableWebInstrumentation=c.enableAutoWebSnippetInjection,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),null!=c.enableWebInstrumentation&&(this.enableWebInstrumentation=c.enableWebInstrumentation,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),null!=c.webSnippetConnectionString&&(this.webInstrumentationConnectionString=c.webSnippetConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),null!=c.webInstrumentationConnectionString&&(this.webInstrumentationConnectionString=c.webInstrumentationConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),null!=c.webInstrumentationConfig&&(this.webInstrumentationConfig=c.webInstrumentationConfig),null!=c.webInstrumentationSrc&&(this.webInstrumentationSrc=c.webInstrumentationSrc),null!=c.enableLoggerErrorToTrace&&(this.enableLoggerErrorToTrace=c.enableLoggerErrorToTrace),this.endpointUrl=c.endpointUrl,this.maxBatchSize=c.maxBatchSize,this.maxBatchIntervalMs=c.maxBatchIntervalMs,this.disableAppInsights=c.disableAppInsights,this.samplingPercentage=c.samplingPercentage,this.correlationIdRetryIntervalMs=c.correlationIdRetryIntervalMs,this.correlationHeaderExcludedDomains=c.correlationHeaderExcludedDomains,this.ignoreLegacyHeaders=c.ignoreLegacyHeaders,this.distributedTracingMode=c.distributedTracingMode,this.enableAutoCollectExternalLoggers=c.enableAutoCollectExternalLoggers,this.enableAutoCollectConsole=c.enableAutoCollectConsole,this.enableLoggerErrorToTrace=c.enableLoggerErrorToTrace,this.enableAutoCollectExceptions=c.enableAutoCollectExceptions,this.enableAutoCollectPerformance=c.enableAutoCollectPerformance,this.enableAutoCollectExtendedMetrics=c.enableAutoCollectExtendedMetrics,this.enableAutoCollectPreAggregatedMetrics=c.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectHeartbeat=c.enableAutoCollectHeartbeat,this.enableAutoCollectRequests=c.enableAutoCollectRequests,this.enableAutoCollectDependencies=c.enableAutoCollectDependencies,this.enableAutoDependencyCorrelation=c.enableAutoDependencyCorrelation,this.enableAutoCollectIncomingRequestAzureFunctions=c.enableAutoCollectIncomingRequestAzureFunctions,this.enableUseAsyncHooks=c.enableUseAsyncHooks,this.enableUseDiskRetryCaching=c.enableUseDiskRetryCaching,this.enableResendInterval=c.enableResendInterval,this.enableMaxBytesOnDisk=c.enableMaxBytesOnDisk,this.enableInternalDebugLogging=c.enableInternalDebugLogging,this.enableInternalWarningLogging=c.enableInternalWarningLogging,this.enableSendLiveMetrics=c.enableSendLiveMetrics,this.quickPulseHost=c.quickPulseHost}catch(e){o.info("Invalid JSON config file: ",e)}},e}();t.JsonConfig=l},41102:(e,t,n)=>{"use strict";var r=n(67979),i=function(){function e(){}return e.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.enableDebug&&r.getInstance().info(this.TAG+e,t)},e.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.disableWarnings||r.getInstance().warning(this.TAG+e,t)},e.enableDebug=!1,e.disableWarnings=!1,e.TAG="ApplicationInsights:",e}();e.exports=i},68668:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(17131),s=n(93633),a=n(4558),c=n(41102),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?s.trackRequestSync(this,e):c.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&c.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?s.trackRequest(this,e):c.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?a.trackRequest(this,e):c.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(o);e.exports=l},5655:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResourceProvider=t.getOsPrefix=t.isFunctionApp=t.isWebApp=t.isLinux=t.isWindows=void 0,t.isWindows=function(){return"win32"===process.platform},t.isLinux=function(){return"linux"===process.platform},t.isWebApp=function(){return!!process.env.WEBSITE_SITE_NAME},t.isFunctionApp=function(){return!!process.env.FUNCTIONS_WORKER_RUNTIME},t.getOsPrefix=function(){return t.isWindows()?"w":t.isLinux()?"l":"u"},t.getResourceProvider=function(){return t.isWebApp()?"a":t.isFunctionApp()?"f":"u"}},76793:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=n(70857),o=n(94909),s=n(54804),a=n(66495),c=n(41102),l=a.w3cTraceId(),u=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,n,r){var o=i&&"function"==typeof i.hostname&&i.hostname()||"Unknown",s=r.tags&&r.keys&&r.keys.cloudRoleInstance&&r.tags[r.keys.cloudRoleInstance]||o,a=r.tags&&r.keys&&r.keys.cloudRole&&r.tags[r.keys.cloudRole]||null;return{Documents:t.length>0?t:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:r.tags[r.keys.internalSdkVersion],StreamId:l,MachineName:o,Instance:s,RoleName:a}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case o.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case o.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case o.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case o.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case o.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.name;return r(r({},n),{Name:i})},e.createQuickPulseTraceDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.severityLevel||0;return r(r({},n),{Message:t.data.baseData.message,SeverityLevel:o.SeverityLevel[i]})},e.createQuickPulseExceptionDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.exceptions,o="",s="",a="";return i&&i.length>0&&(i[0].parsedStack&&i[0].parsedStack.length>0?i[0].parsedStack.forEach((function(e){o+=e.assembly+"\n"})):i[0].stack&&i[0].stack.length>0&&(o=i[0].stack),s=i[0].message,a=i[0].typeName),r(r({},n),{Exception:o,ExceptionMessage:s,ExceptionType:a})},e.createQuickPulseRequestDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData;return r(r({},n),{Name:i.name,Success:i.success,Duration:i.duration,ResponseCode:i.responseCode,OperationName:i.name})},e.createQuickPulseDependencyDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData;return r(r({},n),{Name:i.name,Target:i.target,Success:i.success,Duration:i.duration,ResultCode:i.resultCode,CommandName:i.data,OperationName:n.OperationId,DependencyTypeName:i.type})},e.createQuickPulseDocument=function(t){var n,r;return t.data.baseType?(r=s.TelemetryTypeStringToQuickPulseType[t.data.baseType],n=s.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):c.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:n,__type:r,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],n=e.data.baseData.measurements||{};for(var r in n)if(n.hasOwnProperty(r)){var i={key:r,value:n[r]};t.push(i)}var o=e.data.baseData.properties||{};for(var r in o)o.hasOwnProperty(r)&&(i={key:r,value:o[r]},t.push(i));return t},e.keys=new o.ContextTagKeys,e}();e.exports=u},80446:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(65692),s=n(4558),a=n(41102),c=n(12655),l=n(66495),u=n(87016),p="x-ms-qps-service-polling-interval-hint",d="x-ms-qps-service-endpoint-redirect-v2",h=function(){function e(e,t){this._config=e,this._consecutiveErrors=0,this._getAuthorizationHandler=t}return e.prototype.ping=function(e,t,n){var r=[{name:"x-ms-qps-stream-id",value:e.StreamId},{name:"x-ms-qps-machine-name",value:e.MachineName},{name:"x-ms-qps-role-name",value:e.RoleName},{name:"x-ms-qps-instance-name",value:e.Instance},{name:"x-ms-qps-invariant-version",value:e.InvariantVersion.toString()}];this._submitData(e,t,n,"ping",r)},e.prototype.post=function(e,t,n){return r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,this._submitData([e],t,n,"post")];case 1:return r.sent(),[2]}}))}))},e.prototype._submitData=function(t,n,h,f,v){return r(this,void 0,void 0,(function(){var r,m,g,y,b,_,E,S=this;return i(this,(function(i){switch(i.label){case 0:if(r=l.stringify(t),(_={})[s.disableCollectionRequestOption]=!0,_.host=n&&n.length>0?n:this._config.quickPulseHost,_.method="POST",_.path="/QuickPulseService.svc/"+f+"?ikey="+this._config.instrumentationKey,_.headers=((E={Expect:"100-continue"})["x-ms-qps-transmission-time"]=c.getTransmissionTime(),E["Content-Type"]="application/json",E["Content-Length"]=Buffer.byteLength(r),E),m=_,v&&v.length>0&&v.forEach((function(e){return m.headers[e.name]=e.value})),"post"!==f)return[3,4];if(!(g=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null))return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,g.addAuthorizationHeader(m)];case 2:return i.sent(),[3,4];case 3:return y=i.sent(),a.info(e.TAG,"Failed to get AAD bearer token for the Application. Error:",y),[2];case 4:return this._config.httpsAgent?m.agent=this._config.httpsAgent:m.agent=l.tlsRestrictedAgent,(b=o.request(m,(function(e){if(200==e.statusCode){var t="true"===e.headers["x-ms-qps-subscribed"],n=null;try{n=e.headers[d]?new u.URL(e.headers[d].toString()).host:null}catch(e){S._onError("Failed to parse redirect header from QuickPulse: "+l.dumpObj(e))}var r=e.headers[p]?parseInt(e.headers[p].toString()):null;S._consecutiveErrors=0,h(t,e,n,r)}else S._onError("StatusCode:"+e.statusCode+" StatusMessage:"+e.statusMessage),h()}))).on("error",(function(e){S._onError(e),h()})),b.write(r),b.end(),[2]}}))}))},e.prototype._onError=function(t){this._consecutiveErrors++;var n="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(n="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",a.warn(e.TAG,n,t)):a.info(e.TAG,n,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();e.exports=h},29519:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(41102),s=n(76793),a=n(80446),c=n(54804),l=n(87396),u=function(){function e(e,t,n){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=t||new l,this._sender=new a(this.config,n),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){if(this._isCollectingData){var t=s.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)}},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,n=e.count||1,r=c.PerformanceToQuickPulseCounter[e.name];r&&(this._metrics[r]?(this._metrics[r].Value=(this._metrics[r].Value*this._metrics[r].Weight+t*n)/(this._metrics[r].Weight+n),this._metrics[r].Weight+=n):(this._metrics[r]=s.createQuickPulseMetric(e),this._metrics[r].Name=r,this._metrics[r].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return r(this,void 0,void 0,(function(){var t,n,r,o,a=this;return i(this,(function(i){switch(i.label){case 0:return t=Object.keys(this._metrics).map((function(e){return a._metrics[e]})),n=s.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(n)]:[3,2];case 1:return i.sent(),[3,3];case 2:this._ping(n),i.label=3;case 3:return r=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,o=this._isCollectingData?e.POST_INTERVAL:r,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,o=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(o=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),o),this._handle.unref(),[2]}}))}))},e.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return t.sent(),[2]}}))}))},e.prototype._quickPulseDone=function(e,t,n,r){null!=e?(this._isCollectingData!==e&&(o.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,o.info("Redirecting endpoint to: ",n)),r&&r>0&&(this._pollingIntervalHint=r),t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();e.exports=u},12655:e=>{"use strict";e.exports={getTransmissionTime:function(){return 1e4*(Date.now()+621355968e5)}}},96491:e=>{"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}},43790:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(79896),s=n(70857),a=n(16928),c=n(43106),l=n(54804),u=n(4558),p=n(90244),d=n(66495),h=n(87016),f=n(41102),v=n(28306),m=[200,206,402,408,429,439,500],g=function(){function e(t,n,r,i,o,c,l){this._redirectedHost=null,this._config=t,this._onSuccess=r,this._onError=i,this._statsbeat=o,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._getAuthorizationHandler=n,this._fileCleanupTimer=null,this._tempDir=a.join(s.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),this._isStatsbeatSender=c||!1,this._shutdownStatsbeat=l,this._failedToIngestCounter=0,this._statsbeatHasReachedIngestionAtLeastOnce=!1}return e.prototype.setDiskRetryMode=function(t,n,r){var i=this;t&&v.FileAccessControl.checkFileProtection(),this._enableDiskRetryMode=v.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof n&&n>=0&&(this._resendInterval=Math.floor(n)),"number"==typeof r&&r>=0&&(this._maxBytesOnDisk=Math.floor(r)),t&&!v.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,this._logWarn("Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?(this._statsbeat&&this._statsbeat.addFeature(l.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout((function(){i._fileCleanupTask()}),e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref())):(this._statsbeat&&this._statsbeat.removeFeature(l.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer))},e.prototype.send=function(t,n){return r(this,void 0,void 0,(function(){var r,o,s,a,p,f,v,g,y=this;return i(this,(function(i){switch(i.label){case 0:if(!t)return[3,5];if(r=this._redirectedHost||this._config.endpointUrl,o=new h.URL(r).hostname,s={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},!(a=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null))return[3,4];this._statsbeat&&this._statsbeat.addFeature(l.StatsbeatFeature.AAD_HANDLING),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a.addAuthorizationHeader(s)];case 2:return i.sent(),[3,4];case 3:return p=i.sent(),f="Failed to get AAD bearer token for the Application.",this._enableDiskRetryMode&&(f+="This batch of telemetry items will be retried. ",this._storeToDisk(t)),f+="Error:"+p.toString(),this._logWarn(f),"function"==typeof n&&n(f),[2];case 4:v="",t.forEach((function(e){var t=d.stringify(e);"string"==typeof t&&(v+=t+"\n")})),v.length>0&&(v=v.substring(0,v.length-1)),g=Buffer.from?Buffer.from(v):new Buffer(v),c.gzip(g,(function(i,a){var c=a;i?(y._logWarn(d.dumpObj(i)),c=g,s.headers["Content-Length"]=g.length.toString()):(s.headers["Content-Encoding"]="gzip",s.headers["Content-Length"]=a.length.toString()),y._logInfo(d.dumpObj(s)),s[u.disableCollectionRequestOption]=!0;var p=+new Date,h=d.makeRequest(y._config,r,s,(function(e){e.setEncoding("utf-8");var r="";e.on("data",(function(e){r+=e})),e.on("end",(function(){var i=+new Date-p;if(y._numConsecutiveFailures=0,y._isStatsbeatSender&&!y._statsbeatHasReachedIngestionAtLeastOnce&&(m.includes(e.statusCode)?y._statsbeatHasReachedIngestionAtLeastOnce=!0:y._statsbeatFailedToIngest()),y._statsbeat&&(402==e.statusCode||439==e.statusCode?y._statsbeat.countThrottle(l.StatsbeatNetworkCategory.Breeze,o,e.statusCode):y._statsbeat.countRequest(l.StatsbeatNetworkCategory.Breeze,o,i,200===e.statusCode,e.statusCode)),y._enableDiskRetryMode)if(200===e.statusCode)y._resendTimer||(y._resendTimer=setTimeout((function(){y._resendTimer=null,y._sendFirstFileOnDisk()}),y._resendInterval),y._resendTimer.unref());else if(y._isRetriable(e.statusCode))try{y._statsbeat&&y._statsbeat.countRetry(l.StatsbeatNetworkCategory.Breeze,o,e.statusCode);var s=JSON.parse(r),a=[];s.errors&&(s.errors.forEach((function(e){429!=e.statusCode&&500!=e.statusCode&&503!=e.statusCode||a.push(t[e.index])})),a.length>0&&y._storeToDisk(a))}catch(e){y._storeToDisk(t)}if(307===e.statusCode||308===e.statusCode)if(y._numConsecutiveRedirects++,y._numConsecutiveRedirects<10){var c=e.headers.location?e.headers.location.toString():null;c&&(y._redirectedHost=c,y.send(t,n))}else y._statsbeat&&y._statsbeat.countException(l.StatsbeatNetworkCategory.Breeze,o,{name:"Circular Redirect",message:"Error sending telemetry because of circular redirects."}),"function"==typeof n&&n("Error sending telemetry because of circular redirects.");else y._numConsecutiveRedirects=0,"function"==typeof n&&n(r),y._logInfo(r),"function"==typeof y._onSuccess&&y._onSuccess(r)}))}));h.setTimeout(e.HTTP_TIMEOUT,(function(){y._requestTimedOut=!0,h.abort()})),h.on("error",(function(r){if(y._isStatsbeatSender&&!y._statsbeatHasReachedIngestionAtLeastOnce&&y._statsbeatFailedToIngest(),y._numConsecutiveFailures++,y._statsbeat&&y._statsbeat.countException(l.StatsbeatNetworkCategory.Breeze,o,r),!y._enableDiskRetryMode||y._numConsecutiveFailures>0&&y._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var i="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";y._enableDiskRetryMode&&(i="Ingestion endpoint could not be reached "+y._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),y._logWarn(i,d.dumpObj(r))}else i="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:",y._logInfo(i,d.dumpObj(r));y._onErrorHelper(r),"function"==typeof n&&(r?(y._requestTimedOut&&(r.name="telemetry timeout",r.message="telemetry request timed out"),n(d.dumpObj(r))):n("Error sending telemetry")),y._enableDiskRetryMode&&y._storeToDisk(t)})),h.write(c),h.end()})),i.label=5;case 5:return[2]}}))}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(d.stringify(e))},e.prototype._isRetriable=function(e){return 206===e||401===e||403===e||408===e||429===e||500===e||502===e||503===e||504===e},e.prototype._logInfo=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this._isStatsbeatSender||f.info(e.TAG,t,n)},e.prototype._logWarn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this._isStatsbeatSender||f.warn(e.TAG,t,n)},e.prototype._statsbeatFailedToIngest=function(){this._shutdownStatsbeat&&(this._failedToIngestCounter++,this._failedToIngestCounter>=3&&this._shutdownStatsbeat())},e.prototype._storeToDisk=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,s,c,l;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this._logInfo("Checking existence of data storage directory: "+this._tempDir),[4,p.confirmDirExists(this._tempDir)];case 1:return i.sent(),[3,3];case 2:return t=i.sent(),this._logWarn("Failed to create folder to put telemetry: "+d.dumpObj(t)),this._onErrorHelper(t),[2];case 3:return i.trys.push([3,5,,6]),[4,v.FileAccessControl.applyACLRules(this._tempDir)];case 4:return i.sent(),[3,6];case 5:return n=i.sent(),this._logWarn("Failed to apply file access control to folder: "+d.dumpObj(n)),this._onErrorHelper(n),[2];case 6:return i.trys.push([6,8,,9]),[4,p.getShallowDirectorySize(this._tempDir)];case 7:return(r=i.sent())>this._maxBytesOnDisk?(this._logWarn("Not saving data due to max size limit being met. Directory size in bytes is: "+r),[2]):[3,9];case 8:return o=i.sent(),this._logWarn("Failed to read directory for retriable telemetry: "+d.dumpObj(o)),this._onErrorHelper(o),[2];case 9:return i.trys.push([9,11,,12]),s=(new Date).getTime()+".ai.json",c=a.join(this._tempDir,s),this._logInfo("saving data to disk at: "+c),[4,p.writeFileAsync(c,d.stringify(e),{mode:384})];case 10:return i.sent(),[3,12];case 11:return l=i.sent(),this._logWarn("Failed to persist telemetry to disk: "+d.dumpObj(l)),this._onErrorHelper(l),[2];case 12:return[2]}}))}))},e.prototype._storeToDiskSync=function(e){try{this._logInfo("Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),v.FileAccessControl.applyACLRulesSync(this._tempDir);var t=p.getShallowDirectorySizeSync(this._tempDir);if(t>this._maxBytesOnDisk)return void this._logInfo("Not saving data due to max size limit being met. Directory size in bytes is: "+t);var n=(new Date).getTime()+".ai.json",r=a.join(this._tempDir,n);this._logInfo("saving data before crash to disk at: "+r),o.writeFileSync(r,e,{mode:384})}catch(e){this._logWarn("Error while saving data to disk: "+d.dumpObj(e)),this._onErrorHelper(e)}},e.prototype._sendFirstFileOnDisk=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,o,s;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),[4,p.readdirAsync(this._tempDir)];case 1:return(e=(e=i.sent()).filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0?(t=e[0],n=a.join(this._tempDir,t),[4,p.readFileAsync(n)]):[3,5];case 2:return r=i.sent(),[4,p.unlinkAsync(n)];case 3:return i.sent(),o=JSON.parse(r.toString()),[4,this.send(o)];case 4:i.sent(),i.label=5;case 5:return[3,7];case 6:return s=i.sent(),this._onErrorHelper(s),[3,7];case 7:return[2]}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.prototype._fileCleanupTask=function(){return r(this,void 0,void 0,(function(){var t,n,r,o,s,c=this;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),[4,p.readdirAsync(this._tempDir)];case 1:if(!((t=(t=i.sent()).filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0))return[3,5];n=0,i.label=2;case 2:return n<t.length?(r=new Date(parseInt(t[n].split(".ai.json")[0])),new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>r?(o=a.join(this._tempDir,t[n]),[4,p.unlinkAsync(o).catch((function(e){c._onErrorHelper(e)}))]):[3,4]):[3,5];case 3:i.sent(),i.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return"ENOENT"!=(s=i.sent()).code&&this._onErrorHelper(s),[3,7];case 7:return[2]}}))}))},e.TAG="Sender",e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=52428800,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=36e5,e.FILE_RETEMPTION_PERIOD=6048e5,e.TEMPDIR_PREFIX="appInsights-node",e.HTTP_TIMEOUT=2e4,e}();e.exports=g},44989:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isContentTypeHeaderHtml=t.insertSnippetByIndex=t.getContentEncodingFromHeaders=t.isSupportedContentEncoding=t.findBufferEncodingType=t.isBufferType=t.getBrotliDecompressSync=t.getBrotliDecompressAsync=t.getBrotliCompressSync=t.getBrotliCompressAsync=t.inflateAsync=t.deflateAsync=t.gunzipAsync=t.gzipAsync=t.isBrotliSupperted=t.bufferEncodingTypes=t.contentEncodingMethod=void 0;var r,i=n(43106),o=n(39023);!function(e){e.GZIP="gzip",e.DEFLATE="deflate",e.BR="br"}(r=t.contentEncodingMethod||(t.contentEncodingMethod={})),t.bufferEncodingTypes=["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"],t.isBrotliSupperted=function(){var e=process.versions.node.split(".")[0];return parseInt(e)>=10},t.gzipAsync=o.promisify(i.gzip),t.gunzipAsync=o.promisify(i.gunzip),t.deflateAsync=o.promisify(i.deflate),t.inflateAsync=o.promisify(i.inflate),t.getBrotliCompressAsync=function(e){return t.isBrotliSupperted()&&"function"==typeof e.brotliCompress?o.promisify(e.brotliCompress):null},t.getBrotliCompressSync=function(e){return t.isBrotliSupperted()&&"function"==typeof e.brotliCompressSync?e.brotliCompressSync:null},t.getBrotliDecompressAsync=function(e){return t.isBrotliSupperted()&&"function"==typeof e.brotliDecompress?o.promisify(e.brotliDecompress):null},t.getBrotliDecompressSync=function(e){return t.isBrotliSupperted()&&"function"==typeof e.brotliDecompressSync?e.brotliDecompressSync:null},t.isBufferType=function(e,t){var n=t||"utf8",r=!1;return Buffer.isEncoding(n)&&(r=Buffer.from(e.toString(n),n).toJSON().data.toString()===e.toJSON().data.toString()),r},t.findBufferEncodingType=function(e){var n=null;for(var r in t.bufferEncodingTypes){var i=t.bufferEncodingTypes[r];if(Buffer.isEncoding(i)&&t.isBufferType(e,i)){n=i;break}}return n},t.isSupportedContentEncoding=function(e){var t=null;switch(e){case"gzip":t=r.GZIP;break;case"br":t=r.BR;break;case"deflate":t=r.DEFLATE}return t},t.getContentEncodingFromHeaders=function(e){var n=[],r=e.getHeader("Content-Encoding");if(!r)return null;if("string"==typeof r){var i=t.isSupportedContentEncoding(r);i&&n.push(i)}return n},t.insertSnippetByIndex=function(e,t,n){return e<0?null:t.substring(0,e)+'<script type="text/javascript">'+n+"<\/script>"+t.substring(e)},t.isContentTypeHeaderHtml=function(e){var t=!1,n=e.getHeader("Content-Type");return n&&(t="string"==typeof n?n.indexOf("html")>=0:n.toString().indexOf("html")>=0),t}},17131:(e,t,n)=>{"use strict";var r=n(87016),i=n(181),o=n(3144),s=n(87396),a=n(94909),c=n(79004),l=n(64346),u=n(13097),p=n(35884),d=n(43790),h=n(66495),f=n(41102),v=n(43273),m=function(){function e(e){this._telemetryProcessors=[];var t=new i(e);if(this.config=t,!this.config.instrumentationKey||""==this.config.instrumentationKey)throw new Error("Instrumentation key not found, please provide a connection string before starting Application Insights SDK.");this.context=new s,this.commonProperties={},this.authorizationHandler=null,this.config.disableStatsbeat||(this._statsbeat=new p(this.config,this.context),this._statsbeat.enable(!0));var n=new d(this.config,this.getAuthorizationHandler,null,null,this._statsbeat);this.channel=new c((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),n)}return e.prototype.trackAvailability=function(e){this.track(e,a.TelemetryType.Availability)},e.prototype.trackPageView=function(e){this.track(e,a.TelemetryType.PageView)},e.prototype.trackTrace=function(e){this.track(e,a.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,a.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!h.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,a.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,a.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,a.TelemetryType.Request)},e.prototype.trackDependency=function(t){if(t&&!t.target&&t.data)try{t.target=new r.URL(t.data).host}catch(n){t.target=null,f.warn(e.TAG,"The URL object is failed to create.",n)}this.track(t,a.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(t,n){if(t&&a.telemetryTypeToBaseType(n)){var r=v.createEnvelope(t,n,this.commonProperties,this.context,this.config);t.time&&(r.time=t.time.toISOString());var i=this.runTelemetryProcessors(r,t.contextObjects);i=i&&l.samplingTelemetryProcessor(r,{correlationContext:u.CorrelationContextManager.getCurrentContext()}),l.preAggregatedMetricsTelemetryProcessor(r,this.context),i&&(l.performanceMetricsTelemetryProcessor(r,this.quickPulseClient),this.channel.send(r))}else f.warn(e.TAG,"track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(e){},e.prototype.getAuthorizationHandler=function(t){return t&&t.aadTokenCredential?(this.authorizationHandler||(f.info(e.TAG,"Adding authorization handler"),this.authorizationHandler=new o(t.aadTokenCredential)),this.authorizationHandler):null},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(t,n){var r=!0,i=this._telemetryProcessors.length;if(0===i)return r;(n=n||{}).correlationContext=u.CorrelationContextManager.getCurrentContext();for(var o=0;o<i;++o)try{var s=this._telemetryProcessors[o];if(s&&!1===s.apply(null,[t,n])){r=!1;break}}catch(n){r=!0,f.warn(e.TAG,"One of telemetry processors failed, telemetry item will be sent.",n,t)}return r&&(t&&t.tags&&(t.tags=h.validateStringMap(t.tags)),t&&t.data&&t.data.baseData&&t.data.baseData.properties&&(t.data.baseData.properties=h.validateStringMap(t.data.baseData.properties))),r},e.prototype.getStatsbeat=function(){return this._statsbeat},e.TAG="TelemetryClient",e}();e.exports=m},24782:(e,t,n)=>{"use strict";var r=n(66495),i=n(24835),o=function(){function e(t,n){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var o=t.trim().split("-"),s=o.length;s>=4?(this.version=o[0],this.traceId=o[1],this.spanId=o[2],this.traceFlag=o[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),"00"===this.version&&4!==s&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(n){this.parentId=n.slice();var a=i.getRootId(n);e.isValidTraceId(a)||(this.legacyRootId=a,a=r.w3cTraceId()),-1!==n.indexOf("|")&&(n=n.substring(1+n.substring(0,n.length-1).lastIndexOf("."),n.length-1)),this.traceId=a,this.spanId=n}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.formatOpenTelemetryTraceFlags=function(e){var t="0"+e.toString(16);return t.substring(t.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();e.exports=o},71113:e=>{"use strict";var t=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var n=t[0].trim(),r=t[1].trim(),i=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),o=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return i&&o}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var n=[],r={},i=t.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o].trim();if(0!==a.length){var c=a.split("=");if(2!==c.length)return null;if(!e.validateKeyChars(c[0]))return null;if(r[c[0]])return null;r[c[0]]=!0,n.push(a)}}return n},e.strict=!0,e}();e.exports=t},66495:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=n(58611),o=n(65692),s=n(87016),a=n(49140),c=n(41102),l=n(96491),u=n(77215),p=function(){function e(){e._addCloseHandler()}return e.getCookie=function(t,n){var r="";if(t&&t.length&&"string"==typeof n)for(var i=t+"=",o=n.split(";"),s=0;s<o.length;s++)if(n=o[s],(n=e.trim(n))&&0===n.indexOf(i)){r=n.substring(i.length,o[s].length);break}return r},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},n=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),r=(Buffer.from?Buffer.from(n,"binary"):new Buffer(n,"binary")).toString("base64");return r.substr(0,r.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",i=0;i<4;i++)r+=n[15&(t=e.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var o=n[8+4*Math.random()|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return"[object Error]"===Object.prototype.toString.call(e)},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,i=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,n=n.length<2?"0"+n:n,(i>0?i+".":"")+(r=r.length<2?"0"+r:r)+":"+n+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var n={};for(var r in t){var i="",o=t[r],s=typeof o;if(e.isPrimitive(o))i=o.toString();else if(null===o||"undefined"===s)i="";else{if("function"===s){c.info("key: "+r+" was function; will not serialize");continue}var a=e.isArray(o)?o:e.extractObject(o);try{i=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){i=o.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+r+", could not be serialized")}}n[r]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return n}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||0==n.length||!t)return!0;for(var r=0;r<n.length;r++){var i=new RegExp(n[r].replace(/\./g,".").replace(/\*/g,".*"));try{if(i.test(new s.URL(t).hostname))return!1}catch(e){}}return!0},e.getCorrelationContextTarget=function(e,t){var n=e.headers&&e.headers[l.requestContextHeader];if(n)for(var r=n.split(","),i=0;i<r.length;++i){var o=r[i].split("=");if(2==o.length&&o[0]==t)return o[1]}},e.makeRequest=function(t,n,a,l,u,p){void 0===u&&(u=!0),void 0===p&&(p=!0),n&&0===n.indexOf("//")&&(n="https:"+n);var d=new s.URL(n),h=r(r({},a),{host:d.hostname,port:d.port,path:d.pathname}),f=void 0;if(u&&("https:"===d.protocol&&(f=t.proxyHttpsUrl||void 0),"http:"===d.protocol&&(f=t.proxyHttpUrl||void 0),f)){0===f.indexOf("//")&&(f="http:"+f);try{var v=new s.URL(f);"https:"===v.protocol?(c.info("Proxies that use HTTPS are not supported"),f=void 0):h=r(r({},h),{host:v.hostname,port:v.port||"80",path:n,headers:r(r({},h.headers),{Host:d.hostname})})}catch(e){c.warn("Wrong proxy URL provided")}}var m="https:"===d.protocol&&!f;return p&&(m&&void 0!==t.httpsAgent?h.agent=t.httpsAgent:m||void 0===t.httpAgent?m&&(h.agent=e._useKeepAlive?e.keepAliveAgent:e.tlsRestrictedAgent):h.agent=t.httpAgent),m?o.request(h,l):i.request(h,l)},e.safeIncludeCorrelationHeader=function(t,n,r){var i;if("string"==typeof r)i=r;else if(r instanceof Array)i=r.join(",");else if(r&&"function"==typeof r.toString)try{i=r.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,r)}i?e.addCorrelationIdHeaderFromString(t,n,i):n.setHeader(l.requestContextHeader,l.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(e){if(e)try{var t=Object.prototype.toString.call(e);return t+("[object Error]"===t?"{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":this.stringify(e))}catch(t){return e.toString()}},e.stringify=function(e){try{return JSON.stringify(e)}catch(t){c.warn("Failed to serialize payload",t,e)}},e.addCorrelationIdHeaderFromString=function(e,t,n){var r=n.split(","),i=l.requestContextSourceKey+"=";r.some((function(e){return e.substring(0,i.length)===i}))||t.setHeader(l.requestContextHeader,n+","+l.requestContextSourceKey+"="+e.config.correlationId)},e._addCloseHandler=function(){e._listenerAttached||(process.on("exit",(function(){e.isNodeExit=!0,e._useKeepAlive=!1})),e._listenerAttached=!0)},e._useKeepAlive=!u.JsonConfig.getInstance().noHttpAgentKeepAlive,e._listenerAttached=!1,e.MAX_PROPERTY_LENGTH=8192,e.keepAliveAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e.tlsRestrictedAgent=new o.Agent({secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e.isNodeExit=!1,e}();e.exports=p},5113:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.azureRoleEnvironmentTelemetryProcessor=void 0,t.azureRoleEnvironmentTelemetryProcessor=function(e,t){}},32154:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performanceMetricsTelemetryProcessor=void 0;var r=n(38441),i=n(94909);t.performanceMetricsTelemetryProcessor=function(e,t){switch(t&&t.addDocument(e),e.data.baseType){case i.TelemetryTypeString.Exception:r.countException();break;case i.TelemetryTypeString.Request:var n=e.data.baseData;r.countRequest(n.duration,n.success);break;case i.TelemetryTypeString.Dependency:var o=e.data.baseData;r.countDependency(o.duration,o.success)}return!0}},66216:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.preAggregatedMetricsTelemetryProcessor=void 0;var i=n(94909),o=n(85534),s=n(94909);t.preAggregatedMetricsTelemetryProcessor=function(e,t){if(o.isEnabled())switch(e.data.baseType){case s.TelemetryTypeString.Exception:var n=e.data.baseData;n.properties=r(r({},n.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole]};o.countException(a);break;case s.TelemetryTypeString.Trace:var c=e.data.baseData;c.properties=r(r({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var l={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],traceSeverityLevel:i.SeverityLevel[c.severity]};o.countTrace(l);break;case s.TelemetryTypeString.Request:var u=e.data.baseData;u.properties=r(r({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var p={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],requestSuccess:u.success,requestResultCode:u.responseCode};o.countRequest(u.duration,p);break;case s.TelemetryTypeString.Dependency:var d=e.data.baseData;d.properties=r(r({},d.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var h={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],dependencySuccess:d.success,dependencyType:d.type,dependencyTarget:d.target,dependencyResultCode:d.resultCode};o.countDependency(d.duration,h)}return!0}},8592:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSamplingHashCode=t.samplingTelemetryProcessor=void 0;var r=n(94909);function i(e){var t=2147483647,n=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var r=0;r<e.length;r++)n=((n<<5)+n|0)+e.charCodeAt(r)|0;return(n=n<=-2147483648?t:Math.abs(n))/t*100}t.samplingTelemetryProcessor=function(e,t){var n=e.sampleRate;return null==n||n>=100||!(!e.data||r.TelemetryType.Metric!==r.baseTypeToTelemetryType(e.data.baseType))||(t.correlationContext&&t.correlationContext.operation?i(t.correlationContext.operation.id)<n:100*Math.random()<n)},t.getSamplingHashCode=i},64346:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5113),t),i(n(8592),t),i(n(32154),t),i(n(66216),t)},86048:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.Configuration=t.wrapWithCorrelationContext=t.startOperation=t.getCorrelationContext=t.start=t.setup=t.liveMetricsClient=t.defaultClient=t.DistributedTracingModes=void 0;var r,i=n(13097),o=n(43970),s=n(8025),a=n(38441),c=n(85534),l=n(43511),u=n(41860),p=n(4558),d=n(93633),h=n(24835),f=n(41102),v=n(29519),m=n(30460),g=n(66784);t.TelemetryClient=n(68668),t.Contracts=n(94909),t.azureFunctionsTypes=n(88470),function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C"}(r=t.DistributedTracingModes||(t.DistributedTracingModes={}));var y,b,_,E,S,w,P,T,C,x,I,O,R,D=function(){return!1},k=function(){return!0},A=function(){return!0},N=function(){return!0},j=function(){return!1},M=function(){return!0},L=function(){return!0},F=function(){return!0},V=function(){return!0},U=function(){return!1},W=function(){return!0},H=function(){return!1},q=function(){return!1},$=function(){return!1},B=function(){return!0}(),K=D(),G=$(),z=k(),Y=A(),J=N(),X=j(),Q=M(),Z=L(),ee=F(),te=V(),ne=U(),re=W(),ie=H(),oe=q(),se=void 0,ae=void 0,ce=void 0,le=!1;function ue(){return t.defaultClient?(le=!0,_.enable(B,K),E.enable(z),S.enable(Y),w.enable(J),P.enable(X),C.enable(re,b),x.useAutoCorrelation(te,y),x.enable(Q),I.enable(Z),T.enable(ie,ce),t.liveMetricsClient&&ne&&t.liveMetricsClient.enable(ne),O.enable(oe)):f.warn("Start cannot be called before setup"),pe}t.setup=function(e){return t.defaultClient?f.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(e),function(){B=void 0!==t.defaultClient.config.enableAutoCollectExternalLoggers?t.defaultClient.config.enableAutoCollectExternalLoggers:B,K=void 0!==t.defaultClient.config.enableAutoCollectConsole?t.defaultClient.config.enableAutoCollectConsole:K,G=void 0!==t.defaultClient.config.enableLoggerErrorToTrace?t.defaultClient.config.enableLoggerErrorToTrace:G,z=void 0!==t.defaultClient.config.enableAutoCollectExceptions?t.defaultClient.config.enableAutoCollectExceptions:z,Y=void 0!==t.defaultClient.config.enableAutoCollectPerformance?t.defaultClient.config.enableAutoCollectPerformance:Y,J=void 0!==t.defaultClient.config.enableAutoCollectPreAggregatedMetrics?t.defaultClient.config.enableAutoCollectPreAggregatedMetrics:J,X=void 0!==t.defaultClient.config.enableAutoCollectHeartbeat?t.defaultClient.config.enableAutoCollectHeartbeat:X,Q=void 0!==t.defaultClient.config.enableAutoCollectRequests?t.defaultClient.config.enableAutoCollectRequests:Q,Z=void 0!==t.defaultClient.config.enableAutoDependencyCorrelation?t.defaultClient.config.enableAutoDependencyCorrelation:Z,ee=void 0!==t.defaultClient.config.enableUseDiskRetryCaching?t.defaultClient.config.enableUseDiskRetryCaching:ee,te=void 0!==t.defaultClient.config.enableAutoDependencyCorrelation?t.defaultClient.config.enableAutoDependencyCorrelation:te,y=void 0!==t.defaultClient.config.enableUseAsyncHooks?t.defaultClient.config.enableUseAsyncHooks:y,ne=void 0!==t.defaultClient.config.enableSendLiveMetrics?t.defaultClient.config.enableSendLiveMetrics:ne,ie=!0===t.defaultClient.config.enableAutoWebSnippetInjection||ie,oe=void 0!==t.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions?t.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions:oe;var e=m.AutoCollectNativePerformance.parseEnabled(t.defaultClient.config.enableAutoCollectExtendedMetrics,t.defaultClient.config);re=e.isEnabled,b=e.disabledMetrics}(),_=new o(t.defaultClient),E=new s(t.defaultClient),S=new a(t.defaultClient),w=new c(t.defaultClient),P=new l(t.defaultClient),T=new u(t.defaultClient),x=new d(t.defaultClient),I=new p(t.defaultClient),C||(C=new m.AutoCollectNativePerformance(t.defaultClient)),O=new g.AzureFunctionsHook(t.defaultClient)),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(ee,se,ae),pe},t.start=ue,t.getCorrelationContext=function(){return te?i.CorrelationContextManager.getCurrentContext():null},t.startOperation=function(e,t){return i.CorrelationContextManager.startOperation(e,t)},t.wrapWithCorrelationContext=function(e,t){return i.CorrelationContextManager.wrapCallback(e,t)};var pe=function(){function e(){}return e.setDistributedTracingMode=function(t){return h.w3cEnabled=t===r.AI_AND_W3C,e},e.setAutoCollectConsole=function(t,n){return void 0===n&&(n=!1),B=t,K=n,le&&_.enable(t,n),e},e.setAutoCollectExceptions=function(t){return z=t,le&&E.enable(t),e},e.setAutoCollectPerformance=function(n,r){void 0===r&&(r=!0),Y=n;var i=m.AutoCollectNativePerformance.parseEnabled(r,t.defaultClient.config);return re=i.isEnabled,b=i.disabledMetrics,le&&(S.enable(n),C.enable(i.isEnabled,i.disabledMetrics)),e},e.setAutoCollectPreAggregatedMetrics=function(t){return J=t,le&&w.enable(t),e},e.setAutoCollectHeartbeat=function(t){return X=t,le&&P.enable(t),e},e.enableAutoWebSnippetInjection=function(t,n){return ie=t,ce=n,le&&T.enable(t,ce),e},e.enableWebInstrumentation=function(t,n){return ie=t,ce=n,le&&T.enable(t,ce),e},e.setAutoCollectRequests=function(t){return Q=t,le&&x.enable(t),e},e.setAutoCollectDependencies=function(t){return Z=t,le&&I.enable(t),e},e.setAutoDependencyCorrelation=function(t,n){return te=t,y=n,le&&x.useAutoCorrelation(t,n),e},e.setUseDiskRetryCaching=function(n,r,i){return ee=n,se=r,ae=i,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(ee,se,ae),e},e.setInternalLogging=function(t,n){return void 0===t&&(t=!1),void 0===n&&(n=!0),f.enableDebug=t,f.disableWarnings=!n,e},e.setAutoCollectIncomingRequestAzureFunctions=function(t){return oe=t,le&&O.enable(t),e},e.setSendLiveMetrics=function(n){return void 0===n&&(n=!1),t.defaultClient?(!t.liveMetricsClient&&n?(t.liveMetricsClient=new v(t.defaultClient.config,t.defaultClient.context,t.defaultClient.getAuthorizationHandler),R=new a(t.liveMetricsClient,1e3,!0),t.liveMetricsClient.addCollector(R),t.defaultClient.quickPulseClient=t.liveMetricsClient):t.liveMetricsClient&&t.liveMetricsClient.enable(n),ne=n,e):(f.warn("Live metrics client cannot be setup without the default client"),e)},e.start=ue,e}();t.Configuration=pe,t.dispose=function(){h.w3cEnabled=!0,t.defaultClient=null,le=!1,_&&_.dispose(),E&&E.dispose(),S&&S.dispose(),w&&w.dispose(),P&&P.dispose(),T&&T.dispose(),C&&C.dispose(),x&&x.dispose(),I&&I.dispose(),t.liveMetricsClient&&(t.liveMetricsClient.enable(!1),ne=!1,t.liveMetricsClient=void 0),O&&O.dispose()}},59241:(e,t,n)=>{var r=n(35317),i=n(79896),o=n(16928);e.exports=function(){if("x64"===process.arch)return"x64";if("darwin"===process.platform)return"x64";if("win32"===process.platform){var e=!1;try{e=!(!process.env.SYSTEMROOT||!i.statSync(process.env.SYSTEMROOT))}catch(e){}var t=e?process.env.SYSTEMROOT:"C:\\Windows",n=!1;try{n=!!i.statSync(o.join(t,"sysnative"))}catch(e){}return n?"x64":"x86"}return"linux"===process.platform&&"64\n"===r.execSync("getconf LONG_BIT",{encoding:"utf8"})?"x64":"x86"}},97696:(e,t,n)=>{"use strict";const r=process.binding("async_wrap"),i=r.Providers.TIMERWRAP,o={nextTick:n(43326),promise:n(83582),timers:n(9005)},s=new Set;function a(){this.enabled=!1,this.counter=0}function c(){const e=this.initFns=[],t=this.preFns=[],n=this.postFns=[],r=this.destroyFns=[];this.init=function(t,n,r,o){if(n!==i)for(const i of e)i(t,this,n,r,o);else s.add(t)},this.pre=function(e){if(!s.has(e))for(const n of t)n(e,this)},this.post=function(e,t){if(!s.has(e))for(const r of n)r(e,this,t)},this.destroy=function(e){if(s.has(e))s.delete(e);else for(const t of r)t(e)}}function l(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function u(){this._state=new a,this._hooks=new c,this.version=n(65465).rE,this.providers=r.Providers;for(const e of Object.keys(o))o[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}c.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},c.prototype.remove=function(e){e.init&&l(this.initFns,e.init),e.pre&&l(this.preFns,e.pre),e.post&&l(this.postFns,e.post),e.destroy&&l(this.destroyFns,e.destroy)},e.exports=u,u.prototype.addHooks=function(e){this._hooks.add(e)},u.prototype.removeHooks=function(e){this._hooks.remove(e)},u.prototype.enable=function(){this._state.enabled=!0,r.enable()},u.prototype.disable=function(){this._state.enabled=!1,r.disable()}},82910:(e,t,n)=>{"use strict";const r=n(97696);if(global._asyncHook){if(global._asyncHook.version!==n(65465).rE)throw new Error("Conflicting version of async-hook-jl found");e.exports=global._asyncHook}else n(52103).filter.attach((function(e,t){return t.filter((function(e){const t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),e.exports=global._asyncHook=new r},43326:e=>{"use strict";function t(){}e.exports=function(){const e=this._hooks,n=this._state,r=process.nextTick;process.nextTick=function(){if(!n.enabled)return r.apply(process,arguments);const i=new Array(arguments.length);for(let e=0;e<arguments.length;e++)i[e]=arguments[e];const o=i[0];if("function"!=typeof o)throw new TypeError("callback is not a function");const s=new t,a=--n.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let t=!0;try{o.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(s,a,!0),e.destroy.call(null,a)}))}e.post.call(s,a,!1),e.destroy.call(null,a)},r.apply(process,i)}}},83582:e=>{"use strict";function t(){}e.exports=function(){const e=this._hooks,n=this._state,r=global.Promise,i=r.prototype.then;function o(t,n,r,i){return"function"!=typeof t?i?function(t){return function(n){return e.destroy.call(null,t),n}}(r):function(t){return function(n){throw e.destroy.call(null,t),n}}(r):function(){e.pre.call(n,r);try{return t.apply(this,arguments)}finally{e.post.call(n,r,!1),e.destroy.call(null,r)}}}r.prototype.then=function(r,s){if(!n.enabled)return i.call(this,r,s);const a=new t,c=--n.counter;return e.init.call(a,c,0,null,null),i.call(this,o(r,a,c,!0),o(s,a,c,!1))}}},9005:(e,t,n)=>{"use strict";const r=n(53557);function i(){}function o(){}function s(){}const a=new Map,c=new Map,l=new Map;let u=null,p=!1;function d(e,t,n,i,o,s,a){const c=r[n],l=r[i];r[n]=function(){if(!t.enabled)return c.apply(r,arguments);const n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];const i=n[0];if("function"!=typeof i)throw new TypeError('"callback" argument must be a function');const l=new o,d=--t.counter;let h;return e.init.call(l,d,0,null,null),n[0]=function(){u=h,e.pre.call(l,d);let t=!0;try{i.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(l,d,!0),s.delete(h),e.destroy.call(null,d)}))}e.post.call(l,d,!1),u=null,(a||p)&&(p=!1,s.delete(h),e.destroy.call(null,d))},h=c.apply(r,n),s.set(h,d),h},r[i]=function(t){if(u===t&&null!==t)p=!0;else if(s.has(t)){const n=s.get(t);s.delete(t),e.destroy.call(null,n)}l.apply(r,arguments)}}e.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",i,a,!0),d(this._hooks,this._state,"setInterval","clearInterval",o,c,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",s,l,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate}},93360:e=>{"use strict";e.exports=(e,t)=>class extends e{constructor(e){var n,r;super((function(e,o){n=this,r=[function(n){return t(i,!1),e(n)},function(e){return t(i,!1),o(e)}]}));var i=this;try{e.apply(n,r)}catch(e){r[1](e)}return i}}},29661:(e,t,n)=>{var r,i,o=n(81132).wrap,s=1,a=2,c=4,l=8,u=[],p=0,d=!1,h=[];function f(e,t){var n=e.length,r=t.length,i=[];if(0===n&&0===r)return i;for(var o=0;o<n;o++)i[o]=e[o];if(0===r)return i;for(var s=0;s<r;s++){var a=!0;for(o=0;o<n;o++)if(e[o].uid===t[s].uid){a=!1;break}a&&i.push(t[s])}return i}if(process._fatalException){var v,m=!1;r=function(e){var t=u.length;if(m||0===t)return!1;var n=!1;m=!0;for(var r=0;r<t;++r){var i=u[r];if(i.flags&l){var o=v&&v[i.uid];n=i.error(o,e)||n}}return m=!1,h.length>0&&(u=h.pop()),v=void 0,n&&!d},i=function(e,t,n){var r=[];d=!0;for(var i=0;i<n;++i){var o=t[i];if(r[o.uid]=o.data,o.flags&s){var l=o.create(o.data);void 0!==l&&(r[o.uid]=l)}}return d=!1,function(){v=r,h.push(u),u=f(t,u),d=!0;for(var i=0;i<n;++i)(t[i].flags&a)>0&&t[i].before(this,r[t[i].uid]);d=!1;var o=e.apply(this,arguments);for(d=!0,i=0;i<n;++i)(t[i].flags&c)>0&&t[i].after(this,r[t[i].uid]);return d=!1,u=h.pop(),v=void 0,o}},o(process,"_fatalException",(function(e){return function(t){return r(t)||e(t)}}))}else{var g=!1;r=function(e){if(g)throw e;for(var t=!1,n=u.length,r=0;r<n;++r){var i=u[r];i.flags&l&&(t=i.error(null,e)||t)}if(!t&&d)throw e},i=function(e,t,n){var i=[];d=!0;for(var o=0;o<n;++o){var p=t[o];if(i[p.uid]=p.data,p.flags&s){var v=p.create(p.data);void 0!==v&&(i[p.uid]=v)}}return d=!1,function(){var o,s=!1,p=!1;h.push(u),u=f(t,u),d=!0;for(var v=0;v<n;++v)(t[v].flags&a)>0&&t[v].before(this,i[t[v].uid]);d=!1;try{o=e.apply(this,arguments)}catch(e){for(s=!0,v=0;v<n;++v)if(u[v].flags&l)try{p=u[v].error(i[t[v].uid],e)||p}catch(e){throw g=!0,e}if(!p)throw process.removeListener("uncaughtException",r),process._originalNextTick((function(){process.addListener("uncaughtException",r)})),e}finally{if(!s||p){for(d=!0,v=0;v<n;++v)(t[v].flags&c)>0&&t[v].after(this,i[t[v].uid]);d=!1}u=h.pop()}return o}},process.addListener("uncaughtException",r)}function y(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=s),"function"==typeof e.before&&(this.before=e.before,this.flags|=a),"function"==typeof e.after&&(this.after=e.after,this.flags|=c),"function"==typeof e.error&&(this.error=e.error,this.flags|=l),this.uid=++p,this.data=void 0===t?null:t}function b(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof y?e:new y(e,t)}y.prototype.create=void 0,y.prototype.before=void 0,y.prototype.after=void 0,y.prototype.error=void 0,y.prototype.data=void 0,y.prototype.uid=0,y.prototype.flags=0,process.createAsyncListener=b,process.addAsyncListener=function(e,t){var n;n=e instanceof y?e:b(e,t);for(var r=!1,i=0;i<u.length;i++)if(n===u[i]){r=!0;break}return r||u.push(n),n},process.removeAsyncListener=function(e){for(var t=0;t<u.length;t++)if(e===u[t]){u.splice(t,1);break}},e.exports=function(e){var t=u.length;if(0===t)return e;for(var n=u.slice(),r=0;r<t;++r)if(n[r].flags>0)return i(e,n,t);return function(e,t,n){d=!0;for(var r=0;r<n;++r){var i=t[r];i.create&&i.create(i.data)}return d=!1,function(){h.push(u),u=f(t,u);var n=e.apply(this,arguments);return u=h.pop(),n}}(e,n,t)}},14518:(e,t,n)=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var r=n(81132),i=n(32520),o=r.wrap,s=r.massWrap,a=n(29661),c=n(39023),l=i.gte(process.version,"6.0.0"),u=i.gte(process.version,"7.0.0"),p=i.gte(process.version,"8.0.0"),d=i.gte(process.version,"11.0.0"),h=n(69278);function f(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=a(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=a(this._handle.onconnection))}}}function v(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=a(t._originalOnread)}}u&&!h._normalizeArgs?h._normalizeArgs=function(e){if(0===e.length)return[{},null];var t,n,r=e[0],i={};"object"==typeof r&&null!==r?i=r:"string"==typeof(t=r)&&!1===(n=t,(n=Number(n))>=0&&n)?i.path=r:(i.port=r,e.length>1&&"string"==typeof e[1]&&(i.host=e[1]));var o=e[e.length-1];return"function"!=typeof o?[i,null]:[i,o]}:u||h._normalizeConnectArgs||(h._normalizeConnectArgs=function(e){var t,n={};"object"==typeof e[0]&&null!==e[0]?n=e[0]:"string"==typeof e[0]&&!1===(t=e[0],(t=Number(t))>=0&&t)?n.path=e[0]:(n.port=e[0],"string"==typeof e[1]&&(n.host=e[1]));var r=e[e.length-1];return"function"==typeof r?[n,r]:[n]}),"_setUpListenHandle"in h.Server.prototype?o(h.Server.prototype,"_setUpListenHandle",f):o(h.Server.prototype,"_listen2",f),o(h.Socket.prototype,"connect",(function(e){return function(){var t;(t=p&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:u?h._normalizeArgs(arguments):h._normalizeConnectArgs(arguments))[1]&&(t[1]=a(t[1]));var n=e.apply(this,t);return v(this),n}}));var m=n(58611);o(m.Agent.prototype,"addRequest",(function(e){return function(t){var n=t.onSocket;return t.onSocket=a((function(e){return v(e),n.apply(this,arguments)})),e.apply(this,arguments)}}));var g=n(35317);function y(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=a(e._handle.onread),o(e._handle,"close",k))})),e._handle&&(e._handle.onexit=a(e._handle.onexit))}g.ChildProcess?o(g.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return y(this),t}})):s(g,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return y(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var b=[];process._nextDomainTick&&b.push("_nextDomainTick"),process._tickDomainCallback&&b.push("_tickDomainCallback"),s(process,b,D),o(process,"nextTick",k);var _=["setTimeout","setInterval"];global.setImmediate&&_.push("setImmediate");var E=n(53557),S=global.setTimeout===E.setTimeout;s(E,_,k),S&&s(global,_,k);var w=n(72250);s(w,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],D),w.resolveNaptr&&o(w,"resolveNaptr",D);var P,T,C=n(79896);s(C,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],D),C.lchown&&o(C,"lchown",D),C.lchmod&&o(C,"lchmod",D),C.ftruncate&&o(C,"ftruncate",D);try{P=n(43106)}catch(e){}if(P&&P.Deflate&&P.Deflate.prototype){var x=Object.getPrototypeOf(P.Deflate.prototype);x._transform?o(x,"_transform",D):x.write&&x.flush&&x.end&&s(x,["write","flush","end"],D)}try{T=n(76982)}catch(e){}if(T){var I=["pbkdf2","randomBytes"];d||I.push("pseudoRandomBytes"),s(T,I,D)}var O=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();if(O){var R=process.addAsyncListener({create:function(){O=!1}});global.Promise.resolve(!0).then((function(){O=!1})),process.removeAsyncListener(R)}function D(e){var t=function(){var t,n=arguments.length-1;if("function"==typeof arguments[n]){t=Array(arguments.length);for(var r=0;r<arguments.length-1;r++)t[r]=arguments[r];t[n]=a(arguments[n])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n))};case 2:return function(n,r){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=a(r)),e.call(this,n,r))};case 3:return function(n,r,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=a(i)),e.call(this,n,r,i))};case 4:return function(n,r,i,o){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof o&&(o=a(o)),e.call(this,n,r,i,o))};case 5:return function(n,r,i,o,s){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof s&&(s=a(s)),e.call(this,n,r,i,o,s))};case 6:return function(n,r,i,o,s,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof c&&(c=a(c)),e.call(this,n,r,i,o,s,c))};default:return t}}function k(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=a(arguments[0]);for(var n=1;n<arguments.length;n++)t[n]=arguments[n]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n))};case 2:return function(n,r){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,r))};case 3:return function(n,r,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,r,i))};case 4:return function(n,r,i,o){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,r,i,o))};case 5:return function(n,r,i,o,s){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,r,i,o,s))};case 6:return function(n,r,i,o,s,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,r,i,o,s,c))};default:return t}}O&&function(){var e=global.Promise;function t(n){if(!(this instanceof t))return e(n);if("function"!=typeof n)return new e(n);var i,o,s=new e((function(e,t){i=this,o=[function(t){return r(s,!1),e(t)},function(e){return r(s,!1),t(e)}]}));s.__proto__=t.prototype;try{n.apply(i,o)}catch(e){o[1](e)}return s}function r(e,t){e.__asl_wrapper&&!t||(e.__asl_wrapper=a(i))}function i(t,n,o,s){var a;try{return{returnVal:a=n.call(t,o),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{a instanceof e?s.__asl_wrapper=function(){return(a.__asl_wrapper||i).apply(this,arguments)}:r(s,!0)}}function s(e){return function(){var t=this,n=e.apply(t,Array.prototype.map.call(arguments,(function(e){return"function"!=typeof e?e:a((function(r){var o=(t.__asl_wrapper||i)(this,e,r,n);if(o.error)throw o.errorVal;return o.returnVal}))})));return n.__asl_wrapper=function(e,r,o,s){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,n),n.__asl_wrapper(e,r,o,s)):i(e,r,o,s)},n}}c.inherits(t,e),o(e.prototype,"then",s),e.prototype.chain&&o(e.prototype,"chain",s),l?global.Promise=n(93360)(e,r):(["all","race","reject","resolve","accept","defer"].forEach((function(n){"function"==typeof e[n]&&(t[n]=e[n])})),global.Promise=t)}()},32520:(e,t)=>{var n;t=e.exports=Q,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=r-6,s=t.re=[],a=t.safeRe=[],c=t.src=[],l=0,u="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",r],[u,o]];function d(e){for(var t=0;t<p.length;t++){var n=p[t][0],r=p[t][1];e=e.split(n+"*").join(n+"{0,"+r+"}").split(n+"+").join(n+"{1,"+r+"}")}return e}var h=l++;c[h]="0|[1-9]\\d*";var f=l++;c[f]="\\d+";var v=l++;c[v]="\\d*[a-zA-Z-]"+u+"*";var m=l++;c[m]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var g=l++;c[g]="("+c[f]+")\\.("+c[f]+")\\.("+c[f]+")";var y=l++;c[y]="(?:"+c[h]+"|"+c[v]+")";var b=l++;c[b]="(?:"+c[f]+"|"+c[v]+")";var _=l++;c[_]="(?:-("+c[y]+"(?:\\."+c[y]+")*))";var E=l++;c[E]="(?:-?("+c[b]+"(?:\\."+c[b]+")*))";var S=l++;c[S]=u+"+";var w=l++;c[w]="(?:\\+("+c[S]+"(?:\\."+c[S]+")*))";var P=l++,T="v?"+c[m]+c[_]+"?"+c[w]+"?";c[P]="^"+T+"$";var C="[v=\\s]*"+c[g]+c[E]+"?"+c[w]+"?",x=l++;c[x]="^"+C+"$";var I=l++;c[I]="((?:<|>)?=?)";var O=l++;c[O]=c[f]+"|x|X|\\*";var R=l++;c[R]=c[h]+"|x|X|\\*";var D=l++;c[D]="[v=\\s]*("+c[R]+")(?:\\.("+c[R]+")(?:\\.("+c[R]+")(?:"+c[_]+")?"+c[w]+"?)?)?";var k=l++;c[k]="[v=\\s]*("+c[O]+")(?:\\.("+c[O]+")(?:\\.("+c[O]+")(?:"+c[E]+")?"+c[w]+"?)?)?";var A=l++;c[A]="^"+c[I]+"\\s*"+c[D]+"$";var N=l++;c[N]="^"+c[I]+"\\s*"+c[k]+"$";var j=l++;c[j]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var M=l++;c[M]="(?:~>?)";var L=l++;c[L]="(\\s*)"+c[M]+"\\s+",s[L]=new RegExp(c[L],"g"),a[L]=new RegExp(d(c[L]),"g");var F=l++;c[F]="^"+c[M]+c[D]+"$";var V=l++;c[V]="^"+c[M]+c[k]+"$";var U=l++;c[U]="(?:\\^)";var W=l++;c[W]="(\\s*)"+c[U]+"\\s+",s[W]=new RegExp(c[W],"g"),a[W]=new RegExp(d(c[W]),"g");var H=l++;c[H]="^"+c[U]+c[D]+"$";var q=l++;c[q]="^"+c[U]+c[k]+"$";var $=l++;c[$]="^"+c[I]+"\\s*("+C+")$|^$";var B=l++;c[B]="^"+c[I]+"\\s*("+T+")$|^$";var K=l++;c[K]="(\\s*)"+c[I]+"\\s*("+C+"|"+c[D]+")",s[K]=new RegExp(c[K],"g"),a[K]=new RegExp(d(c[K]),"g");var G=l++;c[G]="^\\s*("+c[D]+")\\s+-\\s+("+c[D]+")\\s*$";var z=l++;c[z]="^\\s*("+c[k]+")\\s+-\\s+("+c[k]+")\\s*$";var Y=l++;c[Y]="(<|>)?=?\\s*\\*";for(var J=0;J<35;J++)n(J,c[J]),s[J]||(s[J]=new RegExp(c[J]),a[J]=new RegExp(d(c[J])));function X(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Q)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?a[x]:a[P]).test(e))return null;try{return new Q(e,t)}catch(e){return null}}function Q(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Q){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof Q))return new Q(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?a[x]:a[P]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=X,t.valid=function(e,t){var n=X(e,t);return n?n.version:null},t.clean=function(e,t){var n=X(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=Q,Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof Q||(e=new Q(e,this.options)),this.compareMain(e)||this.comparePre(e)},Q.prototype.compareMain=function(e){return e instanceof Q||(e=new Q(e,this.options)),ee(this.major,e.major)||ee(this.minor,e.minor)||ee(this.patch,e.patch)},Q.prototype.comparePre=function(e){if(e instanceof Q||(e=new Q(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return ee(r,i)}while(++t)},Q.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new Q(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(ie(e,t))return null;var n=X(e),r=X(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=ee;var Z=/^[0-9]+$/;function ee(e,t){var n=Z.test(e),r=Z.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function te(e,t,n){return new Q(e,n).compare(new Q(t,n))}function ne(e,t,n){return te(e,t,n)>0}function re(e,t,n){return te(e,t,n)<0}function ie(e,t,n){return 0===te(e,t,n)}function oe(e,t,n){return 0!==te(e,t,n)}function se(e,t,n){return te(e,t,n)>=0}function ae(e,t,n){return te(e,t,n)<=0}function ce(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return ie(e,n,r);case"!=":return oe(e,n,r);case">":return ne(e,n,r);case">=":return se(e,n,r);case"<":return re(e,n,r);case"<=":return ae(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function le(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof le){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof le))return new le(e,t);e=e.trim().split(/\s+/).join(" "),n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ue?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return ee(t,e)},t.major=function(e,t){return new Q(e,t).major},t.minor=function(e,t){return new Q(e,t).minor},t.patch=function(e,t){return new Q(e,t).patch},t.compare=te,t.compareLoose=function(e,t){return te(e,t,!0)},t.rcompare=function(e,t,n){return te(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=ne,t.lt=re,t.eq=ie,t.neq=oe,t.gte=se,t.lte=ae,t.cmp=ce,t.Comparator=le;var ue={};function pe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof pe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new pe(e.raw,t);if(e instanceof le)return new pe(e.value,t);if(!(this instanceof pe))return new pe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}function de(e){return!e||"x"===e.toLowerCase()||"*"===e}function he(e,t,n,r,i,o,s,a,c,l,u,p,d){return((t=de(n)?"":de(r)?">="+n+".0.0":de(i)?">="+n+"."+r+".0":">="+t)+" "+(a=de(c)?"":de(l)?"<"+(+c+1)+".0.0":de(u)?"<"+c+"."+(+l+1)+".0":p?"<="+c+"."+l+"."+u+"-"+p:"<="+a)).trim()}function fe(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==ue&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ve(e,t,n){try{t=new pe(t,n)}catch(e){return!1}return t.test(e)}function me(e,t,n,r){var i,o,s,a,c;switch(e=new Q(e,r),t=new pe(t,r),n){case">":i=ne,o=ae,s=re,a=">",c=">=";break;case"<":i=re,o=se,s=ne,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ve(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],p=null,d=null;if(u.forEach((function(e){e.semver===ue&&(e=new le(">=0.0.0")),p=p||e,d=d||e,i(e.semver,p.semver,r)?p=e:s(e.semver,d.semver,r)&&(d=e)})),p.operator===a||p.operator===c)return!1;if((!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}le.prototype.parse=function(e){var t=this.options.loose?a[$]:a[B],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new Q(n[2],this.options.loose):this.semver=ue},le.prototype.toString=function(){return this.value},le.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===ue||("string"==typeof e&&(e=new Q(e,this.options)),ce(e,this.operator,this.semver,this.options))},le.prototype.intersects=function(e,t){if(!(e instanceof le))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new pe(e.value,t),ve(this.value,n,t);if(""===e.operator)return n=new pe(this.value,t),ve(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ce(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ce(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=pe,pe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},pe.prototype.toString=function(){return this.range},pe.prototype.parseRange=function(e){var t=this.options.loose,r=t?a[z]:a[G];e=e.replace(r,he),n("hyphen replace",e),e=e.replace(a[K],"$1$2$3"),n("comparator trim",e,a[K]),e=(e=e.replace(a[L],"$1~")).replace(a[W],"$1^");var i=t?a[$]:a[B],o=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?a[q]:a[H];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),de(r)?a="":de(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":de(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?a[V]:a[F];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),de(r)?a="":de(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":de(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?a[N]:a[A];return e.replace(r,(function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=de(i),l=c||de(o),u=l||de(s);return"="===r&&u&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&u?(l&&(o=0),s=0,">"===r?(r=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):l?t=">="+i+".0.0 <"+(+i+1)+".0.0":u&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(a[Y],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o.map((function(e){return new le(e,this.options)}),this)},pe.prototype.intersects=function(e,t){if(!(e instanceof pe))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new pe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},pe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new Q(e,this.options));for(var t=0;t<this.set.length;t++)if(fe(this.set[t],e,this.options))return!0;return!1},t.satisfies=ve,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new pe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new Q(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new pe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new Q(r=e,n)))})),r},t.minVersion=function(e,t){e=new pe(e,t);var n=new Q("0.0.0");if(e.test(n))return n;if(n=new Q("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new Q(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!ne(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},t.validRange=function(e,t){try{return new pe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return me(e,t,"<",n)},t.gtr=function(e,t,n){return me(e,t,">",n)},t.outside=me,t.prerelease=function(e,t){var n=X(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new pe(e,n),t=new pe(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof Q)return e;if("string"!=typeof e)return null;var t=e.match(a[j]);return null==t?null:X(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},21873:(e,t,n)=>{e.exports={parallel:n(18798),serial:n(52081),serialOrdered:n(90028)}},74555:e=>{function t(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}e.exports=function(e){Object.keys(e.jobs).forEach(t.bind(e)),e.jobs={}}},72313:(e,t,n)=>{var r=n(70405);e.exports=function(e){var t=!1;return r((function(){t=!0})),function(n,i){t?e(n,i):r((function(){e(n,i)}))}}},70405:e=>{e.exports=function(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)}},78051:(e,t,n)=>{var r=n(72313),i=n(74555);e.exports=function(e,t,n,o){var s=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[s]=function(e,t,n,i){return 2==e.length?e(n,r(i)):e(n,t,r(i))}(t,s,e[s],(function(e,t){s in n.jobs&&(delete n.jobs[s],e?i(n):n.results[s]=t,o(e,n.results))}))}},19500:e=>{e.exports=function(e,t){var n=!Array.isArray(e),r={index:0,keyedList:n||t?Object.keys(e):null,jobs:{},results:n?{}:[],size:n?Object.keys(e).length:e.length};return t&&r.keyedList.sort(n?t:function(n,r){return t(e[n],e[r])}),r}},26276:(e,t,n)=>{var r=n(74555),i=n(72313);e.exports=function(e){Object.keys(this.jobs).length&&(this.index=this.size,r(this),i(e)(null,this.results))}},18798:(e,t,n)=>{var r=n(78051),i=n(19500),o=n(26276);e.exports=function(e,t,n){for(var s=i(e);s.index<(s.keyedList||e).length;)r(e,t,s,(function(e,t){e?n(e,t):0!==Object.keys(s.jobs).length||n(null,s.results)})),s.index++;return o.bind(s,n)}},52081:(e,t,n)=>{var r=n(90028);e.exports=function(e,t,n){return r(e,t,null,n)}},90028:(e,t,n)=>{var r=n(78051),i=n(19500),o=n(26276);function s(e,t){return e<t?-1:e>t?1:0}e.exports=function(e,t,n,s){var a=i(e,n);return r(e,t,a,(function n(i,o){i?s(i,o):(a.index++,a.index<(a.keyedList||e).length?r(e,t,a,n):s(null,a.results))})),o.bind(a,s)},e.exports.ascending=s,e.exports.descending=function(e,t){return-1*s(e,t)}},8505:e=>{"use strict";function t(e,t,i){e instanceof RegExp&&(e=n(e,i)),t instanceof RegExp&&(t=n(t,i));var o=r(e,t,i);return o&&{start:o[0],end:o[1],pre:i.slice(0,o[0]),body:i.slice(o[0]+e.length,o[1]),post:i.slice(o[1]+t.length)}}function n(e,t){var n=t.match(e);return n?n[0]:null}function r(e,t,n){var r,i,o,s,a,c=n.indexOf(e),l=n.indexOf(t,c+1),u=c;if(c>=0&&l>0){for(r=[],o=n.length;u>=0&&!a;)u==c?(r.push(u),c=n.indexOf(e,u+1)):1==r.length?a=[r.pop(),l]:((i=r.pop())<o&&(o=i,s=l),l=n.indexOf(t,u+1)),u=c<l&&c>=0?c:l;r.length&&(a=[o,s])}return a}e.exports=t,t.range=r},68928:(e,t,n)=>{var r=n(49818),i=n(8505);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),g(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(l)}(e),!0).map(p)):[]};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function u(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function p(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(l).join(".")}function d(e){if(!e)return[""];var t=[],n=i("{","}",e);if(!n)return e.split(",");var r=n.pre,o=n.body,s=n.post,a=r.split(",");a[a.length-1]+="{"+o+"}";var c=d(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function h(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function v(e,t){return e<=t}function m(e,t){return e>=t}function g(e,t){var n=[],o=i("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var s,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body),p=c||l,y=o.body.indexOf(",")>=0;if(!p&&!y)return o.post.match(/,(?!,).*\}/)?g(e=o.pre+"{"+o.body+a+o.post):[e];if(p)s=o.body.split(/\.\./);else if(1===(s=d(o.body)).length&&1===(s=g(s[0],!1).map(h)).length)return(E=o.post.length?g(o.post,!1):[""]).map((function(e){return o.pre+s[0]+e}));var b,_=o.pre,E=o.post.length?g(o.post,!1):[""];if(p){var S=u(s[0]),w=u(s[1]),P=Math.max(s[0].length,s[1].length),T=3==s.length?Math.abs(u(s[2])):1,C=v;w<S&&(T*=-1,C=m);var x=s.some(f);b=[];for(var I=S;C(I,w);I+=T){var O;if(l)"\\"===(O=String.fromCharCode(I))&&(O="");else if(O=String(I),x){var R=P-O.length;if(R>0){var D=new Array(R+1).join("0");O=I<0?"-"+D+O.slice(1):D+O}}b.push(O)}}else b=r(s,(function(e){return g(e,!1)}));for(var k=0;k<b.length;k++)for(var A=0;A<E.length;A++){var N=_+b[k]+E[A];(!t||p||N)&&n.push(N)}return n}},13144:(e,t,n)=>{"use strict";var r=n(66743),i=n(11002),o=n(10076),s=n(47119);e.exports=s||r.call(o,i)},11002:e=>{"use strict";e.exports=Function.prototype.apply},10076:e=>{"use strict";e.exports=Function.prototype.call},73126:(e,t,n)=>{"use strict";var r=n(66743),i=n(69675),o=n(10076),s=n(13144);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new i("a function is required");return s(r,o,e)}},47119:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},35415:(e,t,n)=>{"use strict";const r=n(39023),i=n(42613),o=n(98482),s=n(82910),a="cls@contexts",c="error@context",l=[];for(let e in s.providers)l[s.providers[e]]=e;const u=process.env.DEBUG_CLS_HOOKED;let p=-1;function d(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function h(e){return process.namespaces[e]}function f(e){let t=h(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t)),process.namespaces[e]=null}function v(e){process.env.DEBUG&&process._rawDebug(e)}function m(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(e.exports={getNamespace:h,createNamespace:function(e){i.ok(e,"namespace must be given a name."),u&&v("CREATING NAMESPACE "+e);let t=new d(e);return t.id=p,s.addHooks({init(n,i,o,s,a){p=n,s?(t._contexts.set(n,t._contexts.get(s)),u&&v("PARENTID: "+e+" uid:"+n+" parent:"+s+" provider:"+o)):t._contexts.set(p,t.active),u&&v("INIT "+e+" uid:"+n+" parent:"+s+" provider:"+l[o]+" active:"+r.inspect(t.active,!0))},pre(n,i){p=n;let o=t._contexts.get(n);o?(u&&v(" PRE "+e+" uid:"+n+" handle:"+m(i)+" context:"+r.inspect(o)),t.enter(o)):u&&v(" PRE MISSING CONTEXT "+e+" uid:"+n+" handle:"+m(i))},post(n,i){p=n;let o=t._contexts.get(n);o?(u&&v(" POST "+e+" uid:"+n+" handle:"+m(i)+" context:"+r.inspect(o)),t.exit(o)):u&&v(" POST MISSING CONTEXT "+e+" uid:"+n+" handle:"+m(i))},destroy(n){p=n,u&&v("DESTROY "+e+" uid:"+n+" context:"+r.inspect(t._contexts.get(p))+" active:"+r.inspect(t.active,!0)),t._contexts.delete(n)}}),process.namespaces[e]=t,t},destroyNamespace:f,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){f(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},d.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return u&&v("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+p+" active:"+r.inspect(this.active,!0)),this.active[e]=t,t},d.prototype.get=function(e){if(this.active)return u&&v("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+p+" active:"+r.inspect(this.active,!0)),this.active[e];u&&v("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+p+" active:"+r.inspect(this.active,!0))},d.prototype.createContext=function(){u&&v("   CREATING Context: "+this.name+" uid:"+p+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=p,u&&v("   CREATED Context: "+this.name+" uid:"+p+" len:"+this._set.length+"  context:"+r.inspect(e,!0,2,!0)),e},d.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return u&&v(" BEFORE RUN: "+this.name+" uid:"+p+" len:"+this._set.length+" "+r.inspect(t)),e(t),t}catch(e){throw e&&(e[c]=t),e}finally{u&&v(" AFTER RUN: "+this.name+" uid:"+p+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t)}},d.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},d.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return u&&v(" BEFORE runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+r.inspect(t)),n.then((e=>(u&&v(" AFTER runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,u&&v(" AFTER runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e}))},d.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{n.exit(t)}}},d.prototype.enter=function(e){i.ok(e,"context must be provided for entering"),u&&v("  ENTER "+this.name+" uid:"+p+" len:"+this._set.length+" context: "+r.inspect(e)),this._set.push(this.active),this.active=e},d.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),u&&v("  EXIT "+this.name+" uid:"+p+" len:"+this._set.length+" context: "+r.inspect(e)),this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(u&&v("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},d.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;o(e,(function(e){e&&(e[a]||(e[a]=Object.create(null)),e[a][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,n=e[a];return Object.keys(n).forEach((function(e){let r=n[e];t=r.namespace.bind(t,r.context)})),t}))},d.prototype.fromException=function(e){return e[c]},process.namespaces={},s._state&&!s._state.enabled&&s.enable(),u){var g=n(52103);for(var y in g.filter._modifiers)g.filter.deattach(y)}},67855:(e,t,n)=>{"use strict";const r=n(39023),i=n(42613),o=n(98482),s=n(90290),a="cls@contexts",c="error@context",l=process.env.DEBUG_CLS_HOOKED;let u=-1;function p(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function d(e){return process.namespaces[e]}function h(e){let t=d(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t)),process.namespaces[e]=null}function f(...e){l&&process._rawDebug(`${r.format(...e)}`)}e.exports={getNamespace:d,createNamespace:function(e){i.ok(e,"namespace must be given a name."),l&&f(`NS-CREATING NAMESPACE (${e})`);let t=new p(e);return t.id=u,s.createHook({init(n,i,o,a){if(u=s.executionAsyncId(),t.active){if(t._contexts.set(n,t.active),l){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT [${i}] (${e}) asyncId:${n} currentUid:${u} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}else if(0===u){const o=s.triggerAsyncId(),c=t._contexts.get(o);if(c){if(t._contexts.set(n,c),l){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${n} currentUid:${u} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}else if(l){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${n} currentUid:${u} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}if(l&&"PROMISE"===i){f(r.inspect(a,{showHidden:!0}));const s=a.parentId;f(`${" ".repeat(t._indent<0?0:t._indent)}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${s} asyncId:${n} currentUid:${u} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}},before(n){let i;if(u=s.executionAsyncId(),i=t._contexts.get(n)||t._contexts.get(u),i){if(l){const o=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE (${e}) asyncId:${n} currentUid:${u} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(i)}`),t._indent+=2}t.enter(i)}else if(l){const i=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${u} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(n){let i;if(u=s.executionAsyncId(),i=t._contexts.get(n)||t._contexts.get(u),i){if(l){const o=s.triggerAsyncId();t._indent-=2;f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER (${e}) asyncId:${n} currentUid:${u} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(i)}`)}t.exit(i)}else if(l){const o=s.triggerAsyncId();t._indent-=2;f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${u} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(i)}`)}},destroy(n){if(u=s.executionAsyncId(),l){const i=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}DESTROY (${e}) currentUid:${u} asyncId:${n} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(t._contexts.get(u))}`)}t._contexts.delete(n)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:h,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){h(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},p.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,l&&f(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),t},p.prototype.get=function(e){if(this.active){if(l){const t=s.executionAsyncId(),n=s.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);f(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),f(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${u} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[e]}if(l){const t=s.currentId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${u} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length}`)}},p.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=u,l){const t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${u} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} context:${r.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},p.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(l){const e=s.triggerAsyncId(),n=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${u} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} context:${r.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e[c]=t),e}finally{if(l){const e=s.triggerAsyncId(),n=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${u} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} ${r.inspect(t)}`)}this.exit(t)}},p.prototype.runAndReturn=function(e){let t;return this.run((function(n){t=e(n)})),t},p.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return l&&f("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(t)),n.then((e=>(l&&f("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,l&&f("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e}))},p.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{n.exit(t)}}},p.prototype.enter=function(e){if(i.ok(e,"context must be provided for entering"),l){const t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${u} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}this._set.push(this.active),this.active=e},p.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),l){const t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${u} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}if(this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(l&&f("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},p.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;o(e,(function(e){e&&(e[a]||(e[a]=Object.create(null)),e[a][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,n=e[a];return Object.keys(n).forEach((function(e){let r=n[e];t=r.namespace.bind(t,r.context)})),t}))},p.prototype.fromException=function(e){return e[c]},process.namespaces={}},9132:(e,t,n)=>{"use strict";const r=n(81778);process&&r.gte(process.versions.node,"8.0.0")?e.exports=n(67855):e.exports=n(35415)},81778:(e,t)=>{var n;t=e.exports=Q,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=r-6,s=t.re=[],a=t.safeRe=[],c=t.src=[],l=0,u="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",r],[u,o]];function d(e){for(var t=0;t<p.length;t++){var n=p[t][0],r=p[t][1];e=e.split(n+"*").join(n+"{0,"+r+"}").split(n+"+").join(n+"{1,"+r+"}")}return e}var h=l++;c[h]="0|[1-9]\\d*";var f=l++;c[f]="\\d+";var v=l++;c[v]="\\d*[a-zA-Z-]"+u+"*";var m=l++;c[m]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var g=l++;c[g]="("+c[f]+")\\.("+c[f]+")\\.("+c[f]+")";var y=l++;c[y]="(?:"+c[h]+"|"+c[v]+")";var b=l++;c[b]="(?:"+c[f]+"|"+c[v]+")";var _=l++;c[_]="(?:-("+c[y]+"(?:\\."+c[y]+")*))";var E=l++;c[E]="(?:-?("+c[b]+"(?:\\."+c[b]+")*))";var S=l++;c[S]=u+"+";var w=l++;c[w]="(?:\\+("+c[S]+"(?:\\."+c[S]+")*))";var P=l++,T="v?"+c[m]+c[_]+"?"+c[w]+"?";c[P]="^"+T+"$";var C="[v=\\s]*"+c[g]+c[E]+"?"+c[w]+"?",x=l++;c[x]="^"+C+"$";var I=l++;c[I]="((?:<|>)?=?)";var O=l++;c[O]=c[f]+"|x|X|\\*";var R=l++;c[R]=c[h]+"|x|X|\\*";var D=l++;c[D]="[v=\\s]*("+c[R]+")(?:\\.("+c[R]+")(?:\\.("+c[R]+")(?:"+c[_]+")?"+c[w]+"?)?)?";var k=l++;c[k]="[v=\\s]*("+c[O]+")(?:\\.("+c[O]+")(?:\\.("+c[O]+")(?:"+c[E]+")?"+c[w]+"?)?)?";var A=l++;c[A]="^"+c[I]+"\\s*"+c[D]+"$";var N=l++;c[N]="^"+c[I]+"\\s*"+c[k]+"$";var j=l++;c[j]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var M=l++;c[M]="(?:~>?)";var L=l++;c[L]="(\\s*)"+c[M]+"\\s+",s[L]=new RegExp(c[L],"g"),a[L]=new RegExp(d(c[L]),"g");var F=l++;c[F]="^"+c[M]+c[D]+"$";var V=l++;c[V]="^"+c[M]+c[k]+"$";var U=l++;c[U]="(?:\\^)";var W=l++;c[W]="(\\s*)"+c[U]+"\\s+",s[W]=new RegExp(c[W],"g"),a[W]=new RegExp(d(c[W]),"g");var H=l++;c[H]="^"+c[U]+c[D]+"$";var q=l++;c[q]="^"+c[U]+c[k]+"$";var $=l++;c[$]="^"+c[I]+"\\s*("+C+")$|^$";var B=l++;c[B]="^"+c[I]+"\\s*("+T+")$|^$";var K=l++;c[K]="(\\s*)"+c[I]+"\\s*("+C+"|"+c[D]+")",s[K]=new RegExp(c[K],"g"),a[K]=new RegExp(d(c[K]),"g");var G=l++;c[G]="^\\s*("+c[D]+")\\s+-\\s+("+c[D]+")\\s*$";var z=l++;c[z]="^\\s*("+c[k]+")\\s+-\\s+("+c[k]+")\\s*$";var Y=l++;c[Y]="(<|>)?=?\\s*\\*";for(var J=0;J<35;J++)n(J,c[J]),s[J]||(s[J]=new RegExp(c[J]),a[J]=new RegExp(d(c[J])));function X(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Q)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?a[x]:a[P]).test(e))return null;try{return new Q(e,t)}catch(e){return null}}function Q(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Q){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof Q))return new Q(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?a[x]:a[P]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=X,t.valid=function(e,t){var n=X(e,t);return n?n.version:null},t.clean=function(e,t){var n=X(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=Q,Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof Q||(e=new Q(e,this.options)),this.compareMain(e)||this.comparePre(e)},Q.prototype.compareMain=function(e){return e instanceof Q||(e=new Q(e,this.options)),ee(this.major,e.major)||ee(this.minor,e.minor)||ee(this.patch,e.patch)},Q.prototype.comparePre=function(e){if(e instanceof Q||(e=new Q(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return ee(r,i)}while(++t)},Q.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new Q(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(ie(e,t))return null;var n=X(e),r=X(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=ee;var Z=/^[0-9]+$/;function ee(e,t){var n=Z.test(e),r=Z.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function te(e,t,n){return new Q(e,n).compare(new Q(t,n))}function ne(e,t,n){return te(e,t,n)>0}function re(e,t,n){return te(e,t,n)<0}function ie(e,t,n){return 0===te(e,t,n)}function oe(e,t,n){return 0!==te(e,t,n)}function se(e,t,n){return te(e,t,n)>=0}function ae(e,t,n){return te(e,t,n)<=0}function ce(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return ie(e,n,r);case"!=":return oe(e,n,r);case">":return ne(e,n,r);case">=":return se(e,n,r);case"<":return re(e,n,r);case"<=":return ae(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function le(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof le){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof le))return new le(e,t);e=e.trim().split(/\s+/).join(" "),n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ue?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return ee(t,e)},t.major=function(e,t){return new Q(e,t).major},t.minor=function(e,t){return new Q(e,t).minor},t.patch=function(e,t){return new Q(e,t).patch},t.compare=te,t.compareLoose=function(e,t){return te(e,t,!0)},t.rcompare=function(e,t,n){return te(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=ne,t.lt=re,t.eq=ie,t.neq=oe,t.gte=se,t.lte=ae,t.cmp=ce,t.Comparator=le;var ue={};function pe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof pe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new pe(e.raw,t);if(e instanceof le)return new pe(e.value,t);if(!(this instanceof pe))return new pe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}function de(e){return!e||"x"===e.toLowerCase()||"*"===e}function he(e,t,n,r,i,o,s,a,c,l,u,p,d){return((t=de(n)?"":de(r)?">="+n+".0.0":de(i)?">="+n+"."+r+".0":">="+t)+" "+(a=de(c)?"":de(l)?"<"+(+c+1)+".0.0":de(u)?"<"+c+"."+(+l+1)+".0":p?"<="+c+"."+l+"."+u+"-"+p:"<="+a)).trim()}function fe(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==ue&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ve(e,t,n){try{t=new pe(t,n)}catch(e){return!1}return t.test(e)}function me(e,t,n,r){var i,o,s,a,c;switch(e=new Q(e,r),t=new pe(t,r),n){case">":i=ne,o=ae,s=re,a=">",c=">=";break;case"<":i=re,o=se,s=ne,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ve(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],p=null,d=null;if(u.forEach((function(e){e.semver===ue&&(e=new le(">=0.0.0")),p=p||e,d=d||e,i(e.semver,p.semver,r)?p=e:s(e.semver,d.semver,r)&&(d=e)})),p.operator===a||p.operator===c)return!1;if((!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}le.prototype.parse=function(e){var t=this.options.loose?a[$]:a[B],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new Q(n[2],this.options.loose):this.semver=ue},le.prototype.toString=function(){return this.value},le.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===ue||("string"==typeof e&&(e=new Q(e,this.options)),ce(e,this.operator,this.semver,this.options))},le.prototype.intersects=function(e,t){if(!(e instanceof le))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new pe(e.value,t),ve(this.value,n,t);if(""===e.operator)return n=new pe(this.value,t),ve(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ce(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ce(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=pe,pe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},pe.prototype.toString=function(){return this.range},pe.prototype.parseRange=function(e){var t=this.options.loose,r=t?a[z]:a[G];e=e.replace(r,he),n("hyphen replace",e),e=e.replace(a[K],"$1$2$3"),n("comparator trim",e,a[K]),e=(e=e.replace(a[L],"$1~")).replace(a[W],"$1^");var i=t?a[$]:a[B],o=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?a[q]:a[H];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),de(r)?a="":de(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":de(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?a[V]:a[F];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),de(r)?a="":de(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":de(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?a[N]:a[A];return e.replace(r,(function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=de(i),l=c||de(o),u=l||de(s);return"="===r&&u&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&u?(l&&(o=0),s=0,">"===r?(r=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):l?t=">="+i+".0.0 <"+(+i+1)+".0.0":u&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(a[Y],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o.map((function(e){return new le(e,this.options)}),this)},pe.prototype.intersects=function(e,t){if(!(e instanceof pe))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new pe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},pe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new Q(e,this.options));for(var t=0;t<this.set.length;t++)if(fe(this.set[t],e,this.options))return!0;return!1},t.satisfies=ve,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new pe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new Q(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new pe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new Q(r=e,n)))})),r},t.minVersion=function(e,t){e=new pe(e,t);var n=new Q("0.0.0");if(e.test(n))return n;if(n=new Q("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new Q(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!ne(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},t.validRange=function(e,t){try{return new pe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return me(e,t,"<",n)},t.gtr=function(e,t,n){return me(e,t,">",n)},t.outside=me,t.prerelease=function(e,t){var n=X(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new pe(e,n),t=new pe(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof Q)return e;if("string"!=typeof e)return null;var t=e.match(a[j]);return null==t?null:X(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},80801:(e,t,n)=>{var r=n(39023),i=n(2203).Stream,o=n(78069);function s(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}e.exports=s,r.inherits(s,i),s.create=function(e){var t=new this;for(var n in e=e||{})t[n]=e[n];return t},s.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},s.prototype.append=function(e){if(s.isStreamLike(e)){if(!(e instanceof o)){var t=o.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},s.prototype.pipe=function(e,t){return i.prototype.pipe.call(this,e,t),this.resume(),e},s.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop)this._pendingNext=!0;else{this._insideLoop=!0;try{do{this._pendingNext=!1,this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=!1}}},s.prototype._realGetNext=function(){var e=this._streams.shift();void 0!==e?"function"==typeof e?e(function(e){s.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}.bind(this)):this._pipeNext(e):this.end()},s.prototype._pipeNext=function(e){if(this._currentStream=e,s.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});var t=e;this.write(t),this._getNext()},s.prototype._handleErrors=function(e){var t=this;e.on("error",(function(e){t._emitError(e)}))},s.prototype.write=function(e){this.emit("data",e)},s.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},s.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},s.prototype.end=function(){this._reset(),this.emit("end")},s.prototype.destroy=function(){this._reset(),this.emit("close")},s.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},s.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}},s.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach((function(t){t.dataSize&&(e.dataSize+=t.dataSize)})),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},s.prototype._emitError=function(e){this._reset(),this.emit("error",e)}},49818:e=>{e.exports=function(e,n){for(var r=[],i=0;i<e.length;i++){var o=n(e[i],i);t(o)?r.push.apply(r,o):r.push(o)}return r};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},19423:(e,t,n)=>{"use strict";var r=n(42613),i=n(98482),o="cls@contexts",s="error@context";function a(e){this.name=e,this.active=null,this._set=[],this.id=null}function c(e){return process.namespaces[e]}function l(e){var t=c(e);r.ok(t,"can't delete nonexistent namespace!"),r.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function u(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){l(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||n(14518),a.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},a.prototype.get=function(e){if(this.active)return this.active[e]},a.prototype.createContext=function(){return Object.create(this.active)},a.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e[s]=t),e}finally{this.exit(t)}},a.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},a.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[s]=t),e}finally{n.exit(t)}}},a.prototype.enter=function(e){r.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},a.prototype.exit=function(e){if(r.ok(e,"context must be provided for exiting"),this.active===e)return r.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);r.ok(t>=0,"context not currently entered; can't exit"),r.ok(t,"can't remove top context"),this._set.splice(t,1)},a.prototype.bindEmitter=function(e){r.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,n="context@"+this.name;i(e,(function(e){e&&(e[o]||(e[o]=Object.create(null)),e[o][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[o])return e;var t=e,n=e[o];return Object.keys(n).forEach((function(e){var r=n[e];t=r.namespace.bind(t,r.context)})),t}))},a.prototype.fromException=function(e){return e[s]},process.namespaces||u(),e.exports={getNamespace:c,createNamespace:function(e){r.ok(e,"namespace must be given a name!");var t=new a(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,n){n&&t.enter(n)},after:function(e,n){n&&t.exit(n)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:l,reset:u}},78069:(e,t,n)=>{var r=n(2203).Stream,i=n(39023);function o(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}e.exports=o,i.inherits(o,r),o.create=function(e,t){var n=new this;for(var r in t=t||{})n[r]=t[r];n.source=e;var i=e.emit;return e.emit=function(){return n._handleEmit(arguments),i.apply(e,arguments)},e.on("error",(function(){})),n.pauseStream&&e.pause(),n},Object.defineProperty(o.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),o.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},o.prototype.resume=function(){this._released||this.release(),this.source.resume()},o.prototype.pause=function(){this.source.pause()},o.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},o.prototype.pipe=function(){var e=r.prototype.pipe.apply(this,arguments);return this.resume(),e},o.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},o.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}},2442:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.azureCoreTracing=t.AzureMonitorSymbol=void 0;var r=n(18579);t.AzureMonitorSymbol="Azure_Monitor_Tracer";var i="azure-coretracing",o=!1;t.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){if(o)return e;try{var s=n(39478),a=n(39104),c=new s.BasicTracerProvider,l=c.getTracer("applicationinsights tracer");if(e.setTracer){var u=e.setTracer;e.setTracer=function(e){var n=e.startSpan;e.startSpan=function(e,t,o){var s=n.call(this,e,t,o),a=s.end;return s.end=function(){var e=a.apply(this,arguments);return r.channel.publish(i,s),e},s},e[t.AzureMonitorSymbol]=!0,u.call(this,e)},a.trace.getSpan(a.context.active()),e.setTracer(l)}else{var p=a.trace.setGlobalTracerProvider;a.trace.setGlobalTracerProvider=function(e){var n=e.getTracer;return e.getTracer=function(e,o){var s=n.call(this,e,o);if(!s[t.AzureMonitorSymbol]){var a=s.startSpan;s.startSpan=function(e,t,n){var o=a.call(this,e,t,n),s=o.end;return o.end=function(){var e=s.apply(this,arguments);return r.channel.publish(i,o),e},o},s[t.AzureMonitorSymbol]=!0}return s},p.call(this,e)},c.register(),a.trace.getSpan(a.context.active());var d=n(35620),h=n(79725);d.registerInstrumentations({instrumentations:[h.createAzureSdkInstrumentation()]})}o=!0}catch(e){}return e},publisherName:i},t.enable=function(){r.channel.registerMonkeyPatch("@azure/core-tracing",t.azureCoreTracing)}},72754:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.bunyan=void 0;var r=n(18579);t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var t=e.prototype._emit;return e.prototype._emit=function(e,n){var i=t.apply(this,arguments);if(!n){var o=i;o||(o=t.call(this,e,!0)),r.channel.publish("bunyan",{level:e.level,result:o})}return i},e}},t.enable=function(){r.channel.registerMonkeyPatch("bunyan",t.bunyan)}},84942:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.console=void 0;var r=n(18579),i=n(2203);t.console={versionSpecifier:">= 4.0.0",patch:function(e){var t=new i.Writable,n=new i.Writable;t.write=function(e){if(!e)return!0;var t=e.toString();return r.channel.publish("console",{message:t}),!0},n.write=function(e){if(!e)return!0;var t=e.toString();return r.channel.publish("console",{message:t,stderr:!0}),!0};for(var o=new e.Console(t,n),s=function(t){var n=e[t];n&&(e[t]=function(){if(o[t])try{o[t].apply(o,arguments)}catch(e){}return n.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++)s(c[a]);return e}},t.enable=function(){r.channel.registerMonkeyPatch("console",t.console),n(64236)}},45670:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=t.pgPool=t.pg=t.winston=t.redis=t.mysql=t.mongodb=t.mongodbCore=t.console=t.bunyan=t.azuresdk=void 0;var r=n(2442);t.azuresdk=r;var i=n(72754);t.bunyan=i;var o=n(84942);t.console=o;var s=n(38959);t.mongodbCore=s;var a=n(93433);t.mongodb=a;var c=n(71285);t.mysql=c;var l=n(77237);t.pgPool=l;var u=n(24700);t.pg=u;var p=n(55888);t.redis=p;var d=n(98146);t.tedious=d;var h=n(7411);t.winston=h,t.enable=function(){i.enable(),o.enable(),s.enable(),a.enable(),c.enable(),u.enable(),l.enable(),p.enable(),h.enable(),r.enable(),d.enable()}},38959:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongoCore=void 0;var r=n(18579);t.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=r.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var i=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=r.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e},e}},t.enable=function(){r.channel.registerMonkeyPatch("mongodb-core",t.mongoCore)}},93433:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.